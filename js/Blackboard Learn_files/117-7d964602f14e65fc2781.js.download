(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{"/LJd":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-message-a",use:"icon-large-message-a-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-message-a"><path fill="#FFF" d="M6 29.5c-.827 0-1.5-.673-1.5-1.5V10c0-.827.673-1.5 1.5-1.5h26c.827 0 1.5.673 1.5 1.5v18c0 .827-.673 1.5-1.5 1.5H6z" /><path fill="#FF3B30" d="M32 9c.551 0 1 .449 1 1v18c0 .551-.449 1-1 1H6c-.551 0-1-.449-1-1V10c0-.551.449-1 1-1h26m0-1H6c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h26c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2z" /><path fill="#FFF" stroke="#FF3B30" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M5 9l14 11L33 9" /><path fill="#FFF" stroke="#FF3B30" stroke-linecap="round" stroke-miterlimit="10" d="M16 18L5 29M33 29L22 18" /></symbol>'});s.add(r);e.exports=r},"0MS5":function(e,t){e.exports='<bb-modal class="js-course-status-modal-PREVIEW notification" modal-title-key="{{previewModalTitleKey}}"\n          modal-dismiss-key=""\n          analytics-id-tag-prefix="course.outline.previewCourse">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.previewCourse.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$close(\'OPEN\')" \n          class="button js-course-status-OPEN js-primary-button"\n          analytics-id="course.outline.previewCourse.open.button">\n    <span bb-translate="course.outline.previewCourse.makeOpen" course-org-token-resolver></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          ng-click="$parent.$close()" \n          class="button button--secondary js-course-status- js-secondary-button"\n          analytics-id="course.outline.previewCourse.close.button">\n    <span bb-translate="global.cancel"></span>\n  </button>\n</bb-modal>'},"1llZ":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-information",use:"icon-medium-information-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-information"><path d="M12 23c6.0751 0 11-4.9249 11-11S18.0751 1 12 1 1 5.9249 1 12s4.9249 11 11 11z" stroke-width="2" /><path d="M12 6.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 9h2v9M10 18h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},"1vTA":function(e,t){e.exports='<bb-modal id="notification-modal"\n          class="notification"\n          modal-title-key="{{::courseExport.exportModalTitleKey}}"\n          analytics-id-tag-prefix="course.export.modal.startArchive">\n  <div name="modal-contents">\n    <p bb-translate="course.export.modal.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="close-modal-export js-export-without-student-data button js-primary-button" \n          ng-click="courseExport.triggerCourseExport(false)"\n          analytics-id="course.export.modal.startExport.button">\n    <span bb-translate="course.export.modal.startExport"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="close-modal-export js-export-with-student-data button button--secondary js-secondary-button" \n          ng-click="courseExport.triggerCourseExport(true)"\n          analytics-id="course.export.modal.startArchive.button">\n    <span bb-translate="course.export.modal.startArchive"></span>\n  </button>\n</bb-modal>'},"1zDl":function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var o=n("mrSG"),s=n("LvDl"),r=n("IbG+"),i=n("pjml"),a=n("+brj"),c="ultra.service.course.content.copy",l="courseContentCopy",u=function(){function e(e,t){var n=this;this.browserStorage=e,this.$q=t,this.COPY_TASKS_KEY="COPY-TASKS-ID",this.DISMISSED_TASKS_KEY="DISMISSED-COPY-TASKS-ID",this.getCurrentCopyTaskErrorSummaries=function(e){return n.getCurrentCopyTasks().then(function(t){return void 0===t&&(t=[]),t.length?n.getErrorSummaries(e,t):[]})},this.getCurrentCopyTaskErrorCountsByCategory=function(e){return n.getCurrentCopyTaskErrorSummaries(e).then(function(e){return s.map(e,function(e){return n.mergeTasksWithinCourseGrouping(e)})})},this.mergeTasksWithinCourseGrouping=function(e){var t=s.first(e),o=t.sourceCourseName,r=t.sourceCourseId;return{errorCountsByCategory:s(e).flatMap(function(e){return e.errorCountsByCategory}).groupBy(function(e){return e.name}).map(function(e,t){return n.mergeErrorCountsOfSameCategory(e)}).sortBy(function(e){return n.localizedCategoryName(e.name)}).value(),sourceCourseId:r,sourceCourseName:o,taskIds:s.map(e,function(e){return e.taskId})}},this.mergeErrorCountsOfSameCategory=function(e){return s.reduce(e,function(e,t){return{count:e.count+t.count,name:t.name}},{count:0,name:""})},this.localizedCategoryName=function(e){var t=i.n.ConversionContentCategory.parse(e);return t?t.getLocalizableCategoryNameKey():null},this.getErrorSummaries=function(e,t){return void 0===t&&(t=[]),e.getGranularCopyTaskStatus(t).then(function(e){i.n.ConversionReportStatus.Success;var t=s(e.results).groupBy("sourceCourseId").mapValues(function(e,t){return s.head(e).sourceCourseName}).value();return s(e.results).filter(function(e){return!!e.errorCountsByCategory.length}).groupBy("sourceCourseId").sortBy(function(e,n){return t[n]}).map(function(e,t){return e}).value()})},this.copyDetailsNotificationCount=function(e){return n.getCopyDetailsNotificationTasks().then(function(t){return s(e).flatMap().filter(function(e){return s.includes(t,e.taskId)}).flatMap("errorCountsByCategory").reduce(function(e,t){return e+t.count},0)})},this.resetCopyDetailsNotificationCount=function(){n.getCurrentCopyTasks().then(function(e){void 0===e&&(e=[]),n.browserStorage.saveToStorage(n.DISMISSED_TASKS_KEY,e,a.a.SessionStorage)})}}return e.prototype.getCurrentCopyTasks=function(){return this.browserStorage.getFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage)},e.prototype.getCopyDetailsNotificationTasks=function(){var e=this.browserStorage.getFromStorage(this.DISMISSED_TASKS_KEY,a.a.SessionStorage),t=this.browserStorage.getFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage);return this.$q.all([e,t]).then(function(e){var t=e[0],n=void 0===t?[]:t,o=e[1];return(void 0===o?[]:o).filter(function(e){return!s.includes(n,e)})})},e.prototype.appendToCurrentCopyTasks=function(e){var t=this;return void 0===e&&(e=[]),this.browserStorage.getFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage).then(function(n){return void 0===n&&(n=[]),t.browserStorage.saveToStorage(t.COPY_TASKS_KEY,n.concat(e),a.a.SessionStorage)})},e.prototype.clearCopyTasks=function(){this.browserStorage.deleteFromStorage(this.DISMISSED_TASKS_KEY,a.a.SessionStorage),this.browserStorage.deleteFromStorage(this.COPY_TASKS_KEY,a.a.SessionStorage)},e.$inject=[a.c,"$q"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e)}(u);r.module(c,[i.R]).service(l,u)},"5c2T":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-lock",use:"icon-large-lock-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-large-lock"><path fill="none" stroke-miterlimit="10" d="M12 20.5h0c-.831 0-1.511-.68-1.511-1.511V15.01c0-.831.68-1.511 1.511-1.511h0c.831 0 1.511.68 1.511 1.511v3.979c0 .831-.68 1.511-1.511 1.511z" /><path fill="none" stroke-width=".919" stroke-miterlimit="10" d="M19.387 23.5H4.613c-1.167 0-2.113-.946-2.113-2.113v-8.775c0-1.167.946-2.113 2.113-2.113h14.775c1.167 0 2.113.946 2.113 2.113v8.775c-.001 1.167-.947 2.113-2.114 2.113z" /><path fill="none" stroke-miterlimit="10" d="M17.5 10.5V5.945C17.5 2.938 15.062.5 12.055.5h-.11C8.938.5 6.5 2.938 6.5 5.945V10.5" /></symbol>'});s.add(r);e.exports=r},"69JZ":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-link",use:"icon-small-link-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-link"><rect x=".224" y="3.534" width="4.681" height="7.022" rx="2" transform="rotate(-45 .224 3.534)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><rect x="7.5" y="10.81" width="4.681" height="7.022" rx="2" transform="rotate(-45 7.5 10.81)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 5l6 6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},"7LUu":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-gdrive",use:"icon-medium-gdrive-usage",viewBox:"0 0 24 24",content:'<symbol fill="currentColor" xmlns="http://www.w3.org/2000/svg" stroke="transparent" viewBox="0 0 24 24" id="icon-medium-gdrive"><g clip-path="url(#icon-medium-gdrive_clip0)" fill="#000"><path d="M6 21.5l3.5-6H23l-3.5 6H6zM7.5001 3.5l3.4462 6.031-6.75 11.6914L.75 15.1913 7.5001 3.5zM22.6962 14.2224l-6.9462-.0311L9 2.5l6.9462.031 6.75 11.6914z" /></g><defs><clipPath id="icon-medium-gdrive_clip0"><path fill="#fff" d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(r);e.exports=r},"7SkM":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-attention",use:"icon-medium-attention-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attention"><circle cx="12" cy="12" r="11" stroke-width="2" /><path d="M12.75 18.5a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" /><path d="M12 15l-.5-10h1L12 15z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},"8VoP":function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var o=n("mrSG"),s=n("0JpG"),r=n("Qbdf"),i=n("AI52"),a=n("Q/M7"),c=n("lEL+"),l=n("1vTA"),u=n("GbAM"),d="ultra.course.exports.controller",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(function(){function t(t,n,o,s,r,i){var a=this;this.$scope=t,this.exportService=n,this.$modal=o,this.bbLocalize=s,this.timeout=r,this.contextCourse=i,t.courseExport=this,this.currentCourse=t.course.model,this.courseId=this.contextCourse.courseId,this.canExport=this.currentCourse.canExport(),this.canArchive=this.currentCourse.canArchive(),this.exportModalTitleKey=this.currentCourse.isOrganization?"organization.export.modal.modalTitle":"course.export.modal.modalTitle",this.getExportsAndScheduledTasks(!0),t.$on("update-course-exports",function(){a.getExportsAndScheduledTasks(!1),a.timeout(function(){var t=e(".list-archive-export li:last .file-name").text().trim();a.$scope.$root.$broadcast(u.a,a.exportFileAddedNotification(t)),e(".list-archive-export li:last > .file-link").focus()},a.$scope,1e3)})}return t.prototype.getExportsAndScheduledTasks=function(e){var t=this;this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,e,this.canExport,this.canArchive).then(function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks})},t.prototype.openExportModal=function(){var e=this;!this.canExport||this.canArchive?!this.canArchive||this.canExport?this.modalInstance=this.$modal.open({template:l,scope:this.$scope,resolve:{translations:[s.serviceName,function(e){return e.loadBundle("features/course/exports/course-export")}]}}):this.exportService.createExportTask(!0,this.courseId).then(function(t){e.courseExports=t.courseExports,e.scheduledTasks=t.scheduledTasks,e.$scope.$emit("start-task-status-check")}):this.exportService.createExportTask(!1,this.courseId).then(function(t){e.courseExports=t.courseExports,e.scheduledTasks=t.scheduledTasks,e.$scope.$emit("start-task-status-check")})},t.prototype.exportFileAddedNotification=function(e){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.export.aria-label.file-added",params:{fileName:e},noWrap:!0})},t.prototype.exportProgressNotification=function(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"course.export.aria-label.export-in-progress",noWrap:!0})},t.prototype.triggerCourseExport=function(e){var t=this;this.modalInstance.dismiss(),this.exportService.createExportTask(e,this.courseId).then(function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks,t.$scope.$emit("start-task-status-check"),t.timeout(function(){t.$scope.$root.$broadcast(u.a,t.exportProgressNotification())},t.$scope,1e3)})},t.prototype.deleteCourseExport=function(e){var t=this;this.exportService.deleteCourseExport(e,this.courseId).then(function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks})},t.prototype.deleteExportTask=function(e){var t=this;this.exportService.deleteScheduledTask(e,this.courseId).then(function(e){t.courseExports=e.courseExports,t.scheduledTasks=e.scheduledTasks})},t.prototype.getAbsoluteUrl=function(e){return a.c(e)},t.$inject=["$scope",i.b,"$modal",s.serviceName,c.b,r.e],t}())}).call(this,n("EVdn"))},"9ekn":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-grades-a",use:"icon-large-grades-a-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-grades-a"><path fill="#FFF" d="M7 37.5c-.827 0-1.5-.673-1.5-1.5V2c0-.827.673-1.5 1.5-1.5h14.609l1.979 7.912 7.912 1.979V36c0 .827-.673 1.5-1.5 1.5H7z" /><path fill="#FF3B30" d="M21.219 1l1.811 7.243.146.582.582.146L31 10.781V36c0 .551-.449 1-1 1H7c-.551 0-1-.449-1-1V2c0-.551.449-1 1-1h14.219M22 0H7C5.9 0 5 .9 5 2v34c0 1.1.9 2 2 2h23c1.1 0 2-.9 2-2V10l-8-2-2-8z" /><path fill="#FBE9E8" d="M22.996 10.5c-.825 0-1.496-.673-1.496-1.5V.5h.5c.132 0 .26.053.354.146l9 9.002A.505.505 0 0 1 31.5 10v.5h-8.504z" /><path fill="#FF3B30" d="M22 1l9 9h-8.004C22.447 10 22 9.551 22 9V1m0-1h-1v9c0 1.1.898 2 1.996 2H32v-1a.995.995 0 0 0-.293-.706l-9-9.003A1.0056 1.0056 0 0 0 22 0z" /><path fill="#FFF" d="M19.24 32.5c-.161 0-.32-.087-.415-.229-.055-.08-.134-.248-.048-.464L20.66 27.1a.511.511 0 0 1 .11-.167l9.754-9.754c.284-.284.661-.44 1.062-.44s.778.156 1.062.44l1.41 1.41c.586.586.586 1.539 0 2.125l-9.752 9.752a.4759.4759 0 0 1-.169.112l-4.707 1.883a.4895.4895 0 0 1-.19.039z" /><path fill="#FF3B30" d="M31.587 17.239c.268 0 .52.104.709.294l1.41 1.41c.391.391.391 1.027 0 1.418l-9.753 9.753-4.711 1.879 1.884-4.708 9.752-9.752a.997.997 0 0 1 .709-.294m0-1c-.513 0-1.025.196-1.416.587l-9.752 9.752a.9988.9988 0 0 0-.222.337l-1.883 4.708c-.277.69.259 1.377.926 1.377.123 0 .25-.023.378-.074l4.708-1.883c.126-.05.241-.126.337-.222l9.752-9.752c.782-.782.782-2.05 0-2.832l-1.41-1.41a2.0025 2.0025 0 0 0-1.418-.588z" /><path fill="#FBE9E8" d="M32.646 21.42l1.059-1.058a.997.997 0 0 0 .294-.709.993.993 0 0 0-.294-.709l-1.41-1.41a.997.997 0 0 0-.709-.294.993.993 0 0 0-.709.294l-1.058 1.058" /><path fill="#FF3B30" d="M29.4654 17.5305l4.2426 4.2426-.7071.7071-4.2426-4.2426zM21.6877 26.723l2.8284 2.8283-.7071.7071-2.8284-2.8284z" /><path fill="none" stroke="#FF3B30" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M10.5 15.5h16M10.5 19.5h9M10.5 23.5h5M10.5 31.5h5M10.5 27.5h5" /></symbol>'});s.add(r);e.exports=r},"9mPe":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.outline.alertCourseCompletion.modalTitle"\n          analytics-id-tag-prefix="course.outline.alertCourseCompletion">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.alertCourseCompletion.modalText"></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          id="complete-course" \n          ng-click="$parent.$close()" \n          class="button js-primary-button"\n          analytics-id="course.outline.alertCourseCompletion.makeComplete.button">\n    <span bb-translate="course.outline.alertCourseCompletion.makeComplete"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          ng-click="$parent.$dismiss()" \n          class="button button--secondary js-secondary-button"\n          analytics-id="course.outline.alertCourseCompletion.back.button">\n    <span bb-translate="global.cancelTakeMeBack"></span>\n  </button>\n</bb-modal>'},"A+z8":function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-message",use:"icon-large-message-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-message"><path fill="#FFF" d="M6 29.5c-.827 0-1.5-.673-1.5-1.5V10c0-.827.673-1.5 1.5-1.5h26c.827 0 1.5.673 1.5 1.5v18c0 .827-.673 1.5-1.5 1.5H6z" /><path fill="#767676" d="M32 9c.551 0 1 .449 1 1v18c0 .551-.449 1-1 1H6c-.551 0-1-.449-1-1V10c0-.551.449-1 1-1h26m0-1H6c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h26c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2z" /><path fill="none" stroke="#767676" stroke-linejoin="round" stroke-miterlimit="10" d="M5 9l14 11L33 9" /><path fill="none" stroke="#767676" stroke-miterlimit="10" d="M16 18L5 29M33 29L22 18" /></symbol>'});s.add(r);e.exports=r},A9M7:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-question-bank",use:"icon-medium-question-bank-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-question-bank"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M1 13h22v10H1zM8 5h2v2H8zM8 10h2v2H8zM8 18h8" /><path d="M4 13V1h16v12M13 5h4M13 10h4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},A9Mr:function(e,t){e.exports='<div bb-load-bundle="components/directives/schedule-outline" class="schedule-outline">\n\n  \x3c!-- compact representation, used on /courses --\x3e\n  <div ng-if="scheduleOutlineCollection().length !== 0 && compact()" class="compact">\n    \x3c!-- If there is only one schedule for this course - show it. --\x3e\n    <div ng-if="scheduleOutlineCollection().length === 1">\n      <p class="location-name" ng-if="scheduleOutlineCollection()[0].location">{{scheduleOutlineCollection()[0].getTruncatedLocation(TRUNCATION_LOCATION_COURSE_CARD)}}</p>\n      <p class="schedule">\n        <span ng-switch="scheduleOutlineCollection()[0].recurRules.freq">\n          <span ng-switch-when="WEEKLY">{{scheduleOutline.getWeeklyRepeatLabel(scheduleOutlineCollection()[0])}}</span>\n          <span ng-switch-when="MONTHLY">\n            <span bb-translate>scheduleOutline.monthlyEvent</span>\n            <span bb-translate ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])">scheduleOutline.nextMonthlyEvent</span>\n            <span ng-if="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0] )" bb-date="scheduleOutline.getNextEventDate(scheduleOutlineCollection()[0])" format="short" auto-update="true"></span>\n          </span>\n          <span ng-switch-when="DAILY" bb-translate>scheduleOutline.dailyEvent</span>\n        </span>\n        <span ng-if="scheduleOutlineCollection()[0].isAllDayEvent()" bb-translate>scheduleOutline.allDay</span>\n        <span ng-if="!scheduleOutlineCollection()[0].isAllDayEvent()"><span bb-time="{{scheduleOutlineCollection()[0].startDate}}" auto-update="true" format="Short"></span> - <span bb-time="{{scheduleOutlineCollection()[0].endDate}}" auto-update="true" format="Short"></span></span>\n      </p>\n    </div>\n\n    \x3c!-- if there is more than one schedule for this course - just tell how many schedules available. --\x3e\n    <div ng-if="scheduleOutlineCollection().length > 1">\n      <span bb-translate translate-values="{count: scheduleOutlineCollection().length}">scheduleOutline.moreMeetingsCompact.plural</span>\n    </div>\n  </div>\n\n  \x3c!-- normal representation --\x3e\n  <div ng-if="scheduleOutlineCollection().length !== 0 && !compact()" class="regular">\n    <div class="item clearfix js-course-schedule" ng-repeat="repeatingEvent in scheduleOutline.getSchedules() track by $index">\n      <div class="element-card">\n        <div class="element-image" ng-if="$first">\n          <bb-svg-icon size="medium" icon="away"></bb-svg-icon>\n        </div>\n        <div class="element-details">\n          <div ng-switch="repeatingEvent.recurRules.freq" class="name">\n            <span ng-switch-when="WEEKLY">{{scheduleOutline.getWeeklyRepeatLabel(repeatingEvent)}}</span>\n            <span ng-switch-when="MONTHLY">\n              <span bb-translate>scheduleOutline.monthlyEvent</span> <br/>\n              <span bb-translate ng-if="scheduleOutline.getNextEventDate(repeatingEvent)">scheduleOutline.nextMonthlyEvent</span>\n              <span ng-if="scheduleOutline.getNextEventDate(repeatingEvent)" bb-date="{{scheduleOutline.getNextEventDate(repeatingEvent)}}" format="short" auto-update="true"></span>\n            </span>\n            <span ng-switch-when="DAILY">\n              <span bb-translate>scheduleOutline.dailyEvent</span> <br/>\n              <span bb-translate ng-if="scheduleOutline.getNextDailyEventDate(repeatingEvent)">scheduleOutline.nextMonthlyEvent</span>\n              <span ng-if="scheduleOutline.getNextDailyEventDate(repeatingEvent)" bb-date="{{scheduleOutline.getNextDailyEventDate(repeatingEvent)}}" format="short" auto-update="true"></span>\n            </span>\n          </div>\n          <div ng-if="repeatingEvent.isAllDayEvent()" bb-translate>scheduleOutline.allDay</div>\n          <div ng-if="!repeatingEvent.isAllDayEvent()"><span bb-time="{{repeatingEvent.startDate}}" format="Short" auto-update="true"></span> - <span bb-time="{{repeatingEvent.endDate}}" format="Short" auto-update="true"></span></div>\n        </div>\n      </div>\n      <div class="element-card" ng-if="scheduleOutline.areAnyLocationsSet()">\n        <div class="element-image" ng-if="$first">\n          <bb-svg-icon size="medium" icon="location"></bb-svg-icon>\n        </div>\n        <div class="element-details">\n          <span class="name" ng-if="$first || repeatingEvent.location !== scheduleOutlineCollection()[$index -1].location">{{repeatingEvent.getTruncatedLocation(TRUNCATION_LOCATION_OUTLINE)}}</span><br/>\n        </div>\n      </div>\n    </div>\n    <div ng-if="scheduleOutlineCollection().length > 2" class="item more" ng-class="{right: scheduleOutline.areAnyLocationsSet()}">\n      <a bb-peek-sref="class-schedule"\n         bb-translate\n         translate-values="{count: scheduleOutlineCollection().length - 2}"\n         analytics-id="scheduleOutline.moreMeetings.plural">\n        scheduleOutline.moreMeetings.plural\n      </a>\n    </div>\n  </div>\n</div>\n'},AI52:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c});var o=n("mrSG"),s=n("LvDl"),r=n("IbG+"),i=n("pjml"),a="ultra.service.course.export",c="courseExport",l=function(){function e(e,t,n,o){this.CourseModel=e,this.ScheduledTaskModel=t,this.$modal=n,this.$q=o,this.exportsAndScheduledTasksByCourseId={},this.permissionsByCourseId={}}return e.prototype.getExportsAndScheduledTasks=function(e,t,n,o,s){var r=this,i=this.$q.defer();return e&&t&&(o||s)&&(!this.exportsAndScheduledTasksByCourseId[e]||n?this.populateCourseExportsAndScheduledTasks(e,t,o,s).then(function(t){r.exportsAndScheduledTasksByCourseId[e]={courseExports:t[0],scheduledTasks:t[1]},i.resolve(r.exportsAndScheduledTasksByCourseId[e])}):i.resolve(this.exportsAndScheduledTasksByCourseId[e])),i.promise},e.prototype.createExportTask=function(e,t){var n=this,o=this.$q.defer();if(t){var s={cxAction:e?"CX_ACTION_ARCHIVE":"CX_ACTION_EXPORT"};this.CourseModel.$new(t).exports.$build(s).$save().$then(function(e){n.ScheduledTaskModel.$find(e.taskId).$then(function(e){n.exportsAndScheduledTasksByCourseId[t].scheduledTasks.push(e),o.resolve(n.exportsAndScheduledTasksByCourseId[t])})})}return o.promise},e.prototype.deleteCourseExport=function(e,t){var n=this,o=this.$q.defer();return t&&this.CourseModel.$new(t).exports.$new(e.cxFileId).$destroy().$then(function(){s.remove(n.exportsAndScheduledTasksByCourseId[t].courseExports,function(t){return t.cxFileId===e.cxFileId}),o.resolve(n.exportsAndScheduledTasksByCourseId[t])}),o.promise},e.prototype.deleteScheduledTask=function(e,t){var n=this,o=this.$q.defer();return t&&this.ScheduledTaskModel.$new(e.taskId).$destroy().$then(function(){s.remove(n.exportsAndScheduledTasksByCourseId[t].scheduledTasks,function(t){return t.taskId===e.taskId}),o.resolve(n.exportsAndScheduledTasksByCourseId[t])}),o.promise},e.prototype.populateCourseExportsAndScheduledTasks=function(e,t,n,o){return this.$q.all([this.getCourseExports(e),this.getScheduledTasks(t,n,o)])},e.prototype.getCourseExports=function(e){return this.CourseModel.$new(e).exports.$refresh().$asPromise()},e.prototype.getScheduledTasks=function(e,t,n){var o="";if(t||n){t&&(o+="EXPORT"),n&&(""!==o&&(o+=","),o+="ARCHIVE");var s={filterBy:"cxTasks",courseId:e,groupStatus:"INPROGRESS",operation:o};return this.ScheduledTaskModel.$collection().$refresh(s).$asPromise()}},e.$inject=[i.o.serviceName,i.sb.serviceName,"$modal","$q"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e)}(l);r.module(a,[i.R]).service(c,l)},Axc5:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-course-complete",use:"icon-medium-course-complete-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-course-complete"><path d="M19 1v4" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 11h5v3h-5zM8 5v18" /><path d="M21 1H3v22h9M3.5 5H21v8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 19l4 4 7-8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},CMKQ:function(e,t){e.exports='<bb-modal id="student-preview-modal" role="alertdialog" class="notification" bb-translate-attrs="{\'aria-label\': \'course.outline.studentPreview.modalTitleKey\'}"\n          modal-title-key="{{::localizationTokenPrefix}}.outline.studentPreview.modalTitleKey" aria-describedby="first-time-confimation"\n          analytics-id-tag-prefix="course.outline.studentPreview.firstTimeConfirmation">\n  <div name="modal-contents">\n    <bb-svg-icon size="custom" icon="preview-user-avatar"></bb-svg-icon>\n    <p id="first-time-info" bb-translate course-org-token-resolver>\n      course.outline.studentPreview.firstTimeConfirmation\n    </p>\n  </div>\n  <button name="modal-footer-button-primary"\n          type="button"\n          class="button js-discard-changes js-primary-button"\n          ng-click="startPreview()"\n          analytics-id="course.outline.studentPreview.firstTimeConfirmation.startPreview.button">\n    <span bb-translate="course.outline.studentPreview.startPreview"></span>\n  </button>\n  <button name="modal-footer-button-secondary" type="button" class="button button--secondary js-cancel-discard js-secondary-button" ng-click="$dismiss()"\n          analytics-id="course.outline.studentPreview.cancel.button">\n    <span bb-translate="course.outline.studentPreview.cancel"></span>\n  </button>\n</bb-modal>'},CTYn:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-people",use:"icon-medium-people-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-people"><path d="M1 23c1.096-4.3157 4.5473-7 9-7s7.904 2.6843 9 7M10 16c2.7614 0 5-2.2386 5-5s-2.2386-5-5-5-5 2.2386-5 5 2.2386 5 5 5zM18.5 8C20.433 8 22 6.433 22 4.5S20.433 1 18.5 1 15 2.567 15 4.5 16.567 8 18.5 8zM23 12c-.2345-1.9862-2.5-4-4.5-4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},Do0N:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-collab",use:"icon-medium-collab-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},Dt14:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var o=n("IbG+"),s=n("pjml"),r="ultra.services.collab",i="collab",a=function(){function e(e,t,n,o,s,r){this.$compile=e,this.$rootScope=t,this.$timeout=n,this.CourseModel=o,this.CollabUltraModel=s,this.$sce=r}return e.prototype.joinVirtualClassroom=function(e,t){var n=window.open();this.getVirtualClassroomLaunchUrl(e,t).then(function(e){n.location.href=e},function(e){n.close()})},e.prototype.getCollabSessions=function(e){return this.CourseModel.$new(e).collab.getVirtualClassroomSession()},e.prototype.getVirtualClassroomLaunchUrl=function(e,t){return this.CourseModel.$new(e).collab.sessions.$new(t).getLaunchUrl()},e.$inject=["$compile","$rootScope","$timeout",s.o.serviceName,s.l.serviceName,"$sce"],e}();o.module(r,[s.R]).service(i,a)},DvyB:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){e.done?s(e.value):new n(function(t){t(e.value)}).then(i,a)}c((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,s,r,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(s=2&r[0]?o.return:r[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,r[1])).done)return s;switch(o=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,o=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(s=(s=i.trys).length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){i=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){i.label=r[1];break}if(6===r[0]&&i.label<s[1]){i.label=s[1],s=r;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(r);break}s[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],o=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=n("LvDl");t.GET_CONTENT_BY_ID_EXPAND="memberships.user,studentCount,signUpSheet,hasSubmittedGroupAttempt",t.getDate=function(){return new Date};var i=document.createElement("textarea");function a(e){var n=!!e&&r.some(e,["isSelfEnrolledAllowed",!0]),o=t.getDate();if(n){var s=c(e),i=l(e),a="Open";return s&&o<s?a="Before":i&&o>i&&(a="After"),{now:o,firstStartDate:s,lastEndDate:i,enrollmentDateState:a,isSelfEnrollment:!0}}return{now:o,isSelfEnrollment:!1}}function c(e){return e.map(function(e){return r.get(e,"signUpSheet.enrollmentStartDate",null)}).reduce(function(e,t){var n=e?new Date(e):null,o=t?new Date(t):null;return o&&(!n||n>o)?o:n},null)}function l(e){return e.map(function(e){return r.get(e,"signUpSheet.enrollmentEndDate",null)}).reduce(function(e,t){var n=e?new Date(e):null,o=t?new Date(t):null;return o&&(!n||n<o)?o:n},null)}t.decodeHtmlEntities=function(e){return i.innerHTML=e,i.value},t.decodeOnlyAngleBracketHtmlEntities=function(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")},t.encodeHtmlEntities=function(e){return null==e?e:e.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"})},t.generateSubRowElementId=function(e){return"item-sub-row-"+e},t.navigateToElement=function(e){e&&(document.activeElement.blur(),e.focus())},t.getSelfEnrollmentDateStateInfo=a,t.getSelfEnrollmentGroupInfo=function(e,t,n){return o(this,void 0,void 0,function(){var o,r;return s(this,function(s){switch(s.label){case 0:return(o=a(e)).isSelfEnrollment?(r=null,"Before"!==o.enrollmentDateState?[3,2]:[4,n.datetime.formatRelativeTimestamp(o.firstStartDate,t)]):[3,5];case 1:return r=s.sent(),[3,4];case 2:return"Open"===o.enrollmentDateState&&o.lastEndDate?[4,n.datetime.formatRelativeTimestamp(o.lastEndDate,t)]:[3,4];case 3:r=s.sent(),s.label=4;case 4:return[2,{relativeDate:r,isEnrollmentDateImportant:!!(o.lastEndDate&&"Open"===o.enrollmentDateState&&o.lastEndDate.getTime()-o.now.getTime()<2592e5),enrollmentDateState:o.enrollmentDateState,isSelfEnrollment:!0}];case 5:return[2,{isSelfEnrollment:!1}]}})})},t.getFirstEnrollmentStartDate=c,t.getLastEnrollmentEndDate=l,t.sortByTitle=function(e){return r.sortBy(e,"title")}},GHcF:function(e,t){e.exports='<div ng-cloak bb-cache-compilation="course-outline">\n  <div class="guidance-wrapper guidance-navbar">\n    <bb-guidance ng-if="courseOutline.shouldShowNavigationGuidance" class="guidance-element-overlay" ng-class="{\'push-right\': courseOutline.windowSizeService.isLargeBreakpoint()}"\n                 component-key="{{courseOutline.navigationGuidanceKey}}" page-container-selector=".course-outline">\n      <bb-translate course-org-token-resolver>course.outline.courseNavigation</bb-translate>\n    </bb-guidance>\n  </div>\n\n  <div class="course-outline webkit-render-issue-fix"\n       ng-class="{\'is-empty-page\': courseOutline.isEmpty, \'no-create\': !courseOutline.canCreateAllContent(), \'learning-module-enabled\': courseOutline.isLearningModuleEnabled}"\n       ng-attr-ready="{{::!courseOutline.isLoading || undefined}}">\n\n    <div ui-view="content-create-base"></div>\n\n    <div class="course-outline-row row collapse">\n\n      <aside role="complementary" class="outline-details {{::courseOutline.courseColorClass}}">\n\n        <div class="element-card main-instructor">\n          <bb-usercard class="js-single-instructor" usercard-show="outline" ng-show="courseOutline.instructors.length <= 1"\n            course-id="{{courseOutline.courseId}}" user="courseOutline.mainInstructor.user"\n            can-send-message="(!courseOutline.currentCourse.isPrivate() && !courseOutline.currentCourse.isComplete()) && courseOutline.mainInstructor.isAvailable"\n            course-role="courseOutline.mainInstructor.courseRole.localizedRoleName">\n          </bb-usercard>\n          <bb-multi-user-usercard ng-show="courseOutline.instructors.length > 1"\n            users="courseOutline.instructors" user-type="courseOutline.currentCourse.isOrganization ? \'leader\' : \'instructor\'" view="\'multiple-instructors\'">\n          </bb-multi-user-usercard>\n        </div>\n        <bb-schedule-outline schedule-outline-collection="courseOutline.currentCourse.schedule" week-day-format="long"></bb-schedule-outline>\n      </aside>\n\n    </div>\n    <div class="course-outline-row row">\n\n      <aside role="complementary" class="column medium-12 large-3 outline-actions">\n        <div class="outline-header">\n          <h2 class="js-course-skip-link-target js-details-header" bb-translate="course.outline.detailsActionsLabel"></h2>\n        </div>\n\n        <div class="small-12 medium-4 large-12" id="course-outline-roster-link">\n          <a href="javascript:void(0);"\n             class="element-card js-roster"\n             bb-peek-sref="roster"\n             analytics-id="course.outline.roster.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="people"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.roster.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.roster.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="small-12 medium-4 large-12" id="course-outline-description-link" ng-show="courseOutline.currentCourse.description">\n          <a href="javascript:void(0);"\n             class="element-card"\n             bb-peek-sref="description"\n             analytics-id="course.outline.description.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="information"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.courseDescription.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.courseDescription.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="small-12 medium-4 large-12 course-groups" id="groups-link" ng-if="courseOutline.isGroupToolEnabled">\n          <a href="javascript:void(0);"\n            class="element-card js-course-groups-list"\n            ng-class="{ \'disabled\': courseOutline.groupsLinkIsDisabled() }"\n            ng-click="courseOutline.openGroupWorkspacePanel()"\n            tabindex="{courseOutline.groupsLinkIsDisabled() ? \'-1\' : \'0\'}"\n            analytics-id="course.outline.groupWorkspaces.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="groups"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.groupWorkspace.title</span>\n              </div>\n              <div class="content">\n                <span class="blue-link"\n                  ng-if="courseOutline.shouldShowViewGroupsLink()"\n                  bb-translate\n                  translate-values="{ groupSetCount: courseOutline.groupSetCount, groupCount: courseOutline.groupCount }"\n                >\n                  course.outline.groupWorkspace.instructor.content.plural\n                </span>\n                <span ng-if="courseOutline.shouldShowCreateGroupsLink()" bb-translate class="create-new blue-link">course.outline.groupWorkspace.instructor.createNew</span>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="card-private-complete small-12 medium-4 large-12" id="course-outline-status-button" ng-show="courseOutline.isActAsInstructorMembership() && courseOutline.currentCourse.isChild === false ">\n          <button class="course-status js-change-course-status"\n                  ng-click="courseOutline.openModal()"\n                  ng-class="{ \'js-course-open\': courseOutline.currentCourse.isOpen(),\n                             \'js-course-closed\': courseOutline.currentCourse.isPrivate(),\n                             \'js-course-complete\': courseOutline.currentCourse.isComplete() }"\n                  analytics-id="course.outline.courseStatus.edit.button">\n            <div class="element-card">\n              <div class="element-image icon">\n                <bb-svg-icon size="medium" icon="unlock" ng-if="courseOutline.currentCourse.isOpen()"></bb-svg-icon>\n                <bb-svg-icon size="medium" icon="lock" ng-if="courseOutline.currentCourse.isPrivate()"></bb-svg-icon>\n                <bb-svg-icon size="medium" icon="course-complete" ng-if="courseOutline.currentCourse.isComplete()"></bb-svg-icon>\n              </div>\n              <div class="element-details">\n                <div class="name">\n                  <span>{{courseOutline.getCourseStatus()}}</span>\n                </div>\n                <div class="content">\n                  <p class="blue-link">{{courseOutline.getCourseDescription()}}</p>\n                </div>\n              </div>\n            </div>\n          </button>\n          <div class="guidance-wrapper">\n            <div class="guidance-anchor" ng-if="courseOutline.shouldShowAccessGuidanceOpenToStudent"\n                 bb-guidance-target component-key="{{courseOutline.studentAccessGuidanceKey}}">\n            </div>\n            <div class="guidance-anchor" ng-if="courseOutline.shouldShowAccessGuidanceReadOnly"\n                 bb-guidance-target component-key="{{courseOutline.alertCourseGuidanceKey}}">\n            </div>\n            \x3c!--guidance suggesting the instructor open the course to students--\x3e\n            <bb-guidance ng-if="courseOutline.shouldShowAccessGuidanceOpenToStudent"\n                         class="guidance-element-overlay push-left"\n                         component-key="{{courseOutline.studentAccessGuidanceKey}}">\n              <bb-translate course-org-token-resolver>course.outline.unaccessableCourse</bb-translate>\n            </bb-guidance>\n            \x3c!--guidance suggesting the instructor make the ended course read-only to students--\x3e\n            <bb-guidance ng-if="courseOutline.shouldShowAccessGuidanceReadOnly"\n                         class="guidance-element-overlay push-left"\n                         component-key="{{courseOutline.alertCourseGuidanceKey}}">\n              <bb-translate>course.outline.completeCourseNote</bb-translate>\n            </bb-guidance>\n          </div>\n        </div>\n\n        <div class="small-12 medium-4 large-12" ng-show="courseOutline.shouldShowVirtualClassroomLink()">\n          <a href="javascript:void(0);"\n             class="element-card"\n             ng-click="courseOutline.joinVirtualClassroom()"\n             bb-feature-toggle="!collab"\n             analytics-id="course.outline.collab.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="collab"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.collab.title</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.collab.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n        <div class="element-card ultra-collab small-12 medium-4 large-12"\n             ng-show="courseOutline.collabUltraEnabled" bb-feature-toggle="collab" ng-class="{\'is-collab-enabled\': courseOutline.courseRoomSession.courseRoomEnabled}">\n          <div class="element-image icon">\n            <bb-collab-session-icon id="collab-icon-outline" running-session-flag="courseOutline.runningSessionFlag"></bb-collab-session-icon>\n          </div>\n          <div class="element-details">\n            <div class="name">\n              <span bb-translate class="large-12 medium-12 small-12">course.outline.collab.ultraCollabTitle</span>\n            </div>\n            <div class="content">\n              <div class="select-wrapper">\n                <div ng-show="courseOutline.activeSessionCount() >= 1" bb-foundation-defer>\n                  <button id="sessions-list-dropdown"\n                          aria-describedby="collab-icon-outline"\n                          class="select-value join-session button-anchor"\n                          data-dropdown="sessions-list"\n                          aria-haspopup="true"\n                          aria-controls="sessions-list"\n                          bb-click-focus="#sessions-list li:first > a"\n                          analytics-id="course.outline.collab.sessionList.dropdown.button">\n                    <span class="blue-link" bb-translate="course.outline.collab.ultraCollabContent.roomEnabled"></span>\n                  </button>\n                  <ul role="menu" id="sessions-list" data-dropdown-content class="f-dropdown collab-scroll-container">\n                    <li ng-if="courseOutline.isCourseRoomEnabled()" role="presentation">\n                      <a href="javascript:void(0);"\n                         role="menuitem"\n                         ng-click="courseOutline.joinSession(courseOutline.courseRoomSession.id)"\n                         analytics-id="course.outline.collab.sessionList.courseRoom.link">\n                        <span bb-translate="course.outline.collab.ultraCollabMenu.courseRoom" course-org-token-resolver></span>\n                      </a>\n                    </li>\n\n                    <li ng-repeat="collabSession in courseOutline.courseSessionList" role="presentation">\n                      <a href="javascript:void(0);"\n                         role="menuitem"\n                         ng-click="courseOutline.joinSession(collabSession.id)"\n                         analytics-id="course.outline.collabSession.link">\n                        <span>{{collabSession.name}}</span>\n                      </a>\n                    </li>\n                  </ul>\n                </div>\n                <div ng-if="courseOutline.activeSessionCount() < 1">\n                  <p ng-if="!(courseOutline.collabPermissions && courseOutline.collabPermissions.viewAllSessionsInLti)" bb-translate="course.outline.collab.ultraCollabContent.studentRoomDisabled"></p>\n                  <p ng-if="courseOutline.collabPermissions && courseOutline.collabPermissions.viewAllSessionsInLti" bb-translate="course.outline.collab.ultraCollabContent.instructorRoomDisabled"></p>\n                </div>\n              </div>\n            </div>\n          </div>\n          <bb-overflow-menu bb-foundation-defer ng-show="courseOutline.collabUltraEnabled && courseOutline.isCollabSettingsDropDownAvailable()"\n                            element-id="collab-dropdown"\n                            element-name="{{courseOutline.getLocalizedTextByKey(\'course.outline.collaborate\')}}"\n                            menu-items="courseOutline.getOverflowMenuItems()"\n                            analytics-id-tag-prefix="course.outline.collab.overflowMenu">\n          </bb-overflow-menu>\n        </div>\n        <div class="small-12 medium-4 large-12" ng-if="courseOutline.attendanceEnabled">\n          <a href="javascript:void(0);"\n             class="element-card js-open-attendance"\n             bb-peek-sref="{{course.canModifyAttendance ? \'attendance\' : \'attendance-student-view\'}}"\n             analytics-id="course.outline.attendance.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="attendance"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.attendance.title</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" ng-if="course.canModifyAttendance" bb-translate>course.outline.attendance.markAttendance</p>\n                <p class="blue-link" ng-if="!course.canModifyAttendance" bb-translate>course.outline.attendance.viewRecords</p>\n              </div>\n            </div>\n          </a>\n        </div>\n        <div class="small-12 medium-4 large-12 announcements" id="announcements-link" ng-if="courseOutline.isAnnouncementsEnabled">\n          <a href="javascript:void(0);"\n             class="element-card js-announcement-list"\n             ng-click="courseOutline.openAnnouncementsPanel()"\n             ng-class="{\'isNotClickable\': courseOutline.disableAnnouncementsClickForStudent()}"\n             aria-disabled="courseOutline.disableAnnouncementsClickForStudent()"\n             tabindex="{{courseOutline.disableAnnouncementsClickForStudent() ? -1 : 0}}"\n             analytics-id="course.outline.announcements.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="announcements"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.announcements.title</span>\n              </div>\n              <div ng-if="courseOutline.announcementsTotalCount > -1" class="content">\n                <span ng-if="courseOutline.announcementPermissions.viewUnposted && courseOutline.announcementsTotalCount > 0" class="blue-link" bb-translate translate-values="{ postedCount: courseOutline.announcementsPostedCount, totalCount: courseOutline.announcementsTotalCount }">course.outline.announcements.instructor.content</span>\n                <span ng-if="courseOutline.announcementPermissions.create && courseOutline.announcementsTotalCount === 0" class="create-new blue-link" bb-translate>course.outline.announcements.instructor.createNew</span>\n                <span ng-if="!courseOutline.announcementPermissions.viewUnposted && courseOutline.announcementsTotalCount > 0" class="blue-link" bb-translate translate-values="{ totalCount: courseOutline.announcementsTotalCount }">course.outline.announcements.student.content</span>\n                <span ng-if="!courseOutline.announcementPermissions.create && courseOutline.announcementsTotalCount === 0" bb-translate class="disable">course.outline.announcements.student.noContent</span>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div class="small-12 medium-4 large-12"\n             id="books-and-tools-link">\n          <a class="element-card"\n             bb-peek-sref="books-and-tools({ parentId: courseOutline.rootNode.id })"\n             analytics-id="course.outline.booksAndTools.link">\n             <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="edit-tool"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.booksAndTools.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.booksAndTools.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        <div>\n          <div class="card-question-banks small-12 medium-4 large-12"\n               id="question-banks-link"\n               bb-course-entitlement="course.pool.MODIFY" course-id="courseOutline.courseId" entitlement-action="show">\n            <a href="javascript:void(0);"\n               class="element-card js-question-banks"\n               bb-peek-sref="question-banks"\n               analytics-id="course.outline.questionBanks.link">\n              <div class="element-image icon" data-status="offline">\n                <bb-svg-icon size="medium" icon="question-bank"></bb-svg-icon>\n              </div>\n              <div class="element-details">\n                <div class="name">\n                  <span bb-translate>course.outline.questionBanks.name</span>\n                </div>\n                <div class="content">\n                  <p class="blue-link" bb-translate>course.outline.questionBanks.content</p>\n                </div>\n              </div>\n            </a>\n            <div class="guidance-wrapper">\n              <div bb-guidance-target\n                   ng-if="courseOutline.shouldShowQuestionBanksGuidance"\n                   class="guidance-anchor"\n                   component-key="{{::courseOutline.questionBanksNavGuidanceKey}}">\n              </div>\n              <bb-guidance class="guidance-element-overlay push-left"\n                           ng-if="courseOutline.shouldShowQuestionBanksGuidance"\n                           component-key="{{::courseOutline.questionBanksNavGuidanceKey}}">\n                <bb-translate course-org-token-resolver>course.outline.questionBanks.guidance</bb-translate>\n              </bb-guidance>\n            </div>\n          </div>\n        </div>\n\n        <div class="small-12 medium-4 large-12"\n             id="course-outline-conversion-link"\n             ng-if="courseOutline.hasConversionReport()">\n          <a href="javascript:void(0);"\n             class="element-card"\n             bb-peek-sref="conversion-risk-analysis"\n             analytics-id="course.outline.conversionReport.link">\n            <div class="element-image icon">\n              <bb-svg-icon size="medium" icon="default-conversion-exceptions"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate>course.outline.conversionException.name</span>\n              </div>\n              <div class="content">\n                <p class="blue-link" bb-translate course-org-token-resolver>course.outline.conversionException.content</p>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        \x3c!-- Institution cloud storage if exists --\x3e\n        <div class="small-12 medium-4 large-12 js-inst-cloud-storage" id="cloud-storage-link" remove-from-dom="true"\n             ng-if="courseOutline.hasInstitutionAccount()">\n          <a href="javascript:void(0);"\n             class="element-card"\n             ng-click="courseOutline.launchInstitutionAccount()"\n             analytics-id="course.outline.institutionAccount.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="{{courseOutline.getCloudStorageIcon()}}"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate="base.tools.{{::courseOutline.instAccount.type}}"></span>\n              </div>\n              <div class="content">\n                <span class="blue-link">{{courseOutline.getInstConnectString()}}</span>\n              </div>\n            </div>\n          </a>\n        </div>\n\n        \x3c!--Student Preview--\x3e\n        <div class="small-12 medium-4 large-12 student-preview" id="student-preview-link" bb-feature-toggle="studentPreview" remove-from-dom="true"\n           ng-if="courseOutline.showPreviewButton && !courseOutline.currentCourse.isComplete()">\n          <a href="javascript:void(0);"\n             class="element-card js-student-preview-list"\n             ng-click="courseOutline.showFirstTimeConfirmationModal()"\n             bb-guidance-target\n             component-key="course.outline.studentPreview.ftue.startPreview.tooltipHeader"\n             analytics-id="course.outline.studentPreview.link">\n            <div class="element-image icon" data-status="offline">\n              <bb-svg-icon size="medium" icon="visible"></bb-svg-icon>\n            </div>\n            <div class="element-details">\n              <div class="name">\n                <span bb-translate course-org-token-resolver>course.outline.studentPreview.name</span>\n              </div>\n              <div class="content enter-preview-mode">\n                <span class="blue-link" bb-translate course-org-token-resolver>course.outline.studentPreview.content</span>\n              </div>\n            </div>\n          </a>\n          <bb-guidance\n            component-key="course.outline.studentPreview.ftue.startPreview.tooltipHeader"\n            class="guidance-element-overlay">\n            <h3 bb-translate course-org-token-resolver>course.outline.studentPreview.ftue.startPreview.tooltipHeader</h3>\n            <p bb-translate course-org-token-resolver>course.outline.studentPreview.ftue.startPreview.tooltipContent</p>\n          </bb-guidance>\n        </div>\n\n      </aside>\n\n      <div class="columns medium-12 large-9 outline-column dropzoneTarget">\n        <div ng-if="courseOutline.isAnnouncementsEnabled">\n          <announcement-slide></announcement-slide>\n        </div>\n        <div class="outline-header inventory-header">\n          <h2 class="js-course-skip-link-target content-header" bb-translate="course.outline.contentHeaderLabel" course-org-token-resolver></h2>\n          <div id="copy-details-ftue" bb-foundation-defer>\n            <bb-guidance ng-if="courseOutline.shouldShowCopyDetailsOverflowGuidance"\n                class="guidance-element-overlay"\n                component-key="course.copyError"\n                page-container-selector=".course-outline">\n              <bb-translate course-org-token-resolver>course.outline.viewCopyDetails</bb-translate>\n            </bb-guidance>\n            <bb-overflow-menu ng-show="courseOutline.canCopyOrImport() || courseOutline.canArchive || courseOutline.canExport || courseOutline.canAccessBatchEdit"\n                              element-id="ddm-course-operation"\n                              element-name="{{courseOutline.getLocalizedTextByKey(courseOutline.outlineLocalePrefix + \'.courseContent\')}}"\n                              on-menu-toggle="courseOutline.handleOutlineMenuToggle(isOpen)"\n                              menu-items="courseOutline.getCourseOperationOverflowMenuItems()"\n                              analytics-id-tag-prefix="course.outline.copyDetails.overflowMenu">\n            </bb-overflow-menu>\n          </div>\n        </div>\n\n        <div class="spinner bb-secondary-color-2" ng-if="courseOutline.isLoading || !$root.bbOffcanvasOpened" aria-hidden="true"></div>\n        <div class="element-card-list inventory js-content-outline" bb-mouse-leave-enter="content-outline">\n          <div ng-show="courseOutline.isEmpty">\n            <div ng-if="!courseOutline.canCreateAllContent()" class="js-student-view-empty">\n              <div class="is-empty-wrapper js-course-skip-link-target">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/ftue/course-outline-zero-state-illustration.png" alt="" bb-translate-attrs="{title: \'course.outline.student.emptyCourse.illustrationAlt\'}" />\n                  <h1 class="is-empty-heading">\n                    <span ng-if="courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.complete.header" course-org-token-resolver></span>\n                    <span ng-if="!courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.header" course-org-token-resolver></span>\n                  </h1>\n                  <span ng-if="!courseOutline.currentCourse.isComplete()" bb-translate="course.outline.student.emptyCourse.message" course-org-token-resolver></span>\n                </div>\n              </div>\n            </div>\n            <div ng-if="courseOutline.canCreateAllContent()" bb-feature-toggle="!learningModule" remove-from-dom="true">\n              <div class="ready-for-content">\n                <div class="is-empty-wrapper">\n                  <div class="is-empty-explanation">\n                    <img src="./static/images/ftue/course-outline-zero-state-illustration.png" alt="" bb-translate-attrs="{alt: \'course.outline.emptyCourse.illustrationAlt\'}" />\n                    <h1 class="is-empty-heading" bb-translate="course.outline.emptyCourse.header" course-org-token-resolver></h1>\n                    <span bb-translate="course.outline.emptyCourse.message" course-org-token-resolver></span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="guidance-wrapper guidance-wrapper-add-control">\n            <bb-guidance ng-if="courseOutline.shouldShowOutlineGuidance && !courseOutline.isEmpty" class="guidance-element push-top"\n                        component-key="{{courseOutline.addContentGuidanceKey}}" page-container-selector=".course-outline">\n              <bb-translate>course.outline.addContent</bb-translate>\n            </bb-guidance>\n            <div bb-guidance-target component-key="{{courseOutline.addContentGuidanceKey}}" keep-guidance-when-focusout="true" class="guidance-click-through"></div>\n          </div>\n          <div id="copy-details-notification-ftue">\n            <bb-guidance ng-if="courseOutline.shouldShowCopyDetailsNotification && courseOutline.hasCurrentCopyDetailsErrors" class="guidance-element-overlay"\n              component-key="course.copyErrorNotification" page-container-selector=".course-outline">\n              <bb-translate>course.outline.copyErrorsNotification</bb-translate>\n            </bb-guidance>\n          </div>\n          <div id="copy-errors-notification" ng-if="courseOutline.shouldShowCopyDetailsNotification && courseOutline.hasCurrentCopyDetailsErrors"\n            role="alert" aria-live="assertive" aria-labelledby="copy-errors-notification-content-title copy-errors-notification-content-message">\n            <bb-svg-icon size="medium" icon="attention" status="alert"></bb-svg-icon>\n            <div id="copy-errors-notification-content">\n              <div id="copy-errors-notification-content-title" bb-translate>course.outline.notificationCopyDetails.title</div>\n              <div>\n                <span id="copy-errors-notification-content-message" bb-translate translate-values="{count: courseOutline.copyDetailsErrorCount}">\n                  course.outline.notificationCopyDetails.message.plural\n                </span>\n                <a href="javascript:void(0);"\n                   bb-translate\n                   ng-click="courseOutline.openCopyDetailsPanel()"\n                   analytics-id="course.outline.notificationCopyDetails.viewDetails">\n                  course.outline.notificationCopyDetails.viewDetails\n                </a>\n              </div>\n            </div>\n            <bb-svg-icon size="small" icon="close" tabindex="0" ng-click="courseOutline.copyDetailsNotificationDismissed()"\n                         analytics-id="course.outline.copyDetailsNotificationDismis.button"></bb-svg-icon>\n          </div>\n          <div ng-if="courseOutline.isEmpty && courseOutline.rootNode.canEdit() && courseOutline.canMove" class="js-student-view-empty" >\n            <div class="is-empty-page">\n              <div class="is-empty-wrapper">\n                <div class="is-empty-explanation">\n                  <img src="./static/images/ftue/ftuMMicon_BuildContent_assessment.svg" alt="" aria-hidden="true" />\n                  <h3 course-org-token-resolver class="is-empty-heading" bb-translate>course.outline.emptyCourse.zeroStateHeader</h3>\n                  <span bb-translate>course.outline.emptyCourse.zeroStateDesc</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div ng-switch="courseOutline.canCreateAllContent()">\n            <div ng-switch-when="true">\n              <bb-file-upload url="/v1/files" data="{}" allow-multiple="true" is-content="true" click-enabled="false" hide-transclude-during-upload="false"\n                              use-default-success-method="false" skip-zip-file-check="true">\n                <bb-content-outline\n                  ng-if="::$root.bbOffcanvasOpened || undefined"\n                  show-content-import-progress="{{::courseOutline.showContentImportProgress}}"\n                  context-area="courseOutline.contextArea"\n                  is-first="true"\n                  contents="courseOutline.rootNode.children"\n                  load-more-children="courseOutline.loadMoreChildren"\n                  parent-folder="courseOutline.rootNode"\n                  on-file-drop-handler="courseOutline.onFileDropHandler"\n                  on-move-handler="courseOutline.moveItem"\n                  on-move-into-folder-handler="courseOutline.moveItemIntoFolder"\n                  can-move="courseOutline.canMove"\n                  can-create="courseOutline.rootNode.children.canCreate()"\n                  can-copy-import="courseOutline.canCopyOrImport()"\n                  bb-key-hide-ftue="{{courseOutline.addContentGuidanceKey}}">\n                </bb-content-outline>\n              </bb-file-upload>\n            </div>\n            <div ng-switch-when="false">\n              <bb-content-outline\n                ng-if="::$root.bbOffcanvasOpened || undefined"\n                show-content-import-progress="{{::courseOutline.showContentImportProgress}}"\n                context-area="courseOutline.contextArea"\n                is-first="true"\n                contents="courseOutline.rootNode.children"\n                load-more-children="courseOutline.loadMoreChildren"\n                parent-folder="courseOutline.rootNode"\n                on-move-handler="courseOutline.moveItem"\n                on-move-into-folder-handler="courseOutline.moveItemIntoFolder"\n                can-move="courseOutline.canMove"\n                can-create="courseOutline.rootNode.children.canCreate()"\n                can-copy-import="courseOutline.canCopyOrImport()"\n                bb-key-hide-ftue="{{courseOutline.addContentGuidanceKey}}">\n              </bb-content-outline>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div id="roster-content">\n    <div ui-view></div>\n  </div>\n  <div ng-if="courseOutline.isStudentMembership()" bb-feature-toggle="courseNotice" remove-from-dom="true">\n    <bb-notice course-id="{{courseOutline.courseId}}" bb-notice-class="{{::courseOutline.courseColorClass}}"/>\n  </div>\n\n  <bb-content-import-status-bar display="courseOutline.showImportCopyStatusBar"\n                                task-id="courseOutline.importCopyTaskId"\n                                ng-attr-import-task-id="{{::courseOutline.workingImportCopyTaskId}}"\n                                course-id="courseOutline.currentCourse.id"></bb-content-import-status-bar>\n</div>\n'},IbA1:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-away",use:"icon-medium-away-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-away"><path d="M23 12c0 6.0751-4.9249 11-11 11S1 18.0751 1 12 5.9249 1 12 1s11 4.9249 11 11z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 5v7l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},IiJs:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var o=n("mrSG"),s=n("IbG+"),r=n("pjml"),i="ultra.services.collabUltra",a="collabUltra",c=function(){function e(e,t,n,o,s,r,i){this.$q=e,this.$compile=t,this.$rootScope=n,this.$timeout=o,this.CourseModel=s,this.CollabUltraModel=r,this.$sce=i}return e.prototype.getCollabB2Info=function(){return this.collabB2InfoPromise=this.collabB2InfoPromise||this.CollabUltraModel.$build().getCollabUltraInfo()},e.prototype.getAllCollabSessions=function(e){return this.CourseModel.$new(e).collabUltra.getAllCollabSessions()},e.prototype.enableCourseRoom=function(e,t){return this.CourseModel.$new(e).collabUltra.enableCourseRoom(t)},e.prototype.disableCourseRoom=function(e,t){return this.CourseModel.$new(e).collabUltra.disableCourseRoom(t)},e.prototype.getLaunchUrl=function(e,t){return this.CourseModel.$new(e).collabUltra.sessions.$new(t).getLaunchUrl()},e.prototype.getCourseCollab=function(e){return this.CourseModel.$new(e).collabUltra.getCourseCollabInfo()},e.prototype.launchDiscussionSession=function(e,t,n){return this.CourseModel.$new(e).collabUltra.launchDiscussionSession(t,n)},e.prototype.getCollabSessionStatus=function(e,t){var n=this;return this.getCollabB2Info().then(function(t){return 200===t.$response.status?n.CourseModel.$new(e).collabUltra.sessions.$fetch().$allow([403,500,504]).$asPromise():n.$q.reject()}).then(function(o){return 200===o.$response.status?n.CourseModel.$new(e).groups.$new(t).collabSession.$fetch({expand:"sessionInstances"}).$allow(["400-599"]).$asPromise().then(function(e){return e.filter(function(e){return e.sessionInstances&&e.sessionInstances.length>0}).length>0}):n.$q.when(null)},function(){return n.$q.when(null)})},e.$inject=["$q","$compile","$rootScope","$timeout",r.o.serviceName,r.l.serviceName,"$sce"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e)}(c);s.module(i,[r.R]).service(a,c)},J4qU:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var o=n("mrSG"),s=n("pjml"),r=n("0JpG"),i=n("7pcG"),a=n("Fvsw"),c="ultra.components.services.calendar.schedule",l="bbSchedule",u=function(){function e(e,t,n){this.localize=e,this.calendar=t,this.context=n}return e.prototype.getWeeklyRepeatLabel=function(e,t,n,o){var i,a=this;if(void 0===n&&(n="medium"),!s.i.RecurFrequency.Weekly.isEqualTo(e.recurRules.freq))return"";switch(n.trim().toLowerCase()){case"short":i=r.ILocaleDateFormat.ShortWeekday;break;case"medium":i=r.ILocaleDateFormat.MediumWeekday;break;case"long":i=r.ILocaleDateFormat.LongWeekday;break;default:i=r.ILocaleDateFormat.MediumWeekday}return e.recurRules.byWeekDay.map(function(e){return s.i.RecurWeekDay.parse(e)}).filter(function(e){return!!e}).sort(function(e,t){return e.dayOfWeek-t.dayOfWeek}).map(function(e){return a.localize.formatDateSync(a.calendar.getSampleDateForDayOfWeek(e.dayOfWeek),i)}).join(this.localize.translateSync({locale:o,key:t,options:{noWrap:!0}}))},e.prototype.getNextMonthlyEventDate=function(e,t){return this.updateDate(e,t,this.calendar.getNextEventForMonthlyRepeat(e.recurRules,this.context.getServerTime()))},e.prototype.getNextDailyEventDate=function(e,t){return this.updateDate(e,t,this.calendar.getNextEventForDailyRepeat(e.recurRules,this.context.getServerTime()))},e.prototype.updateDate=function(e,t,n){var o=t[e.itemSourceId];return o&&o.getTime()===n.getTime()||(t[e.itemSourceId]=n,o=n),o},e.$inject=[r.serviceName,i.b,a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e)}(u);angular.module(c,[i.a,a.a,r.moduleName]).service(l,u)},JbZT:function(e,t,n){},LCXh:function(e,t){e.exports='<div id="panel-export" bb-load-bundle="features/course/exports/course-export" bb-cache-compilation="course-exports">\n  <div class="panel-wrap">\n    <header class="panel-header simple-header">\n      <div class="panel-titles-container">\n        \x3c!-- sub-title should be according to course --\x3e\n        <div class="panel-sub-title">({{::course.model.courseId + \' \\u2022 \' + course.model.name}})</div>\n        <div class="black-header-contents">\n          <button class="left-off-canvas-toggle menu-toggle standard-button dark-background"\n                  analytics-id="course.export.exportPanel.base.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n          <h1 class="panel-title" bb-translate="course.export.exportPanel.head"></h1>\n        </div>\n      </div>\n    </header>\n    <div class="panel-content">\n      <div class="com-export-package">\n        <header>\n          <span class="title" bb-translate="course.export.exportPanel.title"></span>\n          <button id="add-export-package"\n                  class="anchor btn-export"\n                  ng-if="courseExport.scheduledTasks.length === 0"\n                  ng-click="courseExport.openExportModal()"\n                  bb-translate-attrs="{\'aria-label\':\'course.export.aria-label.add-export-package\'}"\n                  analytics-id="course.export.exportPanel.openExportModal.button">\n            <bb-svg-icon size="medium" icon="export"></bb-svg-icon>\n          </button>\n        </header>\n\n        <ul class="list-export-tasks">\n          <li class="in-progress" task-id="{{exportTask.taskId}}" ng-repeat="exportTask in courseExport.scheduledTasks">\n            <div class="export-progress">\n              <span class="description">\n                <span bb-translate="course.export.exportPanel.inProgress"></span>\n                <span class="progress-status" ng-if="exportTask.startDate != null">\n                  <span bb-translate="course.export.exportPanel.started"></span>\n                  <bb-date format="Short">exportTask.startDate</bb-date>\n                </span>\n                <span class="progress-status" ng-if="exportTask.startDate == null">\n                  <span bb-translate="course.export.exportPanel.justStarted"></span>\n                </span>\n              </span>\n              <button class="anchor cancel-export"\n                      ng-if="exportTask.permissions.delete && false"\n                      ng-click="courseExport.deleteExportTask(exportTask)"\n                      bb-translate-attrs="{\'aria-label\':\'course.export.aria-label.delete-in-progress\'}"\n                      analytics-id="course.export.exportPanel.cancelExport.button">\n                <bb-svg-icon size="small" icon="add"></bb-svg-icon>\n              </button>\n            </div>\n          </li>\n        </ul>\n\n        <ul class="list-archive-export">\n          <li class="completed" ng-repeat="completeTask in courseExport.courseExports">\n            <a class="file-link"\n               ng-href="{{courseExport.getAbsoluteUrl(completeTask.openUrl)}}"\n               analytics-id="course.export.exportPanel.completedTask.url.link">\n              <bb-svg-icon size="large" icon="zip" color="true"></bb-svg-icon>\n              <span class="description">\n                <span class="file-name">{{::completeTask.cxFileId}}.zip</span>\n                <span class="date-created">\n                  <span bb-translate="course.export.exportPanel.created"></span> - <bb-date format="Short">completeTask.createDate</bb-date>\n                </span>\n              </span>\n            </a>\n            <a href="javascript:void(0);"\n               class="file-delete js-delete-archive"\n               bb-confirmation-needed="resource/x-bb-course-archive"\n               show-type="always"\n               ng-click="courseExport.deleteCourseExport(completeTask)"\n               role="button"\n               confirmation-course-org-token-resolver\n               bb-translate-attrs="{\'aria-label\':\'course.export.aria-label.delete-completed\'}"\n               translate-attrs-values="{\'fileName\': completeTask.cxFileId + \'.zip\'}"\n               analytics-id="course.export.exportPanel.deleteCourseExport.link">\n              <bb-svg-icon size="small" icon="trash"></bb-svg-icon>\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n    \x3c!-- End: com-export-package --\x3e\n  </div>\n</div>\n'},MGIy:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-messages",use:"icon-medium-messages-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-messages"><path d="M1 4v16h22V4H1z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 4l8.4419 7.6744L12 14l2.5581-2.3256L23 4M23 20c-3.3676-3.5207-5.5754-5.3288-8.4418-8.3256M1 20l8.4419-8.3256" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},NDLj:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return h});var o=n("mrSG"),s=n("IbG+"),r=n("z6Q5"),i=n("0JpG"),a=n("Vsv2"),c=n("pjml"),l=n("emI2"),u=n("OBf2"),d=n("aHpC"),p="ultra.service.kloudless",h="kloudless",m=function(){function e(e,t,n,o,s,r,i){this.$q=e,this.$timeout=t,this.batchService=n,this.bbLocalize=o,this.cloudDrive=s,this.SystemPreferenceModel=r,this.preferences=i,this.initializeRequired=!0}return e.prototype.getInstitutionAccount=function(){var e=this,t=new u.a;return t.type="disabled",this.batchService.performBatch(function(){return e.$q.all([e.SystemPreferenceModel.$find("institution_cloud_storage_provider_type").$allow([404]).$asPromise(),e.SystemPreferenceModel.$find("institution_cloud_storage_domain").$allow([404]).$asPromise()]).then(function(n){return n&&(t.type=e.getPreferenceValueByKey(n,"institution_cloud_storage_provider_type"),t.domain=e.getPreferenceValueByKey(n,"institution_cloud_storage_domain")),t})})},e.prototype.getKloudlessAccounts=function(){var e=[];return this.preferences.getPreference(u.c,"[]").then(function(t){return t&&t.value&&(e=JSON.parse(t.value)),e})},e.prototype.getConnectedInstitutionAccount=function(e,t){var n=null;return t&&t.forEach(function(t){t.service===e.type&&t.name.endsWith(e.domain)&&(n=t)}),n},e.prototype.getCloudStorageIcon=function(e){switch(e){case"gdrive":return"gdrive";case"onedrivebiz":return"onedrivebiz";case"box":return"box";case"dropbox":return"dropbox";case"skydrive":return"skydrive";default:return""}},e.prototype.authenticateCallBack=function(e){var t=this;if(e.error)throw new Error("Unable to authenticate account: "+e.error);var n={id:e.account.id,name:e.account.account,service:e.account.service,bearer_token:{key:e.access_token}};this.preferences.getPreference(u.c).then(function(e){var o=JSON.parse(e.value).filter(function(e){return e.id!==n.id});o.push(n),t.preferences.setPreference(u.c,JSON.stringify(o)),t.accountsInitialized.resolve()}).catch(function(){var e=[];e.push(n),t.preferences.setPreference(u.c,JSON.stringify(e)),t.accountsInitialized.resolve()})},e.prototype.launchAuthenticator=function(e,t){var n=this;this.cloudDrive.isCloudServiceAvailable(a.a.KLOUDLESS).then(function(){var o=n.cloudDrive.cloudDriveStorage[a.a.KLOUDLESS.toString()],s=n.getKloudlessInfo(),r=n.authenticateCallBack.bind(n);if(o.authenticator){var i="";i=e?t:"gdrive onedrivebiz box dropbox skydrive",o.authenticator(null,{client_id:s.client_id,base_url:s.base_url,scope:i},r).launch()}else console.error("Authenticator is not available")})},e.prototype.initAuthenticationDeferred=function(){return!this.initializeRequired&&this.accountsInitialized||(this.accountsInitialized=this.$q.defer(),this.initializeRequired=!1),this.accountsInitialized},e.prototype.launchInstitutionAccount=function(e,t){var n=this;return this.initializeRequired=!0,this.initAuthenticationDeferred(),this.getKloudlessAccounts().then(function(o){var s=n.getConnectedInstitutionAccount(e,o);null===s?n.launchAuthenticator(!0,e.type):n.launchToService(s,t)}),this.accountsInitialized.promise},e.prototype.connectPersonalAccount=function(){return this.initializeRequired=!0,this.initAuthenticationDeferred(),this.launchAuthenticator(!1,void 0),this.accountsInitialized.promise},e.prototype.getPreferenceValueByKey=function(e,t){var n=e.find(function(e){return e.key===t});return n?n.value:null},e.prototype.deleteKloudlessAccount=function(e){var t=this;return this.getKloudlessAccounts().then(function(n){var o=n.filter(function(t){return t.id!==e});return t.preferences.setPreference(u.c,JSON.stringify(o)),o})},e.prototype.getOneDriveLink=function(e){var t=this.$q.defer(),n=this.getKloudlessInfo().base_url+"/v1/accounts/"+e.id+"?retrieve_tokens=true";return fetch(n,{method:"GET",headers:{Authorization:"Bearer "+e.bearer_token.key}}).then(function(e){e.json().then(function(e){try{var n=JSON.parse(e.token).oauth.split("."),o=JSON.parse(window.atob(n[1]));t.resolve(o.aud)}catch(e){t.reject(e.message)}})}).catch(function(e){t.reject(e.message)}),t.promise},e.prototype.launchToService=function(e,t){switch(this.initAuthenticationDeferred(),e.service){case"gdrive":this.getInstitutionAccount().then(function(t){if("gdrive"===t.type&&e.name.endsWith(t.domain)){var n=e.name.substring(e.name.indexOf("@")+1);window.open("https://drive.google.com/a/"+n,"_blank")}else window.open("https://drive.google.com/drive/u/0/","_blank")});break;case"onedrivebiz":t?window.open(t,"_blank"):this.getOneDriveLink(e).then(function(e){window.open(e,"_blank")}).catch(function(e){console.error(e)});break;case"skydrive":window.open("https://onedrive.live.com","_blank");break;case"dropbox":window.open("https://www.dropbox.com/h","_blank");break;case"box":window.open("https://www.box.com","_blank")}},e.prototype.getKloudlessInfo=function(){return this.cloudDrive.cloudDriveStorage[a.a.KLOUDLESS.toString()].getKloudlessInfo()},e=o.__decorate([o.__param(0,Object(d.b)("$q")),o.__param(1,Object(d.b)("$timeout")),o.__param(2,Object(d.b)(r.b)),o.__param(3,Object(d.b)(i.serviceName)),o.__param(4,Object(d.b)(a.c)),o.__param(5,Object(d.b)(c.wb.serviceName)),o.__param(6,Object(d.b)(l.c))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e)}(m);s.module(p,[c.R,l.b,r.a]).service(h,m)},Op6L:function(e,t,n){"use strict";n.d(t,"a",function(){return d});n("YHbk");var o=n("IbG+"),s=n("oVrE"),r=n("tqR7"),i=n("7+Tq"),a=n("+4Px"),c=n("pjml"),l=n("m4MG"),u=n("ZzYr"),d="ultra.components.directives.multiUserUsercard",p=function(){function e(e,t,n){var o=this;this.scope=e,this.element=t,this.dropdownInit=n,this.isCardOpen=!1,this.showAllUsers=!1,this.fakeMultiUser=s.a(),this.userType="default",this.userType=this.scope.userType&&this.scope.userType()?this.scope.userType():this.userType;var r=this.scope.$root.$on("bb-multi-user-usercard-opened",function(){o.isCardOpen=!1});this.element.on("opened.fndtn.dropdown",".multi-user-usercard-list",function(){o.dropdownInit(o.element,o.scope);var e=o.element.find(".multi-user-usercard");o.element.find(".multi-user-usercard-list").css({left:e[0].offsetLeft,top:e.outerHeight()+e[0].offsetTop})}.bind(this)),this.scope.$on("$destroy",function(){r()})}return Object.defineProperty(e.prototype,"visibleUsersCount",{get:function(){return void 0!==this._visibleUsersCount?this._visibleUsersCount:this.scope.users.length>4?4:this.scope.users.length},enumerable:!0,configurable:!0}),e.prototype.showMoreButton=function(){return!this.showAllUsers&&this.hiddenUsersCount()>0},e.prototype.showAll=function(){this.showAllUsers=!0,this._visibleUsersCount=this.scope.users.length,this.element.find(".multi-user-usercard-list").focus()},e.prototype.hiddenUsersCount=function(){return this.scope.users.length-this.visibleUsersCount},e.prototype.toggleCard=function(){this.isCardOpen?this.closeCard():this.openCard()},e.prototype.openCard=function(){this.scope.$root.$broadcast("bb-multi-user-usercard-opened"),this.isCardOpen=!0},e.prototype.closeCard=function(){this.isCardOpen=!1,this.element.find(".usercard-trigger button").focus()},e.prototype.handleKeydown=function(e){e.keyCode===a.g&&(e.stopPropagation(),this.closeCard())},e.prototype.handleClickOutside=function(){this.closeCard()},e.prototype.isUserCourseAvailable=function(e){var t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])},e.$inject=["scope","element",i.b],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=l,this.scope={listId:"@?",users:"=",userType:"&?",noAvatar:"&",view:"&",groupUsersTitle:"&?",listHeader:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectedUser:"=?",selectedText:"@?",courseName:"@?"},this.link=function(e,n,o){e.multiUserUsercard=t.$injector.instantiate(p,{scope:e,element:n,attrs:o})}}return e.$inject=["$injector"],e}();o.module(d,[c.R,r.a,i.a,u.a]).directive("bbMultiUserUsercard",["$injector",function(e){return e.instantiate(h)}])},QIw5:function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p});var o=n("mrSG"),s=n("IbG+"),r=n("oSB+"),i=n.n(r),a=n("pjml"),c=n("TnpK"),l=n("Fvsw"),u="ultra.components.services.routing",d="routing",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.Already=new t("Already"),t.Failure=new t("Failure"),t.Unavailable=new t("Unavailable"),t}(i.a),h=function(){function e(e,t,n){this.CourseModel=e,this.ultraState=t,this.contextService=n}return e.prototype.goToPostRegistrationPage=function(e){var t=this;"succeeded"!==e.enrollStatusCode&&"alreadyEnrolledInCourse"!==e.enrollStatusCode||!e.courseId?e.courseId&&"invalidInput"===e.enrollStatusCode?this.ultraState.go("base.courses",{enrollmentMessage:p.Failure}):this.contextService.getLandingPage().then(function(e){return t.ultraState.go(e)}):this.CourseModel.$find(e.courseId,{fields:"isAvailable"}).$then(function(n){n.isAvailable?"succeeded"===e.enrollStatusCode?t.ultraState.goPeekState("course.outline",{courseId:e.courseId}):"alreadyEnrolledInCourse"===e.enrollStatusCode&&t.ultraState.goPeekState("course.outline",{courseId:e.courseId,enrollmentMessage:p.Already}):t.ultraState.go("base.courses",{enrollmentMessage:p.Unavailable})})},e.$inject=[a.o.serviceName,c.d,l.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e)}(h);s.module(u,[c.b]).service(d,h)},Qile:function(e,t,n){"use strict";n.r(t);n("cCP0"),n("vNjs"),n("q5SQ"),n("69JZ"),n("wYJc"),n("XBng"),n("Gq5k"),n("RSBI"),n("VlWN"),n("CNuu"),n("jLPU"),n("JHPD"),n("WMz6"),n("7SkM"),n("tD7f"),n("Do0N"),n("0qUt"),n("Axc5"),n("1llZ"),n("TGb3"),n("CTYn"),n("Xhfc"),n("v68R"),n("TXPF"),n("5c2T"),n("mCRl"),n("H4qw"),n("tmuc"),n("oST1"),n("Ws0a"),n("A9M7"),n("7LUu"),n("wAqU");var o=n("IbG+"),s=n("kxl5"),r=n("mrSG"),i=n("0fFc"),a=n.n(i),c=n("EVdn"),l=n("0JpG"),u=n("TnpK"),d=n("Qbdf"),p=n("X455"),h=n("OaxL"),m=n("go4a"),v=n("yC9S"),b=n("g66W"),f="ultra.course.announcement-slide",g=angular.module(f,[u.b]),C=(function(){function e(e,n,o,s,r,i,a){var c=this;this.$element=e,this.$ngRedux=n,this.$scope=o,this._bbLocalize=s,this.contextCourse=r,this.contextCourseMembership=i,this.streamEntryLoader=a,this.fetchAnnouncementSlides=function(){var e=c.contextCourse.courseId;return c.streamEntryLoader.getAllEntries().then(function(n){var o=[];return n.forEach(function(n){e===n.courseId&&"announcement"===n.icon&&n.title&&n.title.trim().length>0&&o.push({id:n.body.content.sourceId,title:n.title,body:{rawText:t.extractBodyText(n.body.content.fullText)},isDraft:!1,startDateRestriction:n.notificationCreationDate.toISOString(),courseId:e,sourceEntry:n})}),o})},this.dismissAnnouncementItem=function(e){return e.remove().then(function(){c.streamEntryLoader.deleteEntries([e.id]),c.streamEntryLoader.refreshEntries(!0)})}}var t;t=e,e.prototype.$postLink=function(){a.a.renderAnnouncementSlide(this.$element[0],this.$ngRedux,this._bbLocalize.getLocale(this.$scope),this._bbLocalize.intl,this._bbLocalize.frmt,m.a(this.contextCourseMembership.courseMembership),this.fetchAnnouncementSlides,this.dismissAnnouncementItem)},e.prototype.$onDestroy=function(){a.a.destroyAnnouncementSlide(this.$element[0])},e.$inject=["$element","$ngRedux","$scope",l.serviceName,d.e,p.d,h.d],e.extractBodyText=function(e){if(e){var t=c("<div></div>").html(e).find(".vtbegenerated"),n=t&&t[0]?t[0].innerHTML:e;return b.c(n)}return e},e=t=r.__decorate([Object(v.a)({module:g,componentName:"announcementSlide",template:'<div class="announcement-slide"></div>'})],e)}(),n("TB6y")),y=n("Sgjf"),k=n("Vsv2"),w=n("Dt14"),S=n("IiJs"),x=n("e7Kn"),I=n("Fvsw"),E=n("ZzN+"),T=n("m+3A"),O=n("AI52"),M=n("kkIh"),$=n("tcaZ"),A=n("0+Qs"),D=n("NDLj"),N=n("pjml"),L=n("07uq"),P=n("Op6L"),B=(n("7Q+E"),n("JbZT"),n("grZf"),n("IkJm"),n("i/RN"),n("Wxlw"),n("3POK"),n("Ar3F"),n("wOXW"),n("9ekn"),n("yElV"),n("IxW8"),n("A+z8"),n("/LJd"),n("uXMc"),n("nqDy"),n("krrc"),n("BqMB"),n("gN/S"),n("d2Dl"),n("skKa"),n("AT0I"),n("12mu")),F=n("wd/R"),_=n("nYZ0"),U=n("oSB+"),j=n.n(U),z=n("KtUo"),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.assignmentDue=new t("AS:DUE"),t.assignmentOverdue=new t("AS:OVERDUE"),t.ultraAssignmentDue=new t("UA:DUE"),t.ultraAssignmentOverdue=new t("UA:OVERDUE"),t}(j.a);var G=function(e,t,n){return e.filter(function(e){if(t)return R.assignmentOverdue.isEqualTo(e.type)||R.ultraAssignmentOverdue.isEqualTo(e.type);var o=e.contextualDate||e.notificationCreationDate;return o&&0===z.a(o,n)&&(R.assignmentDue.isEqualTo(e.type)||R.ultraAssignmentDue.isEqualTo(e.type))})},K=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.testDue=new t("TE:DUE"),t.testOverdue=new t("TE:OVERDUE"),t}(j.a);var q=function(e,t,n){return e.filter(function(e){if(t)return K.testOverdue.isEqualTo(e.type);var o=e.contextualDate||e.notificationCreationDate;return o&&0===z.a(o,n)&&K.testDue.isEqualTo(e.type)})},H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.calendar=new t("bb_calendar"),t}(j.a);var V=function(e,t){return e.filter(function(e){return H.calendar.isEqualTo(e.type)&&e.body&&e.body.content&&e.body.content.eventStartDate>=t})},W=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.couseAnnouncement=new t("AN:AN_AVAIL"),t}(j.a);var Y=function(e){return e.filter(function(e){return e.isNew&&W.couseAnnouncement.isEqualTo(e.type)})},J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.message=new t("bb_message"),t}(j.a);var Q=function(e,t,n){var o=F(t).subtract(14,"day").toDate();return e.filter(function(e){var t=z.c(e);return t>o&&t>n&&J.message.isEqualTo(e.type)&&e.isImportant})},X=function(){function e(e,t,n){this.context=e,this.streamEntryLoader=t,this.content=n,this.noticeEntries=[]}return e.prototype.clearNoticeEntries=function(){this.noticeEntries=[]},e.prototype.loadNoticeEntries=function(e,t){var n=this;return this.clearNoticeEntries(),this.streamEntryLoader.getAllEntries().then(function(o){return n.noticeEntriesHandler(o,e,t)})},e.prototype._filterEntries=function(e,t,n,o){switch(t){case 0:return Y(e);case 1:return G(e,!0);case 2:return q(e,!0);case 3:return G(e,!1,n);case 4:return q(e,!1,n);case 5:return V(e,n);case 6:return Q(e,n,o);default:return[]}},e.prototype.noticeEntriesHandler=function(t,n,o){var s=this,r=t.filter(function(e){return n===e.courseId});if(r.length>0){for(var i=this.context.getServerTime(),a=new Array(e.MAX_TYPES+1),c=e.NOTICE_SHOW_MAX_LENGTH,l=0;l<=e.MAX_TYPES&&c>0;l++)a[l]=this._filterEntries(r,l,i,o),a[l].length>0&&(c-=1,a[l].length>1&&a[l].sort(function(e,t){return(e.contextualDate||e.notificationCreationDate)-(t.contextualDate||t.notificationCreationDate)}));a[0].length>1&&(a[0]=a[0].reverse());for(var u=0;u<l;u++)a[u].length>0&&this.noticeEntries.push(a[u][0]);c=e.NOTICE_SHOW_MAX_LENGTH-this.noticeEntries.length;for(u=0;u<l&&c>0;u++)for(var d=1;d<a[u].length&&c>0;d++)this.noticeEntries.push(a[u][d]),c-=1;return this.noticeEntries.forEach(function(e){return e.title=s.content.truncateDescription(e.title)}),this.noticeEntries}},e.NOTICE_SHOW_MAX_LENGTH=3,e.MAX_TYPES=6,e.$inject=[I.b,h.d,_.d],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(X);o.module("ultra.service.notice.loader",[I.a,h.c,_.c]).service("noticeEntryLoader",X);var Z=n("lHMO"),ee=n("Qtwu"),te="components.directives.notice.",ne="lastShow.date",oe=function(){function e(e,t,n,o){var s=this;this.scope=e,this.$modal=t,this.noticeService=n,this.bbContext=o,this.modalDismiss=function(){s.modalInstance.dismiss()},this.today=F(o.getServerTime()),this.bbContext.getPreference(te+ne+e.courseId.replace(/\_/g,"."),null).then(function(t){t.value&&!F(t.value).isBefore(s.today,"days")||s.noticeService.loadNoticeEntries(e.courseId,t.value&&F(t.value).toDate()).then(function(t){t&&t.length>0&&s.bbContext.setPreference(te+ne+e.courseId.replace(/\_/g,"."),o.getServerTime().toISOString()).then(function(){s.modalInstance=s.$modal.open({template:ee,scope:s.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/notice")}]}})})})})}return e.prototype.getNotices=function(){return this.noticeService.noticeEntries},e.$inject=["scope","$modal","noticeEntryLoader",I.b],e}(),se=function(){function e(e,t,n,o){var s=this;this.$injector=e,this.$q=t,this.$modal=n,this.bbLocalize=o,this.restrict="E",this.scope={courseId:"@",bbNoticeClass:"@?"},this.link=function(e){s.bbLocalize.loadBundle("features/base/stream/base-stream"),e.notice=s.$injector.instantiate(oe,{$q:s.$q,scope:e,$modal:s.$modal})}}return e.$inject=["$injector","$q",B.b,l.serviceName],e}();o.module("ultra.directives.notice",[l.moduleName,B.a,Z.b,"ultra.service.notice.loader"]).directive("bbNotice",["$injector",function(e){return e.instantiate(se)}]);var re=n("JNtI"),ie=n("3FFP"),ae=n("zByx"),ce=n("+e2k"),le=n("lEL+"),ue=n("hkqm"),de=n("1zDl"),pe=n("+brj"),he=n("ZzYr"),me=n("cs5G"),ve=n("GHcF");n.d(t,"moduleName",function(){return be}),n.d(t,"controllerName",function(){return fe}),n.d(t,"template",function(){return ve});var be="ultra.course.contents",fe=M.b;o.module(be,[s.a,f,y.a,k.b,w.a,S.a,I.a,E.a,O.a,T.moduleName,x.b,$.b,A.a,D.a,N.R,L.a,P.a,"ultra.directives.notice",re.b,ie.b,ae.a,ce.a,le.a,ue.a,u.b,C.a,de.a,pe.b,he.a,me.a]).controller(M.b,M.a)},Qtwu:function(e,t){e.exports='<bb-modal class="notice notification {{bbNoticeClass}}"\n          modal-title-key="components.directives.notice.modalTitle"\n          analytics-id-tag-prefix="components.directives.notice">\n  <div name="modal-contents">\n    <ul class="notifications" ng-repeat="item in notice.getNotices()">\n      <li class="element-card">\n        <bb-avatar ng-if="!!(item.entrySpecificData && item.entrySpecificData.streamUser)"\n                   user="item.entrySpecificData.streamUser" auto-update="true"></bb-avatar>\n        <div ng-if="!(item.entrySpecificData && item.entrySpecificData.streamUser)" class="element-image">\n          <bb-svg-icon icon="{{::item.icon}}" size="large" color="true"></bb-svg-icon>\n        </div>\n\n        <div class="element-details" >\n          <div class="context"></div>\n          <div class="name">\n            <ng-switch on="(item.body.stateRef && \'linkToPeekState\') ||\n                     (item.body.externalRef && \'linkToExternalUrl\') || \'doNotLink\'">\n              <a ng-switch-when="linkToPeekState"\n                 ng-click="notice.modalDismiss()"\n                 bb-peek-sref="{{item.body.stateRef}}"\n                 ng-bind-html="item.title"\n                 analytics-id="components.directives.notice.peek.state.link"></a>\n              <a ng-switch-when="linkToExternalUrl" ng-click="notice.modalDismiss()"\n                 target="{{item.body.externalRef.target ? item.body.externalRef.target : _self}}"\n                 ng-bind-html="item.title"\n                 ng-href="{{item.body.externalRef.href}}"\n                 analytics-id="components.directives.notice.external.url.link"></a>\n              <span ng-switch-when="doNotLink" ng-bind-html="item.title"></span>\n            </ng-switch>\n          </div>\n          <div class="content">\n            <bb-stream-entry-body type="item.body.type" content="item.body.content"></bb-stream-entry-body>\n          </div>\n        </div>\n      </li>\n    </ul>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button dismiss-message js-primary-button"\n          ng-click="notice.modalDismiss()"\n          analytics-id="components.directives.notice.dismiss">\n    <bb-translate>components.directives.notice.dismiss</bb-translate>\n  </button>\n</bb-modal>\n'},RSBI:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-disable",use:"icon-small-disable-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-disable"><path d="M1 8c0-3.866 3.134-7 7-7v0c3.866 0 7 3.134 7 7v0c0 3.866-3.134 7-7 7v0c-3.866 0-7-3.134-7-7v0zM12.5 3.5l-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},SfHa:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-location",use:"icon-medium-location-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-location"><path d="M20 9c0 4.4183-8 14-8 14S4 13.4183 4 9s3.5817-8 8-8 8 3.5817 8 8z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="12" cy="9" r="4" stroke-width="2" /></symbol>'});s.add(r);e.exports=r},Sgjf:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n("mrSG"),s=(n("Zeij"),n("MGIy"),n("cueX"),n("EVdn")),r=n("IbG+"),i=n("jciN"),a=n("0JpG"),c=n("fYJU"),l=n("pjml"),u=n("+4Px"),d=n("OvxF"),p=n("lUN/"),h=n("TnpK"),m=n("WKjN"),v=n("aHpC"),b="ultra.components.directives.usercard",f=function(){function e(e,t,n,o,s,r,i,a,c,l){this.$modal=e,this.$q=t,this.scope=n,this.element=o,this.attrs=s,this.bbLocalize=r,this.CourseModel=i,this.contextUser=a,this.$userModelService=c,this.ultraState=l,this.current=this.contextUser.userModel,null==this.scope.autoUpdate&&(this.scope.autoUpdate=!0),this.scope.showcard=!1,p.a(),this.$userModelService.$mixHook("after-save",function(){this.id===n.user.id&&(n.userNames={givenName:this.givenName,familyName:this.familyName})},n)}return e.prototype.canSendMessage=function(){var e=this.scope.canSendMessage;return!e||e()},e.prototype.hasDueDateException=function(){var e=this.scope.hasDueDateException;return!!e&&e()},e.prototype.canEditDueDateException=function(){var e=this.scope.canEditDueDateException;return!!e&&e()},e.prototype.sendMessage=function(){this.ultraState.goPeekState(this.getMessagePeekState(),{courseId:this.scope.courseId,recipientIds:this.scope.user.id})},e.prototype.getMessagePeekState=function(){return this.scope.messagePeekState||"message"},e.prototype.getUserNameLabel=function(){return this.userName=this.scope.userNames,this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.usercard.ariaButtonLabel",params:{user:this.userName},noWrap:!0,noEscape:!0})},e.prototype.keyDown=function(e){if(e.keyCode===u.t&&e.preventDefault(),this.scope.showcard){var t=!1;if(e.keyCode===u.g)t=!0;else if(e.keyCode===u.u){var n=s(".usercard").find(":tabbable");t=n.length<1||(!(!e.shiftKey||!s(".usercard-clickable").is(":focus"))||(e.shiftKey?document.activeElement===n[0]:document.activeElement===n[n.length-1]))}t&&(e.stopImmediatePropagation(),this.hide())}},e.prototype.hide=function(){this.scope.showcard=!1,this.toggleFloatingContainer(),this.element.find(".usercard-trigger").focus()},e.prototype.show=function(){this.scope.showcard=!!this.canShow(),this.toggleFloatingContainer()},e.prototype.toggleFloatingContainer=function(){s(".floating-column-container").css("overflow",this.scope.showcard?"visible":"hidden")},e.prototype.canShow=function(){return!!this.scope.user&&!!this.scope.user.id&&!this.isSameUser()},e.prototype.isSameUser=function(){return!(!this.current||!this.scope.user)&&this.scope.user.id===this.current.id},e.prototype.getCourseRoleLocalizeId=function(){return this.scope.inactive&&this.scope.inactive()?this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.usercard.unavailable"}):this.scope.courseRole()},e.prototype.sendMessageViaSpaceBar=function(e){this.scope.showcard&&e.keyCode===u.t&&(e.stopPropagation(),this.sendMessage())},e.$inject=["$modal","$q","scope","element","attrs",a.serviceName,l.o.serviceName,c.b,l.Qb.serviceName,h.d],o.__decorate([Object(v.d)("locale","userNames")],e.prototype,"getUserNameLabel",null),e}(),g=function(){function e(e,t,n){var o=this;this.$injector=e,this.bbLocalize=t,this.ultraState=n,this.restrict="E",this.template=m,this.scope={user:"=",panel:"@?",courseId:"@",messagePeekState:"@?",courseRole:"&",usercardShow:"@",recipientIds:"=",canSendMessage:"&?",hasDueDateException:"&?",canEditDueDateException:"&?",membershipId:"=?",inactive:"&?",autoUpdate:"=?"},this.link=function(e,t,n){e.attr=n,e.bbUsercard=o.$injector.instantiate(f,{scope:e,element:t,attrs:n}),e.user&&(e.userName=o.bbLocalize.formatUsernameSync(e.user,a.ILocaleUsernameFormat.Short,e,{noWrap:!0}),e.userNames=e.user)}}return e.$inject=["$injector",a.serviceName],e}();r.module(b,[i.a,a.moduleName,l.R,c.a,d.a,h.b]).directive("bbUsercard",["$injector",function(e){return e.instantiate(g)}])},TXPF:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-course-complete",use:"icon-large-course-complete-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-large-course-complete"><path fill="none" stroke-linecap="round" stroke-miterlimit="10" d="M20.5 13.5V6.6M17.5.5h-13c-1.7 0-3 1.4-3 3v17c0 1.6 1.3 3 3 3h8" /><path fill="none" stroke-linecap="round" stroke-miterlimit="10" d="M20.5 6.5h-16c-1.7 0-3-1.4-3-3v0c0-1.6 1.3-3 3-3h16M4.5 4.5h16M4.5 2.5h16" /><path fill="none" stroke-miterlimit="10" d="M4.5 6.5v17" /><path fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M13.5 20l3.5 3.5 5.5-8.5" /><path fill="none" stroke-miterlimit="10" d="M16.5 13.5h-8c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1h8c.5 0 1 .4 1 1v2c0 .6-.5 1-1 1z" /></symbol>'});s.add(r);e.exports=r},VlWN:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-import",use:"icon-small-import-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-import"><path d="M15 9.091V15H1V1h5.909M15 1l-9 9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 7v3h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},W8FL:function(e,t){e.exports='<bb-modal class="js-course-status-modal-{{currentCourseStatus.toString()}} notification" modal-title-key="{{currentCourseStatus.getModalTitle()}}"\n          modal-dismiss-key="{{currentCourseStatus.getModalDismissText()}}"\n          analytics-id-tag-prefix="{{currentAnalyticsId}}">\n  <div name="modal-contents">\n    <p bb-translate="{{currentCourseStatus.getModalText()}}"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button ng-if="currentCourseStatus.getPrimaryButtonText()" \n            ng-click="$parent.$close(currentCourseStatus.getPrimaryButtonStatus())" \n            class="button js-primary-button js-course-status-{{currentCourseStatus.getPrimaryButtonStatus()}}"\n            analytics-id="{{currentAnalyticsId}}.primaryButton.button">\n      <span bb-translate="{{currentCourseStatus.getPrimaryButtonText()}}"></span>\n    </button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button ng-click="$parent.$close(currentCourseStatus.getSecondaryButtonStatus())" \n            class="button button--secondary js-secondary-button js-course-status-{{currentCourseStatus.getSecondaryButtonStatus()}}"\n            analytics-id="{{currentAnalyticsId}}.close.button">\n      <span bb-translate="{{currentCourseStatus.getSecondaryButtonText()}}"></span>\n    </button>\n  </span>\n</bb-modal>'},WKjN:function(e,t){e.exports='<div bb-load-bundle="components/directives/usercard" bb-cache-compilation="user-card" title="{{::userName}}">\n\n    <div ng-if="user.ui.anonymousStudent" class="anonymous-student-avatar">\n      <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n    </div>\n\n    <div ng-if="!user.ui.anonymousStudent"\n         ng-click="bbUsercard.show()"\n         ng-keydown="bbUsercard.keyDown($event)"\n         ng-mouseleave="bbUsercard.hide()"\n         tabindex="{{::bbUsercard.canShow() ? 0 : -1}}"\n         class="usercard-trigger"\n         ng-class="::{\'usercard-clickable\': bbUsercard.canShow(), \'usercard-not-clickable\': !bbUsercard.canShow()}"\n         role="button"\n         aria-haspopup="true"\n         aria-expanded="{{showcard}}"\n         aria-label="{{bbUsercard.getUserNameLabel()}}"\n         analytics-id="components.directives.usercard.showCard"\n    >\n        <div ng-switch="usercardShow" tabindex="-1">\n            <span ng-switch-when="username" class="usercard-button">\n                <bb-username class="name-title" user="user" ng-attr-format="{{attr.format}}" auto-update="{{autoUpdate}}"\n                             ng-class="{ inactive: inactive() }"></bb-username>\n            </span>\n            <span ng-switch-when="avatar" class="usercard-button">\n                <bb-avatar user="user" role="presentation" auto-update="::autoUpdate"\n                  inactive="inactive()"></bb-avatar>\n            </span>\n            <span ng-switch-when="combined" class="usercard-button">\n              <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n              <bb-username user="user" format="short" auto-update="::autoUpdate" ng-class="{ inactive: inactive() }"></bb-username>\n            </span>\n            <span ng-switch-when="outline" class="usercard-button">\n                <bb-avatar user="user" role="presentation" auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n                <div class="element-details">\n                  <div class="name ellipsis">\n                      <bb-username user="user" format="short" auto-update="::autoUpdate" ng-class="{ inactive: inactive() }"></bb-username>\n                  </div>\n                  <div class="content ellipsis">\n                    <p class="user-name js-course-role" bb-translate>{{bbUsercard.getCourseRoleLocalizeId()}}</p>\n                  </div>\n                </div>\n            </span>\n        </div>\n        <div ng-if="showcard" class="element-card usercard usercard-not-clickable" ng-class="{\'showcard\': showcard }" bb-focus>\n            <div class="header" aria-hidden="true">\n                <bb-avatar user="user" ng-attr-auto-update="::autoUpdate" inactive="inactive()"></bb-avatar>\n                <div class="element-details">\n                    <div class="name">\n                        <bb-username class="name-title" user="user" ng-class="{ inactive: inactive() }"\n                                     ng-attr-format="{{attr.format}}" ng-attr-auto-update="{{::autoUpdate}}"></bb-username>\n                    </div>\n                  <div class="userId ellipse" ng-if="user.userName && !user.studentId" title="{{user.userName}}">{{user.userName}}</div>\n                  <div class="userId ellipse" ng-if="!user.userName && user.studentId" bb-translate translate-values="{ studentId: user.studentId }">components.directives.usercard.studentId</div>\n                  <div class="userId ellipse" ng-if="user.userName && user.studentId" bb-translate translate-values="{ username: user.userName, studentId: user.studentId }">components.directives.usercard.usernameAndId</div>\n                  <div class="profile ellipsis" bb-translate>{{bbUsercard.getCourseRoleLocalizeId()}}</div>\n                    <div class="profile exception-link" ng-if="bbUsercard.hasDueDateException()">\n                      <div class="clickable ellipsis" ng-if="bbUsercard.canEditDueDateException()" bb-translate bb-peek-sref="accommodation({membershipId: membershipId})">\n                        components.directives.usercard.studentExceptions\n                      </div>\n                      <span ng-if="!bbUsercard.canEditDueDateException()" bb-translate>\n                        components.directives.usercard.studentExceptions\n                      </span>\n                    </div>\n                </div>\n            </div>\n            <div class="buttons">\n              \x3c!-- I don\'t use one time binding, as user can open a peek panel to config this attribute. This configuration has to take effect immediately--\x3e\n              <button aria-hidden="{{!showcard}}" ng-if="bbUsercard.canSendMessage()"\n                      type="button"\n                      ng-click="bbUsercard.sendMessage()"\n                      class="button large clear mail-button"\n                      title="{{user.mail}}"\n                      bb-translate-attrs="{\'aria-label\': \'components.directives.usercard.sendMessage\'}"\n                      tabindex="{{showcard ? 0 : -1}}"\n                      ng-keydown="bbUsercard.sendMessageViaSpaceBar($event)"\n                      analytics-id="components.directives.usercard.sendMessage.button"\n              >\n                <bb-svg-icon size="medium" icon="messages"></bb-svg-icon>\n              </button>\n            </div>\n        </div>\n    </div>\n\n</div>\n'},WMz6:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-bulk-edit",use:"icon-small-bulk-edit-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-bulk-edit"><path d="M7 15H1V4h11v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M15 5V1H4v3M15 8l-2-1-3 6v2l2-1 3-6z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},Ws0a:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-edit-tool",use:"icon-medium-edit-tool-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-edit-tool"><path d="M22.4282 4.0556c.366.7363.5717 1.5663.5717 2.4444 0 4.0963-3.02 6.4691-7 5.5l-10 10s-2 2-4 0 0-4 0-4L12 8c-.9691-3.98 1.4038-7 5.5-7 .8781 0 1.7081.2058 2.4445.5717l-3.0556 3.095S15.6666 5.8889 15.6666 6.5c0 1.0125.8208 1.8333 1.8333 1.8333.6112 0 1.8334-1.2222 1.8334-1.2222l3.0949-3.0555z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},"X+qL":function(e,t,n){},XOoK:function(e,t){e.exports='<bb-modal class="notification"\n          role="alertdialog"\n          bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <p bb-translate="course.outline.previewCourse.alert.modalText"></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          ng-click="$parent.$close()" \n          class="js-dismiss-modal button button--secondary js-secondary-button"\n          analytics-id="course.outline.previewCourse.alert.modalConfirm.button">\n    <span bb-translate="course.outline.previewCourse.alert.modalConfirm"></span>\n  </button>\n</bb-modal>'},Xhfc:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-announcements",use:"icon-medium-announcements-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-announcements"><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M5 5h12v9H5z" /><path stroke-width="2" stroke-linejoin="round" d="M1 5h4v9H1z" /><path d="M8 14l3 8h4l-3-8M17 14l6 4V1l-6 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},YDhi:function(e,t){e.exports='<bb-modal id="notification-modal"\n          class="notification"\n          modal-title-key="{{courseOutline.exportModalTitleKey}}"\n          analytics-id-tag-prefix="course.export.modal.startArchive">\n  <div name="modal-contents">\n    <p bb-translate="course.export.modal.modalText" course-org-token-resolver></p>\n  </div>\n  <button name="modal-footer-button-primary" \n          class="close-modal-export js-export-without-student-data button js-primary-button" \n          ng-click="courseOutline.triggerCourseExport(false)"\n          analytics-id="course.export.modal.startExport.button">\n    <span bb-translate="course.export.modal.startExport"></span>\n  </button>\n  <button name="modal-footer-button-secondary" \n          class="close-modal-export js-export-with-student-data button button--secondary js-secondary-button" \n          ng-click="courseOutline.triggerCourseExport(true)"\n          analytics-id="course.export.modal.startArchive.button">\n    <span bb-translate="course.export.modal.startArchive"></span>\n  </button>\n</bb-modal>'},YHbk:function(e,t,n){},Zeij:function(e,t,n){},aJI9:function(e,t,n){!function(e){"use strict";function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e+"-"+JSON.stringify(t)}}e.getLocalizeMock=function(){return{translate:t("translate"),formatNumber:t("formatNumber"),formatUsername:t("formatUsername"),formatUsernameList:t("formatUsernameList"),formatDate:t("formatDate"),formatTime:t("formatTime"),formatDatetime:t("formatDuration"),formatDuration:t("formatDuration"),formatTimezone:t("formatTimezone"),formatItems:t("formatItems"),formatPercentage:t("formatPercentage"),formatCurrency:t("formatCurrency"),parseTime:t("parseTime"),parseDate:t("parseDate"),parseNumber:t("parseNumber"),regroupNumber:t("regroupNumber"),countDigits:t("countDigits"),getTimeObject:t("getTimeObject"),getFirstDayOfTheWeek:t("getFirstDayOfTheWeek")}},Object.defineProperty(e,"__esModule",{value:!0})}(t)},cCP0:function(e,t,n){},hgSn:function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal"\n          role="alertdialog"\n          modal-title-key="{{moveErrorTitleKey}}"\n          analytics-id-tag-prefix="course.outline.moveErrorAlert">\n    <div name="modal-contents">\n        <p bb-translate="{{moveErrorTextKey}}"></p>\n    </div>\n    <button name="modal-footer-button-primary" \n            ng-click="$parent.$close()" \n            class="js-dismiss-modal button button--secondary js-secondary-button"\n            analytics-id="global.ok.button">\n      <span bb-translate="global.ok"></span>\n    </button>\n</bb-modal>'},jLPU:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-reports",use:"icon-small-reports-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-reports"><path d="M5 7v5h6V7H5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M2 1h9l3 3v11H2V1z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 1v3h3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},"k+3c":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n("ZQey"),s=function(e,t,n,o,s,r,i,a,c){this.modalTitle=e,this.modalText=t,this.secondaryButtonText=n,this.primaryButtonText=o,this.modalDismissText=s,this.secondaryButtonStatus=r,this.primaryButtonStatus=i,this.courseStatusName=a,this.courseDescription=c},r=function(){function e(){}return e.Open=new s(".openCourse.modalTitle",".openCourse.modalText",".openCourse.makePrivate",".openCourse.makeComplete","global.cancelTakeMeBack","PRIVATE","COMPLETE",".openCourse.courseStatus",".openCourse.courseDescription"),e.Complete=new s(".completeCourse.modalTitle",".completeCourse.modalText",".completeCourse.makeOpen",".completeCourse.makePrivate","global.cancelTakeMeBack","OPEN","PRIVATE",".completeCourse.courseStatus",".completeCourse.courseDescription"),e.Private=new s(".privateCourse.modalTitle",".privateCourse.modalText","global.cancel",".privateCourse.makeOpen","","","OPEN",".privateCourse.courseStatus",".privateCourse.courseDescription"),e.OpenTermClassic=new s(".openTermClassicCourse.modalTitle",".openTermClassicCourse.modalText","global.cancel","","","","OPEN",".openTermClassicCourse.courseStatus",".openTermClassicCourse.courseDescription"),e.PrivateTermClassic=new s(".privateTermClassicCourse.modalTitle",".privateTermClassicCourse.modalText","global.cancel","","","","PRIVATE",".privateTermClassicCourse.courseStatus",".privateTermClassicCourse.courseDescription"),e.TermOpen=new s(".openTermCourse.modalTitle",".openTermCourse.modalText","global.cancel",".openTermCourse.makeComplete","","","COMPLETE",".openTermCourse.courseStatus",".openTermCourse.courseDescription"),e.TermComplete=new s(".completeTermCourse.modalTitle",".completeTermCourse.modalText","global.cancel",".completeTermCourse.makeOpen","","","OPEN",".completeTermCourse.courseStatus",".completeTermCourse.courseDescription"),e.TermPrivate=new s(".privateTermCourse.modalTitle",".privateTermCourse.modalText","global.cancel","","","","OPEN",".privateTermCourse.courseStatus",".privateTermCourse.courseDescription"),e.OpenClassic=new s(".openClassicCourse.modalTitle",".openClassicCourse.modalText","global.cancel",".openClassicCourse.makePrivate","","","PRIVATE",".openClassicCourse.courseStatus",".openClassicCourse.courseDescription"),e}(),i=function(){function e(e,t){switch(this.course=e,this.status=t,t){case o.a.Open:this.optionsForCurrentStatus=r.Open;break;case o.a.Complete:this.optionsForCurrentStatus=r.Complete;break;case o.a.Private:this.optionsForCurrentStatus=r.Private;break;case o.a.OpenTermClassic:this.optionsForCurrentStatus=r.OpenTermClassic;break;case o.a.PrivateTermClassic:this.optionsForCurrentStatus=r.PrivateTermClassic;break;case o.a.TermOpen:this.optionsForCurrentStatus=r.TermOpen;break;case o.a.TermComplete:this.optionsForCurrentStatus=r.TermComplete;break;case o.a.TermPrivate:this.optionsForCurrentStatus=r.TermPrivate;break;case o.a.OpenClassic:this.optionsForCurrentStatus=r.OpenClassic;break;default:throw new Error("Unknown CourseStatus")}}return e.prototype.getLocalizationKey=function(e){var t=this.course.isOrganization?"organization.outline":"course.outline";return(e||"").startsWith(".")?t+e:e},e.prototype.getStatus=function(){return this.status},e.prototype.getModalTitle=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.modalTitle)},e.prototype.getModalDismissText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.modalDismissText)},e.prototype.getModalText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.modalText)},e.prototype.getSecondaryButtonText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.secondaryButtonText)},e.prototype.getPrimaryButtonText=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.primaryButtonText)},e.prototype.getSecondaryButtonStatus=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.secondaryButtonStatus)},e.prototype.getPrimaryButtonStatus=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.primaryButtonStatus)},e.prototype.getCourseStatusName=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.courseStatusName)},e.prototype.getCourseDescription=function(){return this.getLocalizationKey(this.optionsForCurrentStatus.courseDescription)},e}()},kkIh:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return H}),n.d(t,"a",function(){return Q});var o=n("mrSG"),s=n("LvDl"),r=n("5MwF"),i=n("0fFc"),a=n("9zo4"),c=n("kxl5"),l=n("gkef"),u=n("Vsv2"),d=n("Dt14"),p=n("IiJs"),h=n("e7Kn"),m=n("n0mJ"),v=n("nYZ0"),b=n("Fvsw"),f=n("Qbdf"),g=n("ZzN+"),C=n("go4a"),y=n("AI52"),k=n("Sa5G"),w=n("5KgE"),S=n("0+Qs"),x=n("NDLj"),I=n("0JpG"),E=n("pjml"),T=n("w9Zy"),O=n("QIw5"),M=n("lEL+"),$=n("hkqm"),A=n("TnpK"),D=n("1zDl"),N=n("z1U9"),L=n("12mu"),P=n("CMKQ"),B=n("jhBu"),F=n("k+3c"),_=n("ZQey"),U=n("XOoK"),j=n("9mPe"),z=n("0MS5"),R=n("W8FL"),G=n("YDhi"),K=n("hgSn"),q=n("cs5G"),H="ultra.course.outline.controller",V=function(e){return Y(E.sb.QueueTaskStatus.Complete,e)},W=function(e){return Y(E.sb.QueueTaskStatus.CompleteErrors,e)},Y=function(e,t){return"string"==typeof t?t===e.toString():e.isEqualTo(t)},J="course",Q=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(function(t){function n(e,n,o,s,i,a,c,l,u,d,p,m,b,f,g,y,w,S,x,I,M,$,A,D,N,L,P,B,F,U,j,z,R){var G=t.call(this,e,o,s,U,w,E.r.ContentRootNode.ROOT,h.a.CourseOutline.toString(),z,y,f,b,D,P,x)||this;G.$scope=e,G.$rootScope=n,G.CourseModel=o,G.CourseContentModel=s,G.collab=i,G.collabUltra=a,G.CourseMembershipModel=c,G.context=l,G.cloudDrive=u,G.kloudService=d,G.firstTimeHelper=p,G.$modal=m,G.ultraState=b,G.interval=f,G.timeout=g,G.bbLocalize=y,G.contentService=w,G.$log=S,G.$q=x,G.exportService=I,G.toast=M,G.ScheduledTaskModel=$,G.ConversionService=A,G.accessibility=D,G.windowSizeService=N,G.copyContent=L,G.$ngRedux=P,G.entitlementService=B,G.announcementPermissionsService=F,G.contextCourse=U,G.modalService=j,G.allyService=z,G.oneDriveBizLink=R,G.collabUltraEnabled=!1,G.runningSessionFlag=!1,G.attendanceEnabled=!1,G.showVirtualClassroom=!1,G.isCollabConfigLoaded=!1,G.isAnnouncementsEnabled=!1,G.isGroupToolEnabled=!1,G.studentAccessGuidanceKey="student.access",G.navigationGuidanceKey="course.nav",G.alertCourseGuidanceKey="course.alert",G.questionBanksNavGuidanceKey="question.banks.nav.key",G.addContentGuidanceKey="course.addContent",G.canExport=!1,G.canArchive=!1,G.canAccessBatchEdit=!1,G.showContentImportProgress=!1,G.showImportCopyStatusBar=!1,G.showPreviewButton=!1,G.multiContentImportProgress=new Map,G.hasCheckedForImports=!1,G.isLoading=!0,G.refreshingFolderIds={},G.isLearningModuleEnabled=r.a.features.learningModule||!1,G.announcementsPostedCount=-1,G.announcementsTotalCount=-1,G.groupSetCount=-1,G.groupCount=-1,G.trayLocalizationKeysPrefix="course.outline.content.copy",G.trayId="granular-content-import-tray",G.COPY_TASK_TYPE="C",G.granularContentImportQueue=[],G.handleOutlineMenuToggle=function(e){G.$scope.isOutlineMenuOpen=e,G.shouldShowCopyDetailsOverflowGuidance=G.hasCurrentCopyDetailsErrors&&e},G.openCopyDetailsPanel=function(){G.copyDetailsNotificationDismissed(),G.goPeekState.call(G,"content-manage.copy-details",{})},G.copyDetailsNotificationDismissed=function(){G.shouldShowCopyDetailsNotification=!1,G.copyContent.resetCopyDetailsNotificationCount()},e.courseOutline=G,G.shouldShowOutlineGuidance=!1,G.canViewGroupsAsAdmin=G.entitlementService.isEntitled(k.w.ViewGroupsAsAdmin),G.showPreviewButton=G.entitlementService.isEntitled("course.content.MODIFY"),e.course&&(e.course.headerKey="course.outline.headerLabel"),G.courseId=U.courseId,G.currentCourse=G.$scope.course.model,G.courseColorClass=C.a(G.$scope.course.membership),G.outlineLocalePrefix=G.currentCourse.isOrganization?"organization.outline":"course.outline",G.exportModalTitleKey=G.currentCourse.isOrganization?"organization.export.modal.modalTitle":"course.export.modal.modalTitle",G.$scope.previewModalTitleKey=G.currentCourse.isOrganization?"organization.outline.previewCourse.modalTitle":"course.outline.previewCourse.modalTitle",G.announcementPermissions=G.announcementPermissionsService.getCourseAnnouncementsPermissions(),G.currentCourse&&(G.canMove=!G.currentCourse.isComplete(),G.setCourseStatus(),G.currentCourse.schedule.$refresh({sort:"location(desc)"}).$allow([403]),G.updateBatchEditStatus()),G._setInstructors(),G.contentService.fetchIndicators(G.courseId,!0).then(function(e){G.updateIndicators(e)}),G.indicatorRefreshInterval=G.interval(function(){G.contentService.fetchIndicators(G.courseId,!0).then(function(e){G.updateIndicators(e)},function(e){G.interval.cancel(G.indicatorRefreshInterval)})},e,v.a,0,!1),G.courseOutlineRefreshDeregister=e.$on("course-outline.refresh-folder",function(e,t,n){var o=t?G.rootNode.findInTreeById(t):G.rootNode;t=t||"ROOT",o&&!G.refreshingFolderIds["node-"+t]&&(G.refreshingFolderIds["node-"+t]=!0,o.hasMoreChildren=!0,o.children=null,G.loadMoreChildren(o,n).$then(function(){delete G.refreshingFolderIds["node-"+t]}))}),e.$on("collab-exit",function(){G.initCollabSession()}),e.$on("bb-announcement-panel-close",function(){G.getAnnouncementsCount()}),e.$watch("courseOutline.rootNode.children.length",function(e,t){e!==t&&G.recalculateEmptyState()});var K=G.contentService.indicatorCacheService.$onClassConversationIndicatorRemoved(function(e,t,n,o){t===G.$scope.course.model.id&&(o||G.dismissContentIndicators(n))}),q=G.contentService.indicatorCacheService.$onGroupConversationIndicatorRemoved(function(e,t,n,o){t===G.$scope.course.model.id&&(o||G.dismissContentIndicators(n))});return e.$on("$destroy",function(){K(),q()}),G.currentCourse&&G.currentCourse.canEdit()&&G.currentCourse.isOpen()&&(E.o.CourseDuration.DateRange.isEqualTo(G.currentCourse.durationType)?G._openAlertModal():G.currentCourse.term&&E.o.CourseDuration.UseTerm.isEqualTo(G.currentCourse.durationType)&&G.currentCourse.term.$fetch().$asPromise().then(function(e){E.Nb.TermDuration.DateRange.isEqualTo(e.durationType)&&G._openAlertModal()})),G.currentCourse.getStatus().isEqualTo(_.a.Private)?(G.showVirtualClassroom=!1,G.isCollabConfigLoaded=!1):r.a.features.collab||G.loadCollabConfig(),G.connectToRedux(),G.rootNode.children.$asPromise().then(function(){p.shouldShow(G.studentAccessGuidanceKey,J).then(function(e){G.shouldShowAccessGuidanceOpenToStudent=e&&G.rootNode.children.canCreate()&&!G.$scope.course.model.isAvailable,G.shouldShowAccessGuidanceOpenToStudent?G.shouldShowNavigationGuidance=!1:p.shouldShow(G.navigationGuidanceKey,J).then(function(e){G.shouldShowNavigationGuidance=e})}),p.shouldShow(G.questionBanksNavGuidanceKey,J).then(function(e){G.shouldShowQuestionBanksGuidance=e}),G.checkIfCollabUltraIsAvailable(),G.checkIfAttendanceIsAvailable(),G.getAnnouncementsCount(),G.getCourseGroupSetCount(),G.shouldShowOutlineGuidance=G.rootNode.children.canCreate(),G.rootNode.children.length>1&&p.fadeAddContentButton(G.$scope,G.addContentGuidanceKey,J),d.getInstitutionAccount().then(function(e){G.instAccount=e,d.getKloudlessAccounts().then(function(t){G.connectedInstAccount=d.getConnectedInstitutionAccount(e,t),"onedrivebiz"===G.instAccount.type&&G.connectedInstAccount&&d.getOneDriveLink(G.connectedInstAccount).then(function(e){G.oneDriveBizLink=e}).catch(function(e){console.error(e)})})}),G.timeout(function(){G.isLoading=!1},e)}),G.$scope.$on(T.b,function(e,t){p.shouldShow(G.studentAccessGuidanceKey,J).then(function(e){G.shouldShowAccessGuidanceOpenToStudent=e&&G.rootNode.children.canCreate()&&!G.$scope.course.model.isAvailable}),p.shouldShow(G.navigationGuidanceKey,J).then(function(e){G.shouldShowNavigationGuidance=e}),p.shouldShow(G.questionBanksNavGuidanceKey,J).then(function(e){G.shouldShowQuestionBanksGuidance=e}),G.rootNode.children.length>1&&p.fadeAddContentButton(G.$scope,G.addContentGuidanceKey,J)}),G.showTooltip=!1,G.isExportSuccess=!1,G.canExport=G.currentCourse.canExport(),G.canArchive=G.currentCourse.canArchive(),(G.canExport||G.canArchive)&&(G.exportService.getExportsAndScheduledTasks(G.courseId,G.currentCourse.courseId,!0,G.canExport,G.canArchive).then(function(e){e.scheduledTasks&&e.scheduledTasks.length>0&&G._setExportTaskStatusCheckInterval()}),e.$on("start-task-status-check",function(){G._setExportTaskStatusCheckInterval()})),O.a.Already.isEqualTo(b.params.enrollmentMessage)&&M.show({messageKey:G.outlineLocalePrefix+".alreadyEnrolled"}),e.$on("$destroy",function(){G.courseOutlineRefreshDeregister(),G.indicatorRefreshInterval&&(G.interval.cancel(G.indicatorRefreshInterval),G.indicatorRefreshInterval=null),(G.canExport||G.canArchive)&&G._cancelExportTaskStatusCheckInterval(),G._cancelCheckImportCopyInterval(),e.course.isEditingCourseName&&(e.course.model.name?e.course.updateCourseName():(e.course.model.name=e.course.previousCourseName,e.course.isEditingCourseName=!1)),(G.currentCourse.canCopy()||G.currentCourse.canImport())&&G.cancelImportWatchers()}),G.currentCourse.canCopy()&&(G._handleInProgressCopyTasks(),G.updateCopyDetailsAlerts(),G.hasCheckedForImports=!0),G.currentCourse.canImport()&&G._checkInProgressImportTask(),e.$on("showContentImportProgress",function(e,t,n){G.showImportCopyStatusBar&&(G.showImportCopyStatusBar=!1),G.workingImportCopyTaskId=t,G.showContentImportProgress=!0,G._setCheckImportCopyInterval(t)}),e.$on("addImportTaskWatchers",function(e,t){G._queueLoadingMessagesForTasks(t)}),G.ConversionService.isPreview(G.currentCourse)&&G.ConversionService.showPreviewAlert&&N.isSmallBreakpoint()&&(G.openPreviewAlertModal(),G.ConversionService.showPreviewAlert=!1),e.$on("add-outline-schedule",function(e,t){G.currentCourse.schedule.push(t)}),e.$on("delete-outline-schedule",function(e,t){var n;G.currentCourse.schedule.forEach(function(e,o){e.itemSourceId===t.itemSourceId&&(n=o)}),G.currentCourse.schedule.$remove(G.currentCourse.schedule[n])}),e.$on("membership.update",function(e,t,n,o,s,r,i,a){o||s||r||n?(G.updateCourseRole(),G.fetchCourseAndSetInstructor()):G.updateUserInMemberships(G.$scope.course.model.instructorsMembership,i)}),e.$on("deleteMembership",function(e,t,n,o){n&&G.fetchCourseAndSetInstructor()}),e.$on("roster-enroll-saved-success",function(e,t,n){n&&G.fetchCourseAndSetInstructor()}),G}return o.__extends(n,t),n.prototype._queueLoadingMessagesForTasks=function(e){var t=this;s.forEach(e,function(e){var n=t.$q(function(n,o){t._waitForTaskToComplete(e,n,o)});t.cancelLoading=t.toast.showLoading({trayId:t.trayId,trayLocalizationKeysPrefix:t.trayLocalizationKeysPrefix,promise:n})})},n.prototype.updateCourseRole=function(){var e=this;this.CourseModel.$find(this.$scope.course.model.id).memberships.$find(this.$scope.course.membership.id,{fields:"courseRole"}).$then(function(t){e.$scope.course.membership.courseRole=t.courseRole})},n.prototype.fetchCourseAndSetInstructor=function(){var e=this;this.CourseModel.$find(this.$scope.course.model.id,{fields:"instructorsMembership.*"}).$then(function(t){e.$scope.course.model.instructorsMembership=t.instructorsMembership,e._setInstructors()})},n.prototype.updateUserInMemberships=function(e,t){if(t){for(var n=e.length,o=0;o<n;o++)if(e[o].user.id===t.id){e[o].user=t;break}this._setInstructors()}},n.prototype.hideExportMoment=function(){this.showTooltip&&(this.showTooltip=!1,e(document)[0].removeEventListener("click",this.hideExportMoment,!0))},n.prototype.showExportMoment=function(){this.showTooltip=!0,e(document)[0].addEventListener("click",this.hideExportMoment.bind(this),!0)},n.prototype.loadCollabConfig=function(){var e=this;return this.isCollabConfigLoaded=!0,this.collab.getCollabSessions(this.courseId).then(function(t){E.p.CollabAccessType.APOLLO.isEqualTo(t.collabAccessType)?(e.showVirtualClassroom=!0,e.collabSessionId=t.sessionId):e.showVirtualClassroom=!1},function(t){e.showVirtualClassroom=!1,t.$response.status=null})},n.prototype.openPreviewAlertModal=function(){this.modalInstance=this.$modal.open({template:U,scope:this.$scope,resolve:{translations:[I.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}})},n.prototype._openAlertModal=function(){var e=this;this.currentCourse.endDate&&this.currentCourse.endDate<this.context.getServerTime()&&this.$modal.open({template:j,scope:this.$scope,resolve:{translations:[I.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}).result.then(function(){e.updateCourseStatus(_.a.Complete)},function(){e.firstTimeHelper.shouldShow(e.alertCourseGuidanceKey,J).then(function(t){e.shouldShowAccessGuidanceReadOnly=t})})},n.prototype.checkIfCollabUltraIsAvailable=function(){var e=this;r.a.features.collab&&this.collabUltra.getCollabB2Info().then(function(t){var n=t.$response;403===n.status||404===n.status?e.$log.debug("[Collab-ultra] getCollabB2Info() returned status: "+n.status):200===n.status&&e.initCollabSession()},function(t){e.$log.error("[Collab-ultra]: Error in getCourseCollab(): "+t),t.$response.status=null})},n.prototype.initCollabSession=function(){var t=this;this.collabUltraEnabled=!1,this.runningSessionFlag=!1,this.courseRoomSession=null,this.courseSessionList=[],this.runningSessionList=[],this.$q.all([this.collabUltra.getCourseCollab(this.courseId).then(function(n){var o=n.filter(function(e){return e.sessionInstances&&e.sessionInstances.length>0});t.runningSessionList=t.runningSessionList.concat(o),t.collabPermissions=e.extend({},n.permissions),Array.isArray(n)&&n.length>0?(t.courseRoomSession=n[0],e.extend(t.collabPermissions,t.courseRoomSession.permissions)):t.$log.debug("[Collab-ultra]: Course room does not exist!"),t.collabUltraEnabled=!0},function(e){t.$log.error("[Collab-ultra]: Error in getCourseCollab(): "+e),e.$response.status=null}),this.collabUltra.getAllCollabSessions(this.courseId).then(function(e){t.courseSessionList=e.filter(function(e){return e.active});var n=t.courseSessionList.filter(function(e){return e.sessionInstances&&e.sessionInstances.length>0});t.runningSessionList=t.runningSessionList.concat(n),t.collabUltraEnabled=!0},function(e){t.$log.error("[Collab-ultra]: Error in getAllCollabSessions(): "+e),e.$response.status=null})]).then(function(){t.runningSessionFlag=t.runningSessionList.length>0})},n.prototype.joinSession=function(e){e||(this.courseRoomSession&&this.courseRoomSession.courseRoomEnabled?e=this.courseRoomSession.id:this.courseSessionList&&this.courseSessionList.length>0&&(e=this.courseSessionList[0].id));var t=window.open();this.collabUltra.getLaunchUrl(this.courseId,e).then(function(e){t.location.href=e},function(){t.close()})},n.prototype.canCreateGroups=function(){return this.entitlementService.isEntitled(k.w.CreateGroups)},n.prototype.courseRoomExists=function(){return!!this.courseRoomSession},n.prototype.isCourseRoomEnabled=function(){return!(!this.courseRoomSession||!this.courseRoomSession.courseRoomEnabled)},n.prototype.isCollabSettingsDropDownAvailable=function(){if(this.collabPermissions)for(var e=0,t=Object.keys(this.collabPermissions);e<t.length;e++){var n=t[e];if(!0===this.collabPermissions[n]&&"joinSession"!==n)return!0}return!1},n.prototype.activeSessionCount=function(){var e=0;return this.courseRoomSession&&this.courseRoomSession.courseRoomEnabled&&e++,this.courseSessionList&&(e+=this.courseSessionList.length),e},n.prototype.enableCourseRoom=function(){var e=this;this.collabUltra.enableCourseRoom(this.courseId,this.courseRoomSession.id).then(function(t){e.courseRoomSession.courseRoomEnabled=t.courseRoomEnabled})},n.prototype.disableCourseRoom=function(){var e=this;this.collabUltra.disableCourseRoom(this.courseId,this.courseRoomSession.id).then(function(t){e.courseRoomSession.courseRoomEnabled=t.courseRoomEnabled})},n.prototype.checkIfAttendanceIsAvailable=function(){var e=this;this.currentCourse.isToolAvailable("bb-attendance").then(function(t){e.attendanceEnabled=t})},n.prototype.getAnnouncementsCount=function(){var e=this;this.currentCourse.isToolAvailable("announcements").then(function(t){e.isAnnouncementsEnabled=t,e.isAnnouncementsEnabled&&e.currentCourse.getAnnouncementsCount().then(function(t){t&&(e.announcementsPostedCount=t.postedCount,e.announcementsTotalCount=t.postedCount||0,e.announcementPermissions.viewUnposted&&(e.announcementsTotalCount+=(t.draftCount||0)+(t.scheduledCount||0)))}).catch(function(e){e.$response.status=null})})},n.prototype.getCourseGroupSetCount=function(){var e=this;this.currentCourse.isToolAvailable("groups").then(function(t){(e.isGroupToolEnabled=t,e.isGroupToolEnabled)&&(e.entitlementService.isEntitled(k.w.CreateGroups)||e.entitlementService.isEntitled(k.w.ViewGroups)||e.entitlementService.isEntitled(k.w.ViewGroupsAsAdmin)||e.entitlementService.isEntitled(k.w.ModifyGroups)||e.entitlementService.isEntitled(k.w.DeleteGroups)?e.getGroupAndSetCount(e.currentCourse.id).then(function(t){e.isGroupToolEnabled=e.entitlementService.isEntitled(k.w.ViewGroups)||e.entitlementService.isEntitled(k.w.ViewGroupsAsAdmin)}).catch(function(t){e.isGroupToolEnabled=!1}):e.isGroupToolEnabled=!1)})},n.prototype.getCourseStatus=function(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.currentCourseStatus.getCourseStatusName()})},n.prototype.getCourseDescription=function(){return this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.$scope.currentCourseStatus.getCourseDescription()})},n.prototype.setCourseStatus=function(){this.currentCourse.isOpen()?this.$scope.currentCourseStatus=new F.a(this.currentCourse,_.a.Open):this.currentCourse.isPrivate()?this.$scope.currentCourseStatus=new F.a(this.currentCourse,_.a.Private):this.$scope.currentCourseStatus=new F.a(this.currentCourse,_.a.Complete)},n.prototype.hasConversionReport=function(){return this.context.getUltraConversionReportId()&&this.currentCourse.canConvert()},n.prototype.openModal=function(){var e=this;this.setCourseStatus(),this.ConversionService.isPreview(this.currentCourse)?(this.modalInstance=this.$modal.open({template:z,scope:this.$scope,resolve:{translations:[I.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}),this.modalInstance.result.then(function(t){t&&(e.updateCourseStatus(t),e.$rootScope.$broadcast("confirmNewExperience"))})):(this.$scope.currentAnalyticsId="course.outline.updateStatusModal",this.modalInstance=this.$modal.open({template:R,scope:this.$scope,resolve:{translations:[I.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}),this.modalInstance.result.then(function(t){e.updateCourseStatus(t)}))},n.prototype.shouldShowVirtualClassroomLink=function(){var e=this.$scope.currentCourseStatus.getStatus()===_.a.Open;return this.showVirtualClassroom&&e&&!window.Modernizr.touch},n.prototype.updateCourseStatus=function(e){var t=this;if(e){var n=this.currentCourse.getStatus();return this.currentCourse.setStatus(e),this.$scope.currentCourseStatus=new F.a(this.currentCourse,this.currentCourse.ui.status),this.currentCourse.$patch().$then(function(){t.$scope.course.membership.course=t.currentCourse;var o=t.currentCourse.getStatus();return t.$scope.$emit("update-course-status",t.currentCourse.id,o),o.isEqualTo(e)||(t.currentCourse.setStatus(o.toString()),t.$scope.currentCourseStatus=new F.a(t.currentCourse,o)),(V(n)||V(e))&&(t.rootNode.children=t.rootNode.getChildren({limit:t.rootNode.children.length}),t.canMove=!t.currentCourse.isComplete()),r.a.features.collab?t.checkIfCollabUltraIsAvailable():t.isCollabConfigLoaded||r.a.features.collab?void 0:t.loadCollabConfig()})}},n.prototype._setInstructors=function(){this.mainInstructor=null;var e=this.$scope.course.model.instructorsMembership.filter(function(e){return e.isAvailable});this.instructors=e.map(function(e){return e.user}),null==e||0===e.length?this.mainInstructor=this.CourseMembershipModel.$build({user:{givenName:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:this.outlineLocalePrefix+".noInstructor"}),familyName:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:""})}}):e[0]?(this.mainInstructor=e[0],this.mainInstructor.courseRole.localizedRoleName=this.getLocalizedRoleNameByCourseRole(this.mainInstructor.courseRole)):this.mainInstructor=void 0},n.prototype.getLocalizedRoleNameByCourseRole=function(e){if(e.identifier.toString()in E.y.toBeLocalizedRoleLabels){var t=E.y.toBeLocalizedRoleLabels[e.identifier.toString()];return this.contextCourse.course.isOrganization&&(t=t.replace("global.course","global.organization")),this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:t})}return e.courseName.rawValue},n.prototype.openExportModal=function(){var e=this;this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!1,this.canExport,this.canArchive).then(function(t){if(0===t.courseExports.length&&0===t.scheduledTasks.length||e.ultraState.includes("**.exports")){if(e.canExport&&!e.canArchive)return void e.exportService.createExportTask(!1,e.courseId).then(function(){e._setExportTaskStatusCheckInterval(),e._openExportPeekPanel()});if(e.canArchive&&!e.canExport)return void e.exportService.createExportTask(!0,e.courseId).then(function(){e._setExportTaskStatusCheckInterval(),e._openExportPeekPanel()});e.modalInstance=e.$modal.open({template:G,scope:e.$scope,resolve:{translations:[I.serviceName,function(e){return e.loadBundle("features/course/exports/course-export")}]}})}else e._openExportPeekPanel()})},n.prototype.triggerCourseExport=function(e){var t=this;this.modalInstance.dismiss(),this.exportService.createExportTask(e,this.courseId).then(function(){t._setExportTaskStatusCheckInterval(),t._openExportPeekPanel()})},n.prototype._setExportTaskStatusCheckInterval=function(){var e=this,t=r.a.production?6e4:5e3;this.checkExportStatusInterval=this.interval(function(){e._checkExportStatus()},this.$scope,t)},n.prototype._cancelExportTaskStatusCheckInterval=function(){this.checkExportStatusInterval&&(this.interval.cancel(this.checkExportStatusInterval),this.checkExportStatusInterval=null)},n.prototype._checkExportStatus=function(){var e=this;this.exportService.getExportsAndScheduledTasks(this.courseId,this.currentCourse.courseId,!1,this.canExport,this.canArchive).then(function(t){t.scheduledTasks.forEach(function(t){var n=t.taskStatus;t.$fetch().$then(function(t){V(n)||(V(t.taskStatus)||W(t.taskStatus))&&(e.exportService.getExportsAndScheduledTasks(e.courseId,e.currentCourse.courseId,!0,e.canExport,e.canArchive).then(function(t){t.scheduledTasks&&0!==t.scheduledTasks.length||e._cancelExportTaskStatusCheckInterval(),e.$scope.$broadcast("update-course-exports")}),"exports"!==e.ultraState.current.name.split(".").slice(-1)[0]&&(e.showExportMoment(),e.isExportSuccess=V(t.taskStatus)))})})})},n.prototype._openExportPeekPanel=function(){this.ultraState.goPeekState("exports")},n.prototype._checkInProgressImportTask=function(){var e=this,t="courseImport"+this.currentCourse.id.replace(/_/g,".");this.context.getPreference(t,"false").then(function(t){if("true"===t.value){var n=e.currentCourse.courseId;e._getCourseImportTasks(n).then(function(t){e.hasCheckedForImports=!0;var n=e.getLatestTaskForCourse(t);n&&(V(n.taskStatus)||W(n.taskStatus)?(e.showImportCopyStatusBar=!0,e.importCopyTaskId=n.taskId):(e.$rootScope.$broadcast("showContentImportProgress",n.taskId,e.rootNode&&e.rootNode.id?e.rootNode.id:"-1"),e.showContentImportProgress=!0,e._setCheckImportCopyInterval(n.taskId)))})}else e.hasCheckedForImports=!0})},n.prototype._handleInProgressCopyTasks=function(){var e=this,t=this.currentCourse.courseId;this.$q.all([this._getCourseCopyTasks(t),this._getCourseCopyTasksWithWaitingStatus(t)]).then(function(t){var n=s.filter(t[0],function(e){return e.taskStatus!==E.sb.QueueTaskStatus.Waiting.toString()}),o=s.filter(n.concat(t[1]),function(e){return!V(e.taskStatus)&&!W(e.taskStatus)&&(t=e.taskStatus,!Y(E.sb.QueueTaskStatus.Incomplete,t));var t});e._queueLoadingMessagesForTasks(s.map(o,function(e){return e.taskId}))})},n.prototype.getLatestTaskForCourse=function(e){var t,n=null;return e.length>0?(t=0,e.forEach(function(e){if(e.startDate){var o=e.startDate.getTime();o>t&&(t=o,n=e)}else n=e,t=Number.MAX_VALUE})):n=e.pop(),n},n.prototype.getTasks=function(e){return this.ScheduledTaskModel.$collection().$refresh(e).$asPromise()},n.prototype._getCourseCopyTasks=function(e){if(this.currentCourse.canCopy()){var t={courseId:e,filterBy:"courseCopyTasks",sort:"startDate(DESC)"};return this.getTasks(t)}return this.$q.when([])},n.prototype._getCourseCopyTasksWithWaitingStatus=function(e){if(this.currentCourse.canCopy()){var t={courseId:e,filterBy:"courseCopyTasks",status:"WAITING"};return this.getTasks(t)}return this.$q.when([])},n.prototype._getCourseImportTasks=function(e){if(this.currentCourse.canImport()){var t={courseId:e,operation:"IMPORT",filterBy:"cxTasks"};return this.getTasks(t)}return this.$q.when([])},n.prototype._setCheckImportCopyInterval=function(e){var t=this;this._cancelCheckImportCopyInterval();var n=r.a.production?6e4:6e3;this.checkContentImportProgress=this.interval(function(){t._checkImportCopy(e)},this.$scope,n)},n.prototype._cancelCheckImportCopyInterval=function(){this.checkContentImportProgress&&(this.interval.cancel(this.checkContentImportProgress),this.checkContentImportProgress=null)},n.prototype._checkImportCopy=function(e){var t=this;this.ScheduledTaskModel.$new(e).$fetch().$then(function(n){(V(n.taskStatus)||W(n.taskStatus))&&(t.rootNode.children.$refresh({expand:"assignedGroups,selfEnrollmentGroups.group"}).$then(function(){t.importCopyTaskId=e,t.showContentImportProgress=!1,t.showImportCopyStatusBar=!0}),t._cancelCheckImportCopyInterval(),t.getAnnouncementsCount())})},n.prototype._waitForTaskToComplete=function(e,t,n){var o=this,s=r.a.production?6e4:6e3,i=this.interval(function(){o._checkTaskCompletion(e)},this.$scope,s);this.multiContentImportProgress.set(e,{promise:i,complete:t,reject:n})},n.prototype._checkTaskCompletion=function(e){var t=this,n=this.multiContentImportProgress.get(e);n&&this.ScheduledTaskModel.$new(e).$fetch().$then(function(o){(V(o.taskStatus)||W(o.taskStatus))&&(o.type===t.COPY_TASK_TYPE&&t.copyContent.appendToCurrentCopyTasks([o.taskId]).then(function(e){return t.updateCopyDetailsAlerts()}),n.complete(),t.rootNode.children.$refresh({expand:"assignedGroups,selfEnrollmentGroups.group"}).$then(function(e){e.forEach(function(e){e.depth=t.rootNode.depth+1})}),t.multiContentImportProgress.delete(e),t.interval.cancel(n.promise),t.getAnnouncementsCount())})},n.prototype.cancelImportWatchers=function(){var e=this;this.multiContentImportProgress.forEach(function(t){e.interval.cancel(t.promise),t.reject&&t.reject({$status:"canceled"})}),this.cancelLoading&&this.cancelLoading()},n.prototype.updateCopyDetailsAlerts=function(){var e=this;this.copyContent.getCurrentCopyTaskErrorSummaries(this.currentCourse).then(function(t){e.copyContent.copyDetailsNotificationCount(t).then(function(t){e.copyDetailsErrorCount=t,e.shouldShowCopyDetailsNotification=t>0}),e.hasCurrentCopyDetailsErrors=!!s.keys(t).length})},n.prototype.canCopyOrImport=function(){return(this.currentCourse.canCopy()||this.currentCourse.canImport())&&!this.showImportCopyStatusBar&&!this.ConversionService.isPreview(this.currentCourse)&&!this.showContentImportProgress&&this.hasCheckedForImports&&!this.currentCourse.isComplete()},n.prototype.joinVirtualClassroom=function(){r.a.features.collab||this.collab.joinVirtualClassroom(this.courseId,this.collabSessionId)},n.prototype.isStudentMembership=function(){return this.$scope.course.membership.isStudentMembership()},n.prototype.isActAsInstructorMembership=function(){return this.$scope.course.membership.isActAsInstructorMembership()},n.prototype.openAnnouncementsPanel=function(){this.announcementsTotalCount>0?this.ultraState.goPeekState("announcement-list"):0===this.announcementsTotalCount&&this.announcementPermissions.create&&this.ultraState.goPeekState("announcement-list.peek.announcement-detail",{courseId:this.courseId,mode:i.PanelModeEnum.CREATE,courseName:this.currentCourse.displayName})},n.prototype.shouldShowCreateGroupsLink=function(){return 0===this.groupSetCount&&this.canCreateGroups()&&this.canViewGroupsAsAdmin},n.prototype.shouldShowViewGroupsLink=function(){return this.groupSetCount>0||0===this.groupSetCount&&!this.canCreateGroups()},n.prototype.groupsLinkIsDisabled=function(){return!this.canViewGroupsAsAdmin||0===this.groupSetCount&&(!this.canCreateGroups()||this.currentCourse.isComplete())},n.prototype.openGroupWorkspacePanel=function(){this.groupsLinkIsDisabled()||(0===this.groupSetCount&&!this.currentCourse.isComplete()&&this.canCreateGroups()?this.ultraState.goPeekState("group-set-list.peek.group-set-detail",{courseId:this.courseId,mode:i.PanelModeEnum.CREATE}):this.ultraState.goPeekState("group-set-list"))},n.prototype.disableAnnouncementsClickForStudent=function(){return!this.announcementPermissions.create&&0===this.announcementsTotalCount},n.prototype.getOverflowMenuItems=function(){var e=this;return[{icon:"link",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.guestItem",show:function(){return e.collabPermissions&&e.collabPermissions.inviteGuestsInLti&&e.courseRoomExists()},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRoomSettings"})},{icon:"settings",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.editItem",show:function(){return e.collabPermissions&&e.collabPermissions.editSettingsInLti&&e.courseRoomExists()},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRoomSettings"})},{icon:"reports",labelKey:"course.outline.collab.ultraCollabMenu.viewReportItem",show:function(){return e.collabPermissions&&e.collabPermissions.viewReportInLti&&e.courseRoomExists()},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchReports"})},{icon:"collab",labelKey:"course.outline.collab.ultraCollabMenu.viewSessionsItem",show:function(){return e.collabPermissions&&e.collabPermissions.viewAllSessionsInLti},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchSessions"})},{icon:"video",labelKey:"course.outline.collab.ultraCollabMenu.viewRecordingsItem",show:function(){return e.collabPermissions&&e.collabPermissions.viewAllRecordingsInLti},onClick:this.goPeekState.bind(this,"collab",{launchType:"launchRecordings"})},{icon:"disable",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.disableRoomItem",show:function(){return e.collabPermissions&&e.collabPermissions.changeAvailability&&e.isCourseRoomEnabled()},onClick:this.disableCourseRoom.bind(this)},{icon:"complete",labelKey:this.outlineLocalePrefix+".collab.ultraCollabMenu.enableRoomItem",show:function(){return e.collabPermissions&&e.collabPermissions.changeAvailability&&!e.isCourseRoomEnabled()&&e.courseRoomExists()},onClick:this.enableCourseRoom.bind(this)}]},n.prototype.getCourseOperationOverflowMenuItems=function(){var e=this;return[{key:"bulkEditItemKey",icon:"bulk-edit",labelKey:"course.outline.bulkEditLink",show:function(){return!e.currentCourse.isComplete()&&e.canAccessBatchEdit},onClick:function(){return e.goPeekState.call(e,"bulk-edit-content")}},{key:"importItemKey",icon:"import",labelKey:"course.outline.operation.importContent",show:this.currentCourse.canImport.bind(this.currentCourse),onClick:function(){return e.goPeekState.call(e,"content-manage.import",{parentId:e.rootNode.id})}},{key:"copyContentItemKey",icon:"duplicate",labelKey:"course.outline.operation.copyContent",show:this.currentCourse.canCopy.bind(this.currentCourse),onClick:this.goPeekState.bind(this,"content-manage.copy",{positionAfter:"end",depth:"1"})},{key:"exportItemKey",icon:"export",labelKey:this.outlineLocalePrefix+".operation.export",show:function(){return e.canArchive||e.canExport},onClick:this.openExportModal.bind(this)},{key:"copyDetailsItemKey",icon:"attention",status:"alert",labelKey:"course.outline.operation.copyDetails",show:function(){return e.currentCourse.canCopy()&&e.hasCurrentCopyDetailsErrors},onClick:this.openCopyDetailsPanel}]},n.prototype.goPeekState=function(e,t){this.ultraState.goPeekState(e,t)},n.prototype.getLocalizedTextByKey=function(e){var t={locale:this.bbLocalize.getLocale(this.$scope),key:e,noWrap:!0};return this.bbLocalize.translateSync(t)},n.prototype.moveError=function(e){this.$scope.moveErrorTitleKey=e+".title",this.$scope.moveErrorTextKey=e+".text",this.$modal.open({template:K,scope:this.$scope})},n.prototype.connectToRedux=function(){var e=this,t=this.$ngRedux.connect(function(e){return{groupSetCount:N.select.groupWorkspace&&N.select.groupWorkspace.getTotalGroupSetCount(e)||0,groupCount:N.select.groupWorkspace&&N.select.groupWorkspace.getTotalGroupCount(e)||0}},function(e){return{getGroupAndSetCount:function(t){return e(N.actions.groupWorkspace.getGroupAndSetCount(t))},resetGroupWorkspace:function(){return e(N.actions.groupWorkspace.reset())}}})(this);this.$scope.$on("$destroy",function(){e.resetGroupWorkspace(),t()})},n.prototype.updateBatchEditStatus=function(){var e=this.entitlementService.isEntitled(k.f.ModifyContent),t=this.entitlementService.isEntitled(k.f.ModifyContentAvailability),n=this.entitlementService.isEntitled(k.j.DeleteAdaptiveRelease),o=this.entitlementService.isEntitled(k.j.ModifyAdaptiveRelease),s=this.entitlementService.isEntitled(k.j.ViewAdaptiveRelease),r=this.entitlementService.isEntitled(k.j.ModifyAdaptiveReleaseDates),i=this.entitlementService.isEntitled(k.v.ModifyItemDueDate),a=this.entitlementService.isEntitled(k.f.DeleteContent),c=this.entitlementService.isEntitled(k.j.DeleteAssessment),l=this.entitlementService.isEntitled(k.f.DeployAssessment),u=(t||e)&&n,d=(o||r&&s)&&i,p=a&&e&&c&&l;this.canAccessBatchEdit=u||d||p},n.prototype.showFirstTimeConfirmationModal=function(){var t=this,n=this.$rootScope.$new();n.localizationTokenPrefix=this.contextCourse.course.isOrganization?"organization":"course";var o=this.modalService.open({scope:n,template:P});n.startPreview=function(){o.dismiss(),t.timeout(function(){t.startStudentPreview()},t.$scope,0)},e(window.document).find("body").addClass("dialog-pop-up-in-preview-mode")},n.prototype.startStudentPreview=function(){var t=this;this.CourseModel.$new(this.courseId).studentPreview.$save().$then(function(){t.$rootScope.$broadcast("TOGGLE-PREVIEW",!0),e(window.document).find("body").addClass("in-preview-mode-parent")})},n.prototype.launchInstitutionAccount=function(){var e=this;this.kloudService.launchInstitutionAccount(this.instAccount,this.oneDriveBizLink).then(function(){e.kloudService.getKloudlessAccounts().then(function(t){e.connectedInstAccount=e.kloudService.getConnectedInstitutionAccount(e.instAccount,t)})})},n.prototype.getCloudStorageIcon=function(){return this.instAccount?this.kloudService.getCloudStorageIcon(this.instAccount.type):""},n.prototype.getInstConnectString=function(){return this.connectedInstAccount?this.connectedInstAccount.name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.$scope),key:"base.tools.connectAccount"})},n.prototype.hasInstitutionAccount=function(){return this.instAccount&&this.instAccount.type&&"disabled"!==this.instAccount.type},n.$inject=["$scope","$rootScope",E.o.serviceName,E.r.serviceName,d.b,p.b,E.v.serviceName,b.b,u.c,x.b,w.b,"$modal",A.d,S.b,M.b,I.serviceName,v.d,"$log","$q",y.b,$.b,E.sb.serviceName,g.b,a.c,l.b,D.b,"$ngRedux",B.b,c.b,f.e,L.b,q.b],n}(m.a))}).call(this,n("EVdn"))},kxl5:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d});var o=n("mrSG"),s=n("IbG+"),r=n("pjml"),i=n("Sa5G"),a=n("Qbdf"),c=n("jhBu"),l=n("aHpC"),u="ultra.service.announcements.permissions",d="announcementPermissions",p=function(){function e(e,t){this.currentCourse=e,this.entitlements=t}return e.prototype.isCurrentCourseCompleted=function(){return this.currentCourse.course&&this.currentCourse.course.isComplete()},e.prototype.getCourseAnnouncementsPermissions=function(){return{create:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(i.a.CreateCourseAnnouncement),modify:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(i.a.ModifyCourseAnnouncement),delete:!this.isCurrentCourseCompleted()&&this.entitlements.isEntitled(i.a.DeleteCourseAnnouncement),viewPosted:this.entitlements.isEntitled(i.a.ViewPostedCourseAnnouncement),viewUnposted:this.entitlements.isEntitled(i.a.ViewUnpostedCourseAnnouncement)}},e.prototype.getSystemAnnouncementsPermissions=function(){return{create:this.entitlements.isEntitled(i.a.CreateSystemAnnouncement),modify:this.entitlements.isEntitled(i.a.ModifySystemAnnouncement),delete:this.entitlements.isEntitled(i.a.DeleteSystemAnnouncement),viewPosted:this.entitlements.isEntitled(i.a.ViewPostedSystemAnnouncement),viewUnposted:this.entitlements.isEntitled(i.a.ViewUnpostedSystemAnnouncement)}},e=o.__decorate([o.__param(0,Object(l.b)(a.e)),o.__param(1,Object(l.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e)}(p);s.module(u,[r.R]).service(d,p)},"m+3A":function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",function(){return h}),n.d(t,"controllerName",function(){return m});n("VZTK"),n("y95c"),n("JePn"),n("pWIa"),n("LQ2I"),n("rXuI"),n("Zhga");var o=n("IbG+"),s=n("TB6y"),r=n("Fvsw"),i=n("8VoP"),a=n("AI52"),c=n("ZzYr"),l=n("CPVT"),u=n("pjml"),d=n("yXB1"),p=n("LCXh");n.d(t,"template",function(){return p});var h="ultra.course.exports",m=i.b;o.module(h,[s.a,a.a,r.a,c.a,l.a,"mm.foundation.modal",u.R,d.a]).controller(i.b,i.a)},m4MG:function(e,t){e.exports='<div bb-load-bundle="components/directives/multi-user-usercard" class="multi-user-usercard" bb-foundation-defer>\n\n  <div class="multi-user-avatar usercard-button" ng-if="!noAvatar() && view() === \'multiple-instructors\'">\n    <bb-avatar user="multiUserUsercard.fakeMultiUser"></bb-avatar>\n  </div>\n\n  <div class="element-details">\n\n    \x3c!-- Multiple instructors usercard toggle button --\x3e\n    <div ng-if="view() === \'multiple-instructors\'" class="usercard-trigger">\n      <div class="multi-users-title name" ng-switch="multiUserUsercard.userType">\n        <span ng-switch-when="default" bb-translate>components.directives.multiUserUsercard.title.default</span>\n        <span ng-switch-when="instructor" course-org-token-resolver bb-translate>components.directives.multiUserUsercard.title.instructor</span>\n        <span ng-switch-when="leader" course-org-token-resolver bb-translate>components.directives.multiUserUsercard.title.leader</span>\n      </div>\n      <div class="view-users">\n        <button class="button-anchor"\n                ng-click="multiUserUsercard.toggleCard()"\n                ng-switch="multiUserUsercard.userType"\n                data-dropdown="{{::listId}}"\n                analytics-id="components.directives.multiUserUsercard.toggleCard.button"\n        >\n          <span class="separate-view-all-button" bb-translate>components.directives.multiUserUsercard.viewAll</span>\n          <span class="combined-view-all-button"\n                bb-translate-attrs="{\'aria-label\':\'components.directives.multiUserUsercard.viewAllSrText.\' +  multiUserUsercard.userType}"\n                translate-attrs-values="{ courseName: courseName }"\n                bb-translate\n                >\n                {{\'components.directives.multiUserUsercard.title.\' + multiUserUsercard.userType}}</span>\n        </button>\n      </div>\n    </div>\n\n    \x3c!-- User group usercard toggle button --\x3e\n    <div ng-if="view() === \'group-users\'" class="usercard-trigger assessment-exception">\n      <h2 bb-feature-toggle="differentiatedFeedback" remove-from-dom="true" class="slider-name">\n        <span class="page-title show-exceptions">\n          <bdi class="ellipse">{{groupUsersTitle()}}</bdi>\n        </span>\n      </h2>\n      <button aria-controls="group-members-id"\n            bb-feature-toggle="!differentiatedFeedback"\n            remove-from-dom="true"\n            data-dropdown="{{::listId}}"\n            aria-haspopup="true"\n            ng-click="multiUserUsercard.toggleCard()"\n            class="ellipse page-title group-member-dropdown clear"\n            analytics-id="components.directives.multiUserUsercard.toggleCard.button">\n        <span class="group-member-dropdown-flex-wrapper show-exceptions">\n          <bdi class="ellipse">{{groupUsersTitle()}}</bdi>\n          <bdi class="select-value"></bdi>\n        </span>\n      </button>\n    </div>\n\n    \x3c!-- Usercard list --\x3e\n    <div id="{{::listId}}" data-dropdown-content\n         ng-if="multiUserUsercard.isCardOpen"\n         class="multi-user-usercard-list"\n         ng-class="{\'multiple-instructors\': view() === \'multiple-instructors\', \'group-users\': view() === \'group-users\'}"\n         role="region" tabindex="-1"\n         bb-translate-attrs="{\'aria-label\': view() === \'multiple-instructors\' ? \'components.directives.multiUserUsercard.ariaLabels.instructor\' : \'components.directives.multiUserUsercard.ariaLabels.default\'}"\n         bb-focus\n         ng-keydown="multiUserUsercard.handleKeydown($event)"\n         bb-click-outside="multiUserUsercard.handleClickOutside()" is-active="true">\n      <div class="list-header" ng-if="view() === \'group-users\' && listHeader">\n        <h1>{{listHeader()}}</h1>\n      </div>\n      <ul>\n        <li ng-repeat="user in users | limitTo:multiUserUsercard.visibleUsersCount track by $index"\n            class="user-row js-user-{{::user.id}}"\n            ng-class="{\'separator\': ($index < users.length - 1) || showMoreButton()}"\n            aria-labelledby="user-row-name-{{::multiUserUsercard.userListId}}_{{$index}}">\n          <div class="user-avatar">\n            <bb-avatar user="user" auto-update="true" inactive="view() === \'group-users\' && !multiUserUsercard.isUserCourseAvailable(user.id)"></bb-avatar>\n          </div>\n          <div id="user-row-name-{{::multiUserUsercard.userListId}}_{{$index}}" class="user-name ellipsis">\n            <bb-username user="user" format="short" auto-update="true"></bb-username>\n            <div ng-if="view() === \'group-users\' && selectedUser === user" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </li>\n      </ul>\n      <div ng-show="multiUserUsercard.showMoreButton()" class="show-all-users">\n        \x3c!-- htmlhint:analytics-id:disable --\x3e\n        <button class="button button--text" ng-click="multiUserUsercard.showAll($event)"\n                bb-translate="components.directives.multiUserUsercard.showMoreUsers.plural"\n                translate-values="{count: multiUserUsercard.hiddenUsersCount()}"\n                analytics-id="components.directives.multiUserUsercard.showMoreUsers.button">\n        </button>\n        \x3c!-- htmlhint:analytics-id:enable --\x3e\n      </div>\n    </div>\n\n  </div>\n</div>\n'},mCRl:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-unlock",use:"icon-large-unlock-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-unlock"><g stroke="#767676" fill="none" fill-rule="evenodd"><path fill="#E0E0E0" stroke-linecap="round" stroke-linejoin="round" d="M34.5 37.5h-20c-1.518 0-3-1.802-3-3.5V20c0-1.698 1.482-3.5 3-3.5h20c1.518 0 3 1.889 3 3.587v13.892c0 1.697-1.482 3.521-3 3.521z" /><path fill="#FFF" d="M24.5 32.5c-1.273 0-2-1.227-2-2.5v-6c0-1.273.727-2.5 2-2.5 1.273 0 2 1.227 2 2.5v6c0 1.273-.727 2.5-2 2.5z" /><path d="M18.5 16V9.054C18.5 4.413 15 .5 9.5.5 4.858.5.5 4.413.5 9.054V16" /></g></symbol>'});s.add(r);e.exports=r},n0mJ:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var o=n("mrSG"),s=n("LvDl"),r=n("IbG+"),i=n("9zo4"),a=n("cs5G"),c=n("Oyr+"),l=n("0JpG"),u=n("A+IJ"),d=n("lr7J"),p=n("0+Qs"),h=n("pjml"),m=n("TnpK"),v=n("z1U9"),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(function(){function e(e,t,n,o,s,r,i,a,l,u,d,p,m,v){var b=this;this.$scope=e,this.CourseModel=t,this.CourseContentModel=n,this.contextCourse=o,this.contentService=s,this.rootNodeName=r,this.contextAreaName=i,this.allyService=a,this.bbLocalize=l,this.interval=u,this.ultraState=d,this.accessibility=p,this.$ngRedux=m,this.$q=v,this.CONTENT_LOADING_LIMIT=10,this.contentLoadInProgress=!1,this.canMove=!1,this.dropTargetAssignedFromButton=!1,this.syllabusKey="syllabusKey",this.loadMoreChildren=function(e,t){return void 0===t&&(t=!0),b._loadMoreChildren(e,t)},this.moveItemIntoFolder=function(e){var t,n=b._findNodeByIdFromParentNode(b.rootNode,e.dragContentId),o=b._findNodeByIdFromParentNode(b.rootNode,e.targetFolderId);if(o.isForcedSequenceModule()||o.isInForcedSequenceModule())return b.moveError("course.outline.addForbidden");if(e.originalElement.hide(),t=b.loadMoreChildren(o),h.r.ContentHandler.LearningModule.isEqualTo(n.contentHandler)&&(h.r.ContentHandler.Folder.isEqualTo(o.contentHandler)||h.r.ContentHandler.LearningModule.isEqualTo(o.contentHandler)))return b.moveError("course.outline.lmMoveError"),t.$then(function(){e.originalElement.show()});if(h.r.ContentHandler.Folder.isEqualTo(n.contentHandler)&&h.r.ContentHandler.LearningModule.isEqualTo(o.contentHandler)){if(!n.children)return n.getChildren({limit:0}).$asPromise().then(function(s){return s.some(function(e){return e.isUiFolder()})?(b.moveError("course.outline.lmMoveFolderError"),t.$then(function(){e.originalElement.show()})):t.$then(function(){b.doMoveItemFolder(n,o,e)})}),t;if(n.children.some(function(e){return e.isUiFolder()}))return b.moveError("course.outline.lmMoveFolderError"),t.$then(function(){e.originalElement.show()})}return t.$then(function(){b.doMoveItemFolder(n,o,e)})},this.moveItem=function(e){var t=b._findNodeByIdFromParentNode(b.rootNode,e.dragContentId),n=b._findNodeByIdFromParentNode(b.rootNode,e.parentFolderId);if(t.isLearningModule()&&0!==n.depth)return b.moveError("course.outline.lmMoveError");if(n.isForcedSequenceModule()||n.isInForcedSequenceModule())return b.moveError("course.outline.addForbidden");if(h.r.ContentHandler.Folder.isEqualTo(t.contentHandler)&&h.r.ContentHandler.LearningModule.isEqualTo(n.contentHandler)){if(!t.children)return void t.getChildren({limit:0}).$asPromise().then(function(o){if(o.some(function(e){return e.isUiFolder()}))return b.moveError("course.outline.lmMoveFolderError");b.doMoveItem(t,n,e)});if(t.children.some(function(e){return e.isUiFolder()}))return b.moveError("course.outline.lmMoveFolderError")}b.doMoveItem(t,n,e)},this.onFileDropHandler=function(e,t){b.folders=[],t||(t=b.rootNode),b.dropTarget=t,b.dropTargetAssignedFromButton=!1,b.dropTargetInsertLocation=null},this.contextArea=i,"SKIP_LOAD_MORE_CHILDREN"!==this.contextArea&&(this.$scope.course&&(this.$scope.course.membership&&this.$scope.course.membership.isActAsInstructorMembership()&&(this.canMove=!0),this.rootNode=this.contentService.findRootNode(this.$scope.course.model,r),this.rootNode.depth=0,this.rootNode.title=r.toString(),this.rootNode.contentHandler=h.r.ContentHandler.Folder,this.rootNode.hasMoreChildren=!0,this.rootNode.children=null),this._loadMoreChildren(this.rootNode)),this.setDeleteContentEventResponder(),e.$on("content-item-mouseover",function(t,n){e.$apply(function(){e.$broadcast("content-item-hover",n)})}),e.$on("content-outline-mouse-leave",function(){e.$broadcast("content-outline-hover-end")}),e.$on("scorm-content-canceled",function(e,t){b.cachedNode=b.rootNode.findInTreeById(t.parentId,b.cachedNode),b.deleteNode(t,b.cachedNode,!1)}),e.$on(c.e,function(e,t,n,o){o===c.c.Folder&&b.folderUpload(t,n)}),e.$on(c.e,function(e,t,n,o){if(o===c.c.File)if(n.path)var s=b.interval(function(){var e=b.findFolder(n.path,b.folders,n.path.split("/").length-1);null!=e&&e.id&&(b.createFileContent(e,n,t,!0),b.interval.cancel(s))},b.$scope,1e3,10);else b.createFileContent(b.dropTarget,n,t,!1)}),e.$on(c.e,function(e,t,n,o,s,r,i,a){a===c.c.AssignDropTarget&&b.assignDropTarget(t,n,o,s,r,i)}),e.$on(c.e,function(e,t,n){n===c.c.AssignDropTarget&&t===b.syllabusKey&&b.assignDropTarget(b.rootNode.id,"start",void 0,1,t,void 0)}),e.$on(c.e,function(e,t,n){n===c.c.DeleteContent&&b.$scope.$root.$broadcast("deleteContent",t)}),e.$on(c.e,function(t,n,o,s,r){(s===c.c.Error||s===c.c.Cancel)&&o&&o.content&&e.$root.$broadcast("deleteContent",o.content)}),e.$on(c.e,function(e,t,n,o,s,r,i){s===c.c.Uploaded&&b.populateContentFileDetails(o,n).then(function(e){e.$pk?(n.ui.isUploading=!1,n.isAvailable=!1):e.$save().$then(function(e){e.ui.isUploading=!1,e.isAvailable=!1})})}),e.$on(c.e,function(e,t){}),this.subscribeToRedux()}return e.prototype.subscribeToRedux=function(){var e=this.$ngRedux.connect(null,function(e){return{deleteContentInStore:function(t){return e(v.actions.content.deleteContentInStore(t))},moveContentInStore:function(t,n,o){return e(v.actions.content.moveContentInStore(t,n,o))}}})(this);this.$scope.$on("$destroy",e)},e.prototype._loadMoreChildren=function(e,t){var n=this;void 0===t&&(t=!0);var o=this._loadMoreChildrenImp(e);return this.$scope.$root&&o.$promise&&t&&this.$scope.$root.$broadcast(d.a,"content-outline-"+e.id,o.$promise),o.$then(function(){e===n.rootNode&&n.recalculateEmptyState(),n.contentService.fetchIndicators(n.contextCourse.courseId).then(function(t){n.updateIndicators(t,e)})}),o},e.prototype.updateIndicators=function(e,t){t||(t=this.rootNode);var n=s.keyBy(t.children,function(e){return e.ui.hasIndicator=!1,e.$pk});e&&e.forEach(function(e){n.hasOwnProperty(e.contentId)&&(n[e.contentId].ui.hasIndicator=e.newData)})},e.prototype.dismissContentIndicators=function(e){var t=this.rootNode.findInTreeById(e);t&&(t.ui.hasIndicator=!1)},e.prototype.recalculateEmptyState=function(){this.isEmpty=null==this.rootNode.children||0===this.rootNode.children.length},e.prototype.populateContentFileDetails=function(e,t){return t.title=decodeURIComponent(e.fileName),t.contentHandler=h.r.ContentHandler.File,t.contentDetail={"resource/x-bb-file":{file:{fileName:e.fileName,fileLocation:e.fileLocation}}},t.$asPromise()},e.prototype.setDeleteContentEventResponder=function(){var e=this;this.$scope.$on("deleteContent",function(t,n,o){void 0===o&&(o=!0),e.rootNode&&e.rootNode.children?e.rootNode.children.$then(function(){e.cachedNode=e.rootNode.findInTreeById(n.parentId,e.cachedNode),e.deleteNode(n,e.cachedNode,o)}):e.deleteNode(n,null,o)})},e.prototype.deleteNode=function(e,t,n){var o=this;if(void 0===n&&(n=!0),!e.ui.isDeleted){var s=this.$q.when();n&&(s=this.deleteContent(e).then(function(){o.deleteContentInStore(e.id)})),s.then(function(){o.removeNodeFromOutline(e,t)})}},e.prototype.removeNodeFromOutline=function(e,t){if(t&&t.children){var n=void 0;if(null==e.id&&h.r.ContentHandler.File.isEqualTo(e.contentHandler)&&e.ui.isUploading){var o=t.children.filter(function(t){return t.ui.fileUploadId===e.ui.fileUploadId})[0];n=t.children.indexOf(o)}else n=t.children.indexOfItemById(e.id);n>=0&&(t.children.splice(n,1),t.children.paging&&t.children.paging.count--,this.updateDeleteFocus(n,t))}},e.prototype.updateDeleteFocus=function(e,t){if(t.children&&t.children.length){var n=t.children[e===t.children.length?e-1:e].id;this.accessibility.setFocusOverrideOnPanel("[data-content-id="+n+"] .content-title",".js-content-outline, .js-engagement-outline")}else t.parentId?this.accessibility.setFocusOverrideOnPanel("[data-content-id="+t.id+"] .content-title",".js-content-outline, .js-engagement-outline"):this.accessibility.setFocusOverrideOnPanel(".bb-close",".bb-offcanvas-panel-wrap")},e.prototype.deleteContent=function(e){return this.contentService.deleteContent(e)},e.prototype._findNodeByIdFromParentNode=function(e,t){return e.findLoadedNodeById(t,3)},e.prototype._loadMoreChildrenImp=function(e){var t,n=this;if(null==e.hasMoreChildren&&(e.hasMoreChildren=!0),e.ui.isUploading&&(e.hasMoreChildren=!1),!e.hasMoreChildren)return this.CourseContentModel.$collection();if(this.contentLoadInProgress)return null!=e.children?e.children:this.CourseContentModel.$collection();this.contentLoadInProgress=!0;var o=null==e.children?0:e.children.length;return null==e.children?(t=e.children=e.getChildren({limit:this.CONTENT_LOADING_LIMIT,resolveLinks:!0,expand:"assignedGroups,selfEnrollmentGroups.group"}),e.children.$then(function(){n._determineHasMoreChildren(e,o),n.contentLoadInProgress=!1})):t=e.getChildren({offset:e.children.length,limit:this.CONTENT_LOADING_LIMIT,resolveLinks:!0,expand:"assignedGroups,selfEnrollmentGroups.group"}).$then(function(t){t.forEach(function(t){t.$scope=e.children,e.children.push(t)}),n._determineHasMoreChildren(e,o),n.contentLoadInProgress=!1}),t},e.prototype._determineHasMoreChildren=function(e,t){e.children.length-t<this.CONTENT_LOADING_LIMIT&&(e.hasMoreChildren=!1)},e.prototype.folderUpload=function(e,t){var n,o,s=this,i=!0,a={parentId:"",positionBefore:void 0,positionAfter:void 0,depth:0},c=!t.path||t.name===t.path,l=this.interval(function(){c?s.dropTargetInsertLocation?a=s.calculateAddContentButtonInsertLocation():(o=h.r.ContentHandler.Folder.isEqualTo(s.dropTarget.contentHandler))?s.dropTarget.depth<u.l?(a.depth=s.dropTarget.depth+1,a.parentId=s.dropTarget.id):(a.depth=u.l,a.parentId=s.dropTarget.parentId):(a.parentId=s.dropTarget.parentId,a.depth=s.dropTarget.depth):(n=s.findFolder(t.path,s.folders,t.path.split("/").length-1))&&(n.depth<u.l?(a.depth=n.depth+1,a.parentId=n.$pk):(a.depth=u.l,a.parentId=n.parentId));var e=s.rootNode.findInTreeById(a.parentId);if(""!==a.parentId&&e){if(i=!0,r.isUndefined(n)){var d=void 0;if(!s.dropTarget&&s.dropTargetInsertLocation){var p=s.$scope.course.model.contents.$new(s.addContentButtonContentId);o=h.r.ContentHandler.Folder.isEqualTo(p.contentHandler),d=s.finalizeMultiLevelFolderInsertLocation(p,a,o,i),a=d.insertLocation,i=d.keepGoing}else d=s.finalizeMultiLevelFolderInsertLocation(s.dropTarget,a,o,i),a=d.insertLocation,i=d.keepGoing}else if(r.isUndefined(n.children))a.positionAfter="end";else{var m=n.children[n.children.length-1];m.id?a.positionAfter=m.id:i=!1}i&&(s.completeFolderUpload(a,e,t),s.interval.cancel(l))}},this.$scope,1e3,10)},e.prototype.finalizeMultiLevelFolderInsertLocation=function(e,t,n,o){var s={insertLocation:t,keepGoing:o};if(n)if(r.isUndefined(e.children))s.insertLocation.positionBefore="start";else if(e.children.length>0){var i=e.children[this.dropTarget.children.length-1];i.id?s.insertLocation.positionAfter=i.id:s.keepGoing=!1}else s.insertLocation.positionBefore="start";else null==t.positionBefore&&(s.insertLocation.positionAfter=e.id||e.$pk);return s},e.prototype.completeFolderUpload=function(e,t,n){var o=this;this.allyService.fileUploadEvent();var s=this.interval(function(){if(t.children)return o.interval.cancel(s),o.contentService.makeContentInContentTree(t,o.contextCourse.courseId,e.parentId,e.positionBefore,e.positionAfter,!0).then(function(t){var s=t.content;s.title=n.name,o.folders.push(s),o.fillInDetailsForUploadedContent(s,e),s.contentDetail={"resource/x-bb-folder":{isFolder:!0}},s.contentHandler=h.r.ContentHandler.Folder,s.$save().$then(function(e){e.ui.isUploading=!1})})},this.$scope,100,10)},e.prototype.fillInDetailsForUploadedContent=function(e,t){e.parentId=t.parentId,e.positionBefore=t.positionBefore,e.positionAfter=t.positionAfter,e.isAvailable=!1,e.depth=t.depth,e.description="",e.courseId=this.contextCourse.courseId,e.ui.isUploading=!0},e.prototype.doMoveItemFolder=function(e,t,n){var o=this,s=this._findNodeByIdFromParentNode(this.rootNode,e.parentId);e.moveTo(t,"start",null),e.$patch().$then(function(){s.children.paging.count--,t.children.paging.count++,o.moveContentInStore(n.dragContentId,n.targetFolderId,e.position)}),n.originalElement.show()},e.prototype.moveError=function(e){},e.prototype.doMoveItem=function(e,t,n){var o=this,s=this._findNodeByIdFromParentNode(this.rootNode,e.parentId);t!==s&&(t.children.paging.count++,s.children.paging.count--),e.moveTo(t,n.positionBeforeId,n.positionAfterId),e.$patch().$then(function(){o.moveContentInStore(n.dragContentId,n.parentFolderId,e.position)})},e.prototype.assignDropTarget=function(e,t,n,o,s,r){this.dropTargetInsertLocation={parentId:e,positionBefore:t,positionAfter:n,depth:o},this.dropTargetAssignedFromButton=!0,this.addContentButtonContentId=r?r.id:"ROOT",this.folders=[]},e.prototype.createFileContent=function(e,t,n,o){var s,r=this,i=h.r.ContentHandler,a=i.Folder,l=i.LearningModule,u=e&&(a.isEqualTo(e.contentHandler)||l.isEqualTo(e.contentHandler)),d=this.calculateFileInsertLocation(e,u,o);if(null!=d)return this.allyService.fileUploadEvent(),this.contentService.makeContentInContentTree(this.rootNode,this.contextCourse.courseId,d.parentId,d.positionBefore,d.positionAfter,!0).then(function(o){s=o.content,r.fillInDetailsForUploadedContent(s,d),s.ui.fileUploadId="fileUpload-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),s.contentHandler=h.r.ContentHandler.File,null!=t&&(s.ui.file=t),u&&!e.ui.isOpen&&s.parentId===e.id&&r.toggleFolder(e),r.$scope.$root.$broadcast(c.e,n,s,c.c.ContentCreated)})},e.prototype.canCreateDiscussion=function(){return this.canCreateAllContent()||this.canOnlyCreateDiscussion()},e.prototype.canOnlyCreateDiscussion=function(){return this.contentService.canOnlyCreateDiscussion(this.rootNode)},e.prototype.canCreateAllContent=function(){return this.contentService.canCreateAllContent(this.rootNode)},e.prototype.calculateAddContentButtonInsertLocation=function(){var e={parentId:"",positionBefore:void 0,positionAfter:void 0,depth:0};return e.parentId=this.dropTargetInsertLocation.parentId,e.positionBefore=this.dropTargetInsertLocation.positionBefore,e.positionAfter=this.dropTargetInsertLocation.positionAfter,e.depth=this.dropTargetInsertLocation.depth,e},e.prototype.calculateFileDNDInsertLocation=function(e,t,n){if(n)if(e.parentId=t.id,e.depth=t.depth+1,t.children&&t.children.length>0){var o=t.children[t.children.length-1];o.id?e.positionAfter=o.id:e=null}else e.positionBefore="start";else e.parentId=t.parentId,e.depth=t.depth,e.positionAfter=t.id;return e},e.prototype.calculateFileInsertLocation=function(e,t,n){var o={parentId:"",positionBefore:void 0,positionAfter:void 0,depth:0};return this.dropTargetInsertLocation&&!n?this.calculateAddContentButtonInsertLocation():this.calculateFileDNDInsertLocation(o,e,t)},e.prototype.findFolder=function(e,t,n){if(--n>=0){var o=e.split("/")[n],s=t.filter(function(e){return e.title===o});if(1===s.length)return s[0];if(s.length>0)return this.findFolder(e,s,n)}},e.prototype.toggleFolder=function(e){this.$scope.$root.$broadcast("toggle-folder",e)},e.$inject=[a.b,l.serviceName,p.b,m.d,i.c,"$ngRedux","$q"],e}())},nqDy:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-post-a",use:"icon-large-post-a-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-post-a"><g stroke="#FF3B30" stroke-linejoin="round" stroke-miterlimit="10"><path fill="#FBE9E8" d="M33.016 8.297l-22.062 10.75v10.938l7.225-4.91-2.038-1.965z" /><g fill="#FFF"><path d="M16.141 23.104l7.853 7.573c.419.404 1.115.238 1.307-.311l7.714-22.074-16.874 14.812zM10.954 19.041l22.063-10.75-27.374 4.876c-.678.121-.895.986-.354 1.413l5.665 4.461z" /></g><path fill="none" d="M10.954 29.985l5.187-6.875" /></g></symbol>'});s.add(r);e.exports=r},oST1:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-default-conversion-exceptions",use:"icon-medium-default-conversion-exceptions-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-default-conversion-exceptions"><path d="M12.75 18.5a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 15l-.5-10h1L12 15zM12 23C5.9249 23 1 18.0751 1 12c0-2.923 1.1402-5.5799 3-7.5499M12 1c6.0751 0 11 4.9249 11 11 0 2.8985-1.121 5.5351-2.9532 7.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M1 5l3-1v3M23 19l-3 1v-3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},q5SQ:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-settings",use:"icon-small-settings-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-settings"><path d="M7.5977 1.5453c.1998-.2709.6048-.2709.8046 0l.9644 1.307a.5.5 0 0 0 .5534.1798l1.5484-.4906c.3209-.1016.6485.1364.651.473l.0119 1.6242a.5001.5001 0 0 0 .342.4707l1.5411.5133c.3193.1064.4445.4916.2486.7653l-.945 1.321a.5002.5002 0 0 0 0 .582l.945 1.321c.1959.2737.0707.6589-.2486.7653l-1.5411.5133a.5.5 0 0 0-.342.4706l-.0119 1.6243c-.0025.3366-.3301.5746-.651.473L9.92 12.9679a.5.5 0 0 0-.5533.1798l-.9644 1.307c-.1998.2709-.6048.2709-.8046 0l-.9644-1.307a.5.5 0 0 0-.5534-.1798l-1.5484.4906c-.3209.1016-.6485-.1364-.651-.473l-.012-1.6243a.4999.4999 0 0 0-.342-.4706l-1.541-.5133c-.3193-.1064-.4445-.4916-.2486-.7653l.945-1.321a.5.5 0 0 0 0-.582l-.945-1.321c-.1959-.2737-.0707-.6589.2486-.7653l1.541-.5133a.5.5 0 0 0 .342-.4707l.012-1.6242c.0025-.3366.3301-.5746.651-.473l1.5484.4906a.5.5 0 0 0 .5534-.1798l.9644-1.307z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 8c0 1.1046-.8954 2-2 2s-2-.8954-2-2 .8954-2 2-2 2 .8954 2 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},r3Zo:function(e,t,n){var o,s,r;window,e.exports=(o=n("q1tI"),s=n("i8i4"),r=n("HIKz"),function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(2),r=n(3);t.AllyWidget=r.default,t.WidgetType=r.WidgetType;const i=n(5);t.AllyContentId=i.default;const a={renderContentId:(e,t)=>{s.render(o.createElement(i.default,Object.assign({},t)),e)},renderWidget:(e,t)=>{s.render(o.createElement(r.default,Object.assign({},t)),e)},destroyComponent:e=>{s.unmountComponentAtNode(e)}};t.default=a},function(e,t){e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),s=n(4);var r;!function(e){e[e.ScoreIndicator=0]="ScoreIndicator",e[e.AlternativeFormats=1]="AlternativeFormats"}(r=t.WidgetType||(t.WidgetType={})),t.default=({contentRef:e,widgetType:t,text:n,ariaLabel:i})=>{const a={"data-ally-content-ref":e},c={};switch(i&&(c["aria-label"]=i),n||(c.style={width:"100%"}),t){case r.ScoreIndicator:if(a["data-ally-invoke"]="instructorfeedback",!n)return o.createElement("span",Object.assign({},a,c,{"data-ally-scoreindicator":"circle",onKeyDown:e=>{switch(e.keyCode){case 32:e.target.dispatchEvent(new Event("click"))}}}));break;case r.AlternativeFormats:if(a["data-ally-invoke"]="alternativeformats",!n)return o.createElement("button",Object.assign({},a,c),o.createElement(s.SvgIcon,{iconName:"ally-download",iconSize:"small"}))}return o.createElement(s.Link,Object.assign({},c,{additionalAttributes:a}),n)}},function(e,t){e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.default=({contentId:e,fileId:t,filePreviewUrl:n})=>o.createElement("a",{"data-ally-content-id":e,"data-ally-file-eid":t,"data-ally-file-preview-url":n,style:{display:"none"}})}]))},rXuI:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-export",use:"icon-medium-export-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-export"><g clip-path="url(#icon-medium-export_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 1L9 15M17 1h6v6M23 14v9H1V1h10" /></g><defs><clipPath id="icon-medium-export_clip0"><path fill="#fff" d="M0 0h24v24H0z" /></clipPath></defs></symbol>'});s.add(r);e.exports=r},tD7f:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-attendance",use:"icon-medium-attendance-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-attendance"><path d="M14 3h7v20H3V3h7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="12" cy="3" r="2" stroke-width="2" /><path d="M7 16l3 3M7 19l3-3M7 12l1 1 2-2M10 3C6 3 6 8 6 8h12s0-5-4-5M13 12h5M13 17h5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},tmuc:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-upload-cloud",use:"icon-small-upload-cloud-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-upload-cloud"><path d="M1 10c0 3 2 4 4 4h7c2 0 3-1.3431 3-3 0-2-2-3-2-3s1-6-5-6C3 2 3 7 3 7s-2 .5-2 3zM8 6v4M10 8H6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.add(r);e.exports=r},v68R:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-unlock",use:"icon-medium-unlock-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-unlock"><path d="M11 16c0-.5523.4477-1 1-1v0c.5523 0 1 .4477 1 1v2c0 .5523-.4477 1-1 1v0c-.5523 0-1-.4477-1-1v-2z" stroke-width="2" /><path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 11h18v12H3zM6 11V6s0-5 6-5c2.6981 0 4.1829 1.011 5 2.1239" /></symbol>'});s.add(r);e.exports=r},vNjs:function(e,t,n){},wAqU:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-medium-onedrivebiz",use:"icon-medium-onedrivebiz-usage",viewBox:"0 0 24 24",content:'<symbol fill="currentColor" xmlns="http://www.w3.org/2000/svg" stroke="transparent" viewBox="0 0 24 24" id="icon-medium-onedrivebiz"><path d="M21.8171 14.5845c0-2.0178-1.6394-3.6572-3.6572-3.6572-.6306 0-1.135.1261-1.6395.3783-.7567-1.0089-2.0178-1.6395-3.405-1.6395-2.1439 0-4.0356 1.6395-4.2878 3.7834-1.7656 0-3.1528 1.3872-3.1528 3.1528 0 1.7655 1.3872 3.1528 3.1528 3.1528H21.3127c1.5133 0 2.6483-1.135 2.6483-2.6484.2522-1.2611-.7567-2.3961-2.1439-2.5222z" fill="#000" /><path d="M4.54 16.6023c0-2.1439 1.5134-3.9095 3.405-4.2878.7567-2.27 2.9006-3.9095 5.2967-3.9095 1.3873 0 2.6484.5045 3.6573 1.3872.5044-.126.8828-.2522 1.3872-.2522h.1261C18.2862 7.0178 16.0162 5 13.3678 5c-2.0177 0-3.6572 1.135-4.4139 2.6483-.6305-.2522-1.3872-.5044-2.1439-.5044-2.27 0-4.0355 1.7656-4.0355 4.0356 0 .2522 0 .5044.126.7566C1.2612 12.1884 0 13.4495 0 15.0889c0 1.7656 1.5133 3.2789 3.279 3.2789h1.5133c-.1262-.5044-.2523-1.135-.2523-1.7655z" fill="#000" /></symbol>'});s.add(r);e.exports=r},wOXW:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-large-grades",use:"icon-large-grades-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-grades"><path fill="#FFF" d="M7 37.5c-.827 0-1.5-.673-1.5-1.5V2c0-.827.673-1.5 1.5-1.5h14.609l1.979 7.912 7.912 1.979V36c0 .827-.673 1.5-1.5 1.5H7z" /><path fill="#767676" d="M21.219 1l1.811 7.243.146.582.582.146L31 10.781V36c0 .551-.449 1-1 1H7c-.551 0-1-.449-1-1V2c0-.551.449-1 1-1h14.219M22 0H7C5.9 0 5 .9 5 2v34c0 1.1.9 2 2 2h23c1.1 0 2-.9 2-2V10l-8-2-2-8z" /><path fill="#E0E0E0" d="M22.996 10.5c-.825 0-1.496-.673-1.496-1.5V.5h.5c.132 0 .26.053.354.146l9 9.002A.505.505 0 0 1 31.5 10v.5h-8.504z" /><path fill="#767676" d="M22 1l9 9h-8.004C22.447 10 22 9.551 22 9V1m0-1h-1v9c0 1.1.898 2 1.996 2H32v-1a.995.995 0 0 0-.293-.706l-9-9.003A1.0056 1.0056 0 0 0 22 0z" /><path fill="#FFF9CC" d="M19.24 32.5c-.161 0-.32-.087-.415-.229-.055-.08-.134-.248-.048-.464L20.66 27.1a.511.511 0 0 1 .11-.167l9.754-9.754c.284-.284.661-.44 1.062-.44s.778.156 1.062.44l1.41 1.41c.586.586.586 1.539 0 2.125l-9.752 9.752a.4759.4759 0 0 1-.169.112l-4.707 1.883a.4895.4895 0 0 1-.19.039z" /><path fill="#767676" d="M31.587 17.239c.268 0 .52.104.709.294l1.41 1.41c.391.391.391 1.027 0 1.418l-9.753 9.753-4.711 1.879 1.884-4.708 9.752-9.752a.997.997 0 0 1 .709-.294m0-1c-.513 0-1.025.196-1.416.587l-9.752 9.752a.9988.9988 0 0 0-.222.337l-1.883 4.708c-.277.69.259 1.377.926 1.377.123 0 .25-.023.378-.074l4.708-1.883c.126-.05.241-.126.337-.222l9.752-9.752c.782-.782.782-2.05 0-2.832l-1.41-1.41a2.0025 2.0025 0 0 0-1.418-.588z" /><path fill="#FFD8D6" d="M32.646 21.42l1.059-1.058a.997.997 0 0 0 .294-.709.993.993 0 0 0-.294-.709l-1.41-1.41a.997.997 0 0 0-.709-.294.993.993 0 0 0-.709.294l-1.058 1.058" /><path fill="#767676" d="M29.4654 17.5305l4.2426 4.2426-.7071.7071-4.2426-4.2426zM21.6877 26.723l2.8284 2.8283-.7071.7071-2.8284-2.8284z" /><path fill="none" stroke="#CDCDCD" stroke-linecap="round" stroke-miterlimit="10" d="M10.5 15.5h16M10.5 19.5h9M10.5 23.5h5M10.5 31.5h5M10.5 27.5h5" /></symbol>'});s.add(r);e.exports=r},wYJc:function(e,t,n){var o=n("4BeY"),s=n("IaFt"),r=new o({id:"icon-small-video",use:"icon-small-video-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-video"><g clip-path="url(#icon-small-video_clip0)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 1h14v14H1zM4 1v14M12 1v14M0 4h4M12 4h4M0 8h4M12 8h4M0 12h4M12 12h4" /><path d="M7 7v2l2-1-2-1z" /></g><defs><clipPath id="icon-small-video_clip0"><path fill="#fff" d="M0 0h16v16H0z" /></clipPath></defs></symbol>'});s.add(r);e.exports=r},y95c:function(e,t,n){},zByx:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("X+qL"),n("IbA1"),n("SfHa");var o=n("IbG+"),s=n("0JpG"),r=n("J4qU"),i=n("A9Mr"),a="ultra.components.directives.calendar.scheduleOutline",c=function(){function e(e,t,n){this.scope=e,this.scheduleService=t,this.localize=n,this.nextEventDates=Object.create(null),this.showMore=!1}return e.prototype.getSchedules=function(){var e=this.scope.scheduleOutlineCollection();return e.length>2?(this.showMore=!0,e=this.scope.scheduleOutlineCollection().slice(0,2)):this.showMore=!1,e},e.prototype.getWeeklyRepeatLabel=function(e){return this.scheduleService.getWeeklyRepeatLabel(e,"scheduleOutline.weekdayDelimiter",this.scope.weekDayFormat,this.localize.getLocale(this.scope))},e.prototype.getNextEventDate=function(e){return this.scheduleService.getNextMonthlyEventDate(e,this.nextEventDates)},e.prototype.getNextDailyEventDate=function(e){return this.scheduleService.getNextDailyEventDate(e,this.nextEventDates)},e.prototype.areAnyLocationsSet=function(){return this.scope.scheduleOutlineCollection().some(function(e){return!!e.location})},e.$inject=["scope",r.b,s.serviceName],e}(),l=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=i,this.scope={scheduleOutlineCollection:"&",compact:"&",weekDayFormat:"@?"},this.link=function(e){e.scheduleOutline=t.$injector.instantiate(c,{scope:e}),e.TRUNCATION_LOCATION_COURSE_CARD=20,e.TRUNCATION_LOCATION_OUTLINE=35}}return e.$inject=["$injector"],e}();o.module(a,[r.a]).directive("bbScheduleOutline",["$injector",function(e){return e.instantiate(l)}])}}]);