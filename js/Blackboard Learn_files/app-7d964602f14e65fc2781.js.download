!function(e){function t(t){for(var r,i,a=t[0],u=t[1],c=t[2],l=0,p=[];l<a.length;l++)i=a[l],o[i]&&p.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(d&&d(t);p.length;)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(s.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={234:0,238:0},o={234:0,238:0},s=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[];i[e]?t.push(i[e]):0!==i[e]&&{0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,13:1,14:1,18:1,19:1,20:1,23:1,25:1,26:1,27:1,28:1,31:1,32:1,33:1,34:1,35:1,37:1,38:1,40:1,41:1,68:1,69:1,70:1,71:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1,80:1,81:1,83:1,84:1,85:1,87:1,115:1,116:1,117:1,118:1,119:1,120:1,121:1,122:1,123:1,124:1,128:1,129:1,130:1,131:1,132:1,133:1,134:1,135:1,136:1,137:1,138:1,139:1,140:1,141:1,142:1,143:1,144:1,147:1,149:1,236:1,242:1,243:1,244:1,245:1,246:1,247:1,248:1,249:1,250:1,251:1,252:1,253:1,254:1,255:1,256:1,257:1,258:1,259:1,260:1,261:1,262:1,263:1,264:1,265:1,266:1,267:1,268:1,269:1,270:1,274:1,275:1,276:1,277:1,278:1,279:1,280:1,281:1,282:1,283:1,284:1,285:1,286:1,287:1,288:1,289:1,293:1,294:1,295:1,296:1,297:1,298:1,299:1,300:1,301:1,302:1,303:1,304:1,305:1,306:1,307:1,308:1,309:1,310:1,311:1,312:1,313:1,314:1,317:1,318:1,319:1,320:1,321:1,322:1,323:1,324:1,325:1,326:1,327:1,328:1,329:1,330:1,331:1,332:1,333:1,334:1,335:1,336:1,337:1,338:1,339:1,340:1,341:1,343:1,347:1,348:1,349:1,350:1,352:1,353:1,354:1,356:1,357:1,360:1,361:1,362:1,363:1,364:1,365:1,366:1,367:1,369:1,370:1,371:1,374:1,375:1,376:1,377:1,378:1,380:1,381:1}[e]&&t.push(i[e]=new Promise(function(t,n){for(var r=e+"-7d964602f14e65fc2781.css",o=a.p+r,s=document.getElementsByTagName("link"),u=0;u<s.length;u++){var c=(d=s[u]).getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(c===r||c===o))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){var d;if((c=(d=l[u]).getAttribute("data-href"))===r||c===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.request=r,delete i[e],p.parentNode.removeChild(p),n(s)},p.href=o,document.getElementsByTagName("head")[0].appendChild(p)}).then(function(){i[e]=0}));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,r){n=o[e]=[t,r]});t.push(n[2]=r);var s,u=document.createElement("script");u.charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.src=function(e){return a.p+""+({88:"locale-ar-sa",89:"locale-cs-cz",90:"locale-cy-gb",91:"locale-da-dk",92:"locale-de-de",93:"locale-en",94:"locale-en-au",95:"locale-en-gb",96:"locale-en-us-k12",97:"locale-en-us-pro",98:"locale-en-za",99:"locale-es-es",100:"locale-fr-fr",101:"locale-it-it",102:"locale-ja-jp",103:"locale-ko-kr",104:"locale-ms-my",105:"locale-nb-no",106:"locale-nl-nl",107:"locale-pl-pl",108:"locale-pt-br",109:"locale-ru-ru",110:"locale-sv-se",111:"locale-th-th",112:"locale-tr-tr",113:"locale-zh-cn",114:"locale-zh-tw",235:"app_develop",236:"courses",237:"datepicker-locales",239:"institution-page"}[e]||e)+"-7d964602f14e65fc2781.js"}(e),s=function(t){u.onerror=u.onload=null,clearTimeout(c);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src,s=new Error("Loading chunk "+e+" failed.\n("+r+": "+i+")");s.type=r,s.request=i,n[1](s)}o[e]=void 0}};var c=setTimeout(function(){s({type:"timeout",target:u})},12e4);u.onerror=u.onload=s,document.head.appendChild(u)}return Promise.all(t)},a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a.oe=function(e){throw console.error(e),e};var u=window.webpackJsonp=window.webpackJsonp||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=c;s.push(["e6ZA",240]),n()}({"+0ue":function(e,t,n){e.exports=n("ZJ/X")(418)},"+3BC":function(e,t,n){},"+4Px":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"i",function(){return l}),n.d(t,"j",function(){return d}),n.d(t,"l",function(){return p}),n.d(t,"m",function(){return f}),n.d(t,"p",function(){return m}),n.d(t,"q",function(){return h}),n.d(t,"r",function(){return g}),n.d(t,"s",function(){return v}),n.d(t,"t",function(){return b}),n.d(t,"u",function(){return y}),n.d(t,"v",function(){return S}),n.d(t,"w",function(){return C}),n.d(t,"h",function(){return w}),n.d(t,"k",function(){return $}),n.d(t,"o",function(){return k}),n.d(t,"n",function(){return T}),n.d(t,"x",function(){return I}),n.d(t,"y",function(){return E}),n.d(t,"A",function(){return P}),n.d(t,"z",function(){return A});var r=8,i=188,o=46,s=40,a=35,u=13,c=27,l=36,d=37,p=110,f=108,m=34,h=33,g=190,v=39,b=32,y=9,S=38,C=48,w=53,$=57,k=96,T=105;function I(e){var t=e.keyCode;return t===S||t===s||t===d||t===v}function E(e){return e.keyCode===u||e.keyCode===f}function P(e){return e.keyCode===y&&!e.shiftKey}function A(e){return e.keyCode===y&&e.shiftKey}},"+7+6":function(e,t,n){e.exports=n("ZJ/X")(1947)},"+IM5":function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",function(){return d}),n.d(t,"TrueFalseAnswerType",function(){return p});var r=n("mrSG"),i=(n("TeAI"),n("IbG+")),o=n("oSB+"),s=n.n(o),a=n("Sa5G");n.d(t,"QuestionType",function(){return a.A}),n.d(t,"FIMBAnswerEvaluationType",function(){return a.o});var u=n("yCC5"),c=n("Rjd/"),l=n("nkTj"),d=u.Ub,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.TrueFalse=new t("true_false"),t.AgreeDisagree=new t("agree_disagree"),t.RightWrong=new t("right_wrong"),t.YesNo=new t("yes_no"),t.UserEnteredLabels=new t("user_entered_labels"),t}(s.a);c.a.factory(d,["restmod",l.d,function(e){return e.model().mix({ui:{init:function(){return{rendered:!1}}},$extend:{Record:{getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.edit},saveAlignedGoals:function(e){var t=this;return e&&(this.alignedGoals=e.map(function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}})),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals,questionType:this.questionType}}).$then(function(){t.$getPreviousVersion()&&(t.$getPreviousVersion().alignedGoals=t.alignedGoals)})},isPresentationOnly:function(){return a.A.PresentationOnly.isEqualTo(this.questionType)}},Collection:{getInsertIndex:function(e){var t=-1,n=e.positionBefore,r=e.positionAfter;return null!=n&&(t="start"===i.lowercase(n)?0:this.indexOfItemById(n)),t<0&&null!=r&&("end"===i.lowercase(r)?t=this.length:(t=this.indexOfItemById(r))>=0&&t++),t},indexOfItemById:function(e){return this.$indexOf(function(t){return t.id===e})}}}})}])},"+O05":function(e,t,n){"use strict";n.d(t,"c",function(){return m}),n.d(t,"d",function(){return h}),n.d(t,"b",function(){return r}),n.d(t,"a",function(){return g});var r,i=n("mrSG"),o=n("LvDl"),s=n("IbG+"),a=n("pjml"),u=n("12mu"),c=n("0JpG"),l=n("z1U9"),d=n("5Dl8"),p=n("aHpC"),f=n("oaeU"),m="ultra.services.assessment",h="assessment";!function(e){e.FOLDER="folder",e.ASSESSMENT="assessment",e.BANK="bank"}(r||(r={}));var g=function(){function e(e,t){this.modal=e,this.$rootScope=t}return e.isAssessment=function(e){return a.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)||a.r.ContentHandler.SurveyLink.isEqualTo(e.contentHandler)},e.isExternalSubmissionsAssessment=function(e){if(s.isUndefined(e)||null==e)return!1;if(a.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail){var t=e.contentDetail[a.r.ContentHandler.TestLink.handle];return s.isDefined(t)&&s.isDefined(t.test)&&s.isDefined(t.test.deploymentSettings)&&t.test.deploymentSettings.isCollectExternalSubmissions}return!1},e.getProctoredAssessmentSettings=function(e){if(s.isUndefined(e)||null==e)return null;var t=e.contentHandler.toString();if(a.r.ContentHandler.TestLink.isEqualTo(e.contentHandler)&&e.contentDetail&&e.contentDetail[t]&&e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings){var n=e.contentDetail[t].test&&e.contentDetail[t].test.deploymentSettings;return{proctoringDownloadUrl:n.proctoringDownloadUrl,proctoringServiceHandle:n.proctoringServiceHandle,proctoringServiceVendor:n.proctoringServiceVendor,isSecureBrowserRequiredToTake:n.isSecureBrowserRequiredToTake,isSecureBrowserRequiredToReview:n.isSecureBrowserRequiredToReview,isWebcamRequired:n.isWebcamRequired}}return null},e.getQuestionsForAttempt=function(e,t){if(!e.getToolAttemptDetailItem(t))return[];var n=e.getToolAttemptDetailItem(t).questionAttempts;return n&&n.length>0?n.map(function(e){return e.question}):[]},e.studentCanViewAttemptGradeAndFeedback=function(e,t){return t?!!(e&&e.isSubmitted()&&t.isPosted()):!(!e||!e.isCompleted())},e.attemptHasFeedback=function(e){var t=e&&e.getFeedbackToUser();return!!t&&!!t.rawText},e.groupAttemptHasIndividualFeedback=function(e){var t=e&&e.attempts&&e.attempts[0].getGroupIndividualFeedbackToUser();return!!t&&!!t.rawText},e.canViewAssessmentException=function(e,t,n,r){return!e&&!t&&n&&!r},e.getSubmissionListAllExceptions=function(e,t){return null==e||null==t?null:e.assessments.$buildRaw(t.getDeployedAssessment().assessment).exceptions.$resolve().$allow([404]).$asPromise()},e.initAssessmentExceptionsIndicators=function(e,t){var n=this;if(null==e||null==t)return null;var r={},i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return this.getSubmissionListAllExceptions(e,t).then(function(t){var o=n.setAssessmentExceptionStyleTag(i.id)();return t.length&&t.forEach(function(t){n.setAssessmentExceptionClass(o,e.id,t,!0,r)}),o})},e.updateAssessmentExceptionIndicator=function(e,t,n,r){if(void 0===n&&(n=!0),null!=e&&null!=t){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),o=this.setAssessmentExceptionStyleTag(i.id)();this.setAssessmentExceptionClass(o,e.id,r,n)}},e.setAssessmentExceptionStyleTag=function(e){var t="css_assessment_exceptions"+e;return o.once(function(){var e=s.element(document).find("#"+t);return 0===e.length&&(e=s.element('<style id="'+t+'"></style>').appendTo("head")),e})},e.setAssessmentExceptionClass=function(e,t,n,r,i){void 0===r&&(r=!0);var s,u=new d.a,c=r?"inline-block":"none",l=n.target.id,p=n.target.type;a.e.AssessmentExceptionType.User.isEqualTo(p)&&u.selector(".cc"+t+" .assessment-exception bb-username.course_user"+l+":before").rule("display",c),a.e.AssessmentExceptionType.Group.isEqualTo(p)&&(u.selector(".cc"+t+" .assessment-exception .show-exceptions.submission_row_group"+l+":before").rule("display",c),u.selector(".cc"+t+" .slick_title"+l+" .assessment-exception .show-exceptions:before").rule("display",c),u.selector(".cc"+t+" .assign_group"+l+".show-exceptions:before").rule("display",c)),i&&(i[l]=u.build(),s=o(i).sortBy().map(function(e,t){return e}).join("\n")),s&&s!==e.text()&&e.text(s),s||(s=e.text(),e.text([s,u.build()].join("\n")))},e.getSubmissionRowException=function(e,t,n,r){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return a.e.AssessmentExceptionType.Group.isEqualTo(n)?i.groupExceptions.$new(r).$resolve().$allow([404]).$asPromise():a.e.AssessmentExceptionType.User.isEqualTo(n)?i.userExceptions.$new(r).$resolve().$allow([404]).$asPromise():void 0},e.deleteException=function(e,t,n,r){var i=e.assessments.$buildRaw(t.getDeployedAssessment().assessment);return a.e.AssessmentExceptionType.User.isEqualTo(n)?i.userExceptions.$new(r).deleteException():a.e.AssessmentExceptionType.Group.isEqualTo(n)?i.groupExceptions.$new(r).deleteException():void 0},e.setSubmissionRowException=function(e,t,n,r,i){var o=e.assessments.$buildRaw(t.getDeployedAssessment().assessment),s={due:i.due,start:i.start,end:i.end,attempts:i.attempts};return a.e.AssessmentExceptionType.User.isEqualTo(n)?o.userExceptions.$new(r).saveException(s):a.e.AssessmentExceptionType.Group.isEqualTo(n)?o.groupExceptions.$new(r).saveException(s):void 0},e.prototype.isExternallyRefQuestionsAPIError=function(e){return 409===e.status&&o.includes(e.code,l.ASSESSMENT_EXTERNALLY_REF_QUESTION_ERROR_CODE)},e.prototype.openHasExternallyRefQuestionsModal=function(e){var t=this.$rootScope.$new();t.translateOpts={title:{key:"components.services.assessment.modal.error-external-questions."+e.toString()+".title"}},t.descriptionKey="components.services.assessment.modal.error-external-questions."+e.toString()+".description";var n={scope:t,template:f,resolve:{translations:[c.serviceName,function(e){return e.loadBundle("components/services/assessment")}]}};this.modal.open(n)},e=i.__decorate([i.__param(0,Object(p.b)(u.b)),i.__param(1,Object(p.b)("$rootScope"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}i.__extends(t,e)}(g);s.module(m,[u.a]).service(h,g)},"+brj":function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"a",function(){return m});var r=n("mrSG"),i=(n("M8gh"),n("IbG+")),o=n("oSB+"),s=n.n(o),a=n("U718"),u=n("+7+6"),c=n("Fvsw"),l=n("TnpK"),d=n("fYJU"),p="ultra.components.services.browserStorage",f="browserStorage",m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.LocalStorage=new t("localStorage"),t.SessionStorage=new t("sessionStorage"),t}(s.a),h=function(){function e(e,t,n,r,i,o){var s=this;this.$rootScope=e,this.$q=t,this.DSCacheFactory=n,this.context=r,this.ultraState=i,this.contextUser=o,this.QUOTA_EXCEEDED_ERR=22,this.QUOTA_EXCEEDED_ERR_FIREFOX=22,this.BROWSER_STORAGE_PREFERENCE_KEY="ultraui.browserstorage.key",this.CACHE_PREFIX="ultraui.browserstorage",this.sjcl=u,this.crypto=window.crypto,this.BROWSER_STORAGE_RECORD_MAX_AGE=864e5,this.BROWSER_STORAGE_RECORD_MAX_COUNT=10,this._isEncryptNativeSupported=s.crypto&&s.crypto.subtle?s.crypto.subtle.digest({name:"SHA-256"},s._stringToArrayBuffer("x")).then(function(){return s.$q.when(!0)}).catch(function(){return s.$q.when(!1)}):s.$q.when(!1)}return e.prototype.serializeCurrentRouteScopes=function(e,t){return this.saveToStorage(this._getCurrentRouterStateObject(),t,e,function(e,t){if(!(t&&t instanceof Array&&t.length>=1e9)&&(t&&t.$type&&t.$type===t.constructor&&"$pk"in t&&(t.ui.isRestModObject=!0),("_"!==e[0]||this.ui&&!0===this.ui.isRestModObject||t&&t.ui&&!0===t.ui.isRestModObject)&&("$"!==e[0]||-1!==["$viewValue","$modelValue"].indexOf(e))))return t})},e.prototype.deserializeCurrentRouteScopes=function(e,t){return this.getFromStorage(this._getCurrentRouterStateObject(),e)},e.prototype.deleteCurrentRouteScopes=function(e){return this.deleteFromStorage(this._getCurrentRouterStateObject(),e)},e.prototype._getCurrentRouterStateObject=function(){return{componentState:this.ultraState.current.name.slice(this.ultraState.getBaseState().length+1),stateParams:this.ultraState.getCurrentUrlParams()}},e.prototype.saveToStorage=function(e,t,n,r){var i=this,o=this._getBrowserStorageCache(n);o.removeExpired();var s=a.stringify(t,r);return this._getUserEncryptionPassword().then(function(t){return i._encrypt(t,s).then(function(t){try{return o.put(i._toSortedKeyJSON(e),t)}catch(e){e.code&&e.code===i.QUOTA_EXCEEDED_ERR||e.code===i.QUOTA_EXCEEDED_ERR_FIREFOX?console.warn("Local storage is at capacity",e):console.warn("Local storage not permitted.",e),i.saveToStorage=function(e,t,n){return i.$q.when(void 0)}}})})},e.prototype.getFromStorage=function(e,t,n){var r=this,i=this._getBrowserStorageCache(t).get(this._toSortedKeyJSON(e));return null!=i?this._getUserEncryptionPassword().then(function(e){return r._decrypt(e,i).then(function(e){return a.parse(e,n)})}):this.$q.when(void 0)},e.prototype.updateStorageKey=function(e,t,n,r){var i=this;return this.getFromStorage(e,n).then(function(o){i.deleteFromStorage(e,n);var s=r||o;if(s)return i.saveToStorage(t,s,n)})},e.prototype.deleteFromStorage=function(e,t){var n=this._getBrowserStorageCache(t);return n.removeExpired(),!!n.remove(this._toSortedKeyJSON(e))},e.prototype._toSortedKeyJSON=function(e){return JSON.stringify(e,function(e,t){return"object"!=typeof t?t:Object.keys(t).sort().reduce(function(e,n){return e[n]=t[n],e},{})})},e.prototype._getBrowserStorageCache=function(e){var t=this.CACHE_PREFIX+"."+e.toString()+"."+this.contextUser.userId,n=this.DSCacheFactory.get(t);if(!n)switch(e){case m.LocalStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,maxAge:this.BROWSER_STORAGE_RECORD_MAX_AGE,storageMode:m.LocalStorage.toString()});break;case m.SessionStorage:n=this.DSCacheFactory.createCache(t,{capacity:this.BROWSER_STORAGE_RECORD_MAX_COUNT,storageMode:m.SessionStorage.toString()})}return n},e.prototype._getUserEncryptionPassword=function(){this._sjclForceReady();var e=this.sjcl.codec.base64.fromBits(this.sjcl.random.randomWords(6));return this.storageKeyPromise=this.storageKeyPromise||this.context.getPreference(this.BROWSER_STORAGE_PREFERENCE_KEY,e).then(function(e){return e.value&&!e.$resolved&&e.$save(),e.value})},e.prototype._sjclForceReady=function(){if(!this.sjcl.random.isReady()){for(var e=[],t=0;t<32;t++)e.push(Math.floor(4294967296*Math.random()));this.sjcl.random.addEntropy(e,1024,"IE10 fallback entrophy")}},e.prototype._encrypt=function(e,t){var n=this;return this._isEncryptNativeSupported.then(function(r){return r?n._subtleCryptoEncrypt(e,t).then(function(e){return{SubtleCryptoEncrypted:e}}):n.$q.when(n.sjcl.encrypt(e,t)).then(function(e){return{SjclCipherEncrypted:e}})})},e.prototype._decrypt=function(e,t){var n=this;return this._isEncryptNativeSupported.then(function(r){return r?n._subtleCryptoDecrypt(e,t.SubtleCryptoEncrypted):n.$q.when(n.sjcl.decrypt(e,t.SjclCipherEncrypted))})},e.prototype._subtleCryptoEncrypt=function(e,t){var n=this;return this._subtleCryptoGetPasswordKey(e).then(function(e){var r=n.crypto.getRandomValues(new Uint8Array(16));return n.crypto.subtle.encrypt({name:"AES-CBC",iv:r},e,n._stringToArrayBuffer(t)).then(function(e){return{vector:n._arrayBufferToBase64(r),encrypted:n._arrayBufferToBase64(e)}})})},e.prototype._subtleCryptoDecrypt=function(e,t){var n=this;return this._subtleCryptoGetPasswordKey(e).then(function(e){var r=n._base64ToArrayBuffer(t.vector);return n.crypto.subtle.decrypt({name:"AES-CBC",iv:r},e,n._base64ToArrayBuffer(t.encrypted)).then(function(e){return n._arrayBufferToString(e)})})},e.prototype._subtleCryptoGetPasswordKey=function(e){var t=this;return this.crypto.subtle.digest({name:"SHA-256"},this._stringToArrayBuffer(e)).then(function(e){return t.crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["encrypt","decrypt"])})},e.prototype._arrayBufferToString=function(e,t){for(var n=t&&new Uint8Array(e)||new Uint16Array(e),r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r},e.prototype._arrayBufferToBase64=function(e){return window.btoa(this._arrayBufferToString(e,!0))},e.prototype._stringToArrayBuffer=function(e,t){for(var n=t&&new ArrayBuffer(e.length)||new ArrayBuffer(2*e.length),r=t&&new Uint8Array(n)||new Uint16Array(n),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return n},e.prototype._base64ToArrayBuffer=function(e){return this._stringToArrayBuffer(window.atob(e),!0)},e.$inject=["$rootScope","$q","DSCacheFactory",c.b,l.d,d.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(h);i.module(p,["angular-data.DSCacheFactory",c.a,l.b]).service(f,h)},"+cQS":function(e,t,n){e.exports=n("ZJ/X")(1741)},"+e2k":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("mrSG"),i=(n("DlnX"),n("yC9S")),o=["active","alert","success","warning"],s="ultra.components.directives.svgIcon";!function(){function e(e,t){this.$rootScope=e,this.$element=t}e.prototype.$onInit=function(){var e=this;this.windowHref=window.location.href,this.updateIconHref(),this.setStatusStyles(),this.destroyLocationChangeListener=this.$rootScope.$on("$locationChangeSuccess",function(){e.windowHref=window.location.href,e.updateIconHref()})},e.prototype.$onChanges=function(){this.updateIconHref()},e.prototype.$onDestroy=function(){this.destroyLocationChangeListener()},e.prototype.updateIconHref=function(){this.iconHref=this.windowHref+"#icon-"+this.size+"-"+this.icon},e.prototype.setStatusStyles=function(){var e=this;this.color?this.statusStyles="color":null!=o.find(function(t){return e.status})?this.statusStyles=this.status:this.statusStyles="default"},e.$inject=["$rootScope","$element"],e=r.__decorate([Object(i.a)({moduleName:s,componentName:"bbSvgIcon",template:'\n    <svg class="svg-icon {{::$ctrl.size}}-icon {{::$ctrl.statusStyles}}"\n         focusable="false" aria-hidden="true" bb-cache-compilation="svg-icon">\n      <use xlink:href="" ng-href="{{$ctrl.iconHref}}"></use>\n    </svg>\n  ',bindings:{icon:"@",color:"<",size:"@",status:"@"}})],e)}()},"+g6d":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});n("MFWY");var r=n("IbG+"),i=n("lEL+"),o="ultra.components.directives.clickToInvokeChild",s="bbClickToInvokeChild",a=function(){function t(t,n,r,i){var o=this;if(this.scope=t,this.element=n,this.attrs=r,this.timeout=i,this.linkSelector=r[s],!this.linkSelector&&void 0!==this.linkSelector)throw new Error(s+" has no child selector specified.");this.setClickableStyle(),t.$on("click-to-invoke-child-directive-init",function(){o.setClickableStyle()}),n.on("click",function(t){if(!e(t.target).closest("a, button, [ng-click], .stop-click-propagation, [bb-click-to-invoke-child]",o.element.get(0)).length){var n=o.element.find(o.linkSelector).get(0);n&&(n.click(),r.stopPropagation&&"true"===r.stopPropagation&&t.stopPropagation())}})}return t.prototype.setClickableStyle=function(){var e=this;this.timeout(function(){e.element.find(e.linkSelector).first().length?(void 0===e.element.attr("tabindex")&&e.element.attr("tabindex","-1"),e.element.addClass("child-is-invokable")):(e.element.removeAttr("tabindex"),e.element.removeClass("child-is-invokable"))},this.scope,0,!1)},t.$inject=["scope","element","attrs",i.b],t}(),u=function(){function e(e){var t=this;this.$injector=e,this.scope=!1,this.restrict="A",this.link=function(e,n,r){t.$injector.instantiate(a,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();r.module(o,[i.a]).directive(s,["$injector",function(e){return e.instantiate(u)}])}).call(this,n("EVdn"))},"+hdB":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-course-is-closed.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-course-is-closed">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-is-closed.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-course-is-closed.alt"\n          bb-translate>components.services.error-modal.error-course-is-closed.alt</button>\n</bb-modal>\n'},"/5E1":function(e,t,n){e.exports=n("ZJ/X")(1945)},"/F8r":function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.loadingMoreItems</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsLoaded</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.itemsFailedToLoad</span>\n  </div>\n</div>\n'},"/J7e":function(e,t,n){"use strict";function r(e){if(null==e)return!1;if("boolean"==typeof e)return e;if("string"==typeof e){var t=e.trim();return"true"===t.toLowerCase()||"1"===t}if("number"==typeof e)return 0!==e;throw new Error('Cannot convert "'+e+'" to boolean')}n.d(t,"a",function(){return r})},"/K+M":function(e,t,n){e.exports=n("ZJ/X")(1930)},"/KQw":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("IbG+"),i="ultra.components.directives.cacheCompilation",o=function(){function e(e){this.$compile=e,this.compiled=Object.create(null),this.priority=2e3}return e.prototype.compile=function(e,t){var n=this,r=t.bbCacheCompilation;if(!r)throw new Error("Cache compilation key is required");var i=e.contents();return e.empty(),null==this.compiled[r]&&(this.compiled[r]=this.$compile(i)),function(e,t){n.compiled[r](e,function(e,n){t.append(e)})}},e.$inject=["$compile"],e}();r.module(i,[]).directive("bbCacheCompilation",["$injector",function(e){return e.instantiate(o)}])},"/MKj":function(e,t,n){e.exports=n("ZJ/X")(1934)},"/jNt":function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});n("EpnP"),n("XhfK");var r,i=n("IbG+"),o=n("e/U5"),s=n("pjml"),a=n("z6Q5"),u=n("TnpK"),c=n("gkef"),l=n("ZzYr"),d="ultra.directives.courseCatalogLink",p="course",f="org",m="ultraui.coursecatalog.link",h="classic_course_catalog_link_ind",g="classic_course_catalog_link",v=((r={})[m]="Disabled",r[h]="N",r[g]="",r),b=function(){function e(e,t,n,r,i,s,a){var u=this;this.scope=e,this.attrs=t,this.$q=n,this.SystemPreferenceModel=r,this.batchService=i,this.ultraState=s,this.windowSizeService=a,this.template=o,i.performBatch(function(){n.all([r.$find(m).$allow([404]).$asPromise(),r.$find(h).$allow([404]).$asPromise(),r.$find(g).$allow([404]).$asPromise()]).then(function(e){u.handleSystemPreferencesResponse(e)})});var c=t.catalogType===f?"base.organization-catalog":"base.course-catalog";e.handleCatalogLink=function(){s.goToRoute(c)},e.windowSizeService=a}return e.prototype.handleSystemPreferencesResponse=function(e){var t=this.getPreferenceValueByKey(e,m)||v[m];this.scope.shouldDisplayCatalogLink="Enabled"===t;var n=this.getPreferenceValueByKey(e,h)||v[h];this.scope.isExternalCatalog="Y"===n,this.scope.externalCatalogUrl=this.getPreferenceValueByKey(e,g)||v[g]},e.prototype.getPreferenceValueByKey=function(e,t){var n=e.find(function(e){return e.key===t});return n?n.value:null},e.$inject=["scope","attrs","$q",s.wb.serviceName,a.b,u.d,c.b],e}(),y=function(){function e(e){var t=this;this.$injector=e,this.template=o,this.link=function(e,n,r){e.courseCatalogLink=t.$injector.instantiate(b,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();i.module(d,[s.R,a.a,u.b,c.a,l.a]).directive("bbCourseCatalogLink",["$injector",function(e){return e.instantiate(y)}])},"/mDi":function(e,t,n){},"/qpZ":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("+4Px"),o="ultra.directives.accessibility.keyboardEnter",s=function(){this.restrict="A",this.link=function(e,t,n){t.on("keydown keypress",function(r){r.keyCode===i.f&&(n.bbBlurBeforeEnter&&t.blur(),e.$apply(function(){e.$eval(n.bbKeyboardEnter,{$event:r})}),r.preventDefault())})}};r.module(o,[]).directive("bbKeyboardEnter",["$injector",function(e){return e.instantiate(s)}])},"0+Qs":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var r=n("IbG+"),i=n("5MwF"),o="ultra.services.interval",s="interval";r.module(o,[]).factory(s,["$interval",function(e){var t=function(t,n,r,o,s){if(r<5e3&&!o&&(null==s||s)){if(!i.a.production)throw new Error("Short duration interval, repeating indefinitely, which invokes apply was registered!");console.warn("Short duration interval, repeating indefinitely, which invokes apply was registered!\n"+(new Error).stack)}var a=e(t,r,o,s);return a.__bb_unregister_scope_destroy__=n.$on("$destroy",function(){e.cancel(a)}),a};return t.cancel=function(t){t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},"07uq":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("IbG+"),i="ultra.directives.bbMouseLeaveEnter",o=function(){function e(e){var t=this;this.$rootScope=e,this.restrict="A",this.link=function(e,n,r){var i=function(){e.$apply(function(){t.$rootScope.$broadcast(r.bbMouseLeaveEnter+"-mouse-enter")})},o=function(){e.$apply(function(){t.$rootScope.$broadcast(r.bbMouseLeaveEnter+"-mouse-leave")})};e.$on("$destroy",function(){n.off("mouseenter",i),n.off("mouseleave",o)}),n.on("mouseenter",i),n.on("mouseleave",o)}}return e.$inject=["$rootScope"],e}();r.module(i,[]).directive("bbMouseLeaveEnter",["$injector",function(e){return e.instantiate(o)}])},"0JpG":function(e,t,n){"use strict";n.d(t,"moduleName",function(){return l}),n.d(t,"serviceName",function(){return d}),n.d(t,"providerName",function(){return p}),n.d(t,"localeQuerystringRegex",function(){return f}),n.d(t,"Service",function(){return g});var r=n("mrSG"),i=(n("SWI0"),n("LvDl")),o=n("IbG+"),s=n("lAEu"),a=n("hTOW");n.o(a,"ILocaleComposedDurationFormat")&&n.d(t,"ILocaleComposedDurationFormat",function(){return a.ILocaleComposedDurationFormat}),n.o(a,"ILocaleDateFormat")&&n.d(t,"ILocaleDateFormat",function(){return a.ILocaleDateFormat}),n.o(a,"ILocaleDatetimeFormat")&&n.d(t,"ILocaleDatetimeFormat",function(){return a.ILocaleDatetimeFormat}),n.o(a,"ILocaleTimeFormat")&&n.d(t,"ILocaleTimeFormat",function(){return a.ILocaleTimeFormat}),n.o(a,"ILocaleTimezoneFormat")&&n.d(t,"ILocaleTimezoneFormat",function(){return a.ILocaleTimezoneFormat}),n.o(a,"LocaleCategory")&&n.d(t,"LocaleCategory",function(){return a.LocaleCategory});var u=n("C3Ga"),c=n("tfZW");n.d(t,"ILocaleUsernameFormat",function(){return a.ILocaleUsernameFormat});var l="ultra.services.BbLocalize",d="bbLocalize",p=d+"Provider",f=/setLang=([^&]*)/,m=function(e,t,n){var r=n.value;n.value=function(){return this.$q.when(r.apply(this,arguments))}},h=function(){function e(t,n){this.$q=t,this.$rootScope=n,this.defaultLocale="en",this.percentageFormatters={},this.currencyFormatters={},this.bundlePromises={},this.intl=u.a.getInstance(),this.frmt=new s.a(this.intl,{production:e.production,urlRoot:e.urlRoot,defaultLocale:this.defaultLocale}),this.overrideLoader=c.a.getInstance()}return e.prototype.isRTL=function(e){var t=this.getLocale(e).toLowerCase();return 0===t.indexOf("ar")||0===t.indexOf("he")||"en_sc"===t},e.prototype.getDecimalStringForScope=function(e){var t=this.getLocale(e);return this.frmt.number.getDecimalStringSync(t)},e.prototype.getGroupingStringForScope=function(e){var t=this.getLocale(e);return this.frmt.number.getGroupingStringSync(t)},e.prototype.isValidNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.isValidSync(e,n)},e.prototype.loadBundle=function(e,t){null==t&&(t=this.getLocale(null));var n="locales/[locale]/"+e+".json";return this.intl.addBundles(n),this.intl.loadBundles(t)},e.prototype.loadAllBundles=function(e){return this.intl.loadBundles(e)},e.prototype.insertLocaleData=function(e,t){return this.intl.storeLocaleData(e,t)},e.prototype.resetLocaleData=function(){return this.intl.reset()},e.prototype.translateSync=function(e){var t=o.copy(e.params)||{};return Object.keys(t).forEach(function(e){void 0===t[e]&&(t[e]="")}),o.isObject(t)&&(t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape})),this.intl.translateSync(e.locale||this.getLocale(null),e.key,t)},e.prototype.translate=function(e){var t=o.copy(e.params)||{};return o.isObject(t)&&(t=this.frmt.processTranslationParams(t,{locale:e.locale,noWrap:e.noWrap,noEscape:e.noEscape})),this.intl.translate(e.locale||this.getLocale(null),e.key,t)},e.prototype._getFormatter=function(e){return this.frmt.getFormatterSync(e)},e.prototype.getAppLocale=function(){return this.intl.normalizeLocale(this.getUserLocale()||this.defaultLocale)},e.prototype.getLocale=function(e){if(!e)return this.getAppLocale();for(var t=e.locale;!t&&e.$parent;)t=(e=e.$parent).locale;return this.intl.normalizeLocale(t)||this.getAppLocale()},e.prototype.getUserLocale=function(){return this.userLocale},e.prototype.preProcessFormatterLocale=function(e){return this.frmt.preProcessFormatterLocale(e)},e.prototype.getPreferredLocales=function(e){return this.intl.normalizeLocales(this.frmt.getPreferredLocales(e))},e.prototype.validateLocale=function(e){try{this.intl.getMf("isLocaleExists",this.intl.normalizeLocale(e))}catch(e){return!1}return!0},e.prototype.setLocale=function(e,t){var n=this;return t||(t=this.getAppLocale()),e&&(e.locale=t),this.loadLocale(t).then(function(){n.$rootScope.$broadcast("$translateChangeSuccess",{language:t})})},e.prototype.setUserLocale=function(e){this.userLocale=e},e.prototype.setSystemDefaultLocale=function(e){this.defaultLocale=e},e.prototype.addOverride=function(e,t){this.overrideLoader.addOverrideBundle(e,t)},e.prototype.loadLocale=function(e){return this.frmt.loadLocale(e)},e.prototype.formatNumber=function(e,t,n){var r=this.getLocale(t);return this.frmt.number.format(e,r,n)},e.prototype.formatNumberSync=function(e,t,n){var r=this.getLocale(t);return this.frmt.number.formatSync(e,r,n)},e.prototype.regroupNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.regroup(e,n)},e.prototype.regroupNumberSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.regroupSync(e,n)},e.prototype.parseNumber=function(e,t){var n=this.getLocale(t);return this.frmt.number.parse(e,n)},e.prototype.parseNumberSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.parseSync(e,n)},e.prototype.formatDate=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDate(e,t,r)},e.prototype.formatDateSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDateSync(e,t,r)},e.prototype.parseDate=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseDate(e,t,i,r)},e.prototype.parseDateSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseDateSync(e,t,i,r)},e.prototype.formatTime=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTime(e,t,r)},e.prototype.formatTimeSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimeSync(e,t,r)},e.prototype.getDayPeriodsFormatSync=function(e){return this.frmt.getFormatterSync(e).cldr.main("dates").calendars.gregorian.dayPeriods.format.abbreviated},e.prototype.getTimePattern=function(e,t){var n=this.getLocale(t);return this.frmt.datetime.getTimePattern(e,n)},e.prototype.getTimePatternSync=function(e,t){var n=this.getLocale(t);return this.frmt.datetime.getTimePatternSync(e,n)},e.prototype.parseTime=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseTime(e,t,i,r)},e.prototype.parseTimeSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.parseTimeSync(e,t,i,r)},e.prototype.formatDatetime=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDatetime(e,t,r)},e.prototype.formatDatetimeSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatDatetimeSync(e,t,r)},e.prototype.formatDurationBetweenSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.datetime.formatDurationBetweenSync(e,t,i,r)},e.prototype.formatDuration=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.datetime.formatDuration(e,i,n,r)},e.prototype.formatComposedDurationSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatComposedDurationSync(e,t,r)},e.prototype.formatTimezone=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimezone(e,t,r)},e.prototype.formatTimezoneSync=function(e,t,n){var r=this.getLocale(n);return this.frmt.datetime.formatTimezoneSync(e,t,r)},e.prototype.formatUsername=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.format(e,t,i,r)},e.prototype.formatUsernameSync=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.formatSync(e,t,i,r)},e.prototype.formatUsernameList=function(e,t,n,r){var i=this.getLocale(n);return this.frmt.username.formatList(e,t,i,r)},e.prototype.formatItems=function(e,t,n,r,i){var o=this.getLocale(n);return this.frmt.items.format(e,e.length,t,o,r,i)},e.prototype.formatItemsSync=function(e,t,n,r,i,o){var s=this.getLocale(r);return this.frmt.items.formatSync(e,t,n,s,i,o)},e.prototype.getFormatEnum=function(e,t){if(!t)return null;var n=e[t=t.charAt(0).toUpperCase()+t.slice(1)];if(null==n)throw new Error("Invalid format `"+t+"` is used");return n},e.prototype.getFormatId=function(e,t){if(null==t)return 0;var n=e[t=t.charAt(0).toUpperCase()+t.toLowerCase().slice(1)];if(null==n)throw new Error("Invalid format `"+t+"` is used");return n},e.prototype.formatPercentage=function(e,t){var n=this.getLocale(t);return this.frmt.number.format(e,n,{style:"percent"})},e.prototype.formatPercentageSync=function(e,t){var n=this.getLocale(t);return this.frmt.number.formatSync(e,n,{style:"percent"})},e.prototype.formatCurrency=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.currency.format(e,i,n,r)},e.prototype.formatCurrencySync=function(e,t,n,r){var i=this.getLocale(t);return this.frmt.currency.formatSync(e,i,n,r)},e.prototype.getReactBabelfishParams=function(){return{locale:this.getAppLocale(),babelfishInstance:this.intl,babelfishFormatter:this.frmt}},e.$inject=["$q","$rootScope"],e.production=!1,e.urlRoot=".",e.defaultDecimalPrecision=a.Number.defaultDecimalPrecision,e.minDecimalPrecision=1,e.maxDecimalPrecision=4,r.__decorate([m],e.prototype,"loadBundle",null),r.__decorate([m],e.prototype,"translate",null),r.__decorate([m],e.prototype,"formatNumber",null),r.__decorate([m],e.prototype,"regroupNumber",null),r.__decorate([m],e.prototype,"parseNumber",null),r.__decorate([m],e.prototype,"formatUsername",null),r.__decorate([m],e.prototype,"formatUsernameList",null),r.__decorate([m],e.prototype,"formatPercentage",null),e}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(h),v=function(){function e(){this.$get=["$injector",function(e){return e.instantiate(h)}]}return e.prototype.setOptions=function(e){void 0===e&&(e={}),i.forOwn(e,function(e,t){h[t]=e})},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(v);o.module(l,[]).provider(d,v)},"0M2B":function(e,t,n){e.exports=n("ZJ/X")(2093)},"0fB1":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n("LvDl"),i=n("IbG+"),o=n("5MwF"),s=n("w9Zy"),a="ultra.offcanvas-scope.offcanvas-scope-pausal-scope",u="bbOffcanvasPausalScope",c=function(){this.restrict="A",this.link=function(t,n,i){var a=function(e){return e.hasClass("bb-offcanvas-overlay")&&(t=e.next()).hasClass("bb-offcanvas-panel")&&(t.hasClass("full")||(n=t.css("max-width"),r.findIndex([void 0,"none"],function(e){return e===n})>=0));var t,n};t.$newOffcanvasScope=function(){var e=this.constructor.prototype.$new.apply(this,arguments);return e.$$__digestPaused=!1,e};var c=function(){var r;t.$$__digestPaused="true"===(r=n.is(".hide-in-background")?n:n.parents(".hide-in-background")).attr("aria-hidden")&&function(){for(var t=r.nextAll(),n=0;n<t.length;n+=2)if(a(e(t.get(n))))return!0;return!1}(),!1!==t.$$__digestPaused||t.$root.$$phase||t.$digest()};if(t.$on(s.c,c),t.$on(s.b,c),!o.a.production){var l=function(e){return e?l(e.$parent)+"."+e.$id+(e.$$digestPaused?"P":"A"):""},d=function(){i.$set(u,l(t))};t.$on(s.c,d),t.$on(s.b,d),d()}}},l=i.module(a,[]);o.a.features.offcanvasPausalScope&&l.directive(u,["$injector",function(e){return e.instantiate(c)}])}).call(this,n("EVdn"))},"0qUt":function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-medium-collab-session",use:"icon-medium-collab-session-usage",viewBox:"0 0 24 24",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-medium-collab-session"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 5h17v4l5-3.9583V19l-5-4v4H1V5z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 8v8M6 8l2 4-2 4M11 8l2 4-2 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},"1/43":function(e,t,n){"use strict";n.r(t),n.d(t,"EmailSettingGeneralSettingValue",function(){return r}),n.d(t,"SmsSettingGeneralSettingValue",function(){return i}),n.d(t,"PushNotificationGeneralSettingValue",function(){return o}),n.d(t,"serviceName",function(){return l});n("TeAI");var r,i,o,s=n("5MwF"),a=n("yCC5"),u=n("Rjd/"),c=n("nkTj");!function(e){e.Digest="D",e.Immediate="I",e.None="N"}(r||(r={})),function(e){e.Enabled="A",e.Disabled="N"}(i||(i={})),function(e){e.Everyone="E",e.Instructor="I"}(o||(o={}));var l=a.sb;u.a.factory(l,["restmod",c.d,function(e){return e.model().mix({$url:function(){return s.a.apiBasePath+"/v1/notification/settings/generalSettings/course"}})}])},"12mu":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});n("imME");var r=n("IbG+"),i=n("w9Zy"),o=n("9zo4"),s=n("H8CZ"),a=n("CAM3"),u=n("Y2su"),c="mm.foundation.modal",l="$modal";r.module(c,[i.d]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t===e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,r=0;r<e.length;r++)if(t===e[r].key){n=r;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$modalStack","$timeout",function(e,t){return{restrict:"EA",replace:!0,template:a,link:function(n){n.animate=!1,t(function(){n.animate=!0}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,template:u,link:function(e,n,r){e.windowClass=r.windowClass||"",t(function(){e.animate=!0,n[0].querySelectorAll("[autofocus]").length>0?n[0].querySelectorAll("[autofocus]")[0].focus():n[0].querySelector("div").focus()})}}}]).factory("$modalStack",["$window","$timeout","$document","$compile","$rootScope","$$stackedMap",i.e,o.c,function(t,n,i,o,a,u,c,l){var d,p,f="modal-open",m=u.createNew(),h={};function g(){for(var e=-1,t=m.keys(),n=0;n<t.length;n++)m.get(t[n]).value.backdrop&&(e=n);return e}function v(e,t){var n=i.find("body").eq(0),r=m.get(e).value;m.remove(e),b(r.modalDomEl,r.modalScope,300,function(){r.modalScope.$destroy(),n.toggleClass(f,m.length()>0),function(e){if(d&&-1===g()){var t=p;b(d,p,150,function(){t.$destroy(),t=null,e()}),d=void 0,p=void 0}else e()}(t),l.revertAccessibilityHandling()})}function b(e,t,r,i){var o=n(a,r);function a(){a.done||(a.done=!0,e.remove(),i&&i())}s.a(e,function(){n.cancel(o),a(),t.$apply()}),t.animate=!1}return a.$watch(g,function(e){p&&(p.index=e)}),h.open=function(n,s){m.add(n,{deferred:s.deferred,modalScope:s.scope,backdrop:s.backdrop,keyboard:s.keyboard});var u=i.find("body").eq(0),v=g();v>=0&&!d&&((p=a.$new(!0)).index=v,d=o("<div modal-backdrop></div>")(p),u.append(d));var b=r.element('<div class="reveal-modal" style="z-index:-1""></div>');u.append(b[0]);var y=parseInt(getComputedStyle(b[0]).top,10)||0;b.remove();var S=(t.pageYOffset||0)+y;function C(e){var t;27===e.which&&(t=m.top())&&t.value.keyboard&&a.$apply(function(){h.dismiss(t.key)})}c.getTopElement().then(function(e){var t=r.element('<div modal-window style="visibility: visible; top:'+S+'px;"></div>');t.attr("window-class",s.windowClass),t.attr("index",m.length()-1),t.attr("animate","animate"),e&&e.name&&t.attr("data-base-state-name",e.name),t.append(s.content);var n=o(t)(s.scope);l.applyAccessibilityHandlingForPanel(n),m.top().value.modalDomEl=n,u.append(n),u.addClass(f)}),p&&(p.darkenBackdrop=s.darkenBackdrop),i.bind("keydown",C),s.scope.$on("$destroy",function(){e(document).off("keydown",C)})},h.close=function(e,t){if(m.get(e)){var n=m.get(e).value;n&&v(e,function(){n.deferred.resolve(t)})}},h.dismiss=function(e,t){if(m.get(e)){var n=m.get(e).value;n&&v(e,function(){n.deferred.reject(t)})}},h.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},h.getTop=function(){return m.top()},h}]).provider(l,function(){var e={options:{backdrop:!0,keyboard:!0,darkenBackdrop:!1},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,o,s,a,u){var c={};return c.open=function(o){var s=i.defer(),c=i.defer(),l={result:s.promise,opened:c.promise,close:function(e){u.close(l,e)},dismiss:function(e){u.dismiss(l,e)}};if((o=r.extend({},e.options,o)).resolve=o.resolve||{},!o.template)throw new Error("Template is required. Use requireJs to load template string if needed.");var d,p,f=i.all([i.when(o.template)].concat((d=o.resolve,p=[],r.forEach(d,function(e,n){(r.isFunction(e)||r.isArray(e))&&p.push(i.when(t.invoke(e)))}),p)));return f.then(function(e){var t=(o.scope||n).$new();t.$close=l.close,t.$dismiss=l.dismiss;var i={},c=1;o.controller&&(i.$scope=t,i.$modalInstance=l,r.forEach(o.resolve,function(t,n){i[n]=e[c++]}),a(o.controller,i)),u.open(l,{scope:t,deferred:s,content:e[0],backdrop:o.backdrop,keyboard:o.keyboard,windowClass:o.windowClass,darkenBackdrop:o.darkenBackdrop})},function(e){s.reject(e)}),f.then(function(){c.resolve(!0)},function(){c.reject(!1)}),l},c}]};return e})}).call(this,n("EVdn"))},"17x9":function(e,t,n){e.exports=n("ZJ/X")(15)},"1I+h":function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("VZTK");var r=n("IbG+"),i=n("5MwF"),o=n("0JpG"),s=n("TnpK"),a="ultra.course.collab.router";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){i.a.features.collab&&e.peekState("collab",{url:"/collab/:launchType",require:function(){return n.e(399).then(n.bind(null,"6DVw"))},pageTitle:"course.outline.collab.ultraCollabTitle",panelClass:"full",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/collab/course-collab")}]},onExit:["$rootScope",function(e){e.$broadcast("collab-exit")}]})}])},"1ZiP":function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("mrSG"),i=(n("VZTK"),n("IbG+")),o=n("pjml"),s=n("w9Zy"),a=n("0JpG"),u=n("Is+C"),c=n("Qbdf"),l=n("TnpK"),d=n("bF8R"),p=n("Fvsw"),f=n("gkef"),m=n("+O05"),h="ultra.course.content.scorm.routes",g={onEnter:["contentData","attempt",s.e,l.d,"$stateParams",f.b,function(e,t,n,r,i,o){if(i.forceOpenFeedbackPanel&&!i.skipTransitionEvents){r.isPeekPanelOpen()&&n.expandTopPanel();var s=m.a.attemptHasFeedback(t),a=m.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),u=r.next.name.indexOf("assessment-submission-feedback")>=0,c=!r.prev.name,l=o.isSmallBreakpoint();!s||!a||l||u||c||r.goPeekState("assessment-submission-feedback",{attemptId:t.id})}}],onExit:["contentData",s.e,l.d,"$q","$stateParams",function(e,t,n,r,i){if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){var o=r.when();n.isPeekPanelOpen()&&(o=t.shrinkTopPanel()),o.then(function(){n.goPeekState("scorm-overview.student.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId})})}}]};i.module(h,[a.moduleName,l.b,c.b]).config([l.c,c.c,function(e,t){var i,s,f;e.peekState("scorm",{abstract:!0,url:"/scorm"}).peekState("scorm.open",{url:"/open",params:{contentId:null,courseId:null},routingFunction:[l.d,u.c,function(e,t){t.scormLaunch({courseId:e.nextParams.courseId,contentId:e.nextParams.contentId,showPreLaunchPanel:!0})}]}).peekState("scorm-settings",{url:"/scorm/settings?parentId&positionBefore&positionAfter&contentId",pageTitle:"course.content.scorm.settings.panelTitle",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(257)]).then(n.bind(null,"7Six"))}],resolve:(i={},i[c.d]=t.resolve,i.translations=[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}],i),peekViewName:"scorm-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release","content-collection-picker"]}).peekState("scorm-launch-frame",{url:"/scorm/launchFrame?toolHref&courseId&contentId",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}]},panelClass:"full",require:[function(){return n.e(285).then(n.bind(null,"26hv"))}],pageTitle:"course.content.scorm.launch.frameTitle"}).peekState("gradebook-item.scorm-submissions",{pageTitle:"course.content.scorm.settings.gradingTitle",url:"/scorm/:contentId/columns/:columnId/submissions?courseId&gradeitemView",panelClass:"full",resolve:{translations:["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])}]},views:{"gradebook-item-scorm-slider@":{require:function(){return n.e(377).then(n.bind(null,"2eYu"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(7),n.e(0),n.e(8),n.e(9),n.e(25),n.e(44)]).then(n.bind(null,"hmMQ"))}}},onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conversations","message","conditional-release","scorm-settings","scorm-launch-frame","submission-grading","multiple-attempt-grading"],peekViewName:"gradebook-item-panel@"}).peekState("scorm-overview",{abstract:!0,resolve:(s={},s[c.d]=t.resolve,s.contentData=[c.d,d.b,l.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],s.translations=["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/scorm/scorm"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}],s),onEnter:["contentData",p.b,function(e,t){t.column=e.gradingColumn}],onExit:[p.b,function(e){e.column=null}],require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(242)]).then(n.bind(null,"HwBC"))}}).peekState("scorm-overview.student",{url:"/scorm/overview/{contentId:_[0-9]+_1}?courseId",peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations","message"],views:{"scorm-grading-section@":{require:function(){return n.e(401).then(n.bind(null,"all8"))}}}}).peekState("scorm-overview.student.multiple-attempt",{url:"/scorm-attempts/:columnId/:gradeId",resolve:{scormContentData:[c.d,"contentData",u.c,d.b,l.d,function(e,t,n,r,i){var o=n.currentContentData||t&&t.gradingColumn.id===i.nextParams.columnId&&t;return o||r.loadContentAndGrades({course:e,contentId:i.nextParams.contentId,columnId:i.nextParams.columnId})}],translations:["$q",a.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment")])}]},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:function(){return Promise.all([n.e(0),n.e(2),n.e(9),n.e(37),n.e(322)]).then(n.bind(null,"x3h6"))}}).peekState("scorm-overview.student.attempt",r.__assign({url:"/column/{columnId:_[0-9]+_1}/attempt/{attemptId:_[0-9]+_1}",panelClass:"full",resolve:{contentData:["contentData",c.d,d.b,l.d,function(e,t,n,r){return e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:r.nextParams.contentId,columnId:r.nextParams.columnId})}],currentContent:["contentData",function(e){return e.courseContent}],currentColumn:["contentData",function(e){return e.gradingColumn}],attempt:["$q","contentData",o.o.serviceName,l.d,o.C.serviceName,o.H.serviceName,function(e,t,n,r){var i=r.nextParams.attemptId;return n.$buildRaw({id:t.courseContent.courseId}).gradebook.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then(function(e){t.attempt=e}).$asPromise()}]},require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(116)]).then(n.bind(null,"H0q3"))}},g,{params:{commentPanelInitiallyOpen:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations","message"]})).peekState("scorm-analytics-report",{url:"/scorm-report/{contentId:_[0-9]+_1}?courseId",resolve:(f={},f[c.d]=t.resolve,f.content=[c.d,l.d,o.o.serviceName,function(e,t,n){return n.$new(e.id).contents.$find(t.nextParams.contentId).$asPromise()}],f.translations=[a.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}],f),panelClass:"full",require:function(){return n.e(288).then(n.bind(null,"0rof"))},pageTitle:"course.content.scorm.report.pageTitle"})}])},"1mXj":function(e,t,n){e.exports=n("ZJ/X")(1944)},"1qB0":function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-large-avatar-multiple",use:"icon-large-avatar-multiple-usage",viewBox:"0 0 60 60",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" id="icon-large-avatar-multiple"><g fill="none" stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663" /><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438" /><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27" /><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223" /><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758" /></g></g></symbol>'});i.add(o);e.exports=o},"1y/X":function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.TEACHING=new t("TEACHING"),t.SUPPORTING=new t("SUPPORTING"),t.TAKING=new t("TAKING"),t.VISITING=new t("VISITING"),t}(n.n(i).a);t.a=o},"20OV":function(e,t,n){e.exports=n("ZJ/X")(1413)},"2Tae":function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c});var r=n("mrSG"),i=n("IbG+"),o=n("3bn4"),s=n("0JpG"),a=n("TnpK"),u="ultra.course.rubric.rubric-goal-alignment",c="rubric-goal-alignment",l=["course","goal-alignment","goal"],d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="/goalAlignment/:rowId",t.panelClass="peek rubric-goal-peek",t}return r.__extends(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentCourse","currentRubric",s.serviceName,a.d,function(t,n,r,i,o){return t.when(i.loadBundle("features/"+l.join("/"))).then(function(){return n.rubrics.$find(r.id,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(function(t){t.rows.forEach(function(t){t.id&&o.nextParams&&o.nextParams.rowId&&t.id===o.nextParams.rowId&&(e.rubricRow=t)})})}).then(function(){return e.rubricRow?e.setupGoalAlignableContent(e.rubricRow,i):t.when([])})}]},t.prototype.getPeekStateName=function(){return c},t.prototype.getOverrideSubTitle=function(){return["currentRubric",a.d,function(e,t){var n="";return e.rows.forEach(function(e){e.id&&t.nextParams&&t.nextParams.rowId&&e.id===t.nextParams.rowId&&(n=e.header)}),n}]},t.prototype.setupGoalAlignableContent=function(e,t){return[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:l.join(".")+".goalsAlignedWithRubricCriteria"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals:function(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map(function(t){return t.content=e,t})}]},t.$inject=["$injector","$q"],t}(o.a);i.module(u,[a.b,s.moduleName]).config([a.c,function(e){var t=new d;e.peekState(t.getPeekStateName(),t)}])},"2qV7":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return oe});n("VZTK"),n("IsEC");var r=n("LvDl"),i=n("IbG+"),o=n("TnpK"),s=n("pjml"),a=n("Fvsw"),u=n("fYJU"),c=n("0JpG"),l=n("neh4"),d=n("vWx0"),p=n("VfFK"),f=n("OMme"),m=n("jj6p"),h=n("cacA"),g=n("sb+l"),v=n("Nrpd"),b=n("rmtn"),y=n("iAaI"),S=n("qOsI"),C=n("qtHE"),w=n("Sjpn"),$=n("DDbI"),k=n("P43K"),T=n("YVo+"),I=n("iwI+"),E=n("yGso"),P=n("YfM7"),A=n("awu3"),x=n("Hbkz"),D=n("CPqS"),_=n("GNXM"),L=n("3hz+"),M=n("FE+f"),N=n("fzj8"),R=n("yXB1"),O=n("1I+h"),G=n("JRp+"),U=n("gOJg"),B=n("y3by"),F=n("uNsL"),q=n("8HGT"),j=n("jnoB"),H=n("7oqQ"),V=n("RJ/U"),z=n("7QJo"),K=n("UiBk"),W=n("U8wS"),J=n("sNuB"),X=n("BrA8"),Q=n("IVtk"),Z=n("hWgD"),Y=n("IVCC"),ee=n("1ZiP"),te=n("cwoR"),ne=n("j2IR"),re=n("Q/M7"),ie=n("tfZW"),oe="ultra.routes";function se(e,t){return{systemInfo:[a.b,function(e){return e.getSystemInfo().$asPromise()}],currentUser:[u.b,function(e){return e.userModel.$asPromise()}],languages:["currentUser",s.N.serviceName,function(e,n){if(t&&e.locale)return n.$collection().$fetch({limit:1e4}).$asPromise()}],user:["currentUser","languages",function(e,n){return t&&e.locale&&!r.find(n,{locale:e.locale})&&(e.locale=null),e.$patch().$asPromise()}],localize:["$q","$rootScope","user","systemInfo",c.serviceName,"$cookies","$window",function(t,n,r,i,o,s,a){var u=r.locale||i.defaultLocaleIdentifier,l=s.get("guest.session.locale");r.isGuest()&&l&&(u=l);var d=ie.a.getInstance();if(i.siteId&&i.ultraCustomLocaleLocation&&d.setOverrideLocation(i.ultraCustomLocaleLocation,i.siteId),i.ultraLocaleData){var p=Object.keys(i.ultraLocaleData);p.forEach(function(e){var t=i.ultraLocaleData[e];t.ultraOverrideCode&&o.addOverride(e,t.ultraOverrideCode)}),p.indexOf(u)<0&&(u=i.defaultLocaleIdentifier)}var f=a.location.href.match(c.localeQuerystringRegex);f&&(u=f[1]),o.setUserLocale(u),o.setSystemDefaultLocale(i.defaultLocaleIdentifier);var m=[o.setLocale(n,u)].concat(e.map(function(e){return o.loadBundle(e)}));return t.all(m)}]}}i.module(oe,[s.R,a.a,u.a,c.moduleName,o.b,l.a,d.a,p.a,f.b,P.a,C.a,m.a,h.a,w.a,$.a,k.a,T.a,I.a,g.a,v.a,b.a,y.a,S.a,E.a,x.a,D.a,_.a,L.a,M.a,N.a,R.a,O.a,G.a,U.a,B.a,F.a,q.a,j.a,H.a,V.a,z.a,K.a,W.a,J.a,A.a,X.a,Z.a,Y.a,ee.a,te.a,ne.a,"ngCookies"]).config([o.c,function(t){t.state("base",{abstract:!0,resolve:se(["features/base/base","global","common/grades-common","components/services/grade"]),require:function(){return Promise.all([n.e(14),n.e(1),n.e(23),n.e(26),n.e(82),n.e(256)]).then(n.bind(null,"03Un"))}}).state("welcome",{resolve:se(["features/welcome"],!0),require:function(){return n.e(371).then(n.bind(null,"IYP1"))},pageTitle:"welcome.welcome.title"}).state("register-succeeded",{url:"/startLearn?registerStatusCode?courseId?enrollStatusCode",require:function(){return n.e(410).then(n.bind(null,"90MB"))}}).state("base.not-found",{resolve:{translations:[c.serviceName,function(e){return e.loadBundle("features/base/not-found/base-not-found")}]},require:function(){return n.e(375).then(n.bind(null,"A15Z"))},pageTitle:"base.not-found.pageNotFoundTitle"}).state("logout",{url:"^/logout",onEnter:function(){e("body").addClass("bb-logout"),location.href=re.c("/webapps/login/?action=logout")}}).state("classicRedirect",{url:"/classicRedirect?legacyUrl",onEnter:[o.d,function(e){var t=e.nextParams.legacyUrl,n=t?re.b(t).course_id:null;n&&e.goPeekState("course.classic.outline",{courseId:n,legacyUrl:t})}]}).state("mobileApiCall",{url:"^/mobileApiCall?action&courseId&contentId&attemptId",onEnter:[o.d,function(e){Q.d(e)}]})}])}).call(this,n("EVdn"))},"32f0":function(e,t,n){e.exports=n("ZJ/X")(54)},"3FFP":function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return v});var r=n("mrSG"),i=(n("YQEa"),n("LvDl")),o=n("EVdn"),s=n("IbG+"),a=n("oSB+"),u=n.n(a),c=n("rxY8"),l=n("lEL+"),d=n("0JpG"),p=n("yC9S"),f=n("hYwd"),m=n("/F8r"),h=n("TwJE"),g="ultra.components.directives.saveTray",v=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.template=n,o.msgKeysSuffix=r,o.eventName=i,o}return r.__extends(t,e),t.prototype.getTemplateHtml=function(){return this.template},t.getTrayType=function(e){switch(e){case"LoadMoreResults":return t.LoadMoreResults;case"Toast":return t.Toast;default:return t.Default}},t.Default=new t("Default",f,{inProgress:"saving",success:"success",error:"error"},"bb-save-tray-start"),t.LoadMoreResults=new t("LoadMoreResults",m,{inProgress:"loadingMoreItems",success:"itemsLoaded",error:"itemsFailedToLoad"},"bb-load-more-results-start"),t.Toast=new t("Toast",h),t}(u.a),b=function(){function e(t,n,r,s,a){var u=this;if(this.scope=t,this.spinner=r,this.timeout=s,this.bbLocalize=a,this.inProgress=!1,this.localizationKeysPrefix=t.trayLocalizationKeysPrefix||"components.directives.save-tray",this.footer=n.closest("footer"),t.toastMessage&&t.toastMessage()){if(n.find(".notification-container span.progress-status").html(t.toastMessage()),t.toastShortMessage&&t.toastShortMessage()){var c,l=!1,d=!1,f=!0,m=n.find(".notification-container span.progress-status"),h=function(){var e=o(window).width();m[0].offsetWidth<m[0].scrollWidth?(l||(c=e),l=!0,f&&(d=!0),m.html(t.toastShortMessage())):e>c&&!d&&(l=!1,m.html(t.toastMessage())),f=!1};this.timeout(h,t,0);var g=i.debounce(h,100);p.b.OnWindow("resize",g,t)}}else this.spinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5,successCallback:function(){u.status="success",u.inProgress=!1,u.sendStatusMessage(t,u.status),u.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.success),t.$apply()},errorCallback:function(){u.status="error",u.inProgress=!1,u.sendStatusMessage(t,u.status),u.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.error),t.$apply()}},t.$on("save-tray-spinner-status-update",function(e,t){if(u.spinnerObject)return t?u.spinnerObject.complete():u.spinnerObject.error()}),t.$on(t.trayType.eventName,function(r,i,o,s,a,c){t.trayId===i&&(u.status="",u.canvasElement||(u.canvasElement=n.find(".canvas")),s&&(u.spinnerArgs=s),u.footer.addClass("is-active"),u.spinnerObject||(u.spinnerObject=u.spinner.initInlineLoader(u.canvasElement,u.spinnerArgs)),u.inProgress||(u.spinnerObject.start(),u.inProgress=!0),u.timeoutComplete=!1,u.activeTimeout&&!u.timeoutComplete&&u.timeout.cancel(u.activeTimeout),u.sendMessageToScreenReader(t,t.trayType.msgKeysSuffix.inProgress,0),o.then(function(){a?(u.activeTimeout=u.timeout(function(){u.footer.removeClass("is-active"),u.timeoutComplete=!0,u.scope.$root.$broadcast("bbSaveTrayComplete")},t,c||e.ACTIVE_TIMEOUT_LENGTH,!0),u.spinnerObject.complete()):u.spinnerObject.error()},function(e){e&&"canceled"===e.$status||u.spinnerObject.error()}))})}return e.prototype.sendMessageToScreenReader=function(e,t,n){t&&e.$root.$emit("read-info-directive-alert",this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:this.localizationKeysPrefix+"."+t}),n)},e.prototype.sendStatusMessage=function(e,t){"true"===e.emitStatusEvent&&e.$root.$emit("save-tray-status-event",t)},e.$inject=["scope","element",c.b,l.b,d.serviceName],e.ACTIVE_TIMEOUT_LENGTH=6e3,e}(),y=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="E",this.scope={trayId:"@?",trayLocalizationKeysPrefix:"@?",toastMessage:"&?",toastShortMessage:"&?",toastClass:"&?",toastIcon:"&?",toastStatus:"&?",emitStatusEvent:"@?"},this.link=function(e,t,r){r.trayType?e.trayType=v.getTrayType(r.trayType):e.trayType=e.toastMessage&&e.toastMessage()?v.Toast:v.Default,t.append(n.$compile(e.trayType.getTemplateHtml())(e)),e.saveTray=n.$injector.instantiate(b,{scope:e,element:t})}}return e.$inject=["$injector","$compile"],e}();s.module(g,[c.a,l.a,d.moduleName]).directive("bbSaveTray",["$injector",function(e){return e.instantiate(y)}])},"3bn4":function(e,t,n){"use strict";var r=n("LvDl"),i=n("0JpG"),o=function(){function e(){var e,t,o=this;this.panelClass="peek",this.url="/goalAlignment",this.require=function(){return Promise.all([n.e(0),n.e(298)]).then(n.bind(null,"lQY5"))},this.pageTitle="course.goal-alignment.goal.header",this.allowChildPeekStates=!0,this.peekViewName="goal-alignment-peek",this.params={noAutoGo:!1},this.peekStates=["goal-picker-legacy"],this.resolve={translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}],goalAlignableContents:(e=o.resolveGoalAlignableContent(),t=e[e.length-1],e[e.length-1]=function(){return t.apply(null,arguments).then(function(e){return r.isArray(e)?e:[e]})},e),overrideSubTitle:o.getOverrideSubTitle()}}return e.prototype.getOverrideSubTitle=function(){return[function(){return null}]},e}();t.a=o},"3hz+":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.books-and-tools.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("books-and-tools",{url:"/booksAndTools?parentId",require:function(){return Promise.all([n.e(80),n.e(301)]).then(n.bind(null,"cFJh"))},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/books-and-tools/books-and-tools")}]},panelClass:"peek",pageTitle:"course.booksAndTools.tab.title",peekStates:["content-market","partner-tools","proctoring-lti-tool"]})}])},"3uIF":function(e,t,n){"use strict";n.d(t,"a",function(){return s});n("TeAI");var r=n("5MwF"),i=n("yCC5"),o=n("Rjd/"),s=i.zb;o.a.factory(s,["restmod",function(e){var t=r.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{delete:function(e,t){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e+"/linkRefId/"+t},function(e){}).$asPromise()}}}})}])},"3vti":function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var r=n("mrSG"),i=(n("EKl8"),n("hh8V"),n("OAwL"),n("EVdn")),o=n("IbG+"),s=n("yC9S"),a=n("oSB+"),u=n.n(a),c=n("+4Px"),l=n("0JpG"),d="ultra.components.directives.bbSortable",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Horizontal=new t("Horizontal"),t.Vertical=new t("Vertical"),t}(u.a),f={containerSelector:"[sortable-container]",itemSelector:"[sortable-item]",containerPath:"[sortable-parent]:first",placeholder:'<div class="placeholder">&nbsp;</div>',handle:"i.icon-reorder",onDragStart:function(e,t,n,r){t.rootGroup.placeholder=e.clone().addClass("placeholder").removeAttr("sortable-item"),t.rootGroup.placeholder.find("[sortable-container], [sortable-item]").removeAttr("sortable-container sortable-item"),n(e,t)},triggerKey:c.f,orientation:p.Vertical,placeholderClass:"placeholder",moveKeyHandler:function(e,t,n,r){var i=t.options;if(p.Horizontal.isEqualTo(i.orientation)){var o=i.isRTL?c.j:c.s,s=i.isRTL?c.s:c.j;r.keyCode===s?(r.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):r.keyCode===o&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),r.stopPropagation())}else r.keyCode===c.v?(r.stopPropagation(),e.insertBefore(e.prev(i.itemSelector)),e.find(i.handle).focus()):r.keyCode===c.d&&(e.insertAfter(e.next(i.itemSelector)),e.find(i.handle).focus(),r.stopPropagation())},cancelHandler:function(e,t,n,r,i){var o=e.index();o>n?e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+n+")")):o<n&&e.insertAfter(e.parent().find(t.options.itemSelector+":nth-child("+(n+1)+")"))},saveHandler:function(e,t,n,r){e.focus(),t.options.onDrop&&"function"==typeof t.options.onDrop&&t.options.onDrop(e,t,n,r)}},m=function(){function e(e){var t=this;this.localize=e,this.scope={sortableOptions:"=?"},this.restrict="A",this.link=function(e,n,r){var o=e.$watch("sortableOptions",function(){e.sortableOptions=i.extend({},f,e.sortableOptions),e.sortableOptions.isRTL=t.localize.isRTL(e);var r=n.parents("[bb-sortable]");n.on("touchstart",e.sortableOptions.handle,function(e){i(e.target).trigger("click")}),0!==r.length?(r.sortable("destroy"),r.last().sortable(e.sortableOptions)):n.sortable(e.sortableOptions),n.find(e.sortableOptions.itemSelector).each(function(n,r){t.keyboardDragAndDrop(i(r),e)}),s.b.OnRootScope(e,"sortable-item-inserted",function(n,r){var i=t.keyboardDragAndDrop(r,e);r.hasClass(e.sortableOptions.placeholderClass)&&!r.data("axHandlersAdded")&&t.triggerAccessibilityMode(i,e)}),o()})}}return e.prototype.keyboardDragAndDrop=function(e,t){var n=this,r=i(e).find(t.sortableOptions.handle);return r.on("keyup",function(e){if(e.keyCode===t.sortableOptions.triggerKey){var r=i(e.target),o=r.closest(t.sortableOptions.itemSelector),s=o.parents(t.sortableOptions.containerSelector).last().data("sortable");if(o.hasClass(t.sortableOptions.placeholderClass))return;e.stopImmediatePropagation(),o.addClass(t.sortableOptions.placeholderClass),t.sortableOptions.onEnter&&t.sortableOptions.onEnter(o,s),n.triggerAccessibilityMode(r,t)}}),r},e.prototype.triggerAccessibilityMode=function(e,t){var n,r,o,s=e.closest(t.sortableOptions.itemSelector),a=s.parents(t.sortableOptions.containerSelector).last().data("sortable"),u=s.index(),c=function(){i(document).off("click focusin",r),e.off("keydown",n),e.off("keyup",o),s.data("axHandlersAdded",!1),s.removeClass(t.sortableOptions.placeholderClass),t.sortableOptions.onExit&&t.sortableOptions.onExit(s,a)};n=function(e){t.sortableOptions.moveKeyHandler(s,a,i.noop,e)},r=function(n){i(n.target).is(e)||(c(),t.sortableOptions.cancelHandler(s,a,u,i.noop,n))},o=function(e){e.keyCode===t.sortableOptions.triggerKey&&(c(),e.stopImmediatePropagation(),t.sortableOptions.saveHandler(s,a,i.noop,e))},e.on("keyup",o),e.on("keydown",n),i(document).on("click focusin",r),t.$on("$destroy",c),s.data("axHandlersAdded",!0)},e.$inject=[l.serviceName],e}();o.module(d,[l.moduleName]).directive("bbSortable",["$injector",function(e){return e.instantiate(m)}])},"4/g8":function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-conflict.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-conflict.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},"40MU":function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",function(){return h}),n.d(t,"RandomizeAnswers",function(){return g}),n.d(t,"TimerCompletion",function(){return v});var r=n("mrSG"),i=(n("TeAI"),n("oSB+")),o=n.n(i),s=n("5MwF"),a=n("yCC5"),u=n("Rjd/"),c=n("nkTj"),l=n("a8V0");n.d(t,"DeliveryType",function(){return l.a});var d=n("r6n2");n.d(t,"DeployedAssessmentType",function(){return d.a});var p=n("VJfD");n.d(t,"FeedbackMode",function(){return p.a});var f=n("K4f8");n.d(t,"FeedbackOption",function(){return f.a});var m=n("817J");n.d(t,"AssessmentType",function(){return m.a});var h=a.f,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.A=new t("ALWAYS"),t.N=new t("NEVER"),t.P=new t("PER_QUESTION"),t}(o.a),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.C=new t("CONTINUAL"),t.H=new t("HARDSTOP"),t}(o.a);u.a.factory(h,["restmod",c.d,function(e,t){return e.model().mix({lastModifiedDate:{serialize:"date"},answers:{hasMany:a.Vb},gradedQuestionAttempts:{hasMany:a.bb,path:"answers/grades"},questions:{hasMany:a.Ub},ui:{mask:!0,init:function(){return{}}},exceptions:{hasMany:a.g,hooks:{"before-request":function(e){e.url=e.url.replace(s.a.apiBasePath,s.a.apiBasePath+"/public")}}},userExceptions:{hasMany:a.g,path:"exceptions/users"},groupExceptions:{hasMany:a.g,path:"exceptions/groups"}})}])},"41sU":function(e,t,n){},"43zP":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.NoChanges=new t("noChanges"),t.NotSaved=new t("notSaved"),t.Saved=new t("saved"),t.Saving=new t("saving"),t.Cancelling=new t("cancelling"),t.Deleting=new t("deleting"),t}(n.n(i).a)},"4GL6":function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var r=n("mrSG"),i=(n("pGZF"),n("LvDl")),o=n("IbG+"),s=n("0JpG"),a=n("lEL+"),u=n("gkef"),c=n("fGgA"),l=n("+4Px"),d="ultra.components.directives.tooltip.complexTooltip";function p(e){return void 0===e&&(e=""),'<ul class="complex-tooltip-list '+e+'"><li ng-repeat="item in items track by $index">{{item}}</li></ul>'}var f=function(t){function n(e,n,r,s,a,u,c){var l=t.call(this,e,n,r,a,u,c)||this;l.scope=e,l.element=n,l.attrs=r,l.$compile=s,l.localizeService=a,l.timeoutService=u,l.windowSizeService=c,l.scopeChanged=!1;var d=l.scope.$watch("tooltipScope()",function(e){e&&(l.tooltipScope=l.scope.tooltipScope(),d())}),p=l.scope.$watch("tooltipScope().items",function(e,t){e&&t&&i.difference(e,t).length&&(l.tooltipScope=l.scope.tooltipScope(),l.scopeChanged=!0,l.tooltipScope.$parent.$on("$destroy",function(){l.tooltipScope.$destroy()}),(o.isUndefined(l.scope.tooltipAutoUpdate)||"false"===l.scope.tooltipAutoUpdate)&&p())});return l}return r.__extends(n,t),n.prototype.showTooltip=function(){"true"===this.scope.tooltipAutoUpdate&&this.tooltipCreated&&this.scopeChanged&&(this.updateTooltipContent(t.prototype.getTooltip.call(this)),this.tooltipCreated=!1,this.scopeChanged=!1),t.prototype.showTooltip.call(this)},n.prototype.addTooltipContent=function(t){var r=this,i=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope);this.tooltipScope.$apply(),t.on("keydown",function(e){e.which===l.g?(r.element.focus(),r.hideTooltip()):e.which!==l.u||e.shiftKey?e.which===l.u&&e.shiftKey&&o.element(e.target).closest(".tooltip-first-tabbable").length>0&&(r.getTooltip().find(".tooltip-last-tabbable").focus(),e.preventDefault(),e.stopPropagation()):o.element(e.target).closest(".tooltip-last-tabbable").length>0&&(r.getTooltip().find(".tooltip-first-tabbable").focus(),e.preventDefault(),e.stopPropagation())}),t.append(e('<div class="'+n.TOOLTIP_CONTENT_CLASS+'"></div>').append(i))},n.prototype.updateTooltipContent=function(e){var t=this.$compile(this.scope.tooltipTemplate)(this.tooltipScope);e.find("."+n.TOOLTIP_CONTENT_CLASS).empty().append(t)},n.prototype.addTooltipStyles=function(e){e.removeClass("tooltip-center-content"),this.attrs.tooltipMaxWidth&&(e.removeClass("tooltip-max-width"),e.css({"max-width":this.attrs.tooltipMaxWidth})),"true"===this.attrs.tooltipDisablePadding&&e.addClass("tooltip-unpadded"),"true"===this.attrs.tooltipDarkTheme&&e.addClass("tooltip-dark-theme")},n.prototype.addTooltipEvents=function(e){var t=this;e.on("mouseleave",function(e){t.timeoutMS>0?t.timeout=t.timeoutService(function(){t.hideTooltip()},t.scope,t.timeoutMS):t.hideTooltip()}),e.on("mouseover",function(e){t.timeout&&t.timeoutService.cancel(t.timeout)}),e.on("click",function(e){e.stopPropagation()})},n.prototype.postShowTooltip=function(){var e=this;o.isDefined(this.attrs.tooltipFocusSelector)&&this.timeoutService(function(){e.getTooltip().find(e.attrs.tooltipFocusSelector).eq(0).focus()},this.scope,120)},n.$inject=["scope","element","attrs","$compile",s.serviceName,a.b,u.b],n.TOOLTIP_CONTENT_CLASS="complex-tooltip-content",n}(c.a),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.scope={tooltipScope:"&",tooltipTemplate:"@",tooltipAutoUpdate:"@?"},this.link=function(e,n,r){e.complexTooltip=t.$injector.instantiate(f,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();o.module(d,[s.moduleName,a.a,c.b,u.a]).directive("bbComplexTooltip",["$injector",function(e){return e.instantiate(m)}])}).call(this,n("EVdn"))},"4HBD":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return u});n("gSbt");var r=n("IbG+"),i=n("0JpG"),o=n("oVrE"),s=n("gCXj"),a=n("pjml"),u="ultra.components.directives.bbUsername",c=function(){function t(e){var t=this;this.bbLocalize=e,this.scope={user:"="},this.restrict="AE",this.link=function(e,n,r){e.update=function(){return t.updateDom(e,n,r)},n.addClass("username");var i=e.$watchGroup(["user.id","user.familyName","user.givenName","user.title","user.email"],function(){if(e.user){var t=e.user;t.$asPromise&&!t.$resolved?t.$asPromise().then(e.update):e.update(),null!=r.autoUpdate&&"false"!==r.autoUpdate||i()}else n.html("")})}}return t.prototype.isAnonymousUser=function(e){return o.f(e)},t.prototype.cleanUpClassNames=function(e){return e.split(/\s+/).filter(function(e){return!/^course_user.+$/.test(e)}).join(" ")},t.prototype.updateName=function(e,t){e.html(t)},t.prototype.updateAttrs=function(t,n,r,i){var o;"true"===r.hasTitleAttr&&n.attr("title",i),"true"!==r.shouldAllowLabel&&n.children().attr("aria-hidden","true");var s=n.find(".sr-only");0===s.length&&(s=e('<span class="sr-only"></span>'),n.append(s));var a=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(t),key:"components.directives.username.msg-has-accommodations",params:{fullname:i},noWrap:!0});s.attr(((o={})["aria-label-if-no-accommodation"]=i,o["aria-label-if-has-accommodation"]=a,o))},t.prototype.updateDom=function(e,t,n){var r=this,o=e.user;this.isAnonymousUser(o)&&(o.givenName=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(e),key:"anonymous.postedName"}),o.familyName=""),t[0].className=this.cleanUpClassNames(t[0].className),o.id&&t.addClass("course_user"+o.id);var s=this.bbLocalize.getFormatId(i.ILocaleUsernameFormat,n.format);if(n.formatSync)try{this.updateName(t,this.bbLocalize.formatUsernameSync(o,s,e)),this.updateAttrs(e,t,n,this.bbLocalize.formatUsernameSync(o,s,e,{noWrap:!0,noEscape:!0}))}catch(e){console.error(e)}else this.bbLocalize.formatUsername(o,s,e).then(function(e){r.updateName(t,e)}).catch(function(e){return console.error(e)}),this.bbLocalize.formatUsername(o,s,e,{noWrap:!0,noEscape:!0}).then(function(i){r.updateAttrs(e,t,n,i)}).catch(function(e){return console.error(e)})},t.$inject=[i.serviceName],t}();r.module(u,[i.moduleName,s.a,a.R]).config([s.b+"Provider",function(e){e.onStyleRefresh(function(e,t){var n=t.course&&t.course.memberships&&t.course.memberships.permissions?t.course.memberships.permissions.editAccommodation||t.course.memberships.permissions.viewAccommodation:t.permissions&&(t.permissions.editAccommodation||t.permissions.viewAccommodation);e.selector("bb-username.course_user"+t.userId+":before").rule("display",t.accommodation().hasAccommodation&&n?"inline-block":"none"),e.selector("bb-username.course_user"+t.userId).selector(".sr-only:before").rule("content",t.accommodation().hasAccommodation&&n?"attr(aria-label-if-has-accommodation)":"attr(aria-label-if-no-accommodation)")})}]).directive("bbUsername",["$injector",function(e){return e.instantiate(c)}])}).call(this,n("EVdn"))},"4HXK":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r=n("mrSG"),i=n("IbG+"),o=n("5MwF"),s=n("w9mJ"),a="ultra.services.logger",u="logger",c=function(){function e(e,t){this.$http=e,this.promiseQueueService=t,this.$http=e,this.queue=t.getQueue("telemetry")}return e.prototype.logToServer=function(e,t,n){var r=this;if(e){var i="string"==typeof e?new Error(e):e,s={applicationId:o.a.telemetryAppId,component:"",message:i.message,data:n,cause:i.stack,level:t};s.cause||(s.cause="Stack trace is unavailable"),this.queue.enqueue(function(){return r.$http.post(o.a.telemetryApiBasePath+"/v1/browser/logs",s,{timeout:o.a.telemetryApiTimeoutMS}).error(function(e,t){console.error("Failed to send logs to server. \nResponse: "+e+"Status: "+t)})})}else console.error("Unable to send empty log entry to server")},e.prototype.debug=function(e,t){this.logToServer(e,"debug",t)},e.prototype.info=function(e,t){this.logToServer(e,"info",t)},e.prototype.error=function(e,t){this.logToServer(e,"error",t)},e.prototype.critical=function(e,t){this.logToServer(e,"critical",t)},e.prototype.warn=function(e,t){this.logToServer(e,"warn",t)},e.$inject=["$http",s.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(c);i.module(a,[s.a]).service(u,c)},"4KGR":function(e,t){e.exports='<bb-modal class="notification group-attempt-access-control-dialog {{additionalClass}}"\n  modal-translate-options="modalTranslateOptions"\n  analytics-id-tag-prefix="components.directives.groupAttemptAccessControlDialog">\n\n  <div name="modal-contents">\n\n    <div class="queue">\n      <div class="owner user-tile">\n        <div>\n          <bb-avatar user="owner"></bb-avatar>\n          <bb-username user="owner"></bb-username>\n        </div>\n      </div>\n      <div class="user-tile queuer" ng-repeat="user in queuedUsers track by user.id" ng-class="\'queuer-\' + $index">\n        <div>\n          <bb-avatar user="user"></bb-avatar>\n          <bb-username user="user"></bb-username>\n        </div>\n      </div>\n    </div>\n\n    <p ng-bind-html="::modalStrings.instructions"></p>\n  </div>\n  <span name="modal-footer-button-primary">\n    <button class="button confirm-ok js-primary-button" ng-click="okAction()" ng-if="!hideOK" analytics-id="primary.ok.action.button">{{::modalStrings.ok}}</button>\n    <button class="button confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n  <span name="modal-footer-button-secondary">\n    <button class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" ng-if="!hideOK" analytics-id="secondary.cancel.action.button">{{::modalStrings.cancel}}</button>\n  </span>\n</bb-modal>\n'},"4PjW":function(e,t){e.exports='<p class="sr-only read-info-polite" role="alert" aria-live="polite">{{readInfo.message}}</p>\n<p class="sr-only read-info-assertive" role="alert" aria-live="assertive">{{readInfo.alertMessage}}</p>'},"4cb2":function(e,t,n){e.exports=n("ZJ/X")(2209)},"4ekl":function(e,t){e.exports='<div class="file-upload-container">\n  <div ngf-drop\n       id="{{fileUploadDivId}}"\n       ng-model="files" class="file-upload"\n       ngf-multiple="fileUpload.allowMultiple"\n       ngf-drop-disabled="disableDrag && disableDrag()"\n       ngf-change="fileUpload.onFileSelect($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)"\n       ngf-stop-propagation="!(disableDrag && disableDrag())"\n       ngf-drag-over-class="dragClass"\n       tabindex="-1">\n    <div class="fileUploadTransclude" ng-transclude ng-show="fileUpload.transcludeVisible"></div>\n    <div class="js-file-upload-complete" ng-attr-ready="{{!fileUpload.uploadInProgress}}"></div>\n    <div ng-show="fileUpload.fileReviewVisible" class="file-upload-review">\n      <section class="file-upload-panel" ng-if="fileUpload.progressVisible">\n        <bb-progress primary-key="primaryKey && primaryKey()" display-results="fileUpload.useDefaultSuccessMethod"></bb-progress>\n      </section>\n    </div>\n  </div>\n  <input ngf-select \n         ng-if="fileUpload.allowMultiple" \n         type="file" \n         ngf-change="fileUpload.onFileSelect($files)" \n         multiple class="hide fileUploadInput" \n         analytics-id="components.directives.fileUpload.multipleFiles.input.file"/>\n  <input ngf-select \n         ng-if="!fileUpload.allowMultiple" \n         type="file" \n         ngf-change="fileUpload.onFileSelect($files)" \n         class="hide fileUploadInput" \n         analytics-id="components.directives.fileUpload.input.file"/>\n</div>'},"4nF1":function(e,t,n){"use strict";n.d(t,"b",function(){return w}),n.d(t,"a",function(){return A});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("pjml"),a=n("Y3OE"),u=n("oSB+"),c=n.n(u),l=n("g66W"),d=n("Q/M7"),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.BbPage=new t("resource/x-bb-page"),t.LtiLaunch=new t("ltilaunch"),t.ScormLaunch=new t("scormlaunch"),t.ContentUrl=new t("contenturl"),t.None=new t("none"),t}(c.a),f=function(){function e(e,t){this.content=e,this.isFromCourseLink=t}return e.prototype.deleteKey=function(){return this.content.contentHandler.toString()},e.prototype.iconClass=function(){var e=a.a.parse(this.content.contentHandler.toString());return null!=e?e.iconClass:null},e.prototype.linkAction=function(){var e=this.content.contentHandler.toString();this.isFromCourseLink&&(e=a.a.CourseLink.toString());var t=p.parse(e);return t||(t=new p(e)),t},e.prototype.viewHandler=function(){return this.content.contentHandler.toString()},e.prototype.getTargetCourseContentDisplay=function(){return null},e.prototype.getEditSref=function(){return null},e.prototype.getEditState=function(){return null},e.prototype.getEditStateParams=function(){return null},e.prototype.usesEditButton=function(){return null!=this.getEditSref()},e.prototype.canUseEditButton=function(){return this.usesEditButton()&&!(!this.content.permissions||!this.content.permissions.edit&&!this.content.permissions.modifyAvailability)},e.prototype.isLtiLink=function(){return!1},e.prototype.contentUrl=function(){throw new Error("contentUrl() is not supported for "+this.content.contentHandler.toString())},e.prototype.supportsConversations=function(){return!1},e.prototype.isXplorLtiLink=function(){return!1},e}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"gradebook-item.assignment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'},t}(f),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"gradebook-item.assignment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details"}},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details"})'},t.prototype.supportsConversations=function(){return!0},t}(f),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.deleteKey=function(){if(this.content.getAssociatedGradingColumn){var e=this.content.getAssociatedGradingColumn();if(e&&e.gradebookCategory)switch(e.gradebookCategory.title){case s.E.GradeCategoryTitleEnum.Assignment.toString():return a.a.UltraAssignment.toString();default:return a.a.TestLink.toString()}}return this.content.contentHandler.toString()},t.prototype.getEditState=function(){return"gradebook-item.assessment"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id,gradeitemView:"details",assessmentType:"test"}},t.prototype.canUseEditButton=function(){var e=this.content.getDeployedAssessment().permissions;return!(!e||!e.modify&&!e.view)},t.prototype.getEditSref=function(){return this.getEditState()+'({courseId: content.courseId,contentId: content.id,gradeitemView: "details",assessmentType: "test"})'},t.prototype.supportsConversations=function(){return!0},t}(f),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"discussion.view.with-grading"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"},t}(f),b=function(e){function t(t){var n=e.call(this,t)||this;return n.content=t,t.contentDetail&&(n.targetContent=t.getLinkContentSource()),n}return r.__extends(t,e),t.prototype.getTargetCourseContentDisplay=function(){if(!(this.targetContent&&this.targetContent.$resolved&&this.targetContent.contentHandler))return new f(this.content,!0);switch(A.normalize(this.targetContent.contentHandler.toString())){case a.a.Discussion.toString():return new v(this.targetContent,!0);default:return new f(this.targetContent,!0)}},t}(f),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"content-manage.edit.file"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return p.ContentUrl},t.prototype.contentUrl=function(){return d.c(this.content.contentDetail[s.r.ContentHandler.File.toString()].file.permanentUrl)},t}(f),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"content-manage.edit.folder"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t}(f),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"content-manage.edit.learning-module"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t}(f),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t,"EDIT_STATE_SREF",{get:function(){return"content-manage.edit.document"},enumerable:!0,configurable:!0}),t.prototype.getEditState=function(){return t.EDIT_STATE_SREF},t.prototype.getIconClass=function(){return a.a.Document.iconClass},t.prototype.supportsConversations=function(){return!0},t.prototype.linkAction=function(){return p.BbPage},t.prototype.viewHandler=function(){return a.a.Page.toString()},t}(S),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"content-manage.edit.link"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.contentUrl=function(){var e=this.content.contentDetail&&this.content.contentDetail[s.r.ContentHandler.ExternalLink.toString()].url;return e&&(e=l.c(e)),t.PROTOCOL_CHECK.test(e)?e:"http://"+e},t.prototype.linkAction=function(){return p.ContentUrl},t.PROTOCOL_CHECK=/^\w+\:{1}/,t}(f),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"content-manage.edit.lti"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return p.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t.prototype.isXplorLtiLink=function(){var e=this.content.contentDetail[this.content.contentHandler.toString()].url;return e&&e.indexOf("://xplor")>-1},t.prototype.supportsConversations=function(){return!0},t}(f),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.deleteKey=function(){return a.a.LtiPlacement.toString()},t.prototype.getEditState=function(){return"content-manage.edit.placement"},t.prototype.getEditStateParams=function(){return{id:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({id:content.id})"},t.prototype.linkAction=function(){return p.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t.prototype.supportsConversations=function(){return!0},t.prototype.canUseEditButton=function(){return e.prototype.canUseEditButton.call(this)&&o.isDefined(this.content.contentDetail)&&o.isDefined(this.content.contentDetail[this.content.contentHandler.toString()])&&o.isDefined(this.content.contentDetail[this.content.contentHandler.toString()].placement)},t}(f),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"scorm-settings"},t.prototype.getEditStateParams=function(){return{contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({contentId:content.id})"},t.prototype.linkAction=function(){return p.ScormLaunch},t.prototype.supportsConversations=function(){return!0},t}(f),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.getEditState=function(){return"journal.view.with-grading"},t.prototype.getEditStateParams=function(){return{courseId:this.content.courseId,contentId:this.content.id}},t.prototype.getEditSref=function(){return this.getEditState()+"({courseId: content.courseId,contentId: content.id})"},t}(f),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.linkAction=function(){return p.LtiLaunch},t.prototype.isLtiLink=function(){return!0},t}(f),A=function(){function e(){}return e.normalize=function(e){return null!=e&&0===e.indexOf(a.a.LtiPlacement.toString())?a.a.LtiPlacement.toString():e},e.matchesHandlers=function(e,t){var n=this.normalize(e);return i.findIndex(t,function(e){return n===e.toString()})>=0},e.create=function(e){switch(this.normalize(e.contentHandler.toString())){case a.a.ClassicAssignment.toString():return new m(e);case a.a.File.toString():return new y(e);case a.a.Folder.toString():if(e.contentDetail){var t=e.contentDetail[a.a.Folder.toString()];if(t&&t.isBbPage)return new w(e)}return new S(e);case a.a.ExternalLink.toString():return new $(e);case a.a.LtiLink.toString():return new k(e);case a.a.LtiPlacement.toString():return new T(e);case a.a.Page.toString():return new w(e);case a.a.PartnerCloud.toString():return new P(e);case a.a.TestLink.toString():return new g(e);case a.a.RusticiScorm.toString():return new I(e);case a.a.UltraAssignment.toString():return new h(e);case a.a.Discussion.toString():return new v(e);case a.a.CourseLink.toString():return new b(e).getTargetCourseContentDisplay();case a.a.LearningModule.toString():return new C(e);case a.a.Journal.toString():return new E(e);default:return new f(e)}},e}()},"5Dl8":function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=n("LvDl");function i(e){return e&&e/16+"rem"||"0"}var o=function(){function e(e){this.parent=e,this.curSelector=null,this.pool=null==e?{}:null}return e.prototype.selector=function(t){var n=new e(this);return n.curSelector=t,n},e.prototype.rule=function(e,t){return this.subRule(null,e,t),this},e.prototype.build=function(){return r.map(this.pool,function(e,t){var n=[];return e.forEach(function(e){return n.push(e)}),n.join(",")+"{"+t+"}"}).join("\n")},e.prototype.subRule=function(e,t,n){var i=r.compact([this.curSelector,e]).join(" ");if(null!=this.parent)this.parent.subRule(i,t,n);else{var o=t+":"+n;this.pool[o]=this.pool[o]||new Set,this.pool[o].add(i)}},e}()},"5Jg7":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.content.ltiNeedsApprovalTitle"\n          analytics-id-tag-prefix="course.content.ltiNeedsApproval">\n  <div name="modal-contents">\n    <p ng-if="hasEmail" bb-translate>course.content.ltiNeedsApprovalDescription</p>\n    <p ng-if="hasEmail"><a href="mailto:{{ ::email }}" analytics-id="components.services.lti.needsApproval.email.link">{{ ::email }}</a></p>\n    <p ng-if="!hasEmail" bb-translate>course.content.ltiNeedsApprovalDescriptionNoEmail</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="global.ok"\n          bb-translate>global.ok</button>\n</bb-modal>'},"5KgE":function(e,t,n){"use strict";var r=n("mrSG"),i=n("IbG+"),o=n("g66W"),s=n("Fvsw"),a=n("Qbdf"),u=n("5MwF"),c=n("wDWF"),l=u.a.features.devtools_disableFtue?-1:2,d=function(){function e(e,t,n,r){this.$q=e,this.context=t,this.offCanvas=n,this.contextCourse=r}return e.prototype.shouldShow=function(e,t,n){var r=this;return u.a.disableAllFtueGuidance?this.$q.when(!1):n?this.$q.when(this.isShownInCurrentSession(e)):this.$q.all([this.offCanvas.getElement(t),this.offCanvas.getTopElement(),this.getSessionNumber(e)]).then(function(t){var n=t[0],i=t[1],o=t[2];return n&&i&&n!==i?r.$q.when(!1):r.shouldShowImpl(e,o)})},e.prototype.shouldShowImpl=function(e,t){if(t>l)return this.$q.when(!1);if(this.isLastSessionCurrent(e))return this.$q.when(this.isShownInCurrentSession(e));var n=++t<=l;return sessionStorage.setItem(this.getSessionStorageKey(e),n?"show":"hide"),this.setSessionNumber(e,t).then(function(){return n}),this.$q.when(n)},e.prototype.hide=function(e){sessionStorage.setItem(this.getSessionStorageKey(e),"hide")},e.prototype.getSessionNumber=function(e){var t="ftue."+e+".visited";if(this.isPredictComponent(e)){return this.context.getPredictPreference(t,"0").then(function(e){var t=parseInt(e.value,10);return isNaN(t)?l:t})}return this.context.getPreference(t,"0").then(function(e){var t=parseInt(e.value,10);return isNaN(t)?0:t})},e.prototype.isLastSessionCurrent=function(e){var t=sessionStorage.getItem(this.getSessionStorageKey(e));return"show"===t||"hide"===t},e.prototype.isShownInCurrentSession=function(e){return"hide"!==sessionStorage.getItem(this.getSessionStorageKey(e))},e.prototype.setSessionNumber=function(e,t){var n="ftue."+e+".visited";return this.isPredictComponent(e)?this.context.setPredictPreference(n,t.toString()):this.context.setPreference(n,t.toString())},e.prototype.getSessionStorageKey=function(e){return"ftue."+e+".show."+c.a(this.context.sessionId)},e.prototype.isPredictComponent=function(e){return!!e&&0===e.toLowerCase().indexOf("predict.")},e}(),p=function(e){function t(t,n,r,i){return e.call(this,t,n,r,i)||this}return r.__extends(t,e),t.prototype.shouldShowImpl=function(e,t){var n=this;return this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,"."),this.getSessionNumber(e+this.courseId).then(function(r){if(t>l&&r>1)return n.$q.when(!1);if(n.isLastSessionCurrent(e+n.courseId))return n.$q.when(n.isShownInCurrentSession(e)||n.isShownInCurrentSession(e+n.courseId));var i,o;r++,i=++t<=l,sessionStorage.setItem(n.getSessionStorageKey(e),i?"show":"hide"),o=r<=1,sessionStorage.setItem(n.getSessionStorageKey(e+n.courseId),o?"show":"hide");var s=[];return t<=l+1&&s.push(n.setSessionNumber(e,t)),r<=2&&s.push(n.setSessionNumber(e+n.courseId,r)),n.$q.all(s).then(function(){return i||o}),n.$q.when(i||o)})},t.prototype.hide=function(e){sessionStorage.setItem(this.getSessionStorageKey(e),"hide"),this.courseId||(this.courseId=this.contextCourse.courseId&&this.contextCourse.courseId.replace(/_/g,".")),sessionStorage.setItem(this.getSessionStorageKey(e+this.courseId),"hide")},t}(d),f=n("w9Zy"),m=n("lEL+");n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var h,g="ultra.service.firstTimeHelper",v="firstTimeHelper",b=/[_-]/g,y=Symbol("default"),S=function(){function e(e,t,n,r){this.$q=e,this.context=t,this.offCanvas=n,this.timeout=r,this.TIME_TO_SHOW_FIRST_BUTTON=5e3}return e.prototype.shouldShow=function(e,t,n){return(h.get(e)||h.get(y)).shouldShow(e,t,n)},e.prototype.hide=function(e){(h.get(e)||h.get(y)).hide(e)},e.prototype.fadeAddContentButton=function(e,t,n){var r=this;this.shouldShow(t,n).then(function(t){var n=e.$on("add-content-button-ready",function(){var i=t?r.TIME_TO_SHOW_FIRST_BUTTON:0;n(),r.timeout(function(){e.$broadcast("always-show-time-expires")},e,i)})})},e.prototype.isPredictComponent=function(e){return!!e&&0===e.toLowerCase().indexOf("predict.")},e.$inject=["$q",s.b,f.e,m.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(S);i.module(g,[s.a,a.b,f.d]).run(["$q",s.b,a.e,f.e,function(e,t,n,r){var i,s=new p(e,t,r,n),a=new d(e,t,r,n);h=(new Map).set((i="components.features.course.content.assessment.ftue.group-conversation",o.a(i,b)),s).set(y,a)}]).service(v,S)},"5MwF":function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"default",function(){return o});var i=n("LvDl"),o={},s=n("mrSG"),a={"https://bbworld-demo3.blackboard.com":{attendanceMilestone1:!0},"https://bbworld-ux.blackboard.com":{richTextEditor:!0},"https://ultra-integ.int.bbpd.io":function(e,t){var n={externalCourse:!1,reactAssessmentsSettings:!1,devtools_allyMock:!1,devtools_disableFtue:!1};return void 0===n[e]||n[e]}},u=n("Q/M7"),c=null;if(!c){c=s.__assign({},{baseMessagesPageRefactor:!0,batchRestAPI:!0,collab:!0,componentDemos:!1,courseNotice:!1,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,differentiatedFeedback:!0,externalCourse:!1,gradebookSearchFilterM2:!0,gradebookSearchFilterM3:!0,guestAccessToOriginalCourseCatalog:!0,instructorPushNotifications:!0,integrationFramework:!0,httpEase:!0,journal:!1,learnApiCaching:!0,learningModule:!0,notificationAdmin:!0,offcanvasPausalScope:!0,organizationA4L:!1,organizationPredict:!1,originalCourseMessage:!0,overallGradeAlert:!1,perAssessmentSettings:!0,predictSisCards:!1,questionResponseTextAttachmentUpload:!0,questionRegrading:!0,reactAssessmentsSettings:!1,sharedNotesEditing:!0,studentPreview:!0,targetedNotificationMilestone3:!1,unsubmittedZeroM1:!0,useBbmlInDiscussion:!0});var l=a[u.j()];if("all"===l)for(var d in c)c[d]=!0;else if("function"==typeof l)for(var d in c)c[d]=l(d,c[d]);else null!=l&&Object.assign(c,l)}var p=c,f={},m={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(p,f),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",kloudlessServices:[],mockApiEndpoints:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,kloudlessInitializationTimeout:1e4},h=JSON.parse(sessionStorage.getItem(m.storageKeyForFeatureFlags)||"{}");i.isEmpty(h)||(console.warn("Attention! Feature flags are overridden by client setting!",h),console.warn("To clear, please logout and re-login"),Object.assign(m.features,h)),r&&Object.assign(m,r);t.a=m},"5RJJ":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("mrSG"),i=n("IbG+"),o=n("yC9S"),s=n("oVrE"),a=n("pjml"),u="ultra.service.courseMembership",c="courseMembership",l=function(){function e(e,t,n,r){var i=this;this.$q=e,this.$rootScope=t,this.CourseModel=n,this.CourseMembershipModel=r,this.userCourseAvailabilities={},this.msgToolAvailability={},this.fetchToolAvailabilityPromiseCache={},o.b.OnRootScope(this.$rootScope,"membership.update",function(e,t,n,r,o,s,a,u){i.getUserCourseAvailabilities(u).then(function(){i.userCourseAvailabilities[u][a.id]=t.isAvailable})}),o.b.OnRootScope(this.$rootScope,"deleteMembership",function(e,t,n,r){i.getUserCourseAvailabilities(r).then(function(){i.userCourseAvailabilities[r][t.id]=!1})}),o.b.OnRootScope(this.$rootScope,"roster.enroll.new.membership",function(e,t,n,r){i.getUserCourseAvailabilities(n).then(function(){i.userCourseAvailabilities[n][r]=t.isAvailable})})}return e.prototype.getUserCourseAvailabilities=function(e){var t=this;if(this.userCourseAvailabilities[e])return this.$q.when(this.userCourseAvailabilities[e]);var n=this.$q.defer();return this.userCourseAvailabilities[e]={},this.CourseModel.$new(e).memberships.$refresh().$then(function(r){r.forEach(function(n){t.userCourseAvailabilities[e][n.userId]=n.isAvailable}),t.userCourseAvailabilities[e][s.b()]=!0,t.userCourseAvailabilities[e][s.d()]=!1,n.resolve(t.userCourseAvailabilities[e])}),n.promise},e.prototype.getMsgToolAvailability=function(e,t){var n=this;if(e){if(t||null==this.msgToolAvailability[e.id]){if(!e.isUltra()){var r=this.fetchToolAvailabilityPromiseCache[e.id];return r||(r=e.tools.$find("messages").$asPromise().then(function(t){return n.msgToolAvailability[e.id]=t.isVisible,t.isVisible},function(e){console.error("Fetch ToolAvailability error!")}).finally(function(){delete n.fetchToolAvailabilityPromiseCache[e.id]}),this.fetchToolAvailabilityPromiseCache[e.id]=r,r)}this.msgToolAvailability[e.id]=!0}var i=this.$q.defer();return i.resolve(this.msgToolAvailability[e.id]),i.promise}},e.prototype.isUserCourseAvailable=function(e,t){return this.userCourseAvailabilities[e][t]},e.prototype.createGuestMembership=function(e,t){return this.CourseMembershipModel.$build({userId:t.id,course:e,user:t,role:a.y.KnownCourseRoleIdentifier.Guest})},e.$inject=["$q","$rootScope",a.o.serviceName,a.v.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l);i.module(u,[a.R]).service(c,l)},"5o+0":function(e,t,n){e.exports=n("ZJ/X")(187)},"5uPl":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("pjml"),a=n("Q/M7"),u="ultra.service.originalityReport",c="originalityReport",l=function(){function e(){this.columnOriginalityAverageScoreDict={}}return e.prototype.setCourseContent=function(e,t){this.courseContent=e,this.isPrivileged=t},e.prototype.clearCourseContent=function(){this.courseContent=void 0,this.isPrivileged=void 0},e.prototype.updateReport=function(e,t,n){this.columnId=n,this.attempt=e,this.openOriginalityReport=!0,this.shouldFetchOriginality()&&(t&&(this.gradedQuestionAttempts=t.map(function(e){return i.pick(e,["questionAttempt.question.position","questionAttempt.visibleQuestionNumber"])})),this.fetchOriginality())},e.prototype.clearReport=function(){this.gradedQuestionAttempts=void 0,this.attempt=void 0,this.originality=void 0,this.openOriginalityReport=void 0,this.columnId=void 0,this.reports=void 0,this.personalMaxScore=void 0,this.personalMaxScoreReportName=void 0,this.personalAverageScore=void 0,this.classAverageScore=void 0},e.prototype.isSafeAssignEnabled=function(){return this.courseContent&&this.courseContent.isSafeAssignEnabled()},e.prototype.canStudentViewReports=function(){return this.courseContent&&this.courseContent.canStudentViewReports()},e.prototype.isReportSectionOpen=function(){return this.openOriginalityReport&&this.originality&&this.originality.canShowReportPanel()},e.prototype.shouldFetchOriginality=function(){return this.isPrivileged&&this.isSafeAssignEnabled()||!this.isPrivileged&&this.canStudentViewReports()},e.prototype.setOriginalityAverageScore=function(e,t){var n=0,r=0;e.forEach(function(e){e.originalityProcessed&&!i.isUndefined(e.originalityScore)&&(n++,r+=e.originalityScore)}),n&&(this.columnOriginalityAverageScoreDict[t]=r/n)},e.prototype.fetchOriginality=function(){var e=this,t=this.attempt;t.originality.$fetch().$then(function(n){e.attempt===t&&(e.originality=n,e.generateReport())})},e.prototype.hasValidReports=function(){return this.reports&&this.reports.some(function(e){return!e.invalid})},e.prototype.generateReport=function(){var e,t=this,n=this.originality.answerOriginalities;if(this.gradedQuestionAttempts){if(this.isPrivileged&&t.gradedQuestionAttempts.some(function(e,t){return e.questionAttempt.question.position!==t+1})){var o=i.sortBy(this.gradedQuestionAttempts,function(e){return e.questionAttempt.question.position}),s=[];i.map(o,"questionAttempt.visibleQuestionNumber").forEach(function(e,t){return s[e-1]=t}),n.forEach(function(e){return e.order=s[e.order-1]+1}),n.sort(function(e,t){return e.order-t.order})}}this.reports=i.flatMap(n,function(e){return e.attachments.map(function(t){return r.__assign({},t,{isQuestionAnswerContent:!0,visibleQuestionNumber:e.order})})}),this.originality.attemptOriginality&&(e=this.reports).push.apply(e,this.originality.attemptOriginality.attachments),this.hasValidReports()&&this.calculateScore()},e.prototype.calculateScore=function(){var e=this,t=this.reports.filter(function(e){return!e.invalid}),n=0;this.personalMaxScore=t[0].score,this.personalMaxScoreReportName=t[0].name,t.forEach(function(t){t.reportLink=Object(a.c)(t.reportLink),e.personalMaxScore<t.score&&(e.personalMaxScore=t.score,e.personalMaxScoreReportName=t.name),n+=t.score}),this.personalAverageScore=Math.floor(n/t.length),i.isUndefined(this.columnOriginalityAverageScoreDict[this.columnId])||(this.classAverageScore=Math.floor(this.columnOriginalityAverageScoreDict[this.columnId]))},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l);o.module(u,[s.R]).service(c,l)},"6Ksg":function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return d});var r=n("mrSG"),i=n("EVdn"),o=n("IbG+"),s=n("LvDl"),a=n("0JpG"),u="ultra.directives.validate.bbmlmarkup",c={img:["id"]},l=function(){function e(e,t){var n=this;this.$q=e,this.$http=t,this.whitelist=null,this.whitelistInitializer=null,this.require="ngModel",this.restrict="A",this.initialWhitelist=function(){return null===n.whitelistInitializer&&(n.whitelistInitializer=n.$http.get("/learn/api/v1/utilities/bbml/whitelist").then(function(e){n.whitelist={};var t=(e.data[":all"]||[]).concat(c[":all"]||[]);s.forEach(e.data,function(e,r){var i={};s.each(e.concat(t,c[r]||[]),function(e){i[e]=e}),n.whitelist[r]=i})},function(){n.whitelist=null})),n.whitelistInitializer},this.validate=function(e){if(null===n.whitelist)return!0;if(1!==e[0].nodeType)return!0;var t=e[0].tagName.toLowerCase();if(n.whitelist.hasOwnProperty(t)){var r=n.whitelist[t];return s.every(e[0].attributes,function(e){return r.hasOwnProperty(e.name.toLowerCase())})&&s.every(e.children(),function(e){return n.validate(i(e))})}return!1},this.getValidator=function(e,t,r,o){return function(e){var r=n.$q.defer();return n.initialWhitelist().then(function(){s.every(t.children(),function(e){return n.validate(i(e))})?r.resolve():r.reject()}),r.promise}},this.link=function(e,t,r,i){i.$asyncValidators.bbmlMarkup=n.getValidator(e,t,r,i)}}return e.$inject=["$q","$http"],e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(l);o.module(u,[a.moduleName]).directive("bbValidateBbmlMarkup",["$injector",function(e){return e.instantiate(l)}])},"6Wkp":function(e,t,n){e.exports=n("ZJ/X")(2210)},"6hn2":function(e,t,n){e.exports=n("ZJ/X")(1718)},"6u9O":function(e,t,n){e.exports=n("ZJ/X")(200)},"6vR2":function(e,t,n){"use strict";function r(e){var t=new Set;return JSON.parse(JSON.stringify(e,function(e,n){if("object"!=typeof n||!t.has(n))return"object"!=typeof n?n:(t.add(n),n)}))}n.d(t,"a",function(){return r})},"6ynb":function(e,t,n){"use strict";var r=n("mrSG"),i=function(e){function t(n){var r=this,i="string"==typeof n?n:"";n&&n.message&&(i=n.message),(r=e.call(this,i)||this).name="Exception",r.message=i,r.stack=(new Error).stack;var o=Error;return n&&n.stack?r.stack=n.stack:o.captureStackTrace&&o.captureStackTrace(r,t),r}return r.__extends(t,e),t}(Error);t.a=i},"7+Tq":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r=n("IbG+"),i=n("0+Qs"),o=n("XGja"),s=n("+4Px"),a="ultra.services.dropdownInit",u="dropdownInitService";r.module(a,[i.a]).factory(u,[i.b,function(t){var n=function(e,t){t.focus()};return function(r,i){r.find("[data-dropdown]").each(function(r,a){var u=e(a),c=u.attr("data-dropdown"),l=e("#"+c);if(l.length){u.attr("aria-haspopup","true"),l.attr("role")||(l.attr("role","menu"),l.find("li a").each(function(){e(this).attr("role")||e(this).attr("role","menuitem")})),l.off("keydown.fndtn.dropdown"),l.on("keydown.fndtn.dropdown",function(e){if(l.hasClass("open")){var t=!0,r=l.find("li a:focus").closest("li");0===r.length&&(r=l.find(":focus"),t=!1);var i=void 0;if(e.keyCode===s.g&&!l.hasClass("bb-foundation-dropdown-close-esc-override")||e.keyCode===s.u&&!l.hasClass("bb-foundation-dropdown-tab-override"))u.click(),e.keyCode===s.g&&(n(0,u),e.stopPropagation());else if(e.keyCode===s.d||e.keyCode===s.v||e.keyCode===s.u)return t?(e.keyCode===s.d||e.keyCode===s.u&&!e.shiftKey?(i=r.nextAll().not(".scroll-control").find(":tabbable").first().closest("li"))&&0!==i.length||(i=l.find(":tabbable").closest("li").not(".scroll-control").first()):(e.keyCode===s.v||e.keyCode===s.u&&e.shiftKey)&&((i=r.prevAll().not(".scroll-control").find(":tabbable").last().closest("li"))&&0!==i.length||(i=l.find(":tabbable").closest("li").not(".scroll-control").last())),i.length>0&&i.find(":tabbable").focus()):e.keyCode===s.d||e.keyCode===s.u&&!e.shiftKey?o.b(l,r):(e.keyCode===s.v||e.keyCode===s.u&&e.shiftKey)&&o.c(l,r),!1}});var d=!0;l.off("keyup.fndtn.dropdown"),l.on("keyup.fndtn.dropdown",function(t){if((t.keyCode===s.f||t.keyCode===s.t)&&!l.hasClass("bb-foundation-dropdown-enter-override")){if(!d)return d=!0,!1;if(e(t.target).closest("input[type=checkbox]").length)return!0;if(e(t.target).closest("button").length)return!0;if("-1"===e(t.target).attr("tabindex"))return!0;if(l.hasClass("open")){var r=l.find("li a:focus").closest("li");return r.length>0?r.find("a").click():u.click(),n(0,u),!1}}}),u.off("keydown.fndtn.dropdown"),u.on("keydown.fndtn.dropdown",function(e){if((e.keyCode===s.f||e.keyCode===s.t)&&!l.hasClass("open")){u.click(),d=!1;var t=l.find("li a:focus").closest("li");return 0===t.length&&(t=l.find("li").not(".scroll-control").find(":tabbable").first().closest("li")),t.find("a:visible").length?t.find("a:visible").focus():l.find(":tabbable").first().focus(),!1}}),u.off("click.fndtn.dropdown"),u.on("click.fndtn.dropdown",function(e){var n=l.find("li a:focus").closest("li");0===n.length&&(n=l.find("li").not(".scroll-control").find(":tabbable").first().closest("li"));var r=t(function(){"false"===l.attr("aria-hidden")&&(n.find("a:visible").length?n.find("a:visible").focus():l.find("*:focus").length||l.find(":tabbable").first().focus(),t.cancel(r))},i,50,100,!1)})}})}}])}).call(this,n("EVdn"))},"7/CN":function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"g",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"f",function(){return m});var r=n("EVdn"),i=n("lUN/"),o=".bb-offcanvas-panel, #main-content-inner",s=".bb-close",a=".reveal-modal-bg, .wrs_modal_overlay";function u(e){for(var t=r(e),n=0;t.length;){if(t.is(s))n++;else if(t.is(o)){if(n<=0)return t[0];n--}t=t.parent()}return document.body}function c(){var e=r(a);return e&&e.length}function l(e){var t=(e||"0").split(" ");return{top:parseInt(t[0],10),right:parseInt(t[1]||t[0],10),bottom:parseInt(t[2]||t[0],10),left:parseInt(t[3]||t[1]||t[0],10)}}function d(e){var t=e.view,n=e.el;e.viewHeight=null==e.viewHeight?t.get(0).clientHeight:e.viewHeight,e.viewWidth=null==e.viewWidth?t.get(0).clientWidth:e.viewWidth,e.height=null==e.height?n.height():e.height,e.width=null==e.width?n.width():e.width;var r=t.offset(),i=n.offset(),o=t.scrollTop(),s=t.scrollLeft(),a=i.top-r.top-e.padding.top,u=i.left-r.left-e.padding.left,c=i.top+e.height+e.padding.bottom-r.top-e.viewHeight,l=i.left+e.width+e.padding.right-r.left-e.viewWidth;e.height<=e.viewHeight?a<0?t.scrollTop(o+a):c>0&&t.scrollTop(o+c):a>0?t.scrollTop(o+a):c<0&&t.scrollTop(o+c),e.width<=e.viewWidth?u<0?t.scrollLeft(s+u):l>0&&t.scrollLeft(s+l):u>0?t.scrollLeft(s+u):l<0&&t.scrollLeft(s+l)}function p(e){i.a(),e.find(":tabbable").each(function(){var e=r(this);e.addClass("bb-element-inaccessible"),e.data("bb-element-inaccessible",{tabindex:e.attr("tabindex")}),e.attr("tabindex","-1")})}function f(e){e.attr("aria-hidden","true"),p(e)}function m(e){e.removeAttr("aria-hidden"),e.find(".bb-element-inaccessible").each(function(){var e=r(this);e.removeClass("bb-element-inaccessible"),e.data("bb-element-inaccessible")&&(null!=e.data("bb-element-inaccessible").tabindex?e.attr("tabindex",e.data("bb-element-inaccessible").tabindex):e.removeAttr("tabindex"))})}},"7CA4":function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.NothingToGrade=new t("NOTHING_TO_GRADE"),t.NeedsGrading=new t("NEEDS_GRADING"),t.NeedsPosting=new t("NEEDS_POSTING"),t.AllPosted=new t("ALL_POSTED"),t.AllGraded=new t("ALL_GRADED"),t}(n.n(i).a);t.a=o},"7Q+E":function(e,t,n){e.exports=n("ZJ/X")(1416)},"7QJo":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("IbG+"),i=n("0JpG"),o=n("pjml"),s=n("TnpK"),a=n("Qbdf"),u=n("X455"),c=n("OTLg"),l="ultra.course.roster.router";r.module(l,[i.moduleName,s.b,a.b,u.a]).config([s.c,a.c,u.b,function(e,t,r){var s;e.peekState("roster",{url:"/roster",resolve:(s={},s[a.d]=t.resolve,s[u.c]=r.resolve,s.translations=[i.serviceName,function(e){return e.loadBundle("features/course/roster/course-roster")}],s),peekStates:["edit-enrollment","enroll-users","message","invite","accommodation"],panelClass:"full",peekViewName:"account-update-base@",require:function(){return Promise.all([n.e(0),n.e(277)]).then(n.bind(null,"DjKT"))},pageTitle:"course.roster.rosterName"}).peekState("edit-enrollment",{url:"/edit/:membershipId",require:function(){return Promise.all([n.e(84),n.e(368)]).then(n.bind(null,"VZ54"))}}).peekState("enroll-users",{url:"/enroll",require:function(){return n.e(355).then(n.bind(null,"30P8"))},pageTitle:"course.roster.enroll.enrollPeople"}).peekState("message",{url:"/message?courseId?recipientId",require:function(){return Promise.all([n.e(27),n.e(32),n.e(43)]).then(n.bind(null,"BrlV"))}}).peekState("invite",{url:"/invite",require:function(){return n.e(283).then(n.bind(null,"IgRM"))},pageTitle:"course.roster.invite.inviteStudents"}).peekState("accommodation",{url:"/exception/:membershipId",require:function(){return n.e(341).then(n.bind(null,"0vas"))},pageTitle:"course.roster.dueDateException",resolve:{currentMembership:["$q","$stateParams",o.o.serviceName,function(e,t,n){var r={fields:c.b.join(",")};return n.$new(t.courseId).memberships.$find(t.membershipId,r).$asPromise()}]}})}])},"7oqQ":function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("VZTK");var r=n("IbG+"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.course.question-analysis.routes",u=function(){return{translations:[o.serviceName,function(e){return e.loadBundle("features/course/question-analysis/question-analysis")}]}};r.module(a,[s.b]).config([s.c,function(e){e.peekState("question-analysis",{url:"?qaContentId",abstract:!0,resolve:u(),courseEntitlement:[i.v.ViewGrades]}).peekState("question-analysis.report",{panelClass:"full",url:"/report",require:function(){return Promise.all([n.e(7),n.e(86),n.e(292)]).then(n.bind(null,"wD7k"))},pageTitle:"course.question-analysis.report.pageTitle",peekViewName:"question-analysis-report",peekStates:["gradebook-item","question-analysis-report"]}),e.peekState("question-analysis-report",{url:"?difficultyFilter&discriminationFilter",abstract:!0,resolve:u(),courseEntitlement:[i.v.ViewGrades]}).peekState("question-analysis-report.question-details",{panelClass:"full",url:"/questionDetails/:questionId",require:function(){return Promise.all([n.e(7),n.e(86),n.e(290)]).then(n.bind(null,"jvDI"))},pageTitle:"course.question-analysis.question-details.pageTitle",peekViewName:"question-analysis-question-details",peekStates:["gradebook-item"]})}])},"7sec":function(e,t,n){},"817J":function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=n.n(i),s=n("Y3OE"),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.handle=t,r.contentHandler=n,r}return r.__extends(t,e),t.parseByContentHandler=function(e){switch(e){case t.Assignment.contentHandler:return t.Assignment;case t.Test.contentHandler:return t.Test;case t.UltraAssignment.contentHandler:return t.UltraAssignment;case t.Survey.contentHandler:return t.Survey}},t.Test=new t("Test",s.a.TestLink.toString()),t.Quiz=new t("Quiz"),t.Survey=new t("Survey",s.a.SurveyLink.toString()),t.Assignment=new t("Assignment",s.a.ClassicAssignment.toString()),t.UltraAssignment=new t("UltraAssignment",s.a.UltraAssignment.toString()),t.Pool=new t("Pool"),t}(o.a);t.a=a},"8HGT":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("IbG+"),i=n("Sa5G"),o=n("w9Zy"),s=n("Fvsw"),a=n("vdfi"),u=n("JXhc"),c=n("hlSw"),l=n("0JpG"),d=n("pjml"),p=n("TnpK"),f=n("Qbdf"),m="ultra.course.grades.router";r.module(m,[l.moduleName,p.b,a.c,u.c,f.b]).config([p.c,f.c,function(e,t){var r,m,h,g,v,b,y,S;e.peekState("gradebook-item",{abstract:!0,require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(274)]).then(n.bind(null,"AlUX"))},resolve:(r={translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/gradebook-item/gradebook-item")}]},r[f.d]=t.resolve,r.currentColumn=c.a.currentColumn,r.currentContent=c.a.currentContent,r)}).peekState("gradebook-item.assignment-create",{panelClass:"full",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])}]},onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/assignment?id&parentId&positionBefore&positionAfter&gradeitemView",views:{"gradebook-item-details@":{require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(142)]).then(n.bind(null,"eePf"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}]},"gradebook-item-students@":{require:function(){return Promise.all([n.e(7),n.e(0),n.e(8),n.e(9),n.e(25),n.e(44)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assignment-grading","assessment-settings","conversations","message","course-group","editAssignmentFileAttachment",a.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],peekViewName:"gradebook-item-panel@",pageTitle:"course.content.assignmentCreate"}).peekState("gradebook-item.assignment",{panelClass:"full",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/grades/gradebook-item/submissions")])}]},onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/assignment/:contentId?courseId&gradeitemView",views:{"gradebook-item-details@":{require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(142)]).then(n.bind(null,"eePf"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}]},"gradebook-item-students@":{require:function(){return Promise.all([n.e(7),n.e(0),n.e(8),n.e(9),n.e(25),n.e(44)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assignment-grading","assessment-settings","conversations","message","course-group","editAssignmentFileAttachment",a.a,"rubric","rubric-list","rubric-evaluation","view-exceptions"],params:{},peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assignment.edit"}).peekState("editAssignmentFileAttachment",{require:function(){return n.e(143).then(n.bind(null,"TFHU"))},resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/content/media-widget/media-widget")}]},url:"/assignment/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&alternativeText&mediaType&bbmlEditorId"}).peekState("multiple-attempt-grading",{panelClass:"peek",resolve:(m={translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},m[f.d]=t.resolve,m.currentContent=c.a.nullContent,m.currentColumn=c.a.currentColumn,m),url:"/multiple-attempt-grading?columnId&gradeId&userId",params:{hasException:!1},require:[function(){return n.e(404).then(n.bind(null,"bhG9"))},function(){return Promise.all([n.e(0),n.e(2),n.e(9),n.e(37),n.e(336)]).then(n.bind(null,"0dEv"))}],pageTitle:"course.grades.multiple-attempt-grading.title",peekStates:["submission-grading"]}).peekState("reconcile-grade",{panelClass:"full",resolve:(h={translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},h[f.d]=t.resolve,h.currentContent=c.a.nullContent,h.currentColumn=c.a.currentColumn,h),url:"/reconcile-grade?columnId&gradeId&userId",require:[function(){return n.e(147).then(n.bind(null,"NNJe"))},function(){return Promise.all([n.e(0),n.e(2),n.e(9),n.e(37),n.e(147),n.e(383)]).then(n.bind(null,"e5ML"))}],pageTitle:"course.grades.reconcile-grade.title",peekStates:["submission-grading"],peekViewName:"reconcile-grade-peek"}).peekState("per-assessment-settings",{panelClass:"peek",courseEntitlement:i.v.ModifyGradebook,resolve:(g={translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}],currentContent:c.a.currentContent,currentColumn:c.a.currentColumn},g[f.d]=t.resolve,g),url:"/per-assessment-settings?userId&columnId",require:[function(){return Promise.all([n.e(67),n.e(406)]).then(n.bind(null,"1p7s"))},function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(67),n.e(128)]).then(n.bind(null,"Wn37"))}],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("per-assessment-group-settings",{panelClass:"peek",courseEntitlement:i.v.ModifyGradebook,resolve:(v={translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}],currentContent:c.a.currentContent,currentColumn:c.a.currentColumn},v[f.d]=t.resolve,v),url:"/per-assessment-group-settings?groupId&columnId",require:[function(){return Promise.all([n.e(67),n.e(405)]).then(n.bind(null,"bMue"))},function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(67),n.e(128)]).then(n.bind(null,"Wn37"))}],pageTitle:"course.grades.per-assessment-settings.title"}).peekState("originality-report",{panelClass:"peek",url:"/originality-report",require:function(){return n.e(378).then(n.bind(null,"K7I1"))},peekViewName:"originality-report-peek"}).peekState("submission-grading",{panelClass:"full",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])}],currentColumn:c.a.currentColumn,currentContent:c.a.currentContent},url:"/submission-grading?columnId&gradeId&userId&attemptId&contentId",onExit:["currentColumn",o.e,p.d,function(e,t,n){var r=n.current.name.match(".peek.reconcile-grade");(e.isMultipleAttempts()&&!r||n.prevParams.hasException)&&(n.isPeekPanelOpen()&&t.shrinkTopPanel(),n.goPeekState("multiple-attempt-grading",{columnId:n.prevParams.columnId,gradeId:n.prevParams.gradeId,userId:n.prevParams.userId,hasException:n.prevParams.hasException}))}],onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],reloadOnSearch:!1,require:[function(){return Promise.all([n.e(7),n.e(8),n.e(382)]).then(n.bind(null,"6S3j"))},function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(68)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submission-grading.title",params:{commentPanelInitiallyOpen:!1,hasException:!1},peekViewName:"submission-grading-peek",peekStates:["per-assessment-settings","assessment-submission-feedback","rubric-evaluation","rubric-view","originality-report","content-market"]}).peekState("group-submission-grading",{panelClass:"full",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/submission-grading"),t.loadBundle("features/course/grades/submissions-grading")])}],currentColumn:c.a.currentColumn,currentContent:c.a.currentContent},url:"/group-submission-grading?columnId&gradeId&groupId&contentId&attemptId",reloadOnSearch:!1,require:[function(){return Promise.all([n.e(7),n.e(8),n.e(409)]).then(n.bind(null,"rNv7"))},function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(68)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submission-grading.title",peekViewName:"submission-grading-peek",peekStates:["per-assessment-group-settings","assessment-submission-feedback","rubric-evaluation","originality-report","content-market"]}).peekState("assignment-grading",{panelClass:"full",resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/submissions-grading")}],currentColumn:["currentColumn",d.o.serviceName,p.d,function(e,t,n){if(null!=e)return e.$asPromise();var r=n.nextParams.columnId,i=n.nextParams.courseId;return t.$find(i).gradebook.columns.$find(r,{expand:"associatedRubrics,externalGrade"}).$asPromise()}]},url:"/grading?columnId&gradeId&groupId",reloadOnSearch:!1,require:[function(){return Promise.all([n.e(7),n.e(8),n.e(354)]).then(n.bind(null,"XGKH"))},function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(68)]).then(n.bind(null,"fVgT"))}],pageTitle:"course.grades.submissions-grading.title",peekViewName:"assignment-grading-peek",peekStates:["rubric-evaluation"]}).peekState("gradebook-item.offline",{panelClass:"full",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/course-grades"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},url:"/offline-grades/:columnId?courseId&gradeitemView",views:{"gradebook-item-students@":{require:function(){return Promise.all([n.e(1),n.e(9),n.e(74)]).then(n.bind(null,"qijm"))}}},pageTitle:"course.grades.instructorHeaderLabel"}).peekState("gradebook-item.calculation",{panelClass:"full",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/gradebook-item/calculation"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},url:"/calculation/:columnId?courseId&gradeitemView&isOverallGrade&positionBefore&positionAfter",params:{columnId:d.F.CREATE_COLUMN_ID},views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(127),n.e(343)]).then(n.bind(null,"aUnP"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(1),n.e(9),n.e(74)]).then(n.bind(null,"qijm"))}}},courseEntitlement:i.v.ViewGradebookMetaData,pageTitle:"course.grades.gradebook-item.title.calculation"}).peekState("gradebook-item.assessment",{panelClass:"full",courseEntitlement:[i.j.ViewAssessment,i.v.ViewAttempts],resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/gradebook-item/submissions"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("features/course/goal-alignment/goal")])}]},onEnter:[o.e,p.d,"currentColumn",s.b,function(e,t,n,r){r.column=n,t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",s.b,function(e,t){e.$broadcast("deadline-refresh"),t.column=null}],url:"/assessment/:assessmentType/{contentId:_[0-9]+_1|create}?courseId&gradeitemView&parentId&positionBefore&positionAfter&gradebookCategoryId",params:{contentId:d.r.CREATE_CONTENT_ID,isCreateState:!1},views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(7),n.e(24),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(115)]).then(n.bind(null,"EPkw"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(7),n.e(0),n.e(8),n.e(9),n.e(25),n.e(44)]).then(n.bind(null,"hmMQ"))}}},peekStates:["assessment-create-attempt","assessment-settings","question-analysis","reconcile-grade","multiple-attempt-grading","submission-grading","group-submission-grading","course-group","conditional-release",a.a,u.a,"conversations","message","edit-file-settings","rubric","rubric-list","rubric-evaluation","view-exceptions","content-market","lti","proctoring-lti-tool","per-assessment-settings","per-assessment-group-settings","grades-bulk-download"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.gradebook-item.title.assessment"}).peekState("grade-item",{abstract:!0,url:"/item"}).peekState("grade-item.create",{url:"/create?positionBefore&positionAfter",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/grades/course-grades")])}]},require:function(){return n.e(130).then(n.bind(null,"kneA"))},pageTitle:"course.grades.gradeItem.addItem"}).peekState("grade-item.edit",{url:"/edit/:id",resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},require:function(){return n.e(130).then(n.bind(null,"kneA"))},pageTitle:"course.grades.gradeItem.editItem"}).peekState("gradebook-item.overall-grade",{panelClass:"full",resolve:{translations:["$q",l.serviceName,function(e,t){return e.all([t.loadBundle("features/course/grades/overall-grade"),t.loadBundle("features/course/grades/gradebook-item/non-attempt-grades")])}]},onEnter:[o.e,p.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],url:"/overallGrade?columnId&gradeitemView",views:{"gradebook-item-details@":{require:function(){return Promise.all([n.e(127),n.e(279)]).then(n.bind(null,"FOdA"))}},"gradebook-item-students@":{require:function(){return Promise.all([n.e(1),n.e(9),n.e(74)]).then(n.bind(null,"qijm"))}}},peekStates:["overall-grade-settings"],peekViewName:"gradebook-item-panel@",pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("overall-grade-settings",{url:"/overallGradeSettings",resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/overall-grade")}]},panelClass:"peek",require:function(){return n.e(367).then(n.bind(null,"CW69"))},pageTitle:"course.grades.overallGrade.settings.pageTitle"}).peekState("overall-grade-student",{url:"/overallGradeStudent?courseId&courseName",resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/overall-grade")}]},panelClass:"peek",require:function(){return n.e(323).then(n.bind(null,"Fn0y"))},pageTitle:"course.grades.overallGrade.pageTitle"}).peekState("grade-download-setting",{resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/grades-download-settings/grades-download-settings")}]},url:"/grade-download-setting",require:function(){return n.e(353).then(n.bind(null,"+xg7"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-download-setting-peek",courseEntitlement:i.v.ExportGradebookData,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-upload-setting",{resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/grades-upload-settings/grades-upload-settings")}],contentCollectionAvailability:[d.xb.serviceName,function(e){return e.$new("bbcms").$resolve().$asPromise()}]},url:"/grade-upload-setting",require:function(){return n.e(289).then(n.bind(null,"nrqE"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-upload-setting-peek",courseEntitlement:i.v.ModifyGradebook,peekStates:["content-collection-picker"],allowChildPeekStates:!0}).peekState("grade-setting",{resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]},url:"/grade-settings",require:function(){return Promise.all([n.e(0),n.e(265)]).then(n.bind(null,"NsLW"))},pageTitle:"course.grades.settings.title",peekViewName:"grade-setting-peek",peekStates:["rubric"],allowChildPeekStates:!0}).peekState("grade-and-feedback",{resolve:(b={translations:[l.serviceName,function(e){return e.loadBundle("features/course/grades/grade-and-feedback")}]},b[f.d]=t.resolve,b.currentColumn=[f.d,p.d,function(e,t){var n=t.nextParams.columnId;return e.gradebook.columns.$find(n).$asPromise()}],b),url:"/grade-and-feedback?columnId?userId?courseId",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(9),n.e(299)]).then(n.bind(null,"SZKj"))},pageTitle:"course.grades.grade-and-feedback.title"}).peekState("course-group",{panelClass:"full",url:"/group?groupCourseId&groupContentId&groupColumnId",resolve:{translations:[l.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}]},courseEntitlement:i.w.ViewGroupsAsAdmin,require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(258)]).then(n.bind(null,"OZRj"))},pageTitle:"course.content.courseGroup.title",peekStates:["message"],peekViewName:"group-message-peek"}).peekState("rubric-list",{url:"/rubricList?gradeColumnId",resolve:(y={translations:[l.serviceName,function(e){return e.loadBundle("features/course/content/assignment/rubric-list")}]},y[f.d]=t.resolve,y.currentContent=c.a.currentContent,y),panelClass:"peek",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(294)]).then(n.bind(null,"WtEJ"))},pageTitle:"course.content.assignmentSettings.rubricList.title",peekViewName:"rubric-list-peek",peekStates:["rubric"],allowChildPeekStates:!0}).peekState("view-exceptions",{panelClass:"peek",pageTitle:"course.content.exceptions.peekPanel.title",url:"/view-exceptions",require:function(){return n.e(365).then(n.bind(null,"MBGk"))},resolve:(S={},S[f.d]=t.resolve,S.currentContent=c.a.currentContent,S),allowChildPeekStates:!0,peekStates:["roster"],peekViewName:"exceptions-peek"}).peekState("grades-bulk-download",{url:"/grades-bulk-download?columnId",require:[function(){return n.e(414).then(n.bind(null,"sI1N"))}],pageTitle:"course.grades.grades-bulk-download.pageTitle",panelClass:"full"})}])},"8W6D":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.NONE=new t("none"),t.CREATE=new t("create"),t.EDIT=new t("edit"),t.COPY=new t("copy"),t}(n.n(i).a)},"8jzW":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return r});var r,i=n("mrSG"),o=n("IbG+"),s=n("pjml"),a=n("A0nf"),u=n("TnpK"),c="ultra.components.services.scoreProviderHelper",l="scoreProviderHelper";!function(e){e[e.GenerateStateParams=0]="GenerateStateParams",e[e.GenerateStateRef=1]="GenerateStateRef",e[e.GoToState=2]="GoToState"}(r||(r={}));var d=function(){function e(e){this.ultraState=e}return e.prototype.getScoreProviderHandle=function(){return null},e.prototype.openStateRef=function(e,t){return null},e.prototype.studentViewStateRef=function(e,t){return null},e.prototype.editStateRef=function(e,t){return null},e.prototype.gradingStateRef=function(e,t){return null},e.prototype.gradingWithRubricStateRef=function(e,t){return null},e.prototype.gradingWithFeedbackStateRef=function(e,t){return null},e.prototype.getSubmissionsListStateRef=function(e,t){return null},e.prototype.supportsOverall=function(){return!1},e.prototype.supportsEdit=function(){return!0},e.prototype.supportsViewItem=function(){return!1},e.prototype.supportsExternalEdit=function(){return!1},e.prototype.takeActionOnStateRef=function(e,t,n){switch(n){case r.GoToState:this.ultraState.goPeekState(e,t);break;case r.GenerateStateParams:return o.toJson({state:e,args:t});case r.GenerateStateRef:default:return this.generateStateRef(e,t)}},e.prototype.generateStateRef=function(e,t){return t?e+"("+o.toJson(t)+")":e},e.$inject=[u.d],e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Scorm},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("scorm-overview.student",e,t)},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("scorm.open",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("scorm-settings",e,t)},t.prototype.gradingStateRef=function(e,t){return this.takeActionOnStateRef("submission-grading",e,t)},t.prototype.gradingWithFeedbackStateRef=function(e,t){return this.takeActionOnStateRef("submission-grading.peek.assessment-submission-feedback",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.scorm-submissions",e,t)},t.prototype.supportsOverall=function(){return!0},t}(d),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Test},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("assessment.open",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef(e.state||"assessment.overview",e,t)},t.prototype.editStateRef=function(e,t){return e.assessmentType="test",e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assessment",e,t)},t.prototype.gradingStateRef=function(e,t){return this.takeActionOnStateRef(e&&e.groupId?"group-submission-grading":"submission-grading",e,t)},t.prototype.gradingWithFeedbackStateRef=function(e,t){var n=e&&e.groupId?"group-submission-grading":"submission-grading";return this.takeActionOnStateRef(n+".peek.assessment-submission-feedback",e,t)},t.prototype.gradingWithRubricStateRef=function(e,t){return this.takeActionOnStateRef("submission-grading.peek.rubric-evaluation",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.assessmentType="test",e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assessment",e,t)},t.prototype.supportsOverall=function(){return!0},t}(d),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.UltraAssignment},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("assignment.router",{courseId:e.courseId,assignmentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("assignment.view",{courseId:e.courseId,assignmentId:e.contentId},t)},t.prototype.editStateRef=function(e,t){return e.gradeitemView="details",this.takeActionOnStateRef("gradebook-item.assignment",e,t)},t.prototype.gradingStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("assignment-grading",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.gradeitemView="students",this.takeActionOnStateRef("gradebook-item.assignment",e,t)},t.prototype.supportsOverall=function(){return!0},t}(d),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Attendance},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("attendance-student-view",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.gradingStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("attendance",e,t)},t.prototype.supportsEdit=function(){return!1},t.prototype.supportsOverall=function(){return!0},t}(d),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.Discussion},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("discussion.view.with-grading",e,t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("discussion.view.with-grading",e,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("discussion.view.with-grading",e,t)},t.prototype.getSubmissionsListStateRef=function(e,t){return e.view="participants",this.takeActionOnStateRef("discussion.view.with-grading",e,t)},t.prototype.supportsOverall=function(){return!0},t}(d),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.LTILink},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.supportsOverall=function(){return!0},t.prototype.supportsExternalEdit=function(){return!0},t}(d),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.prototype.getScoreProviderHandle=function(){return a.a.PartnerCloud},t.prototype.openStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.studentViewStateRef=function(e,t){var n;return n=e.linkRef?{courseId:e.courseId,linkRef:e.linkRef,linkType:a.a.PartnerCloud.toString()}:{courseId:e.courseId,contentId:e.contentId},this.takeActionOnStateRef("lti.launch",n,t)},t.prototype.editStateRef=function(e,t){return this.takeActionOnStateRef("content-manage.edit.partnercloud",{courseId:e.courseId,id:e.contentId},t)},t.prototype.getSubmissionsListStateRef=function(e,t){return this.takeActionOnStateRef("lti.launch",{courseId:e.courseId,contentId:e.contentId},t)},t.prototype.supportsOverall=function(){return!0},t.prototype.supportsViewItem=function(){return!0},t.prototype.supportsEdit=function(){return!1},t.prototype.supportsExternalEdit=function(){return!0},t}(d),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t}(d),S=function(){function e(t,n){var r=this;this.$rootScope=t,this.$injector=n,this.delegates=Object.create(null),this.contentHandlerToDelegateMap=Object.create(null),e.SCORE_PROVIDER_DELEGATES.forEach(function(e){var t=r.$injector.instantiate(e),n=t.getScoreProviderHandle();if(r.delegates[n.toString()])throw new Error("There is already a registered delegate for "+n.toString());r.delegates[n.toString()]=t,n.contentHandlers.map(function(e){if(r.contentHandlerToDelegateMap[e])throw new Error("There is already a registered delegate for "+e.toString());r.contentHandlerToDelegateMap[e]=t})})}return e.prototype.getDelegate=function(e){return e&&this.delegates[e.toString()]||C.NULL_DELEGATE},e.prototype.getDelegateByContentHandler=function(e){return e&&this.contentHandlerToDelegateMap[e.toString()]||C.NULL_DELEGATE},e.prototype.isSupported=function(e){return e&&null!=this.getDelegate(e).getScoreProviderHandle()},e.prototype.getSupportedHandles=function(){return Object.keys(this.delegates).map(function(e){return a.a.parse(e)})},e.prototype.openStateRef=function(e,t,n){return this.getDelegateByContentHandler(e).openStateRef(t,n)},e.prototype.getSubmissionListStateRef=function(e,t,n){return this.getDelegate(e).getSubmissionsListStateRef(t,n)},e.prototype.getSubmissionListStateRefByContentHandler=function(e,t,n){return this.getDelegateByContentHandler(e).getSubmissionsListStateRef(t,n)},e.prototype.studentViewStateRef=function(e,t,n){return this.getDelegate(e).studentViewStateRef(t,n)},e.prototype.editStateRef=function(e,t,n){return this.getDelegate(e).editStateRef(t,n)},e.prototype.gradingStateRef=function(e,t,n){return this.getDelegate(e).gradingStateRef(t,n)},e.prototype.gradingWithRubricStateRef=function(e,t,n){return this.getDelegate(e).gradingWithRubricStateRef(t,n)},e.prototype.gradingWithFeedbackStateRef=function(e,t,n){return this.getDelegate(e).gradingWithFeedbackStateRef(t,n)},e.prototype.getNeedsGradingIconByContentHandler=function(e){var t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?t.needsGradingIcon:null},e.prototype.getNeedsReconcilingIconByContentHandler=function(e){var t=this.getDelegateByContentHandler(e).getScoreProviderHandle();return t?t.needsReconcilingIcon:null},e.prototype.supportsOverall=function(e){return this.getDelegate(e).supportsOverall()},e.prototype.supportsEdit=function(e){return this.getDelegate(e).supportsEdit()},e.prototype.supportsViewItem=function(e){return this.getDelegate(e).supportsViewItem()},e.prototype.supportsExternalEdit=function(e){if(s.r.ContentHandler.PartnerCloud.isEqualTo(e)||s.r.ContentHandler.LtiLink.isEqualTo(e))return this.getDelegate(e).supportsExternalEdit()},e.$inject=["$rootScope","$injector"],e.SCORE_PROVIDER_DELEGATES=[m,h,g,v,b,p,f],e.NULL_DELEGATE=new y(null),e}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t}(S);o.module(c,[u.b]).service(l,S)},"8pBP":function(e,t){e.exports='<div class="reveal-modal fade open" ng-class="{ in: $parent.animate }" role="{{::modal.ariaType}}" tabindex="-1" data-reveal\n     ng-multi-transclude-controller ng-attr-aria-label="{{::modal.titleString}}" ng-keydown="modal.handleKeyDown($event)">\n  <div class="reveal-modal__header">\n    <h1 class="reveal-modal__title" aria-describedby="modal-contents" bb-focus>\n      {{::modal.titleString}}\n    </h1>\n    <button class="close-reveal-modal standard-button light-background" \n            ng-click="modal.dismiss()" \n            bb-translate-attrs="{ \'aria-label\': \'global.close\' }"\n            analytics-id="{{modal.analyticsIdTagPrefix}}.modal.close.button">\n      <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n    </button>\n  </div>\n  <div id="modal-contents" class="reveal-modal__contents" ng-multi-transclude="modal-contents"></div>\n  <footer ng-multi-transclude="modal-footer" class="reveal-modal__footer">\n    <div class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n      <div ng-multi-transclude="modal-footer-help-link" class="reveal-modal__footer-help-link-container"></div>\n      <div class="reveal-modal__footer-buttons">\n        <span ng-multi-transclude="modal-footer-button-secondary" class="reveal-modal__footer-button-container"></span>\n        <span ng-multi-transclude="modal-footer-button-primary" class="reveal-modal__footer-button-container"></span>\n      </div>\n    </div>\n  </footer>\n  <div class="reveal-modal__dismiss" ng-class="{ \'hide\' : !modal.dismissString }">\n    <span class="reveal-modal__divider"></span>\n    <button class="button button--text dismiss-message expand" ng-click="modal.dismiss()" analytics-id="{{modal.analyticsIdTagPrefix}}..modal.dismiss.button">\n      <span>{{::modal.dismissString}}</span>\n    </button>\n  </div>\n</div>\n'},"92Mn":function(e,t){e.exports='<div class="element-image avatar no-select" aria-hidden="true"\n     ng-class="avatarsClasses"\n     bb-load-bundle="components/directives/avatar" bb-cache-compilation="avatar">\n  <div class="avatar-inner" ng-if="isAvatarRender && (!autoUpdate || !autoUpdate())">\n    <div ng-if="::(!first && !second)" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="::(first && first.avatarUrl)" class="first avatar-single image-avatar">\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && first.userInitials)"\n         class="first avatar-single {{::first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name Will still render default--\x3e\n      <img ng-src="{{::first.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="">\n    </div>\n\n    <div ng-if="::(first && !first.avatarUrl && !first.userInitials)"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!first.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="">\n      <bb-svg-icon ng-if="::(first.isAllMembers)" class="all-members" size="large" icon="avatar-multiple"></bb-svg-icon>\n    </div>\n\n    <div ng-if="::(second && second.avatarUrl && participants == 2)" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && second.userInitials)"\n         class="second avatar-single {{::second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name. Will still render default --\x3e\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{::isGray()}}" alt="">\n    </div>\n\n    <div ng-if="::(second && !second.avatarUrl && participants == 2 && !second.userInitials)"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="::(!second.isAllMembers)" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{::isGray()}}" alt="">\n      <bb-svg-icon ng-if="::(second.isAllMembers)" class="all-members" size="large" icon="avatar-multiple"></bb-svg-icon>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      <div class="initials">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n    </div>\n  </div>\n\n  <div class="avatar-inner" ng-if="isAvatarRender && autoUpdate && autoUpdate()">\n\n    <div ng-if="!first && !second" class="first avatar-single">\n      \x3c!-- If no user is set --\x3e\n      <div class="initials">\n        <bb-translate>components.directives.avatar.notAssignedInitials</bb-translate>\n      </div>\n    </div>\n\n    <div ng-if="first && first.avatarUrl" class="first avatar-single image-avatar">\n      <img ng-src="{{first.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="">\n      \x3c!-- If first user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && first.userInitials"\n         class="first avatar-single {{first.avatarBg}}">\n      \x3c!-- If first user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="">\n    </div>\n\n    <div ng-if="first && !first.avatarUrl && !first.userInitials"\n         class="first avatar-single avatar-placeholder">\n      \x3c!-- If first user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!first.isAllMembers" src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="">\n      <bb-svg-icon ng-if="first.isAllMembers" class="all-members" size="large" icon="avatar-multiple"></bb-svg-icon>\n    </div>\n\n    <div ng-if="second && second.avatarUrl && participants == 2" class="second avatar-single image-avatar">\n      <img ng-src="{{second.avatarUrl}}" bb-image-grayscale="{{isGray()}}" alt="">\n      \x3c!-- If second user is set and has avatar image --\x3e\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && second.userInitials"\n         class="second avatar-single {{second.avatarBg}}">\n      \x3c!-- If second user is set, but does not have avatar image, but has non-CJK name --\x3e\n      \x3c!-- Show default image --\x3e\n      <img src="./static/images/avatar-placeholder.svg" bb-image-grayscale="{{isGray()}}" alt="">\n    </div>\n\n    <div ng-if="second && !second.avatarUrl && participants == 2 && !second.userInitials"\n         class="second avatar-single avatar-placeholder">\n      \x3c!-- If second user is set, but does not have avatar image and name contains CJK characters --\x3e\n      \x3c!-- Show default avatar image --\x3e\n      <img ng-if="!second.isAllMembers" src="./static/images/avatar-placeholder.svg"  bb-image-grayscale="{{isGray()}}" alt="">\n      <bb-svg-icon ng-if="second.isAllMembers" class="all-members" size="large" icon="avatar-multiple"></bb-svg-icon>\n    </div>\n\n    <div ng-if="participants > 2" class="second avatar-single">\n      \x3c!-- If more than 2 participants involved, show `+3` type of avatar for right side --\x3e\n      <div class="initials">\n        <bb-translate translate-values=\'{num: participants - 1}\' aria-hidden="true">components.directives.avatar.twoPlusInitials</bb-translate>\n      </div>\n    </div>\n  </div>\n</div>'},"94iD":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r=n("mrSG"),i=n("oSB+"),o=n.n(i),s=n("40MU"),a=function(){function e(e){this.apiData=e}return Object.defineProperty(e.prototype,"testType",{get:function(){if(!this.apiData.timeLimitSec)return c.NotATimedTest;switch((this.apiData.timerCompletion||"").toString()){case s.TimerCompletion.C.toString():return c.UnlimitedExtraTime;case s.TimerCompletion.H.toString():return this.apiData.softLimitSec?c.LimitedExtraTime:c.NoExtraTime;default:return c.NotATimedTest}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adaptedTime",{get:function(){switch(this.testType){case c.NoExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};case c.UnlimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.timeLimitSec,hardlimitSeconds:Number.POSITIVE_INFINITY};case c.LimitedExtraTime:return{elapsedSeconds:this.apiData.elapsedSec,softlimitSeconds:this.apiData.softLimitSec,hardlimitSeconds:this.apiData.timeLimitSec};default:return{elapsedSeconds:NaN,softlimitSeconds:NaN,hardlimitSeconds:NaN}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"testStage",{get:function(){switch(this.testType){case c.NoExtraTime:return this.withinHardlimit?u.Stage0NoExtraTime:u.StageE;case c.UnlimitedExtraTime:return this.withinLimit?u.Stage0UnlimitedExtraTime:u.Stage1UnlimitedExtraTime;case c.LimitedExtraTime:return this.withinLimit?u.Stage0LimitedExtraTime:this.withinHardlimit?u.Stage1LimitedExtraTime:u.StageE}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTimeLimit",{get:function(){return this.testType!==c.NotATimedTest},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasExtraTime",{get:function(){return this.testType===c.LimitedExtraTime||this.testType===c.UnlimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasLimitedExtraTime",{get:function(){return this.testType===c.LimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasUnlimitedExtraTime",{get:function(){return this.testType===c.UnlimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withinLimit",{get:function(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withinHardlimit",{get:function(){return this.adaptedTime.elapsedSeconds<this.adaptedTime.hardlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"willAutoSubmit",{get:function(){return this.testType===c.NoExtraTime||this.testType===c.LimitedExtraTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedTimeLimitSeconds",{get:function(){return this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedExtraTimeSeconds",{get:function(){return this.adaptedTime.hardlimitSeconds-this.adaptedTime.softlimitSeconds},enumerable:!0,configurable:!0}),e.prototype.getSubmissionRuleText=function(e,t){switch(this.testType){case c.NoExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.autoSubmission"});case c.UnlimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.unlimitExtraTime"});case c.LimitedExtraTime:return e.translateSync({locale:t,key:"course.content.assessment.test.settings.timeLimit.extraTimeInfo.plural",params:{allowExtraTime:Math.floor(this.displayedExtraTimeSeconds/60)}});default:return""}},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Stage0NoExtraTime=new t("S0_NO_EXTRA"),t.Stage0UnlimitedExtraTime=new t("S0_UNLIMITED_EXTRA"),t.Stage1UnlimitedExtraTime=new t("S1_UNLIMITED_EXTRA"),t.Stage0LimitedExtraTime=new t("S0_LIMITED_EXTRA"),t.Stage1LimitedExtraTime=new t("S1_LIMITED_EXTRA"),t.StageE=new t("SE"),t}(o.a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.NoExtraTime=new t("NO_EXTRA"),t.UnlimitedExtraTime=new t("UNLIMITED_EXTRA"),t.LimitedExtraTime=new t("LIMITED_EXTRA"),t.NotATimedTest=new t("NOT_TIMED"),t}(o.a)},"9CxF":function(e,t){e.exports='<bb-modal class="notification js-non-file-error" \n          modal-title-key="components.directives.fileUpload.disallowNonFileUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowNonFileUploadError</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},"9zo4":function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return p});var r=n("mrSG"),i=(n("hh8V"),n("IbG+")),o=n("EVdn"),s=n("XGja"),a=n("+4Px"),u=n("lUN/"),c="ultra.services.accessibility",l="accessibility",d=function(){function e(e){var t=this;this.$rootScope=e,this.FOCUSED_ELEMENT="focusedElement",this.FOCUS_SELECTOR_OVERRIDE="focusSelectorOverride",this.isFocusDelayed=!1,this.panelInfoStack=[{panelElement:o(document.body)}],this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=this.currentPanelInfo.panelElement,this.isFocusedElementInFocusTrap=function(){return!!o(document.activeElement).closest(".ms-FocusTrapZone").length},this.focusCorrectElementOnPanel=function(e){void 0===e&&(e=this.activePanel),this.isFocusDelayed=!1;var t=o(".ms-Callout");if(!t||!t.length){var n=o(".ms-Modal");if(!n||!n.length){var r=o(".datepicker-dropdown");if(!(r&&r.length||this.isFocusedElementInFocusTrap())){var i=e.find("[bb-focus]");if(i&&i.length){var a=i.first();if(a.trigger("focus"),this.elementHasFocus(a))return}var u=e.find("h1").filter(":visible");if(u&&u.length){var c=u.first();if(s.a(c),this.elementHasFocus(c))return}var l=e.find(":tabbable:not(.bb-close, .non-first-focus):first");l&&l.length&&(l.trigger("focus"),this.elementHasFocus(l))||s.a(e)}}}},this.elementHasFocus=function(e){return e.is(o(document.activeElement))},this.isElementInActivePanel=function(e){return e.hasClass("pagehelp-directive-link")||!!e.closest(".focus-handling-disabled").size()||t.isElementInPanel(t.activePanel,e)},this.isElementInPanel=function(e,t){return e.is(t)||o.contains(e[0],o(t)[0])},this.applyFocusinHandler=function(){o("body").off("focusin.axService"),o("body").on("focusin.axService",function(e){var n=o(e.target);t.isFocusDelayed||t.isElementInActivePanel(n)||t.focusCorrectElementOnPanel(t.activePanel)})},this.removeFocusinHandler=function(){o("body").off("focusin.axService")},this.backgroundElementsStack=[],u.a(),this.applyFocusinHandler();var n=function(e){t.isElementInActivePanel(o(e.target))||t.removeFocusinHandler()};o("body").on("mousedown",n),e.$on("$destroy",function(){o("body").off("mousedown",n)})}return e.prototype.applyAccessibilityHandlingForPanel=function(e){this._storeFocusedElement(),this._setActivePanel(e),this._applyTabCapture(),this.ariaHideBackgroundElements()},e.prototype.revertAccessibilityHandling=function(){this.ariaShowBackgroundElements(),this._revertTabCapture(this.currentPanelInfo),this._restoreActivePanel(),this._restoreFocusedElement()},e.prototype._setActivePanel=function(e){this.activePanel=null,this.activePanel=e,this.currentPanelInfo={panelElement:e,overlayDisabled:e.hasClass("overlay-disabled"),panelFocusHandlingDisabled:e.hasClass("focus-handling-disabled")},this.panelInfoStack.push(this.currentPanelInfo),o(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()},e.prototype._restoreActivePanel=function(){this.panelInfoStack.length<2&&(this._setActivePanel(o(document.body)),this._setActivePanel(o(document.body))),this.panelInfoStack.pop().panelElement=null,this.currentPanelInfo=this.panelInfoStack[this.panelInfoStack.length-1],this.activePanel=null,this.activePanel=this.currentPanelInfo.panelElement,o(".bb-offcanvas-panel").removeClass("panel-has-focus"),this.activePanel.addClass("panel-has-focus"),this.applyFocusinHandler()},e.prototype.ariaHideBackgroundElements=function(e){void 0===e&&(e=!0);var t=o('.hide-in-background[aria-hidden!="true"]');t.attr("aria-hidden","true"),this.backgroundElementsStack.push(t),e&&this.activePanel.attr("aria-hidden","false")},e.prototype.ariaShowBackgroundElements=function(){if(this.backgroundElementsStack.length<1)throw o(".hide-in-background").attr("aria-hidden","false"),new Error("Tried to set aria-hidden=false for background elements, but there were no background elements in the stack.");this.backgroundElementsStack.pop().attr("aria-hidden","false")},e.prototype.setFocusOverrideOnPanel=function(e,t){if(!t)throw new Error("A panel selector is required to override focus on a panel");for(var n=this.panelInfoStack.length-1;n>=0;n--)if(this.panelInfoStack[n].panelElement.find(t).addBack(t).length){this.panelInfoStack[n].panelElement.data(this.FOCUS_SELECTOR_OVERRIDE,e);break}},e.prototype._storeFocusedElement=function(){var e=o(document.activeElement);!p.isLastNavigationByKeyboard&&p.lastClickedElement&&p.lastClickedElement.length&&(e=p.lastClickedElement),this.activePanel.data(this.FOCUSED_ELEMENT,e),e=null},e.prototype._restoreFocusedElement=function(){if(this.isFocusDelayed=!1,this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)){var e=this.activePanel.find(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).addBack(this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE)).first();e.length&&this.activePanel.data(this.FOCUSED_ELEMENT,e),this.activePanel.data(this.FOCUS_SELECTOR_OVERRIDE,"")}var t=this.activePanel.data(this.FOCUSED_ELEMENT);t&&0!==t.length&&t.focus(),t&&t.length&&o(document.activeElement).is(t)||this.focusCorrectElementOnPanel(this.activePanel),this.activePanel.removeData(this.FOCUSED_ELEMENT),t=null},e.prototype._applyTabCapture=function(){var e=this;this.activePanel.on("keydown",function(t){if(t.keyCode===a.u&&!e.currentPanelInfo.tabCalled){var n=e.activePanel.data("axMutationObserver");n||((n=new MutationObserver(function(){e.currentPanelInfo.tabCalled=!1})).observe(e.activePanel[0],{childList:!0,attributes:!0,subtree:!0}),e.activePanel.data("axMutationObserver",n));var r=o(e.activePanel).find("*").addBack();e._conditionallyUpdateSkipLinkFocus(),o(":tabbable").not(".bb-ax-background-tabindex").add(o('a[tabindex!="-1"]').filter(function(){return 0===o(this).height()&&0===o(this).width()})).filter(function(){return 0===o(this).closest(".focus-handling-disabled").size()}).add(o('div.editor-element[tabindex!="-1"]')).not(r).not(o(".pagehelp-directive-link")).add(o('div.panel-wrap[tabindex!="-1"]')).each(function(){o(this).data("originalTabindex",this.getAttribute("tabindex"))}).attr("tabindex","-1").addClass("bb-ax-background-tabindex"),e.currentPanelInfo.tabCalled=!0}})},e.prototype._revertTabCapture=function(e,t){var n=t||o(document);n.find(".bb-ax-background-tabindex").each(function(){var e=o(this);null==e.data("originalTabindex")?e.removeAttr("tabindex"):e.attr("tabindex",e.data("originalTabindex")),e.removeAttr("originalTabindex")}).removeClass("bb-ax-background-tabindex"),n.data("axMutationObserver")&&n.data("axMutationObserver").disconnect()},e.prototype._revertTabCaptureForActivePanel=function(){this._revertTabCapture(this.currentPanelInfo)},e.prototype._conditionallyUpdateSkipLinkFocus=function(){this.currentPanelInfo.overlayDisabled&&!this.currentPanelInfo.panelFocusHandlingDisabled&&this.panelInfoStack.length>1&&this._revertTabCapture(this.panelInfoStack[this.panelInfoStack.length-2],this.activePanel)},e.isLastNavigationByKeyboard=!1,e.$inject=["$rootScope"],e}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(d);i.module(c,[]).service(l,d)},"A+IJ":function(e,t,n){"use strict";n.d(t,"k",function(){return r}),n.d(t,"l",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"e",function(){return a}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"h",function(){return l}),n.d(t,"d",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"m",function(){return f}),n.d(t,"j",function(){return m}),n.d(t,"i",function(){return h});var r=1,i=2,o="#c575d2",s="#1874a4",a="#333333",u="#666666",c="#e5e5e5",l="#cdcdcd",d="#ffffff",p="#f0f0f0",f="Open Sans",m="600 12px "+f,h="700 12px "+f},A0nf:function(e,t,n){"use strict";var r=n("mrSG"),i=n("LvDl"),o=n("oSB+"),s=n.n(o),a=n("Y3OE"),u=function(e){function t(t,n,r,i,o){void 0===i&&(i="grades"),void 0===o&&(o="grades");var s=e.call(this,t)||this;return s.iconClass=n,s.contentHandlers=r,s.needsGradingIcon=i,s.needsReconcilingIcon=o,s}return r.__extends(t,e),t.prototype.getContentHandlers=function(){return this.contentHandlers.map(function(e){return a.a.parse(e)})},t.parseByContentHandler=function(e){return i.find(t.getValues(),function(t){return t.contentHandlers.some(function(t){return t===e})})},t.UltraAssignment=new t("resource/x-bb-assessment-ultraassignment","assignment",[a.a.UltraAssignment.toString()]),t.ClassicAssignment=new t("resource/x-bb-assignment","assignment",[a.a.ClassicAssignment.toString()]),t.Attendance=new t("resource/x-bb-attendance","attendance",[a.a.Attendance.toString()]),t.Blog=new t("resource/x-bb-bloglink","blog",[a.a.Blog.toString()]),t.Discussion=new t("resource/x-bb-forumlink","discussion",[a.a.Discussion.toString()]),t.Wiki=new t("resource/x-bb-wiki","wiki",[a.a.Wiki.toString()]),t.Survey=new t("resource/x-bb-assessment-survey","survey",[a.a.SurveyLink.toString()]),t.Test=new t("resource/x-bb-assessment","test",[a.a.TestLink.toString()]),t.LTILink=new t("resource/x-bb-blti-link","link",[a.a.LtiLink.toString(),a.a.LtiPlacement.toString()]),t.PartnerCloud=new t("resource/x-bbgs-partner-cloud","link",[a.a.PartnerCloud.toString()]),t.Scorm=new t("resource/x-plugin-scormengine","scormengine",[a.a.RusticiScorm.toString()]),t.Journal=new t("resource/x-bb-journallink","journal",[a.a.Journal.toString()]),t}(s.a);t.a=u},A3SN:function(e,t,n){},A4xO:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("+4Px"),o="ultra.directives.accessibility.focusNext";function s(e,t,n){e.on("keydown.focusNext",function(o){if(o.keyCode===i.u&&!o.shiftKey&&t){var s=r.element(t);s.length>=1&&-1!==parseInt(s.attr("tabindex"),10)&&(s.first().focus(),o.preventDefault(),n&&e.off("keydown.focusNext"))}})}var a=function(){this.restrict="A",this.link=function(e,t,n){var r="true"===n.bbFocusNextOneTimeOnly;s(t,n.bbFocusNext,r)}};r.module(o,[]).directive("bbFocusNext",["$injector",function(e){return e.instantiate(a)}])},ANjH:function(e,t,n){e.exports=n("ZJ/X")(68)},"AzI/":function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-course-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-course-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss.button"\n  >\n    components.services.error-modal.dismiss\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},BOxd:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Graded=new t("GRADED"),t.NeedsGrading=new t("NEEDS_GRADING"),t}(n.n(i).a);t.a=o},BXiQ:function(e,t,n){"use strict";n.d(t,"a",function(){return g});n("H9Wo");var r,i,o=n("IbG+"),s=n("EVdn"),a=n("LvDl"),u=n("+7+6"),c=n("oVrE"),l=n("5Dl8"),d=n("pjml"),p=n("Q/M7"),f=n("wRHn"),m=n("gCXj"),h=n("gKLz"),g="ultra.directives.user-avatar",v=(e=o.module(g,[d.R,m.a]),h.replace(/\s+id="[^\"]+"\s*/," ").replace(/<svg /,'<svg stroke-width="3" stroke="#fff" ').replace(/\s+viewBox="(\d+ \d+ \d+ \d+)"/,function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0].split(" ").map(function(e){return parseInt(e,10)}),i=r[0],o=r[1],s=r[2],a=r[3];return' viewBox="'+[i-s/2,o-a/2,2*s,2*a].join(" ")+'"'})),b={avatar:{permanentUrl:"data:image/svg+xml;base64,"+u.codec.base64.fromBits(u.codec.utf8String.toBits(v))},lastModifiedAt:"",getInitials:a.noop},y=s('<style id="css-bb-user-avatar"></style>').appendTo("head"),S={},C=function(e){e.forEach(function(e){var t=e.id||e.$pk,n=S[t]=S[t]||{};if(!(null!=e.lastModifiedAt&&e.lastModifiedAt===n.lastModifiedAt)&&!e.isPlaceHolder){n.avatarURL=void 0,n.isAvailable=e.isAvailable,n.lastModifiedAt=e.lastModifiedAt;var r=e.avatar&&"default"!==e.avatar.permanentUrl;if(r){var i=e.avatar.permanentUrl;e.avatar.permanentUrl.startsWith("http")&&(i=Object(p.a)(e.avatar.permanentUrl,"ts",e.lastModifiedAt?encodeURIComponent(e.lastModifiedAt):(new Date).getTime())),n.avatarURL=i}var o=(e.getInitials||a.noop).apply(e);n.initials=!r&&o?o:void 0}}),r()};e.config([m.b+"Provider",function(e){e.onStyleRefresh(function(e,t){t.isAvailable||(e.selector("bb-user-avatar.u"+t.userId+":after").rule("display","block"),e.selector("bb-user-avatar.u"+t.userId+" > div").rule("opacity",".3"))})}]).run(["$rootScope",d.Qb.serviceName,function(e,t){r=a.debounce(function(){var e=new l.a;a.forEach(S,function(t,n){var r=e.selector("bb-user-avatar.u"+n);t.avatarURL?(r.selector(".image:after").rule("background-image",'url("'+t.avatarURL+'")').rule("display","block"),r.selector(".image:before").rule("display","none")):t.initials&&(r.selector(".image").rule("display","none"),r.selector(".initials").rule("display","block"),r.selector(".initials:after").rule("content",'"'+t.initials+'"')),!1===t.isAvailable&&e.selector("bb-user-avatar.u"+n+":after").rule("display","block")});var t=e.build();y.text()!==t&&y.text(t)},200),i=a.once(function(){t.$mixHook("after-feed",function(){var e=Array.prototype.concat.call([],this);C(e)})})}]).directive("bbUserAvatar",function(){return{restrict:"E",template:f,scope:{user:"=?"},link:function(e,t){i(),t.addClass("avatar element-image");e.$watch("user",function(e,n){e&&(c.e(e)&&a.extend(e,b),t[0].className=t[0].className.split(/\s+/).filter(function(e){return!/^u\w+$/.test(e)}).join(" "),t.addClass("u"+(e.id||e.$pk)),C([e]))})}}})},BfLg:function(e,t,n){n.p=window.publicPath||n.p},BrA8:function(e,t,n){"use strict";n.d(t,"a",function(){return f});n("VZTK");var r=n("IbG+"),i=n("pjml"),o=n("0JpG"),s=n("Fvsw"),a=n("bF8R"),u=n("jhBu"),c=n("o5Lu"),l=n("TnpK"),d=n("Qbdf"),p=n("A0nf"),f="ultra.course.content.lti.routes";r.module(f,[o.moduleName,a.a,u.a,c.f,l.b,d.b]).config([l.c,d.c,function(e,t){var r;e.peekState("lti",{abstract:!0,url:"/lti"}).peekState("lti.launch",{url:"/launch?courseId&contentId&linkRef&linkType",resolve:(r={translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},r[d.d]=t.resolve,r.currentContent=["$q",l.d,i.W.serviceName,i.o.serviceName,function(e,t,n,r){var i=e.defer(),o=t.nextParams.courseId?t.nextParams.courseId:t.prevParams.courseId,s=t.nextParams.contentId?t.nextParams.contentId:t.prevParams.contentId,a=t.nextParams.linkRef?t.nextParams.linkRef:t.prevParams.linkRef,u=t.nextParams.linkType?t.nextParams.linkType:t.prevParams.linkType;return o&&s?r.$new(o).contents.$find(s).$asPromise().then(function(e){return i.resolve(e)}):o&&a&&p.a.PartnerCloud.isEqualTo(u)?n.getContentIds(o,a).then(function(e){e.contentIds&&e.contentIds.length>0?r.$new(o).contents.$find(e.contentIds[0]).$asPromise().then(function(e){return i.resolve(e)}):i.resolve(null)}):i.resolve(null),i.promise}],r.currentGradeColumn=["$q",d.d,"currentContent",s.b,function(e,t,n){if(t&&n){var r=n.contentDetail[n.contentHandler.toString()].gradingColumn.id;return t.gradebook.columns.$find(r).$asPromise()}return e.when(null)}],r.contentData=["$q",d.d,"currentContent","currentGradeColumn",a.b,function(e,t,n,r,i){if(t&&n&&r)return i.loadContentAndGrades({course:t,content:n,column:r});e.when(null)}],r),panelClass:"peek",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(293)]).then(n.bind(null,"7CZ/"))},pageTitle:" Launch"}).peekState("lti.launch-frame",{url:"/launchFrame?toolHref",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(313)]).then(n.bind(null,"I/hb"))},pageTitle:"course.content.ltiLaunchFrameTitle"})}])},Bu0u:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSG"),i=function(e){function t(t){var n=e.call(this,t)||this;return n.name="InvalidArgumentsError",n}return r.__extends(t,e),t}(n("6ynb").a)},BuJN:function(e,t){e.exports='<footer class="panel-footer notification row collapse" ng-click="toastClicked()"\n        analytics-id="components.services.toast.clicked">\n  <bb-save-tray toast-message="::message" toast-short-message="::shortMessage" toast-icon="::icon" toast-class="::toastClass" toast-status="::toastStatus"></bb-save-tray>\n</footer>\n'},BzJm:function(e,t,n){e.exports=n("ZJ/X")(25)},C3Ga:function(e,t,n){"use strict";var r,i=n("mrSG"),o=n("tELe"),s=n("5MwF"),a=n("hTOW"),u=n("tfZW"),c=function(e){function t(t,n){void 0===n&&(n=u.a.getInstance());var r=e.call(this,t)||this;return r.preferredLocalesCache=new Map,r.overrideLoader=n,r.overrideLoader.onOverrideAdded(r.onOverrideAdded.bind(r)),r}return i.__extends(t,e),t.prototype.getBundlePath=function(e,t){if(s.a.unitTesting){if(!t.match(/^force\!/))return t.match(/^forcereset$/)?void this.reset():void 0;t=t.replace(/^force\!/,"")}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"},t.prototype.loadIncludedBundle=function(e){var t=this,r=function(e){var t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw new Error("Could not find locale in path "+e);return t[1]}(e);return new a.InstantPromise(function(i){n("spHl")("./"+e.replace("locales/","").replace(r,t.normalizeLocale(r))).then(i).catch(function(){return i(null)})})},t.prototype.loadPath=function(e){return e.indexOf("://")>=0?u.a.loadFromRemotePath(e):this.loadIncludedBundle(e)},t.prototype.load=function(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]},t.prototype.onOverrideAdded=function(e){this.preferredLocalesCache=new Map},t.prototype.loadBundles=function(t){var n=this;"string"==typeof t&&(t=[t]);var r=[];return this.normalizeLocales(t).forEach(function(t){r.push(n.overrideLoader.getOverridePathForLocale(t).then(function(e){if(e&&e.path)return n.loadBundle(e.ultraLocale,e.path)}),e.prototype.loadBundles.call(n,t))}),a.InstantPromise.all(r)},t.prototype.getPreferredLocales=function(e){var t=this;"string"==typeof e&&(e=[e]);var n=e.join("|");if(!this.preferredLocalesCache.has(n)){var r=[];this.normalizeLocales(e).forEach(function(e){r=r.concat(t.overrideLoader.getPreferredLocales(e))}),this.preferredLocalesCache.set(n,Array.from(new Set(r)))}return this.preferredLocalesCache.get(n)},t.prototype.getLocaleForFormatting=function(e){return this.overrideLoader.getBaseLocale(e)||e},t}(o.Babelfish),l=function(){function e(){}return e.getInstance=function(){return null==r&&(r=new c({fallbackLocales:[]})),r},e.getTestInstance=function(e){if(!s.a.unitTesting)throw new Error("Use getInstance() instead");return new c({fallbackLocales:[]},e)},e}();t.a=l},CAM3:function(e,t){e.exports='<div class="reveal-modal-bg fade"\n     ng-class="{in: animate, dark: darkenBackdrop}"\n     ng-click="close($event)"\n     style="display: block"\n     analytics-id="components.services.backdrop"\n></div>'},CPVT:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSG"),i=n("TnpK"),o=n("Qbdf"),s=n("aHpC"),a=n("IbG+"),u="ultra.components.directives.confirmationCourseOrgTokenReplacementDirective",c=function(){function e(e,t,n,r,i){this.element=e,this.attributes=t,this.scope=n,this.ultraState=r,this.currentCourse=i;try{(r.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&t.bbConfirmationNeeded&&(t.bbConfirmationNeeded=this.replaceToken(t.bbConfirmationNeeded),e.attr("bb-confirmation-needed",this.replaceToken(t.bbConfirmationNeeded)))}catch(e){}}return e.prototype.replaceToken=function(e){return e?e.replace("resource/x-bb-course-","resource/x-bb-organization-"):e},e}(),l=function(){function e(e,t){var n=this;this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=function(){return function(e,t,r){return new c(t,r,e,n.ultraState,n.currentCourse)}}}return e=r.__decorate([r.__param(0,Object(s.b)(i.d)),r.__param(1,Object(s.b)(o.e))],e)}();a.module(u,[i.b]).directive("confirmationCourseOrgTokenResolver",["$injector",function(e){return e.instantiate(l)}])},CPqS:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return S});var r=n("IbG+"),i=n("Sa5G"),o=n("0JpG"),s=n("w9Zy"),a=n("nYZ0"),u=n("ZzN+"),c=n("hqh6"),l=n("5RJJ"),d=n("pjml"),p=n("M+Ig"),f=n("TnpK"),m=n("Qbdf"),h=n("X455"),g=n("uC9d"),v=n("x+T+"),b=n("jhBu"),y=n("fYJU"),S="ultra.course.routes";r.module(S,[c.a,l.a,m.b,h.a]).config([f.c,m.c,h.b,function(t,r,c){var l,S,C;t.peekState("course",{abstract:!0,url:"^/{coursesOrOrganizations:(?:courses|organizations)}/:courseId",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))},resolve:(l={currentColumn:function(){return null}},l[m.d]=r.resolve,l[h.c]=c.resolve,l.currentCourseId=["$state",function(e){return e.nextParams.courseId}],l.courseEntitlementsLoader=["currentCourseId",v.c,function(e,t){return t.loadCourseEntitlements(e)}],l["?courseMembershipsLoader"]=["currentCourseId",d.o.serviceName,function(e,t){return t.$new(e).memberships.$fetch({limit:1e4}).$asPromise()}],l.isOrganization=[m.d,f.d,function(e,t){return t.nextParams.coursesOrOrganizations=e.isOrganization?"organizations":"courses",e.isOrganization}],l),onExit:["$rootScope","$stateParams","membership",o.serviceName,s.e,m.e,u.b,g.c,y.b,h.d,function(t,n,r,i,o,s,a,u,c,l){t.bbOffcanvasOpened=!1,o.close("course"),s.course.isClassic()&&t.$broadcast("reloadCourse",n.courseId);var d=r.isStudentMembership(),p=!c.userModel.isGuest();!d&&p&&l.courseMembership.$fetch().$allow([404]).$asPromise().then(function(e){e.isStudentMembership()&&u.clearCache("users/"+c.userId+"/memberships")}),a.showPreviewAlert=!0,e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode")}]}).peekState("course.analytics",{url:"/analytics",views:{"course@":{require:[function(){return n.e(77).then(n.bind(null,"amHh"))},function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))}],resolve:{"analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/analytics/course-analytics")}]}}},panelClass:"full",pageTitle:"course.analytics.headerLabel"}).peekState("course.analytics.predict-instructor",{url:"/predict?resetFTUE",views:{"analytics@":{require:function(){return Promise.all([n.e(15),n.e(17),n.e(119),n.e(369)]).then(n.bind(null,"x4MM"))},resolve:{"predict-translations":[o.serviceName,function(e){return e.loadBundle("features/predict/predict")}]}}},pageTitle:"predict.course.title",peekStates:["predictCourseStudentPanel"],panelClass:"full"}).peekState("course.analytics.predict-student",{url:"/predict/:studentId",views:{"analytics@":{require:function(){return Promise.all([n.e(15),n.e(21),n.e(17),n.e(18),n.e(20),n.e(30),n.e(70),n.e(380)]).then(n.bind(null,"lanz"))},resolve:{"predict-translations":[o.serviceName,function(e){return e.loadBundle("features/predict/predict")}]}}},peekStates:["predictMessagingPanel"],pageTitle:"course.title.predictStudent",panelClass:"full"}).peekState("course.analytics.reports",{url:"/reports",views:{"analytics@":{require:[function(){return n.e(297).then(n.bind(null,"Va14"))},function(){return n.e(77).then(n.bind(null,"amHh"))},function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))}],resolve:{"analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/analytics/course-analytics")}]}}},panelClass:"full",pageTitle:"course.analytics.headerLabel"}).peekState("course.analytics.scorm-reports",{url:"/scormReports",resolve:(S={},S[m.d]=r.resolve,S),views:{"analytics@":{require:[function(){return n.e(366).then(n.bind(null,"txuS"))},function(){return n.e(77).then(n.bind(null,"amHh"))}],resolve:{"scorm-report-analytics-translations":[o.serviceName,function(e){return e.loadBundle("features/course/content/scorm/scorm")}]}}},peekStates:["scorm-analytics-report"],panelClass:"full",pageTitle:"course.analytics.title.scormReports"}).peekState("course.analytics.question-analysis",{url:"/questionAnalysis",views:{"analytics@":{require:function(){return Promise.all([n.e(7),n.e(86),n.e(291)]).then(n.bind(null,"ErSj"))},resolve:{"question-analysis-translations":[o.serviceName,function(e){return e.loadBundle("features/course/question-analysis")}]}}},peekViewName:"question-analysis-report-list",peekStates:["question-analysis"],panelClass:"full",pageTitle:"course.question-analysis.report-list.pageTitle"}).peekState("course.calendar",{url:"/calendar",views:{"course@":{require:[function(){return Promise.all([n.e(87),n.e(0),n.e(10),n.e(75),n.e(19),n.e(310)]).then(n.bind(null,"bbBO"))},function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))}],resolve:{"calendar-translations":[o.serviceName,function(e){return e.loadBundle("features/course/calendar/course-calendar")}]}}},courseEntitlement:i.e.ViewCalendar,peekStates:["event-create","event-edit","event-view","class-schedule","office-hours","conversion-analysis","content-manage","assignment","grade-item","assessment","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],panelClass:"full",peekViewName:"calendar-panel-base",pageTitle:"course.calendar.headerLabel"}).peekState("course.engagement",{url:"/engagement",resolve:{"engagement-translations":[o.serviceName,function(e){return e.loadBundle("features/course/engagement/course-engagement")}]},views:{"course@":{require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(250)]).then(n.bind(null,"QVC4"))}}},panelClass:"full",peekStates:["content-manage","conversion-analysis","discussion","conditional-release","content-group-enroll","discussion-settings",p.a.DiscussionForumInsights.toString(),"course-group"],peekViewName:"engagement-panel-base",pageTitle:"course.engagement.headerLabel"}).peekState("course.grades",{url:"/grades?gradebookView",views:{"course@":{require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(9),n.e(38),n.e(244)]).then(n.bind(null,"OFW5"))},function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))}],resolve:{"grades-translations":[o.serviceName,function(e){return e.loadBundle("features/course/grades/course-grades")}]}}},resolve:{courseEntitlement:["$q","membership",b.b,function(e,t,n){return t.isStudentMembership()?e.resolve(!0):n.hasAllCourseEntitlements(["course.gradebook-metadata.VIEW",i.w.ViewGroups])}]},peekStates:["assignment","assessment","gradebook-item","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview","multiple-attempt-grading","assignment-grading","submission-grading","group-submission-grading","grade-item","grade-setting","grade-download-setting","grade-upload-setting","grade-and-feedback","conversion-analysis","content-manage","lti","discussion","submission-list","rubric","overall-grade","overall-grade-student","attendance","attendance-student-records","attendance-student-view","question-analysis","reconcile-grade","grades-bulk-download"],panelClass:"full",peekViewName:"grades-panel-base",pageTitle:"course.grades.instructorHeaderLabel"}).peekState("course.messages",{url:"/messages",views:{"course@":{require:[function(){return Promise.all([n.e(27),n.e(32),n.e(124),n.e(407)]).then(n.bind(null,"vjWz"))},function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))}],resolve:{"messages-translations":[o.serviceName,function(e){return e.loadBundle("features/course/messages/course-messages")}]}}},panelClass:"full",peekStates:["create-message","edit-message","conversion-analysis"],pageTitle:"course.messages.headerLabel"}).peekState("course.outline",{url:"/outline?legacyUrl?enrollmentMessage",views:{"course@":{require:[function(){return Promise.all([n.e(14),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(10),n.e(26),n.e(117)]).then(n.bind(null,"Qile"))},function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))}],resolve:{isClassicCourse:[m.d,f.d,function(e,t){e.isUltra()||t.goPeekState("course.classic.outline",{courseId:e.id,legacyUrl:t.nextParams.legacyUrl})}],"outline-translations":[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}},onExit:["$rootScope",f.d,function(e,t){"base.calendar"===t.getBaseState()&&e.$broadcast("deadline-refresh")}],peekStates:["announcement-list","announcement-detail","assignment","assessment-settings","question-analysis","question-banks","assessment-safe-assign-settings","bulk-edit-content","class-schedule","content-group-enroll","content-manage","conversion-analysis","conversion-risk-analysis","description","event-view","exports","gradebook-item","import-report","message","roster","collab","stream-message","assessment","content-market","content-collection","document-settings","partner-tool","lti","discussion-settings","conversations","books-and-tools","rubric",p.a.ContentActivityInDetail.toString(),p.a.DiscussionForumInsights.toString(),"overall-grade","attendance","attendance-student-view","conditional-release","course-group","scorm-settings","gradebook-item.scorm-submissions","group-set-detail","group-set-list","scorm-launch-frame","scorm-overview","content-navigator-transition-peek","content-navigator-transition-full","content-navigator-placeholder","scorm-analytics-report"],peekViewName:"content-create-base",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("content-navigator-transition-peek",{url:"/content-navigator-transition-peek",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"peek"}).peekState("content-navigator-transition-full",{url:"/content-navigator-transition-full",template:'<div class="spinner bb-secondary-color-2"></div>',panelClass:"full"}).peekState("content-navigator-placeholder",{url:"/link/{contentId:_[0-9]+_1}",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(304)]).then(n.bind(null,"1Uig"))},panelClass:"full",peekStates:["lti"],resolve:{currentContent:[f.d,m.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==d.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}]}}).peekState("conditional-release",{url:"/conditionalRelease?id",pageTitle:"course.conditionalRelease.panelTitle",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(337)]).then(n.bind(null,"gl4I"))},function(){return Promise.all([n.e(14),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(10),n.e(26),n.e(117)]).then(n.bind(null,"Qile"))}],resolve:(C={},C[m.d]=r.resolve,C.currentContent=[f.d,"currentCourse",a.d,function(e,t,n){var r=e.nextParams.id,i=n.findRootNode(t,d.r.ContentRootNode.ROOT);return n.getOrMakeContentInContentTree(i,t.id,r).then(function(e){return e.content.$fetch({expand:"hasProgressed"}).$asPromise()})}],C.translations=[o.serviceName,function(e){return e.loadBundle("features/course/conditional-release/conditional-release")}],C)}).peekState("course.classic",{abstract:!0,url:"/cl"}).peekState("course.classic.outline",{url:"/outline?legacyUrl?enrollmentMessage",require:[function(){return Promise.all([n.e(0),n.e(19),n.e(22)]).then(n.bind(null,"ogn+"))}],resolve:{"outline-translations":[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]},peekStates:[p.a.ContentActivityInDetail.toString()],peekViewName:"course-classic-peek",pageTitle:"course.outline.tab.title",panelClass:"full"}).peekState("edit-file-settings",{require:[function(){return n.e(143).then(n.bind(null,"TFHU"))}],resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/media-widget/media-widget")}]},url:"/fileAttachment?toolContentName&fileIndex&isRenderedInline&linkName&parentToolInstanceName&isDecorative&alternativeText&mediaType&bbmlEditorId"}).peekState("bulk-edit-content",{url:"/bulkEditContent",require:[function(){return Promise.all([n.e(241),n.e(411)]).then(n.bind(null,"iGvw"))}],pageTitle:"course.outline.bulkEditHeaderLabel",panelClass:"full"})}])}).call(this,n("EVdn"))},Cxi4:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n("mrSG"),i=n("IbG+"),o=n("nYZ0"),s=n("Sa5G"),a=n("jhBu"),u=n("pjml"),c="ultra.components.services.discussionPermission",l="discussionPermission",d=function(){function e(e,t,n,r){this.$q=e,this.content=t,this.CourseModel=n,this.entitlement=r}return e.prototype.canCreateAllContent=function(e){if(e){var t,n=this.CourseModel.$new(e),r=this.content.findRootNode(n,u.r.ContentRootNode.INTERACTIVE);return r.$then(function(){(t=r.children)||(t=r.getChildren({limit:0}))}).$asPromise().then(function(){return t.$asPromise().then(function(){return t.permissions&&t.permissions.create})})}return this.$q.when(!1)},e.prototype.hasEditPermission=function(e){return this.entitlement.hasCourseEntitlement(s.f.ModifyContent,e)},e.prototype.hasEditAvailabilityPermission=function(e){return this.entitlement.hasCourseEntitlement(s.f.ModifyContentAvailability,e)},e.prototype.hasEditDueDatePermission=function(e){return this.entitlement.hasCourseEntitlement(s.v.ModifyItemDueDate,e)},e.prototype.hasGradingPermission=function(e){return this.entitlement.hasCourseEntitlement(s.v.ModifyGradebook,e)},e.prototype.canDeleteDiscussion=function(e,t){return t&&t.permissions?t.canDelete():e&&e.canDelete()},e.prototype.areAnyGroupEntitled=function(e){return this.entitlement.areAnyEntitled([s.w.CreateGroups,s.w.DeleteGroups,s.w.ManageGroupMembership,s.w.ModifyGroups,s.w.ViewGroups],e)},e.$inject=["$q",o.d,u.o.serviceName,a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(d);i.module(c,[o.c,u.R,a.a]).service(l,d)},DDbI:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("w9Zy"),o=n("TnpK"),s="profile.update-avatar.routes";r.module(s,[i.d,o.b]).config([o.c,function(e){e.peekState("update-avatar",{url:"/avatar/update",require:function(){return Promise.all([n.e(23),n.e(339)]).then(n.bind(null,"Jgl2"))},pageTitle:"base.profile.update-avatar.pageTitle"})}])},Dk34:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.services.error-modal.error-persist-question.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-persist-question">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-persist-question.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button large reload-page-button js-primary-button"\n          analytics-id="components.services.error-modal.error-persist-question.alt"\n          bb-translate>components.services.error-modal.error-persist-question.alt</button>\n</bb-modal>\n'},DlnX:function(e,t,n){},DsaG:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r=n("mrSG"),i=n("IbG+"),o=n("pjml"),s=n("f4B+"),a="ultra.components.services.fileViewer",u="fileViewer",c=function(){function t(t){var n=this;this.$sce=t,this.canFileBeRenderedInline=function(e){if(e.ui=e.ui||{},!e.currentMimeType)return!1;if(e.ui.mediaType=e.ui.mediaType||n.getMediaType(e),e.ui.mediaSubtype=e.ui.mediaSubtype||n.getMediaSubType(e),"image"===e.ui.mediaType){return["jpeg","gif","png"].indexOf(e.ui.mediaSubtype)>-1}if("audio"===e.ui.mediaType||"video"===e.ui.mediaType){var t=document.createElement(e.ui.mediaType);return t.canPlayType&&!!t.canPlayType(e.currentMimeType)}return!1},this.getMediaSubType=function(e){var t=null;return e.currentMimeType&&(t=e.currentMimeType.substr(e.currentMimeType.indexOf("/")+1)),t},this.getMediaType=function(e){var t=null;return e.currentMimeType&&(t=e.currentMimeType.substring(0,e.currentMimeType.indexOf("/"))),t},this.isMediaFile=function(t){return e.inArray(t,["image","video","audio"])>=0},this.shouldRenderInlineByDefault=function(e){var t=!1,r=n.getMediaType(e);return r&&(t=n.isMediaFile(r)),t},this.isAudioFile=function(e){return"audio"===e},this.isImageFile=function(e){return"image"===e},this.isVideoFile=function(e){return"video"===e},this.initUiField=function(e){null==e.ui&&(e.ui={}),e.viewerData&&e.viewerData.viewerUrl&&(e.ui.trustedViewUrl=n.$sce.trustAsResourceUrl(e.viewerData.viewerUrl)),e.ui.iconClass=o.r.FileContentHandlerType.getIconClassByFileMIMEType(e.currentMimeType)||"img-icon-document-blank",e.ui.mediaType=n.getMediaType(e),e.ui.mediaSubtype=n.getMediaSubType(e),e.ui.canBeRenderedInline=n.canFileBeRenderedInline(e),e.ui.safeAltText=e.alternativeText?s.a.HTML(e.alternativeText):""}}return t.$inject=["$sce"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(c);i.module(a,[]).service(u,c)}).call(this,n("EVdn"))},DwhQ:function(e,t,n){e.exports=n("ZJ/X")(66)},Dwp2:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("IbG+"),i=n("YOs/"),o=n("w2YQ"),s=n("V5JH"),a="ultra.components.directives.table.tableCell",u=function(){function e(e,t,n){this.scope=e,this.element=t,this.ctrl=n,this.getColumn(),this.handleAlternateText()}return e.prototype.getColumn=function(){this.column=this.ctrl.getConfig().columns[this.scope.columnIndex()]},e.prototype.handleAlternateText=function(){if(this.column&&this.column.alternateTextFn){var e=this.column.alternateTextFn(this.scope.item);this.element.find(".alternate-contents").text(e),this.element.find(".transclude-container").attr("aria-hidden","true")}},e.$inject=["scope","element","ctrl"],e}(),c=function(){function e(e){var t=this;this.$injector=e,this.require="^bbTable",this.restrict="E",this.replace=!0,this.transclude=!0,this.template=function(e,t){return"true"===t.header?s:o},this.scope={columnIndex:"&",header:"@"},this.link=function(e,n,r,i,o){e.item=e.$parent.$parent.item,e.tableCell=t.$injector.instantiate(u,{scope:e,element:n,ctrl:i}),o(function(t,r){r.item=e.item,n.find(".transclude-container").append(t)})}}return e.$inject=["$injector"],e}();r.module(a,[i.b]).directive("bbTableCell",["$injector",function(e){return e.instantiate(c)}])},DzKP:function(e,t,n){e.exports=n("ZJ/X")(2062)},EKl8:function(e,t,n){e.exports=n("ZJ/X")(1722)},EVdn:function(e,t,n){e.exports=n("ZJ/X")(1390)},EpnP:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-small-course_catalog_hc_light",use:"icon-small-course_catalog_hc_light-usage",viewBox:"0 0 16 16",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-course_catalog_hc_light"><g stroke="#FFF" stroke-linecap="round" stroke-linejoin="round" fill="none" fill-rule="evenodd"><path d="M2.5 3.5h1v-1h-1zm5 2h1v-1h-1zm5 0h1v-2h-1zm-5 6h1m-1 2h1m4 0h1m-11 0h1" /><path d="M.5.5v13.881C.5 14.723 1.804 15.5 3 15.5s2.5-.777 2.5-1.119V.5h-5zm10 1v12.967c0 .316 1.304 1.033 2.5 1.033s2.5-.717 2.5-1.033V1.5h-5zm-4.952 1l-.048 12c0 .342 1.133 1 2.5 1s2.5-.658 2.5-1v-12H5.548z" /></g></symbol>'});i.add(o);e.exports=o},"F/WY":function(e,t){e.exports='<div>\n    <div bb-dir>\n        <div ui-view="{0}" bb-offcanvas-pausal-scope></div>\n    </div>\n</div>'},F6pP:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-not-found-modal"\n          modal-title-key="components.services.error-modal.error-not-found.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-not-found">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-not-found.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>'},FBBZ:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"k",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"j",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"d",function(){return m}),n.d(t,"m",function(){return h}),n.d(t,"l",function(){return g}),n.d(t,"n",function(){return v}),n.d(t,"o",function(){return b}),n.d(t,"i",function(){return y}),n.d(t,"g",function(){return S}),n.d(t,"f",function(){return C}),n.d(t,"p",function(){return w}),n.d(t,"h",function(){return $});var r=n("LvDl"),i=n("Q/M7"),o=n("5MwF"),s=["xplor-connector"];function a(e){return i.c(o.a.partnerCloudBasePath+e)}function u(e){var t=e.baseUrl+"/ultra/features/course/partner-tool/partner-tool-return-page.html";return a("/launch/lti?returnUrl="+encodeURIComponent(t)+"&uri_uri="+encodeURIComponent("ACTION:cloudProvisioning")+"&content_id="+encodeURIComponent(e.parentId||"")+"&window=false&disclaimer=true&provider_id=CLOUD1&uri_scheme=ACTION&custom_error_url="+encodeURIComponent(t)+"&action=cloudProvisioning&uri_id="+(new Date).getTime().toString()+"&course_id="+encodeURIComponent(e.courseId||"")+"&public=true&ignore_partner_settings=false&target=_self")}function c(e){var t="/content"+(e.displayInIframe?"/ultra":"")+"?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId);return e.parentId&&(t+="&content_id="+encodeURIComponent(e.parentId)),e.position&&(t+="&position="+encodeURIComponent(e.position)),e.mode&&(t+="&mode="+encodeURIComponent(e.mode)),a(t)}function l(e){return a("/launch/content?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&link_ref_id="+encodeURIComponent(e.linkRefId))}function d(e){var t="/content/return?provider_id="+encodeURIComponent(e.providerId)+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.contentId)+"&parentId="+encodeURIComponent(e.parentId)+"&position="+encodeURIComponent(e.position);return a(t+=e.itemIds?"&itemIds="+encodeURIComponent(e.itemIds):"&root=true")}function p(e){var t=e.baseUrl+"/webapps/blackboard/execute/blti/launchReturn";return a("/launch/lti?window=false&action=provisioning&ignore_partner_settings=false&uri_scheme=ACTION&target=_self&uri_id="+(new Date).getTime().toString()+"&uri_uri="+encodeURIComponent("ACTION:provisioning")+"&b2Uri="+encodeURIComponent("/webapps/partner-cloud/")+"&course_id="+encodeURIComponent(e.courseId)+"&content_id="+encodeURIComponent(e.parentId||"")+"&provider_id="+encodeURIComponent(e.partnerId)+"&returnUrl="+encodeURIComponent(t)+"&custom_error_url="+encodeURIComponent(t))}function f(e){return a("/course/tools?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId))}function m(e){return a("/gradeLink/grade?outcomeDefinitionId="+encodeURIComponent(e.gradableItemId)+"&linkRefId="+encodeURIComponent(e.linkId)+"&course_id="+encodeURIComponent(e.courseId)+"&attempt_id="+encodeURIComponent(e.attemptId)+"&courseMembershipId="+encodeURIComponent(e.membershipId)+"&cancelGradeUrl")}function h(e){return a("/diagnostics/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function g(e){return a("/contentRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function v(e){return a("/gradeRefresh/preview/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function b(e){return a("/course/roster/ultra?provider_id="+encodeURIComponent(e.partnerId)+"&course_id="+encodeURIComponent(e.courseId)+"&ignore_partner_settings=false")}function y(e){return e?e&&e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.name?e.toolProvider.toolProviderProfile.name:e&&e.portfolio&&e.portfolio.name?e.portfolio.name:e.providerId:""}function S(e,t){if(!e)return"";var n=t?e.iconUrl:e.associatedIconUrl;return n?i.l(n):""}function C(e){return e?(e.toolProvider&&e.toolProvider.toolProviderProfile&&(t=e.toolProvider.toolProviderProfile.description),t||""):"";var t}function w(e){return e.toolProvider&&e.toolProvider.toolProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile&&e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor&&r.includes(s,e.toolProvider.toolProviderProfile.internalProviderProfile.pluginDescriptor.handle)||!1}function $(e){var t=[];return Array.prototype.push.apply(t,e.premierList),Array.prototype.push.apply(t,e.signatureList),Array.prototype.push.apply(t,e.otherList),t.forEach(function(e){e.childProviders&&Array.prototype.push.apply(t,e.childProviders)}),r.keyBy(t,"providerId")}},"FE+f":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.description.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("description",{url:"/description",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/description/course-description")}]},require:function(){return n.e(144).then(n.bind(null,"8WQs"))},pageTitle:"course.description.header"})}])},FHk9:function(e,t,n){"use strict";n.r(t),n.d(t,"EVENT_BBML_EDITOR_IS_UPDATED",function(){return r}),n.d(t,"EVENT_BBML_EDITOR_FORCE_UPDATE",function(){return i}),n.d(t,"EVENT_BBML_EDITOR_ID_GENERATED",function(){return o}),n.d(t,"ReorderBlockEventInfo",function(){return s});var r="bbml-updated",i="bb-bbml-editor-force-bbml-update",o="bb-bbml-editor-id-generated",s=function(){}},FR7u:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});n("P82Y");var r=n("IbG+"),i="ultra.components.directives.clickScrollTo",o=function(){this.restrict="A",this.link=function(t,n,r){n.on("click",function(){e(r.bbClickScrollTo).scrollintoview({duration:500})}),t.$on("$destroy",function(){n.off()})}};r.module(i,[]).directive("bbClickScrollTo",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("EVdn"))},Fvsw:function(e,t,n){"use strict";n.d(t,"a",function(){return v}),n.d(t,"b",function(){return b});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("5MwF"),a=n("oSB+"),u=n.n(a),c=n("Sa5G"),l=n("jhBu"),d=n("fYJU"),p=n("Qbdf"),f=n("emI2"),m=n("X455"),h=n("pjml"),g=n("eUpQ"),v="ultra.service.context",b="context",y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Administrator=new t("administrator"),t.NonStudent=new t("nonstudent"),t.Student=new t("student"),t.ClassicNonStudent=new t("classicnonstudent"),t.ClassicStudent=new t("classicstudent"),t}(u.a),S=function(){function e(e,t,n,r,o,s,a,u,l,d,p,f){this.$rootScope=e,this.$q=t,this.currentUser=n,this.EntitlementService=r,this.currentCourse=o,this.currentCourseMembership=s,this.preferenceService=a,this.BrandModel=u,this.SystemInfoModel=l,this.PrivacyPolicyModel=d,this.PredictFtueModel=p,this.ThemeModel=f,this.helpVariantOverride=null,this.predictInitialDefer=null,this.getHelpVariantDependencies=i.memoize(function(){return this.$q.all([this.EntitlementService.hasSystemEntitlement(c.C.ViewAdminTop),this.currentUser.userModel.memberships.$fetch({fields:"role,courseId"})])}),this.registerCourseContextDetection();this._course=new(function(){function e(){}return Object.defineProperty(e.prototype,"model",{get:function(){return o.course},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"membership",{get:function(){return s.courseMembership},enumerable:!0,configurable:!0}),e}())}return Object.defineProperty(e.prototype,"course",{get:function(){return{model:this.currentCourse.course,membership:this.currentCourseMembership.courseMembership}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"courseId",{get:function(){return this.currentCourse.courseId},set:function(e){this.currentCourse.load(e)},enumerable:!0,configurable:!0}),e.prototype.registerCourseContextDetection=function(){var e=this;this.$rootScope.$on(p.a,function(t,n){e.courseId=n.id})},e.prototype.overrideHelpVariant=function(e){this.helpVariantOverride=e},e.prototype.guessHelpVariant=function(){var e=this,t=[];if(this.helpVariantOverride){var n=this.helpVariantOverride;return this.helpVariantOverride=null,this.$q.when([n])}return this.course&&this.course.membership&&!this.course.membership.isStudentOrGuestMembership()&&t.push(this.course.model.isClassic()?y.ClassicNonStudent:y.NonStudent),this.getHelpVariantDependencies().then(function(n){var r=n[0],o=n[1];if(r&&t.push(y.Administrator),e.course&&e.course.model)r&&t.push(e.course.model.isClassic()?y.ClassicNonStudent:y.NonStudent);else{var s=y.Student;o.some(function(e){if(!e.isStudentOrGuestMembership())return s=y.NonStudent,!0}),t.push(s)}return 0===t.length&&t.push(e.course&&e.course.model&&e.course.model.isClassic()?y.ClassicStudent:y.Student),i.uniq(t)})},e.prototype.getSystemInfo=function(){return this.systemInfo||(this.systemInfo=window.__initialContext&&window.__initialContext.systemInfo?this.SystemInfoModel.$buildRaw(window.__initialContext.systemInfo):this.SystemInfoModel.$new().$fetch().$suppressErrorDialog()),this.systemInfo},e.prototype.getTheme=function(){return this.theme||(this.theme=this.ThemeModel.$new({themeId:this.getBrand().themeId}).$fetch()),this.theme},e.prototype.getServerTime=function(){return g.a.getServerTime()},e.prototype.getPrivacyPolicyUrls=function(){return this.privacyPolicy||(this.privacyPolicy=this.PrivacyPolicyModel.$new().$fetch().$suppressErrorDialog()),this.privacyPolicy},e.prototype.getCourseId=function(){return this.currentCourse.courseId},e.prototype.userHasGradebookModificationEntitlement=function(){var e=this.getCourseId();return e?this.EntitlementService.hasCourseEntitlement(c.v.ModifyGradebook,e).then(function(e){return e}):this.$q.when(!1)},e.prototype.getBrand=function(){return this.brand||(this.brand=window.__initialContext&&window.__initialContext.brand?this.BrandModel.$buildRaw(window.__initialContext.brand):this.BrandModel.getCurrent()),this.brand},e.prototype.getUiVersion=function(){return window.__initialContext&&window.__initialContext.uiVersion||""},e.prototype.getLandingPage=function(){var e=this;return this.currentUser.userModel.$asPromise().then(function(t){return t.isGuest()?e.convertLandingPageToRoute():e.getPreference("ultraui.first.time.welcome.welcome.visited").then(function(){return e.convertLandingPageToRoute()},function(t){return 404===t.$response.status?s.a.features.devtools_disableFtue?e.convertLandingPageToRoute():"welcome":e.convertLandingPageToRoute()})})},e.prototype.convertLandingPageToRoute=function(){return this.currentUser.userModel.$asPromise().then(function(e){switch(e.landingPage){case"ActivityStream":return"base.recentActivity";case"InstitutionPage":return"base.institution-page";case"CourseList":return"base.courses";default:return"base.recentActivity"}})},e.prototype.getPreference=function(e,t){return this.preferenceService.getPreference(e,t)},e.prototype.getPredictPreference=function(e,t){var n=this,r=this.$q.defer();if(!Object.keys(this.preferenceService.preferences).some(function(e){return e.indexOf(".predict.")>0})){if(this.predictInitialDefer)return this.predictInitialDefer.promise.then(function(){r.resolve(n.preferenceService.preferences[e])}),r.promise;this.predictInitialDefer=r,this.PredictFtueModel.getFtues().then(function(i){if(i){var o=null;i.forEach(function(t){n.preferenceService.preferences[t.key]=t,e===t.key&&(o=t)}),o?r.resolve(o):(n.preferenceService._addPreferenceToCache(e,t),r.resolve(n.preferenceService.preferences[e]))}else{if(void 0===t)return void r.reject(i);n.preferenceService._addPreferenceToCache(e,t),r.resolve(n.preferenceService.preferences[e])}},function(e){r.reject(e)})}else this.preferenceService.preferences.hasOwnProperty(e)||this.preferenceService._addPreferenceToCache(e,t),r.resolve(this.preferenceService.preferences[e]);return r.promise},e.prototype.getUltraConversionReportId=function(){return this.course.model.ultraConversionReportId},e.prototype.setPreference=function(e,t,n){return this.preferenceService.setPreference(e,t,n)},e.prototype.setPredictPreference=function(e,t,n){if(e.length>f.a)throw new Error("Preference key is too long!");return this.preferenceService._addPreferenceToCache(e,t,n),this.PredictFtueModel.setFtue(e)},e.$inject=["$rootScope","$q",d.b,l.b,p.e,m.d,f.c,h.g.serviceName,h.vb.serviceName,h.nb.serviceName,h.fb.serviceName,h.Ob.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(S);o.module(v,[h.R,d.a,l.a,p.b,m.a,f.b]).service(b,S)},GA7a:function(e,t){e.exports='<div>\n  <bb-user-avatar ng-repeat="user in displayUsers" user="user"></bb-user-avatar>\n</div>'},GNXM:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.announcement.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("announcement-list",{url:"/announcement-list",require:function(){return Promise.all([n.e(14),n.e(392)]).then(n.bind(null,"pp2P"))},pageTitle:"course.outline.announcements.title",peekStates:["announcement-detail"],panelClass:"full"}).peekState("announcement-detail",{url:"/announcement-detail?courseId&announcementId&mode",require:function(){return Promise.all([n.e(14),n.e(350)]).then(n.bind(null,"Zozd"))},pageTitle:"course.outline.announcements.title",panelClass:"full"})}])},GbAM:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return s}),n.d(t,"b",function(){return a}),n.d(t,"a",function(){return u});var r=n("IbG+"),i=n("yC9S"),o=n("dabL"),s="ultra.components.directives.accessibility.liveRegion",a="aria_live_polite",u="aria_live_assertive",c=function(){function t(t,n,r){var o=this;this.scope=t,this.element=n,this.attrs=r;i.b.OnRootScope(t,a,function(t,n){var r=e("#aria-live-polite-region-1"),i=e("#aria-live-polite-region-2");""===r.text()?o.switchRegion(i,r,n):o.switchRegion(r,i,n)}),i.b.OnRootScope(t,u,function(t,n){var r=e("#aria-live-assertive-region-1"),i=e("#aria-live-assertive-region-2");""===r.text()?o.switchRegion(i,r,n):o.switchRegion(r,i,n)})}return t.prototype.switchRegion=function(e,t,n){e.empty(),e.attr("aria-hidden","true"),t.text(n),t.attr("aria-hidden","false")},t.$inject=["scope","element","attrs"],t}(),l=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="A",this.link=function(e,t,r){t.append(n.$compile(o)(e)),e.liveRegion=n.$injector.instantiate(c,{scope:e,element:t,attrs:r})}}return e.$inject=["$injector","$compile"],e}();r.module(s,[]).directive("bbLiveRegion",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("EVdn"))},GiEq:function(e,t,n){},Gq5k:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-small-collab",use:"icon-small-collab-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-collab"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 3h10v3l4-1.974V12l-4-2v3H1V3z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 6l1 2-1 2M7.5 6l1 2-1 2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},H4qw:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-small-close",use:"icon-small-close-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-close"><path d="M15 1L1 15M1 1l14 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},H8CZ:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r="webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",i="webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend";function o(e,t){a(e,t,r)}function s(e,t){a(e,t,i)}function a(e,t,n){if(!window.Modernizr.csstransitions)return t({data:{noTransitions:!0}});var r=function(i){var o;i.data||(i.data={});try{o=t(i)}finally{void 0===o&&e.off(n,r)}};e.on(n,r)}},H9Wo:function(e,t,n){},HAJP:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n("mrSG"),i="external.script.loader",o="externalScriptLoader",s=function(){function e(e){this.$q=e,this.scripts={}}return e.prototype._createScriptElement=function(){return document.createElement("script")},e.prototype._appendScriptElement=function(e){document.head.appendChild(e)},e.prototype._getWindowProperty=function(e){return window[e]},e.prototype.getScript=function(e,t){if(void 0===t&&(t={}),this.scripts[e])return this.scripts[e];var n=this.$q.defer();try{this.scripts[e]=n.promise;var r=(e.indexOf("?")>=0?"&":"?")+"_"+Date.now(),i=this._createScriptElement();if(i.type="text/javascript",i.src=e+r,t.attributes)for(var o in t.attributes)i.setAttribute(o,t.attributes[o]);var s=this;i.onload=function(){t.exports?n.resolve(s._getWindowProperty(t.exports)):n.resolve()},i.onerror=function(){n.reject(new Error("error loading script: "+e))},this._appendScriptElement(i)}catch(e){n.reject(e)}return n.promise},e.$inject=["$q"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(s);angular.module(i,[]).service(o,s)},HDxW:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("IbG+"),i=n("5MwF"),o=n("k9iv"),s=n("Q/M7"),a=n("z1U9"),u="ultra.service.errorHandler",c="errorHandler",l=function(e){return function(){var t,n=e.connect(function(e){return{}},a.actions.app)(function(e,n){e,t=n});try{t&&t.clearError&&t.clearError()}finally{n()}}},d=function(e,t,n,r,o){return function(a){if(a&&a.$response){if(401===a.$response.status){var u=e.get("$location").url(),c=u?"/?new_loc="+encodeURIComponent(i.a.basePath+u):"/";t.location.href=s.c(c)}403===a.$response.status?o.handleApiError(a.$response,function(){n.$broadcast("no-permission-course"),l(r)()}):o.handleApiError(a.$response,l(r))}}};r.module(u,[]).factory(c,["$injector",function(e){var t=function(t){return e.invoke(["$injector","$window","$rootScope","$ngRedux",o.c,d])(t)};return{handle:t,subscribe:function(){return e.invoke(["$ngRedux",function(e){return function(e){return function(t){var n;return e.subscribe(function(){var r=e.getState();if(r.app.error&&n!==r.app.error){var i={status:r.app.error.status,data:r.app.error.data||{}};t({$response:i})}n=r.app.error})}}(e)(t)}])}}}])},HIKz:function(e,t,n){e.exports=n("ZJ/X")(1331)},Hbkz:function(e,t,n){"use strict";n.d(t,"a",function(){return l});n("VZTK");var r=n("IbG+"),i=n("0JpG"),o=n("bF8R"),s=n("g7Mf"),a=n("pjml"),u=n("TnpK"),c=n("Qbdf"),l="ultra.course.content.conversations.routes";r.module(l,[i.moduleName,u.b,c.b]).config([u.c,c.c,function(e,t){var r;e.peekState("conversations",{url:"/conversations/:contentId/:courseId?groupId",resolve:(r={},r[c.d]=t.resolve,r.content=[c.d,o.b,u.d,a.o.serviceName,function(e,t,n,r){return r.$new(e.id).contents.$find(n.nextParams.contentId,{expand:"assignedGroups"}).$asPromise()}],r.translations=["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("common/user-common")])}],r.currentCourseMemberships="^courseMembershipsLoader",r.discussionInit=[s.c,"currentCourseMemberships",function(e,t){return e.init(t).then(function(){return e.loadHardContent(!0)})}],r),onExit:[s.c,function(e){e.destroy()}],require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(249)]).then(n.bind(null,"FFqm"))},pageTitle:"course.content.classConversations",peekViewName:"conversations-peek",panelClass:"full",allowChildPeekStates:!0,peekStates:["message","discussion-participants"]})}])},HiZj:function(e,t,n){e.exports=n("ZJ/X")(1740)},"HpN/":function(e,t){e.exports='<a\n  href="javascript:void(0);"\n  class="skip-link"\n  bb-focus-next="{{ bbSkipLinkFocusNext }}"\n  bb-translate\n  bb-load-bundle="components/directives/skip-link"\n  analytics-id="components.directives.skip-link.message">\n  components.directives.skip-link.message\n</a>\n'},HtY7:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("lEL+"),o="ultra.components.directives.click",s=0,a=function(){function e(e){var t=this;this.timeout=e,this.restrict="A",this.link=function(e,n,r){void 0===r.bbClickTimeout&&(r.bbClickTimeout=s);var i=0,o=function(){var n;"true"===r.bbClickOnceDisable?n=e.$eval(r.bbClick):++i<=1&&(n=e.$eval(r.bbClick)),null!=n&&void 0!==n&&n.finally(function(){t.timeout(function(){i=0},e,r.bbClickTimeout)})};e.$on("$destroy",function(){n.off("click",o)}),n.on("click",o)}}return e.$inject=[i.b],e}();r.module(o,[i.a]).directive("bbClick",["$injector",function(e){return e.instantiate(a)}])},HuMO:function(e,t,n){e.exports=n("ZJ/X")(1421)},I22j:function(e,t,n){},IVCC:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("IbG+"),i=n("0JpG"),o=n("w9Zy"),s=n("pjml"),a=n("fYJU"),u=n("TnpK"),c=n("ZBYA"),l=n("aohr"),d="ultra.predict.routes";r.module(d,[i.moduleName,o.d,s.R,a.a,u.b,c.a]).config([u.c,function(e){var t;e.baseState("predictBase",{abstract:!0,require:function(){return Promise.all([n.e(23),n.e(344)]).then(n.bind(null,"xID3"))},resolve:(t=["components/directives/telemetry/telemetry","components/services/telemetry-chart","features/predict/predict","features/locations","features/course/course","global"],{user:[a.b,function(e){return e.userModel.$asPromise()}],localize:["$q","$rootScope","user","$window",i.serviceName,c.b,function(e,n,r,o,s,a){a.getInstitutionPreference(l.a.OverrideLanguagePack).then(function(a){var u=a.value||r.locale||"en",c=o.location.href.match(i.localeQuerystringRegex);c&&(u=c[1]),u=s.validateLocale(u)?u:"en",s.setUserLocale(u);var l=[s.setLocale(n,u)].concat(t.map(function(e){return s.loadBundle(e)}));return e.all(l)})}]})}).baseState("predictBase.predictAdvisorStudents",{url:"/predict/advisor/students?customFields&resetFTUE",require:function(){return Promise.all([n.e(17),n.e(30),n.e(83),n.e(79),n.e(122),n.e(252)]).then(n.bind(null,"NKO4"))},pageTitle:"predict.advisor.title",peekStates:["predictAdvisorStudentsFilter","predictMessagingPanel","predictAdvisorStudentProfilePanel","predictCourseStudentPanel"]}).baseState("predictBase.predictCourseBase",{url:"/predict/courses/:courseId",require:function(){return Promise.all([n.e(15),n.e(17),n.e(119),n.e(356)]).then(n.bind(null,"j0gv"))},pageTitle:"predict.course.title"}).baseState("predictBase.predictCourseStudentBase",{url:"/predict/instructor/students/:studentId/course/:courseId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(17),n.e(18),n.e(20),n.e(30),n.e(70),n.e(357)]).then(n.bind(null,"PPqB"))},peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentProfilePanel",{url:"/profile/:studentId",require:function(){return Promise.all([n.e(17),n.e(30),n.e(79),n.e(120),n.e(320)]).then(n.bind(null,"W7NY"))},panelClass:"full",peekStates:["predictMessagingPanel","predictCourseStudentPanel","predictFavoritesPanel","predictAdvisorStudentProfilePanel.course-performance","predictAdvisorStudentProfilePanel.advisor-notes","predictAdvisorStudentProfilePanel.interests"],pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.course-performance",{url:"/outline",views:{"student-details-tabs-content@":{require:function(){return Promise.all([n.e(17),n.e(287)]).then(n.bind(null,"fQnU"))}}},peekStates:["predictCourseStudentPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.advisor-notes",{url:"/notes-contributors",views:{"student-details-tabs-content@":{require:function(){return Promise.all([n.e(17),n.e(30),n.e(79),n.e(120),n.e(408)]).then(n.bind(null,"kgDa"))}}},peekStates:["predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictAdvisorStudentProfilePanel.interests",{url:"/interests",views:{"student-details-tabs-content@":{require:function(){return n.e(284).then(n.bind(null,"clqd"))}}},peekStates:["predictFavoritesPanel","predictMessagingPanel"],panelClass:"full",pageTitle:"predict.advisor.student-profile.title"}).peekState("predictCourseStudentPanel",{url:"/courses/:courseId/students/:studentId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(17),n.e(18),n.e(20),n.e(30),n.e(70),n.e(370)]).then(n.bind(null,"Wwzz"))},panelClass:"full",peekStates:["predictMessagingPanel"],pageTitle:"predict.instructor.title"}).peekState("predictAdvisorStudentsFilter",{url:"/filter",require:function(){return Promise.all([n.e(17),n.e(122),n.e(379)]).then(n.bind(null,"TRcT"))},panelClass:"peek",pageTitle:"predict.advisor.title"}).peekState("predictMessagingPanel",{url:"/messagingPanel?messageStudentId&messageCourseId&messageType&messageLaunchOrigin",require:function(){return Promise.all([n.e(17),n.e(264)]).then(n.bind(null,"G6j8"))},panelClass:"peek",pageTitle:"predict.messagingPanel.title"}).peekState("predictFavoritesPanel",{url:"/favorites/:favoriteId?favoriteCategory?city&state&region&country",require:function(){return n.e(319).then(n.bind(null,"pI+d"))},panelClass:"peek",pageTitle:"predict.favoritesPanel.title"})}])},IVtk:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"f",function(){return d}),n.d(t,"e",function(){return p});var r,i,o,s,a=n("Q/M7");function u(e){var t=e.nextParams,n=t.action,r=t.courseId,i=t.contentId,o=t.attemptId;switch(n){case s.OpenDocument:c("ultra/courses/"+r+"/outline/edit/document/"+i+"?courseId="+r);break;case s.OpenAttempt:c("ultra/courses/"+r+"/outline/assessment/"+i+"/overview/attempt/"+o+"?courseId="+r);break;case s.ReviewAttempt:c("ultra/courses/"+r+"/outline/assessment/"+i+"/overview/attempt/"+o+"/review?courseId="+r);break;case s.ReviewFeedback:c("ultra/courses/"+r+"/outline/assessment/"+i+"/overview/attempt/"+o+"/review/feedback?courseId="+r);break;default:e.go("base.not-found")}}function c(e){var t=a.c(e);a.p(t)}function l(){var e=window.webkit;return!!(e&&e.messageHandlers&&e.messageHandlers.MobileApp)||!!window.MobileApp}function d(e){try{var t=window.webkit;if(t&&t.messageHandlers&&t.messageHandlers.MobileApp&&t.messageHandlers.MobileApp.postMessage(e),window.MobileApp){var n=JSON.stringify(e);window.MobileApp.sendMessageToMobile(n)}}catch(e){console.error(e)}}function p(e,t){var n,i;if(l())try{var s=e.name&&e.name.split(".peek.").pop(),a=t.name&&t.name.split(".peek.").pop(),u=s&&f((n={},n[o.QuestionGoalAlignmentForStudent]=r.AttemptGoalAlignmentOpened,n[o.RubricEvaluation]=r.AttemptRubricOpened,n[o.RubricView]=r.AttemptRubricOpened,n[o.AssessmentSubmissionFeedback]=r.AttemptFeedbackOpened,n))[s]||a&&f((i={},i[o.QuestionGoalAlignmentForStudent]=r.AttemptGoalAlignmentClosed,i[o.RubricEvaluation]=r.AttemptRubricClosed,i[o.RubricView]=r.AttemptRubricClosed,i[o.AssessmentSubmissionFeedback]=r.AttemptFeedbackClosed,i))[a];u&&u()}catch(e){console.error(e)}}function f(e){return Object.keys(e).reduce(function(t,n){return t[n]=function(){d({type:e[n],status:i.Success})},t},{})}!function(e){e.AttemptSaveAndClosed="ATTEMPT_SAVE_AND_CLOSED",e.AttemptSubmitted="ATTEMPT_SUBMITTED",e.AttemptFeedbackOpened="ATTEMPT_FEEDBACK_OPENED",e.AttemptRubricOpened="ATTEMPT_RUBRIC_OPENED",e.AttemptGoalAlignmentOpened="ATTEMPT_GOAL_ALIGNMENT_OPENED",e.AttemptFeedbackClosed="ATTEMPT_FEEDBACK_CLOSED",e.AttemptRubricClosed="ATTEMPT_RUBRIC_CLOSED",e.AttemptGoalAlignmentClosed="ATTEMPT_GOAL_ALIGNMENT_CLOSED",e.AttemptOpened="ATTEMPT_OPENED",e.AttemptReviewOpened="ATTEMPT_REVIEW_OPENED",e.DocumentOpened="DOCUMENT_OPENED"}(r||(r={})),function(e){e.Success="Success",e.Fail="Fail"}(i||(i={})),function(e){e.QuestionGoalAlignmentForStudent="question-goal-alignment-for-student",e.AssessmentSubmissionFeedback="assessment-submission-feedback",e.RubricEvaluation="rubric-evaluation",e.RubricView="rubric-view"}(o||(o={})),function(e){e.OpenAttempt="OPEN_ATTEMPT",e.OpenDocument="OPEN_DOCUMENT",e.ReviewAttempt="REVIEW_ATTEMPT",e.ReviewFeedback="REVIEW_FEEDBACK"}(s||(s={}))},"IbG+":function(e,t,n){e.exports=n("ZJ/X")(6)},Iftj:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",function(){return c}),n.d(t,"serviceName",function(){return l}),n.d(t,"ScaleType",function(){return d});var r=n("mrSG"),i=(n("TeAI"),n("oSB+")),o=n.n(i),s=n("yCC5"),a=n("Rjd/"),u=n("nkTj"),c="ultra.components.models.grade.gradeSchema",l=s.jb,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Score=new t("SCORE"),t.Percent=new t("PERCENT"),t.Text=new t("TEXT"),t.Complete=new t("COMPLETE"),t.Tabular=new t("TABULAR"),t}(o.a);a.a.factory(l,["restmod",u.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}},$extend:{Record:{getPossiblePoints:function(){if(d.Score.isEqualTo(this.scaleType))throw new Error("Possible points must be entered by the user for schemas with a scale type of Score");return 100}}}})}])},"Is+C":function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"a",function(){return b});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("pjml"),a=n("4nF1"),u=n("X455"),c=n("12mu"),l=n("TnpK"),d=n("o5Lu"),p=n("8jzW"),f=n("Sa5G"),m=n("Q/M7"),h=n("fYJU"),g="ultra.components.services.scorm",v="scorm",b="geolocation *; microphone *; camera *; midi *; encrypted-media *",y=function(){function e(e,t,n,r,i,o,s,a,u,c,l){this.$q=e,this.$rootScope=t,this.$window=n,this.cacheFactory=r,this.contextCourseMembership=i,this.modalService=o,this.ultraState=s,this.gradeService=a,this.scoreProviderHelper=u,this.CourseModel=c,this.contextUser=l,this.scormAvailabilityCache={}}return e.prototype.isScormAvailable=function(e){var t=this,n=this.scormAvailabilityCache[e];return n?this.$q.when(n.toolEnabledSetting.isAvailable):this.CourseModel.$new(e).contentHandlers.$find(f.g.RusticiScorm.toString()).$allow([403]).$asPromise().then(function(n){return(t.scormAvailabilityCache[e]=n).toolEnabledSetting.isAvailable})},e.prototype.scormLaunch=function(e){return r.__awaiter(this,void 0,void 0,function(){var t,n,s,a,u;return r.__generator(this,function(r){switch(r.label){case 0:return t=this.$q.defer(),[4,this.$q.all([this.getContent(e.courseId,e.content,e.contentId),e.showPreLaunchPanel?this.getMembership(e.courseId):null])];case 1:return n=r.sent(),s=n[0],a=n[1],e.showPreLaunchPanel&&this.isGradable(s)?s.canEdit()||this.isInstructorInCourse(a)?(u=o.fromJson(this.scoreProviderHelper.getSubmissionListStateRef(f.B.Scorm,{courseId:e.courseId,contentId:e.contentId},p.a.GenerateStateParams)),this.ultraState.goPeekState(u.state,u.args).then(function(){t.resolve()}).catch(function(e){t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})})):this.isStudentInCourse(a)&&this.ultraState.goPeekState("scorm-overview.student",{courseId:s.courseId,contentId:s.id}).then(function(){t.resolve()}).catch(function(e){t.reject({errorMessage:"Failed to open the SCORM submission list.",errorResponse:e})}):this.launchScormLink(i.merge(e,{content:s}),t),[2,t.promise]}})})},e.prototype.launch=function(e,t,n,r){void 0===r&&(r=!1),e=m.c(e),e=m.a(e,"from_ultra","true"),r?this.$window.open(e):this.ultraState.goPeekState("scorm-launch-frame",{toolHref:e,courseId:t,contentId:n})},e.prototype.launchScormLink=function(e,t){var n;e.content&&(n=this.getLaunchLinkFromContent(e.content)),n&&(this.determineLaunchTarget(i.merge(e,{launchLink:n})),t.resolve())},e.prototype.determineLaunchTarget=function(e){e.content&&e.content.isScorm()&&this.launch(e.launchLink,e.content.courseId,e.content.id,e.content.launchInNewWindow)},e.prototype.getLaunchLinkFromContent=function(e){var t=e.contentDetail&&e.contentDetail[e.contentHandler.toString()];return t&&t.launchUrl||null},e.prototype.scormEditColumn=function(e){var t=this;this.getContent(e.courseId,e.ui.content,e.contentId).then(function(n){e.ui.content=n;var r=a.a.create(n).getEditState();t.ultraState.goPeekState(r,{contentId:n.id})})},e.prototype.isStudentInCourse=function(e){return e.isStudentMembership()},e.prototype.isInstructorInCourse=function(e){return e&&e.isActAsInstructorMembership()},e.prototype.isGradable=function(e){return!!e.getScormGradebookItems().length},e.prototype.getContent=function(e,t,n){return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():this.$q.when(null)},e.prototype.getMembership=function(e){return this.contextCourseMembership.courseMembership?this.$q.when(this.contextCourseMembership.courseMembership):this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()},e.prototype.loadScormGrade=function(e){var t=this,n=e.courseId,r=e.column,i=e.grade;return(i?i.$asPromise&&i.$asPromise()||this.$q.when(i):this.gradeService.loadGrade({gradeQueryParams:{},courseId:n,column:r,userId:this.contextUser.userId},!1)).then(function(e){return e&&e.attempts.$fetch({fields:"id,status,attemptDate"}).$asPromise().then(function(e){return e.length&&e.reduce(function(e,t){return e.attemptDate>t.attemptDate?e:t})}).then(function(e){return e&&e.id}).then(function(r){if(!r)return e;var i=t.CourseModel.$new(n),o={expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",attemptId:r};return t.gradeService.loadAttempt(e,i,o)})})},e.$inject=["$q","$rootScope","$window","DSCacheFactory",u.d,c.b,l.d,d.g,p.c,s.o.serviceName,h.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(y);o.module(g,[u.a,l.b,p.b,d.f,s.R]).service(v,y).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},IyP6:function(e,t,n){},J0Qq:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("mrSG"),i=n("IbG+"),o=n("0JpG"),s="ultra.directives.bbDate",a=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var s,a=function(n){var s=t.bbLocalize.getFormatEnum(o.ILocaleDateFormat,i.format)||o.ILocaleDateFormat.Full,a=function(e){"bb-date"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)};null==n?a(""):t.bbLocalize.formatDate(n,s,e).then(a)},u=function(n){return n?new Date(t.$parse(n)(e)):null};"true"===i.autoUpdate?i.$observe("bbDate",function(){s=u(i.bbDate),a(s)}):(s=t.$parse(n)(e)||u(i.bbDate),a(s))}},e.$inject=["$parse",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(a);i.module(s,[o.moduleName]).directive("bbDate",["$injector",function(e){return e.instantiate(a)}])},J8LU:function(e,t,n){e.exports=n("ZJ/X")(44)},JHPD:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-small-attention",use:"icon-small-attention-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-attention"><rect x="1" y="1" width="14" height="14" rx="7" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M8 4v5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><circle cx="8" cy="12" r=".5" /></symbol>'});i.add(o);e.exports=o},"JRp+":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.conversion.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("conversion-analysis",{url:"/conversionAnalysis",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},require:function(){return Promise.all([n.e(73),n.e(403)]).then(n.bind(null,"0y0M"))},pageTitle:"ultra.convert.analysis.pageTitle"}).peekState("conversion-risk-analysis",{url:"/conversionRiskAnalysis",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},require:[function(){return Promise.all([n.e(29),n.e(233),n.e(402)]).then(n.bind(null,"VtI1"))},function(){return Promise.all([n.e(29),n.e(233),n.e(391)]).then(n.bind(null,"ubcj"))}],pageTitle:"ultra.convert.analysis.pageTitle"})}])},JURN:function(e,t,n){},JXhc:function(e,t,n){"use strict";n.d(t,"c",function(){return c}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});var r=n("mrSG"),i=n("IbG+"),o=n("0JpG"),s=n("hlSw"),a=n("TnpK"),u=n("3bn4"),c="ultra.course.content.assessment.question-goal-alignment",l="question-goal-alignment",d="question-goal-alignment-for-student",p=["course","goal-alignment","goal"],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.url="/goalAlignment/:questionId/:questionIndex",t.panelClass="peek assessment-question-goal-peek",t}return r.__extends(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentContent","currentCourse",o.serviceName,a.d,"$injector",function(t,n,r,i,o,a){return void 0!==n&&void 0===n.id?t.when([]):t.when(null).then(function(){if(void 0===n)return a.invoke(s.a.currentContent,null,{currentCourse:r,translations:{}}).then(function(e){n=e})}).then(function(){return t.all([r.assessments.$buildRaw({id:n.getDeployedAssessment().assessment.id}).questions.$find(o.nextParams.questionId,{expand:"alignedGoals"}).$asPromise(),i.loadBundle("features/"+p.join("/"))]).then(function(t){var n=t[0];return e.setupGoalAlignableContent(n,i,o)})})}]},t.prototype.getPeekStateName=function(){return l},t.prototype.getOverrideSubTitle=function(){return[o.serviceName,a.d,function(e,t){return e.translateSync({locale:null,key:"components.directives.assessment-question.question-title",params:{index:t.nextParams.questionIndex},noWrap:!0})}]},t.prototype.setupGoalAlignableContent=function(e,t,n){return[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:p.join(".")+".goalsAlignedWithThisQuestion"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()},isCurrentUserEligibleToAlignGoals:function(){return e.isCurrentUserEligibleToAlignGoals()},alignedGoals:e.alignedGoals.map(function(t){return t.content=e,t})}]},t.$inject=["$injector","$q"],t}(u.a),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentCourse","contentData",o.serviceName,a.d,function(t,n,r,o,s){var a=t.when(null);return r.courseContent.isGroupContent&&r.groupAttempt?a=n.gradebook.groupAttempts.$find(r.groupAttempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise():!r.courseContent.isGroupContent&&r.attempt&&(a=n.gradebook.attempts.$find(r.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),t.all([a,o.loadBundle("features/"+p.join("/")),o.loadBundle("components/directives/assessment/assessment-question")]).then(function(t){var n=t[0],a={};if(n){var u=n.getToolAttemptDetailItem(r.gradingColumn.scoreProviderHandle);(u&&u.questionAttempts||[]).forEach(function(e){e.question&&e.question.id===s.nextParams.questionId&&(a=i.extend(e.question,{getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+e.question.id},isCurrentUserEligibleToAlignGoals:function(){return!1}}))})}return e.setupGoalAlignableContent(a,o,s)})}]},t.prototype.getPeekStateName=function(){return d},t}(f);i.module(c,[a.b,o.moduleName]).config([a.c,function(e){[new f,new m].forEach(function(t){e.peekState(t.getPeekStateName(),t)})}])},JrDC:function(e,t,n){"use strict";function r(e,t){if(t instanceof e)return t.$pk;if(!t.$scope||"object"!=typeof t.$scope)throw new Error("model_utility.findModelPkInScope could not find $scope object on "+t);return r(e,t.$scope)}n.d(t,"a",function(){return r})},"K/D1":function(e,t,n){"use strict";var r=n("mrSG"),i=n("LvDl"),o=n("uC9d"),s=["DELETE","PUT","POST","PATCH","JSONP"],a="_\\d+_\\d+",u=function(){this.cacheTimes={DO_NOT_CACHE:0,INSTANT:500,SHORT:15e3,MEDIUM:6e4,LONG:6e5,PERPETUAL:1/0},this.rules=[{url:"calendars",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"cloudstorages",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:"courses/"+a,methods:["GET"],duration:this.cacheTimes.LONG},{url:"courses/"+a,methods:s,onUpdate:function(e,t){t(new RegExp("users/.*"))}},{url:"courses/"+a+"/contents/"+a,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/contents/ROOT/children",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/convertToUltra/conversionStatus",methods:["GET"],duration:this.cacheTimes.INSTANT,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/convertToUltra"),i=n.match(r);t(new RegExp("courses/"+i[1]))}},{url:"courses/"+a+"/tools",methods:["GET"],duration:this.cacheTimes.LONG},{url:"courses/"+a+"/assessments/"+a+"/questions",methods:["GET"],duration:this.cacheTimes.MEDIUM},{url:"courses/"+a+"/discussionboards/default/forums/"+a+"/messages/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/discussionboards/default/forums/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/discussionboards/default/forums/"+i[2]+"/messages"))}},{url:"courses/"+a+"/gradebook/attempts/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/.*"))}},{url:"courses/"+a+"/gradebook/attempts/"+a+"/assessment/answers/"+a+"/grades",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/.*"))}},{url:"courses/"+a+"/gradebook/columns/"+a,methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/grades",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/grades/"+a+"/attempts",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/columns/"+a+"/.+",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook/columns/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/columns/"+i[2]+"/.*"))}},{url:"courses/"+a+"/gradebook/columns/"+a+"/summary",methods:["GET"],duration:this.cacheTimes.INSTANT},{url:"courses/"+a+"/gradebook/grades/bulkView",methods:["GET"],duration:this.cacheTimes.DO_NOT_CACHE},{url:"courses/"+a+"/gradebook/groupAttempts/"+a+"/activities",methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/gradebook/groupAttempts/("+a+")"),i=n.match(r);t(new RegExp("courses/"+i[1]+"/gradebook/groupAttempts/"+i[2]+"/.*")),t(new RegExp("courses/"+i[1]+"/gradebook/columns/.*"))}},{url:"courses/"+a+"/memberships/"+a,methods:s,onUpdate:function(e,t){var n=e.url,r=new RegExp("courses/("+a+")/memberships"),i=n.match(r);t(new RegExp("courses/"+i[1]+".*"))}},{url:"courses/"+a+"/memberships",methods:["GET"],duration:this.cacheTimes.SHORT},{url:"courses/"+a+"/users/"+a,methods:["GET"],duration:this.cacheTimes.LONG},{url:"users/"+a,methods:s,onUpdate:function(e,t){t(new RegExp("users/.*"))}},{url:"users/(?:me|"+a+")",methods:["GET"],duration:this.cacheTimes.LONG},{url:"users/"+a+"/memberships",methods:["GET"],duration:this.cacheTimes.LONG},{url:"terms",methods:["GET"],duration:this.cacheTimes.PERPETUAL},{url:".+",methods:["GET"],duration:this.cacheTimes.INSTANT}]};function c(e){return void 0===e&&(e=""),Array.isArray(e)?e.sort().join(","):e.split(",").sort().join(",")}var l=function(){this.$get=[function(){return{}}]},d=function(){function e(e){var t=this;this.cacheRules=e,this.cachingEnabled=!0,this.cachedExpandedRequests=new Map,this.queuedRequests=new Map,this.requestCache=new Map,this.disableCaching=function(){t.cachingEnabled=!1},this.$get=["$q","$log",o.c,function(e,t,n){var r=this;n.listen(function(e){switch(e.type){case"clear":r.removeCacheEntries(e.pattern||".*")}});return{request:function(n){if(!r.cachingEnabled||"GET"!==n.method||!r.isApiUrl(n.url)||n.cache)return n;var i=r.handleRequest(n);return i.url.match(/^blob/)?i:function(n){var i=r.makeKeyFromRequest(n);if(r.queuedRequests.has(i))return t.info("Easing "+i),r.queuedRequests.get(i).pendingRequestConfig.promise;var o=e.defer();return o.promise.finally(function(){r.queuedRequests.delete(i)}),r.queuedRequests.set(i,{pendingRequestConfig:o}),e.resolve(n)}(i).then(function(e){return e})},requestError:function(n){return t.error("requestError: ",n),e.reject(n)},response:function(e){if(e.config.url.match(/^blob/)){var t=e.config.headers;return e.config.url=t.originalUrl,e.config.params=JSON.parse(t.originalParams),e}return r.cachingEnabled&&"GET"===e.config.method&&r.isApiUrl(e.config.url)&&!e.config.cache?r.handleResponse(e):e},responseError:function(t){if(!t||!t.config)return e.reject(t);var n=r.makeKeyFromResponse(t);return r.queuedRequests.has(n)&&r.queuedRequests.get(n).pendingRequestConfig.reject(t.data),e.reject(t)}}}],this.removeCacheEntries=function(e){t.requestCache.forEach(function(n,r){(e instanceof RegExp?e:new RegExp(e+"$")).test(n.baseUrl)&&(t.requestCache.delete(r),t.cachedExpandedRequests.delete(n.baseUrl),t.queuedRequests.has(r)&&(t.queuedRequests.get(r).pendingRequestConfig.reject("Canceled Easing: "+r),t.queuedRequests.delete(r)),URL.revokeObjectURL(n.documentUrl))})},this.requestCachingRules=e.rules,setInterval(function(){var e=(new Date).getTime();t.requestCache.forEach(function(n){e>n.expires&&t.removeCacheEntries(n.baseUrl)})},this.cacheRules.cacheTimes.MEDIUM)}return e.prototype.getRule=function(e,t){return this.requestCachingRules.find(function(n){var r=n.urlRegex?n.urlRegex:new RegExp(n.url+"$","i");return n.methods.indexOf(t.toUpperCase())>-1&&r.test(e)})},e.prototype.handleRequest=function(e){return this.resolveCachedEntry(e)||e},e.prototype.handleResponse=function(e){if(!this.isApiUrl(e.config.url)||e.config.url.match(/^blob/))return e;var t=e.config.method.toUpperCase(),n=e.config.url,i=this.getRule(n,t),o=this.makeKeyFromResponse(e);return i&&!this.requestCache.has(o)&&this.insertCacheEntry(r.__assign({},e),i.duration),this.resolveEasing(e),e},e.prototype.getCacheEntry=function(e){var t,n=this.makeKeyFromRequest(e),r=this.lookupExpandedCacheEntry(e);if(r?t=r:this.requestCache.has(n)&&(t=this.requestCache.get(n)),t){if((new Date).getTime()<t.expires)return t;this.removeCacheEntries(t.baseUrl)}return{}},e.prototype.getCleanUrl=function(e){return e.slice(e.indexOf("/learn/api/v1")+"/learn/api/v1".length+1)},e.prototype.insertCacheEntry=function(e,t){var n=this.makeKeyFromResponse(e),r=e.config.url,i={documentUrl:URL.createObjectURL(new Blob([JSON.stringify(e.data)],{type:"application/json"})),baseUrl:r,expires:t+(new Date).getTime()};if(this.requestCache.set(n,i),e.config.params&&e.config.params.expand){var o=e.config.params.expand;if(this.cachedExpandedRequests.has(r)){var s=this.cachedExpandedRequests.get(r);this.cachedExpandedRequests.set(r,s.concat([{cacheKey:n,expand:o}]))}else this.cachedExpandedRequests.set(r,[{cacheKey:n,expand:o}])}},e.prototype.isApiUrl=function(e){return e.indexOf("/learn/api/v1")>-1},e.prototype.lookupExpandedCacheEntry=function(e){var t=e.url,n=e.params;if(n&&n.expand&&this.cachedExpandedRequests.has(t)){var r=this.cachedExpandedRequests.get(t).find(function(e){var t=n.expand.split(","),r=e.expand.split(",");return!i.difference(t,r).length});if(r)return this.requestCache.get(r.cacheKey)}},e.prototype.makeKeyFromRequest=function(e){var t=this.getCleanUrl(e.url);e.params=e.params||{};var n=e.params,i=n.fields,o=n.expand,s=r.__rest(n,["fields","expand"]),a=c(i),u={url:t,expand:c(o),fields:a,rest:s};return JSON.stringify(u)},e.prototype.makeKeyFromResponse=function(e){return this.makeKeyFromRequest(e.config)},e.prototype.resolveCachedEntry=function(e){if(e.url.match(/^blob/))return e;var t=this.getCacheEntry(e);return t&&t.documentUrl?r.__assign({},e,{url:t.documentUrl,params:{},headers:{originalUrl:e.url,originalParams:JSON.stringify(e.params)}}):e},e.prototype.resolveEasing=function(e){var t=this.makeKeyFromResponse(e),n=this.queuedRequests.get(t);if(n){var r=this.resolveCachedEntry(e.config);n.pendingRequestConfig.resolve(r)}},e}();var p="ultra-session-event-existing-window",f="ultra-session-event-new-window",m=function(e){if(e.newValue)if(e.key===p)null==window.sessionStorage.getItem("ultra-session-updating-storage")&&(window.sessionStorage.setItem("ultra-session-updating-storage","updating"),setTimeout(function(){window.localStorage.setItem(f,JSON.stringify(window.sessionStorage)),window.localStorage.removeItem(f),window.sessionStorage.removeItem("ultra-session-updating-storage")})),window.localStorage.setItem(f,JSON.stringify(window.sessionStorage));else if(e.key===f&&!window.sessionStorage.length){var t=JSON.parse(e.newValue);for(var n in t)window.sessionStorage.setItem(n,t[n])}},h=n("5MwF");n.d(t,"a",function(){return g});var g="ultra.components.services.learn.api.cache";angular.module("ultra.components.services.learn.api.cacheRules",[]).constant("learnApiCache.CacheRules",new u);var v=angular.module(g,["ultra.components.services.learn.api.cacheRules"]);h.a.features.learnApiCaching?v.provider("learnApiCacheService",["learnApiCache.CacheRules",d]).service(o.c,o.a).config(["$provide","$httpProvider","learnApiCacheServiceProvider",function(e,t,n){window.addEventListener("storage",function(e){(function(e){return[p,f].some(function(t){return t===e.key})})(e)&&n.disableCaching()}),window.addEventListener("storage",m,!1),localStorage.setItem(p,p),localStorage.removeItem(p);e.decorator("$http",["$delegate",function(e){var t=function(t){if(null!=t.cache)return e(t);var r=n.getRule(t.url,t.method.toUpperCase());return r&&r.onUpdate&&"function"==typeof r.onUpdate&&r.onUpdate(t,n.removeCacheEntries),-1!==s.indexOf(t.method.toUpperCase())&&n.removeCacheEntries(t.url),e(t)};return function(e,t){!function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.each(e,function(e){t[e]=function(n,r){return t(angular.extend({},r||{},{method:e,url:n}))}})}("delete","get","head","jsonp"),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i.each(e,function(e){t[e]=function(n,r,i){return t(angular.extend({},i||{},{method:e,url:n,data:r}))}})}("post","put","patch"),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];i.each(n,function(n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})})}("defaults","pendingRequests")}(e,t),t}]),URL&&URL.hasOwnProperty("createObjectURL")&&t.interceptors.push("learnApiCacheService")}]):v.provider("learnApiCacheService",[l]).service(o.c,o.b)},K3JI:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r=n("IbG+"),i="ultra.components.directives.hoverMenuOpacity",o=function(){function t(){this.restrict="A",this.link=function(t,n){n.on("focus",".hover-menu a, .hover-menu button",function(t){0===e("body.hide-focus-outline").length&&e(t.target).closest(".hover-menu").css({opacity:1})}).on("blur",".hover-menu a, .hover-menu button",function(t){e(t.target).closest(".hover-menu").removeAttr("style")})}}return t.$inject=["$injector"],t}();r.module(i,[]).directive("bbHoverMenuOpacity",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("EVdn"))},K4f8:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.IncorrectAnswers=new t("INCORRECT_ANSWERS"),t.InstructorFeedback=new t("INSTRUCTOR_FEEDBACK"),t.AllAnswers=new t("ALL_ANSWERS"),t.CorrectAnswers=new t("CORRECT_ANSWERS"),t.UserAnswers=new t("USER_ANSWERS"),t.Score=new t("SCORE"),t}(n.n(i).a);t.a=o},KRhF:function(e,t){e.exports='<table class="fs-table bb-table">\n  <caption role="alert" class="sr-only">{{ ::config().title }}</caption>\n  <thead>\n    <tr class="table-headings">\n      <th class="table-heading"\n          scope="col"\n          ng-style="{ \'width\': column.widthPercentage, \'min-width\': column.widthPercentage }"\n          ng-repeat="column in config().columns"\n          ng-if="column.visible"\n          data-heading-index="{{ ::$index }}"\n          ng-class="{\n            \'sortable-header\': column.sort,\n            \'ascending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\',\n            \'descending\': $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\'}"\n          ng-attr-aria-sort="{{ $index === config().currentSortColumnIndex && config().currentSortDirection === \'asc\' ? \'ascending\' :\n          $index === config().currentSortColumnIndex && config().currentSortDirection === \'desc\' ? \'descending\' : undefined }}">\n        <button class="button-anchor" ng-if="column.sort" analytics-id="components.directives.table.sort.button">\n          <span class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n          <i class="sort-control">\n            <i class="arrow up" ></i>\n            <i class="arrow down"></i>\n          </i>\n        </button>\n        <span ng-if="!column.sort" class="table-heading-contents" ng-class="{ \'sr-only\': column.srHeading }">{{ column.heading }}</span>\n      </th>\n    </tr>\n  </thead>\n  <tbody ng-if="table.initialDataLoaded || config().showRowsDuringRefresh">\n    <tr ng-repeat="item in tableData()"\n        class="table-row"\n        ng-class="{\'clickable\': config().rowClickFn }"\n        ng-click="config().rowClickFn ? config().rowClickFn(item): null"\n        ng-transclude\n        analytics-id="components.directives.table.rowClick"></tr>\n  </tbody>\n</table>\n<div ng-if="config().pageSize && table.initialDataLoaded">\n  <div bb-infinite-scroll="table.showMore()"\n       infinite-scroll-immediate-check="false"\n       infinite-scroll-total-count="config().totalCount"\n       infinite-scroll-current-count="tableData().length"\n       infinite-scroll-load-limit="config().pageSize"\n       infinite-scroll-container="config().infiniteScrollContainerSelector()"\n       infinite-scroll-tray-id="{{::config().instanceId}}-scroll-tray"></div>\n</div>\n<div class="spinner bb-secondary-color-2" ng-show="!table.initialDataLoaded"></div>'},KiLF:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Continuous=new t("CONTINUOUS"),t.DateRange=new t("DATE_RANGE"),t.FixedNumDays=new t("FIXED_NUM_DAYS"),t}(n.n(i).a);t.a=o},Kpdw:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",function(){return b}),n.d(t,"serviceName",function(){return y}),n.d(t,"CREATE_COLUMN_ID",function(){return S}),n.d(t,"CalculateType",function(){return C}),n.d(t,"AttemptAggregationModel",function(){return $}),n.d(t,"CalculationType",function(){return k}),n.d(t,"parseForumId",function(){return T});var r=n("mrSG"),i=(n("TeAI"),n("LvDl")),o=n("oSB+"),s=n.n(o),a=n("Sa5G"),u=n("z1U9"),c=n("vYaK"),l=n("KrjC"),d=n("3uIF"),p=n("yCC5"),f=n("Rjd/"),m=n("wd/R"),h=n("XfOu"),g=n("fm95"),v=n("eUpQ"),b="ultra.components.services.models.grade.gradeColumn",y=p.fb,S="create",C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Item=new t("ITEM"),t.Category=new t("CATEGORY"),t}(s.a),w=Symbol("forceFetchSummary"),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.parseModel=function(t){return e.parse.call(this,t)},t.getDefault=function(){return t.Average},t.prototype.getLabelKey=function(){return"components.services.grade.aggregation-model."+this.toString().toLowerCase()},t.prototype.getStudentLabelKey=function(){return"course.content.assessment.overview.gradeBasedOn."+this.toString().toLowerCase()},t.Average=new t("AVERAGE"),t.First=new t("FIRST"),t.Highest=new t("HIGHEST"),t.Last=new t("LAST"),t.Lowest=new t("LOWEST"),t}(s.a),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.NonCalculated=new t("NON_CALCULATED"),t.Total=new t("TOTAL"),t.Average=new t("AVERAGE"),t.WeightedTotal=new t("WEIGHTED_TOTAL"),t.MinMax=new t("MINMAX"),t.Custom=new t("CUSTOM"),t}(s.a);function T(e){var t=e.split("/");return t[t.length-1]}f.a.factory(y,["$http","$ngRedux","restmod","$rootScope","$q",c.serviceName,d.a,l.serviceName,function(e,t,n,r,o,s,c,l){return n.model().mix({grades:{hasMany:p.gb},summary:{hasOne:p.r,hooks:{"before-request":function(e){!this.$owner[w]&&this.$owner.isCalculated()&&(e.cache={get:function(){return{}}})}}},groupAssociations:{hasMany:p.L},anonymousGradingReleaseDate:{serialize:"date"},dueDate:{serialize:"date"},dateCreated:{serialize:"date"},dateModified:{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$hooks:{"before-request":function(e){if(this.$url()===e.url&&"DELETE"!==e.method){e.params&&e.params.expand?i.includes(e.params.expand,"gradebookCategory")||(e.params.expand+=",gradebookCategory"):e.params=Object.assign({expand:"gradebookCategory"},e.params)}},"before-save":function(e){e.params||(e.params=new Object),e.params.expand=["externalGrade","gradebookCategory","columnSummary"]},"after-request":function(e){e.data&&e.data.rubricAssociations&&e.data.rubricAssociations.forEach(function(e){h.sortRubricData(e.rubricDefinition)}),e.config&&e.config.params&&e.config.params.expand&&-1!==e.config.params.expand.indexOf("associatedRubrics")&&t.dispatch(u.actions.gradebookColumn.setGradebookColumnInStore(e.data))},"after-feed":function(){Object.defineProperty(this,"columnName",{get:function(){return this.effectiveColumnName},set:function(e){return this.effectiveColumnName=e,this.effectiveColumnName}})}},$extend:{Record:{isTest:function(){return a.B.Test.isEqualTo(this.scoreProviderHandle)},isAssignment:function(){return a.B.UltraAssignment.isEqualTo(this.scoreProviderHandle)},isCalculated:function(){return!k.NonCalculated.isEqualTo(this.calculationType)},isOffline:function(){return this.userCreatedColumn},isAttemptBased:function(){return!this.isCalculated()&&!this.isOffline()&&!this.isAttendance()},isDiscussion:function(){return a.B.Discussion.isEqualTo(this.scoreProviderHandle)},isScorm:function(){return a.B.Scorm.isEqualTo(this.scoreProviderHandle)},isScormSCO:function(){var e=this;if(this.isScorm()){var t=this.ui&&this.ui.content||null,n=t&&!t.isConditionalReleaseLocked()&&t.getScormGradebookItems()||[],r=n&&n.find(function(t){return t.columnId===e.id});return!(!r||r.root)}return!1},isAttendance:function(){return a.B.Attendance.isEqualTo(this.scoreProviderHandle)},isVisible:function(){return this.visible},isHidden:function(){return!this.visible},isVisibleToStudents:function(){return this.isVisible()},isHiddenFromStudents:function(){return this.isHidden()},isMultipleAttempts:function(){return this.multipleAttempts>1||this.isUnlimitedAttempts()},isSingleAttempt:function(){return 1===this.multipleAttempts},isUnlimitedAttempts:function(){return 0===this.multipleAttempts},isCollectExternalSubmissions:function(){return!!this.collectExternalSubmissions},getNumMissing:function(){return this.isOffline()?this.summary.numNeedsGrading:this.summary.numEligibleToBeGraded-this.summary.numStudentSubmissions()},getNumMissingIfLate:function(){return this.isCalculated()||!this.isLate()?NaN:this.getNumMissing()},getVisibilityAsStudent:function(){return this.isVisibleToStudents()?g.Visibility.Visible:g.Visibility.Hidden},setVisibility:function(e){switch(e){case g.Visibility.Visible:this.visible=!0;break;case g.Visibility.Hidden:this.visible=!1}},canEdit:function(){return this.permissions&&this.permissions.edit},postReadyGrades:function(){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},function(e){this.ui.numOfGradesPosted=e.data.count}).$asPromise().then(function(e){return e.ui.numOfGradesPosted})},postReadyGroupAttempts:function(e){var t=this;return this.$send({method:"POST",url:this.$url()+"/groupAssociations/"+e.groupAssociationId+"/postReadyGroupGrades",data:{}},function(e){t.ui.numOfAttemptsPosted=e.data.count}).$asPromise().then(function(e){return e.ui.numOfAttemptsPosted})},getGroupGrade:function(t,n){var r=this,i=n?{expand:"instructorFeedback,groupMembersGrades"}:null;return e.get(this.$url()+"/groupAssociations/"+t+"/grades",i&&{params:i}).then(function(e){var t=l.$buildRaw(e.data);return delete t.id,t.groupMembersGrades&&(t.groupMembersGrades=t.groupMembersGrades.map(function(e){return r.grades.$buildRaw(e)})),t})},getGroupAttemptByGroupAssociationId:function(e,t){void 0===t&&(t=!1);var n={expand:t?"attempts,toolAttemptDetail,viewUrl":"attempts,toolAttemptDetail",excludeUnavailableMembers:!0};return this.groupAssociations.$new(e).groupAttempts.$fetch(n).$asPromise().then(function(e){return e&&e[0]})},getGradeIdToAttempt:function(e,t){var n;return this.withParams(e).$send({method:"GET",url:this.$url()+(t?"/groupAttempts":"/attempts")},function(e){var r=this;Object.keys(e.data.lookup).forEach(function(n){e.data.lookup[n]=t?r.grades.$new(n).groupAttempts.$decode(e.data.lookup[n]):r.grades.$new(n).attempts.$decode(e.data.lookup[n])}),n=e.data}).$asPromise().then(function(){return n})},getContentGroupIdToGroupAttempt:function(e){var t;return(e?this.withParams(e):this).$send({method:"GET",url:this.$url()+"/groupAttempts"},function(e){var n=this;Object.keys(e.data.lookup).forEach(function(t){var r=e.data.lookup[t][0];r.submissionResults&&r.submissionResults.results["mdb-sa"]&&(r.originalityProcessed=r.submissionResults.results["mdb-sa"].originalityProcessed,r.originalityScore=r.submissionResults.results["mdb-sa"].originalityScore),e.data.lookup[t]=s.$new(n.courseId).gradebook.groupAttempts.$decode(e.data.lookup[t]),e.data.lookup[t][0].attempts&&(e.data.lookup[t][0].attempts=s.$new(n.courseId).gradebook.attempts.$decode(e.data.lookup[t][0].attempts))}),t=e.data}).$asPromise().then(function(){return t})},hasEvaluations:function(){return this.getGradeIdToAttempt({}).then(function(e){var t=!1;return e&&e.lookup&&i.each(Object.keys(e.lookup),function(n){return i.each(e.lookup[n],function(e){return e&&e.rubricEvaluation&&(t=!0),!t}),!t}),t})},createAttempt:function(e,t,n,r){return n&&(e.groupId=r),this.$send({method:"POST",url:this.$url()+(n?"/groupAttempts":"/attempts"),data:e.$wrap&&e.$wrap()||e,params:t},function(e){this.createdAttempt=n?s.$new(this.courseId).gradebook.groupAttempts.$buildRaw(e.data):s.$new(this.courseId).gradebook.attempts.$buildRaw(e.data)}).$allow([403]).$asPromise().then(function(e){return e&&e.createdAttempt?e.createdAttempt:e})},countAttempts:function(){var e=o.defer();return this.$send({method:"GET",url:this.$url()+"/attempts/count"},function(t){var n=null;return t.data&&(n=t.data.count),e.resolve(n)},function(t){return e.reject(t)}).$allow([403]),e.promise},timeUntilDueDate:function(e){if(this.dueDate){var t=m(this.dueDate),n=m(v.a.getServerTime());return t.diff(n,e)}return null},daysUntilDueDate:function(){return this.timeUntilDueDate("days")},isLate:function(){return!!this.dueDate&&this.dueDate<=v.a.getServerTime()},isUserReconciler:function(e){return!!(this.delegatedGrading&&this.delegatedGraders&&this.delegatedGraders.some(function(t){return t.userId===e&&t.canReconcile&&!t.isUnassigned}))},forceDelete:function(){var e=this;if(this.contentId)throw new Error("Content based column must be deleted by deleting associated content");return(a.B.PartnerCloud.isEqualTo(this.scoreProviderHandle)&&this.linkId?c.delete(this.courseId,this.linkId):this.withParams({onlyIfEmpty:!1}).$destroy().$asPromise()).then(function(){return r.$broadcast("bb-delete-column",e),e})},hasRubricAssociation:function(){return null!=this.rubricAssociations&&this.rubricAssociations.length>0},getRubricAssociation:function(){return this.hasRubricAssociation()?this.rubricAssociations[0]:null},getAssociatedRubricId:function(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricId:null},getAssociatedRubric:function(){return this.hasRubricAssociation()?this.rubricAssociations[0].rubricDefinition:null},setRubricAssociation:function(e){this.rubricAssociations=e?[{rubricId:e}]:[]},forceResolveSummary:function(){var e=this;return this[w]=!0,this.summary.$resolve().$then(function(){delete e[w]})},forceFetchSummary:function(e){var t=this;return void 0===e&&(e={}),this[w]=!0,this.summary.$fetch(e).$then(function(){delete t[w]})},alwaysOverride:function(){var e=this,t=!1;return[a.B.Test,a.B.UltraAssignment,a.B.Discussion,a.B.Scorm].forEach(function(n){n.isEqualTo(e.scoreProviderHandle)&&(t=!0)}),t},isQuestionAnalysisAvailable:function(){return this.isAssignment()||this.isTest()},canSeeFinalGrade:function(e){return this.delegatedGrading?!this.anonymousGrading&&this.isUserReconciler(e.id):!this.anonymousGrading}},Collection:{getOverallColumn:function(){return this.$send({method:"GET",url:this.$url()+"/overall"},function(e){this.overallList=e.data.results}).$asPromise()},attachRelatedContentsByScoreProviderHandle:function(e){var t=this;if(!this.length)return o.when(this);var n=s.$new(this[0].courseId),r=this.filter(function(t){return e.isEqualTo(t.scoreProviderHandle)}),i=new Set(r.map(function(e){return e.contentId})),a=Array.from(i.values()).map(function(e){return n.contents.$find(e).$suppressErrorDialog().$asPromise()});return o.all(a).then(function(e){return r.forEach(function(t){t.ui.content=e.find(function(e){return e.id===t.contentId})}),t})},indexOfItemById:function(e){return this.$indexOf(function(t){return t.id===e})}}}})}])},KrjC:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",function(){return d}),n.d(t,"serviceName",function(){return p});n("TeAI");var r=n("LvDl"),i=n("IbG+"),o=n("wd/R"),s=n("Sa5G"),a=n("yCC5"),u=n("Rjd/"),c=n("eUpQ"),l=n("nkTj"),d="ultra.components.services.models.gradeDetail",p=a.gb;u.a.factory(p,["restmod",l.d,function(e,t){return e.model().mix({attempts:{hasMany:a.cb,hooks:{"after-fetch-many":function(){var e=this;this.forEach(function(t){t.permissions=e.permissions})}}},column:{ignore:"CU"},groupAttempts:{hasMany:a.hb},user:{belongsTo:a.Ac},ui:{mask:!0,init:function(){return{currentAttemptIndex:0,isCommentBoxShown:!1,areAllAttemptsDeleted:!1}}},lastOverrideDate:{serialize:"date"},$extend:{Record:{isMissing:function(e){return!(this.isGraded()||!(e||i.isUndefined(e)&&!this.isSubmitted())||!this.column||!this.column.dueDate)&&o(this.column.dueDate).isBefore(c.a.getServerTime())},isGraded:function(){return null!=this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade&&""!==this.displayGrade.grade)},isOverrideGrade:function(){return!s.s.NoOverride.isEqualTo(this.manualStatus)&&(null!=this.manualGrade||null!=this.manualScore)},isReadyToPost:function(){return s.s.NoOverride.isEqualTo(this.manualStatus)&&this.isGraded()&&!this.hasGradeBeenPosted||s.s.ReadyToPost.isEqualTo(this.manualStatus)},isPosted:function(){return!this.isCalculatedColumnGrade&&(s.s.NoOverride.isEqualTo(this.manualStatus)&&(this.hasGradeBeenPosted||!this.hasOwnProperty("hasGradeBeenPosted")&&this.isGraded())||s.s.IsPosted.isEqualTo(this.manualStatus))},isSubmitted:function(){return!(!this.column||!this.column.isAttemptBased())&&s.u.NeedsGrading.isEqualTo(this.status)},isUpcoming:function(){if(!this.isGraded()&&!this.isSubmitted()&&this.column){if(this.column.dueDate)return o(this.column.dueDate).isAfter(c.a.getServerTime());if(this.column.isAttemptBased())return!0}return!1},isInProgress:function(){return s.s.GradingInProgress.isEqualTo(this.manualStatus)},hasInstructorComments:function(){return!!this.isPosted()&&(this.column.isAttemptBased()&&(e=this.ui&&this.ui.attempt,t=this.attempts),e&&e.feedbackToUser?e.feedbackToUser&&e.feedbackToUser.displayText||this.hasSomeFeedbackToUser(t):t&&t.length?this.hasSomeFeedbackToUser(t):this.instructorFeedback&&this.instructorFeedback.displayText);var e,t},hasSomeFeedbackToUser:function(e){return r.some(e,function(e){return!(!e.feedbackToUser||!e.feedbackToUser.displayText)})},saveComment:function(e,t,n,i){var o=t?{userId:t}:{};return n&&(o=r.merge(o,n)),r.isString(e)?this.instructorFeedback?this.instructorFeedback.rawText=e:this.instructorFeedback={rawText:e}:this.instructorFeedback=e,i?this.$send({method:"PATCH",url:this.$url(),data:{instructorFeedback:this.instructorFeedback},params:o},function(e){this.instructorFeedback=e.data.instructorFeedback}):this.withParams(o).$save(["instructorFeedback"])},hasAttempts:function(){return!!this.firstAttemptId},postReadyGrades:function(e){return this.$send({method:"POST",url:this.$url()+"/postReadyGrades",data:{}},function(e){this.ui.numOfGradesPosted=e.data.count}).$asPromise().then(function(e){return e.ui.numOfGradesPosted})},getScore:function(){return this.displayGrade&&null!=this.displayGrade.score?this.displayGrade.score.toString():""},isPastDueZero:function(){return null!=this.displayGrade&&!0===this.displayGrade.scoredByAutomaticZero}},Collection:{},Model:{unpack:function(e,t){return t=this.$super(e,t),e.$isCollection?t.forEach(function(t){n(t,e.permissions)}):n(t,e.permissions),t;function n(e,t){e.permissions=t}}}}})}])},KuLw:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-large-document-multiple",use:"icon-large-document-multiple-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-document-multiple"><path fill="#E0E0E0" d="M8 0h24v35H8z" /><path fill="#E0E0E0" d="M7 3h24v33H7z" /><path fill="#FFF" d="M7 37.5c-.8 0-1.5-.7-1.5-1.5V6c0-.8.7-1.5 1.5-1.5h11.6l2 7.9 7.9 2V36c0 .8-.7 1.5-1.5 1.5H7z" /><path fill="#767676" d="M18.2 5l1.8 7.2.1.6.6.1 7.2 1.8V36c0 .6-.4 1-1 1h-20c-.6 0-1-.4-1-1V6c0-.6.4-1 1-1h11.3m.8-1H7c-1.1 0-2 .9-2 2v30c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V14l-8-2-2-8z" /><path fill="#E0E0E0" d="M20 14.5c-.8 0-1.5-.7-1.5-1.5V4.5h.5c.1 0 .3.1.4.1l9 9c.1.1.1.2.1.4v.5H20z" /><path fill="#767676" d="M19 5l9 9h-8c-.5 0-1-.4-1-1V5m0-1h-1v9c0 1.1.9 2 2 2h9v-1c0-.3-.1-.5-.3-.7l-9-9c-.2-.2-.4-.3-.7-.3z" /><path fill="none" stroke="#767676" stroke-linecap="square" stroke-linejoin="round" stroke-miterlimit="10" d="M7.5 2.5h23v33" /><path fill="none" stroke="#767676" stroke-linecap="square" stroke-linejoin="round" stroke-miterlimit="10" d="M8.5.5h24v34" /><path fill="none" stroke="#CDCDCD" stroke-linecap="round" stroke-miterlimit="10" d="M11.5 20.5h11M11.5 23.5h11M11.5 26.5h11M11.5 29.5h11M11.5 32.5h11" /></symbol>'});i.add(o);e.exports=o},LATI:function(e,t,n){e.exports=n("ZJ/X")(1717)},LvDl:function(e,t,n){e.exports=n("ZJ/X")(254)},LvpZ:function(e,t,n){},"M+Ig":function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.InstructorDynamic=new t("instructorDynamic"),t.DirectToCourse=new t("directToCourse"),t.ContentActivityInDetail=new t("telemetryContentActivityInDetail"),t.DiscussionForumInsights=new t("telemetryDiscussionForumInsights"),t.InstructorDetails=new t("telemetryInstructorDetails"),t.InstructorClass=new t("telemetryInstructorClass"),t.StudentHighPerformance=new t("telemetryStudentHighPerformance"),t.StudentLowActivity=new t("telemetryStudentLowActivity"),t.StudentLowGrades=new t("telemetryStudentLowGrades"),t.StudentFindAStudyPartner=new t("telemetryStudentFindAStudyPartner"),t.StudentProgress=new t("telemetryStudentProgress"),t}(n.n(i).a);t.a=o},M8gh:function(e,t,n){e.exports=n("ZJ/X")(1392)},MAx4:function(e,t,n){var r={"./ms-onedrive-ar":["8eXG",7,45],"./ms-onedrive-ar/":["8eXG",7,45],"./ms-onedrive-ar/index":["8eXG",7,45],"./ms-onedrive-ar/index.js":["8eXG",7,45],"./ms-onedrive-cs":["Kdl6",7,46],"./ms-onedrive-cs/":["Kdl6",7,46],"./ms-onedrive-cs/index":["Kdl6",7,46],"./ms-onedrive-cs/index.js":["Kdl6",7,46],"./ms-onedrive-cy-gb":["PWhA",7,47],"./ms-onedrive-cy-gb/":["PWhA",7,47],"./ms-onedrive-cy-gb/index":["PWhA",7,47],"./ms-onedrive-cy-gb/index.js":["PWhA",7,47],"./ms-onedrive-da":["rZr0",7,48],"./ms-onedrive-da/":["rZr0",7,48],"./ms-onedrive-da/index":["rZr0",7,48],"./ms-onedrive-da/index.js":["rZr0",7,48],"./ms-onedrive-de":["sXW2",7,49],"./ms-onedrive-de/":["sXW2",7,49],"./ms-onedrive-de/index":["sXW2",7,49],"./ms-onedrive-de/index.js":["sXW2",7,49],"./ms-onedrive-en":["6EHu",7,51],"./ms-onedrive-en-GB":["Jf12",7,50],"./ms-onedrive-en-GB/":["Jf12",7,50],"./ms-onedrive-en-GB/index":["Jf12",7,50],"./ms-onedrive-en-GB/index.js":["Jf12",7,50],"./ms-onedrive-en/":["6EHu",7,51],"./ms-onedrive-en/index":["6EHu",7,51],"./ms-onedrive-en/index.js":["6EHu",7,51],"./ms-onedrive-es":["mqak",7,52],"./ms-onedrive-es/":["mqak",7,52],"./ms-onedrive-es/index":["mqak",7,52],"./ms-onedrive-es/index.js":["mqak",7,52],"./ms-onedrive-fr":["SvLl",7,53],"./ms-onedrive-fr/":["SvLl",7,53],"./ms-onedrive-fr/index":["SvLl",7,53],"./ms-onedrive-fr/index.js":["SvLl",7,53],"./ms-onedrive-it":["zL11",7,54],"./ms-onedrive-it/":["zL11",7,54],"./ms-onedrive-it/index":["zL11",7,54],"./ms-onedrive-it/index.js":["zL11",7,54],"./ms-onedrive-ja":["/jp5",7,55],"./ms-onedrive-ja/":["/jp5",7,55],"./ms-onedrive-ja/index":["/jp5",7,55],"./ms-onedrive-ja/index.js":["/jp5",7,55],"./ms-onedrive-ko":["AkLg",7,56],"./ms-onedrive-ko/":["AkLg",7,56],"./ms-onedrive-ko/index":["AkLg",7,56],"./ms-onedrive-ko/index.js":["AkLg",7,56],"./ms-onedrive-ms":["3/nq",7,57],"./ms-onedrive-ms/":["3/nq",7,57],"./ms-onedrive-ms/index":["3/nq",7,57],"./ms-onedrive-ms/index.js":["3/nq",7,57],"./ms-onedrive-nl":["Ay5n",7,58],"./ms-onedrive-nl/":["Ay5n",7,58],"./ms-onedrive-nl/index":["Ay5n",7,58],"./ms-onedrive-nl/index.js":["Ay5n",7,58],"./ms-onedrive-pl":["ULiR",7,59],"./ms-onedrive-pl/":["ULiR",7,59],"./ms-onedrive-pl/index":["ULiR",7,59],"./ms-onedrive-pl/index.js":["ULiR",7,59],"./ms-onedrive-pt-br":["CRO7",7,60],"./ms-onedrive-pt-br/":["CRO7",7,60],"./ms-onedrive-pt-br/index":["CRO7",7,60],"./ms-onedrive-pt-br/index.js":["CRO7",7,60],"./ms-onedrive-ru":["HZHF",7,61],"./ms-onedrive-ru/":["HZHF",7,61],"./ms-onedrive-ru/index":["HZHF",7,61],"./ms-onedrive-ru/index.js":["HZHF",7,61],"./ms-onedrive-sv":["KKVO",7,62],"./ms-onedrive-sv/":["KKVO",7,62],"./ms-onedrive-sv/index":["KKVO",7,62],"./ms-onedrive-sv/index.js":["KKVO",7,62],"./ms-onedrive-th":["J7+U",7,63],"./ms-onedrive-th/":["J7+U",7,63],"./ms-onedrive-th/index":["J7+U",7,63],"./ms-onedrive-th/index.js":["J7+U",7,63],"./ms-onedrive-tr":["q6Sz",7,64],"./ms-onedrive-tr/":["q6Sz",7,64],"./ms-onedrive-tr/index":["q6Sz",7,64],"./ms-onedrive-tr/index.js":["q6Sz",7,64],"./ms-onedrive-zh-hans":["EvY/",7,65],"./ms-onedrive-zh-hans/":["EvY/",7,65],"./ms-onedrive-zh-hans/index":["EvY/",7,65],"./ms-onedrive-zh-hans/index.js":["EvY/",7,65],"./ms-onedrive-zh-hant":["H0Bb",7,66],"./ms-onedrive-zh-hant/":["H0Bb",7,66],"./ms-onedrive-zh-hant/index":["H0Bb",7,66],"./ms-onedrive-zh-hant/index.js":["H0Bb",7,66],"./package":["pqdZ",3,232],"./package.json":["pqdZ",3,232]};function i(e){var t=r[e];return t?n.e(t[2]).then(function(){var e=t[0];return n.t(e,t[1])}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(r)},i.id="MAx4",e.exports=i},MCLT:function(e,t,n){e.exports=n("ZJ/X")(1916)},MFWY:function(e,t,n){},MISG:function(e,t,n){},MOka:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var r=n("mrSG"),i=n("pjml"),o=n("emI2"),s=n("fYJU"),a=n("fK7K"),u=n("aHpC"),c=n("yC9S"),l=n("go4a"),d=n("z1U9"),p="ultra.service.stream.settings",f="streamSettings",m={Calendar:"CAL",NewContentAdded:"CON",NewAssessmentsAdded:"CON",CourseAvailable:"CRS",BlogEntryPosted:"DIS",BlogEntryEdited:"DIS",BlogEntryComment:"DIS",DiscussionReply:"DIS",NewDiscussionForum:"DIS",NewMessages:"MES",NewGradeableItems:"SUB",StudentActivityAvailable:"GRB",StudentGradeDataAvailable:"GRB",StudentsFallingBehind:"GRB",StudentsFallingBehindAbsent:"GRB",StudentsFallingBehindFailing:"GRB",StudentsFallingBehindAbsentFailing:"GRB",NoRecentActivity:"TEL",LowActivity:"TEL",HighActivity:"TEL",GradeAtRisk:"TEL",LowGrade:"TEL",GradeLowered:"TEL",PerformanceIncreased:"TEL",HighGrade:"TEL"},h=function(){function e(e,t,n,r,i,o){var s=this;this.$rootScope=e,this.$q=t,this.preferenceService=n,this.UserModel=r,this.currentUserService=i,this.store=o,this.userSettings=null,c.b.OnRootScope(this.$rootScope,"membership-hidden-status-update",function(e,t){s._updateMembership(t),s.$rootScope.$broadcast("stream-settings-updated")}),this.subscribeToRedux()}return e.prototype.initializeSettings=function(){var e=this;return this.$q.all([this._getUserMemberships(),this.loadAdminNotificationSettings()]).then(function(){return e._loadUserSettings()})},e.prototype.subscribeToRedux=function(){var e=this,t=this.store.connect(function(t){var n=d.select.notificationMethodSetting.getAdminNotificationMethodSettings(t),r=d.select.systemPreference.getSystemPreferenceByKey(t,a.SYSTEM_REGISTRY_KEY),i=e._transformRegistrySettings(r);return{adminNotificationSettings:n.concat(i)}},function(t){return{loadAdminNotificationSettings:function(){return e.$q.all([t(d.actions.notificationMethodSetting.loadAdminNotificationMethodSettings()),t(d.actions.systemPreference.loadSystemPreference({key:a.SYSTEM_REGISTRY_KEY}))])}}})(this);this.$rootScope.$on("$destroy",t)},e.prototype._transformRegistrySettings=function(e){var t=a.defaultRegistrySettings;e&&e.value&&(t=JSON.parse(e.value));var n=[];return t.settings.forEach(function(e){n.push({context:d.ContextEnum.COURSE,source:a.NON_NAUTILUS_SOURCE,event:e.id,method:"DA",isEditable:e.isEditable,isEnabled:e.isEnabled})}),n},e.prototype._getUserMemberships=function(){var e=this;return this.userMemberships?this.$q.resolve(Object.values(this.userMemberships)):this.UserModel.$new(this.currentUserService.userId).memberships.$fetch({fields:"id,courseId,courseRole,role,courseCardColorIndex"}).$asPromise().then(function(t){return e.userMemberships=t.reduce(function(e,t){var n;return r.__assign({},e,((n={})[t.id]=t,n))},{}),Object.values(e.userMemberships)})},e.prototype.reloadStreamMemberships=function(){return this.userMemberships=null,this._getUserMemberships()},e.prototype.save=function(e){var t=this;if(!e)return this.$q.resolve();Object.keys(e).forEach(function(t){e[t].definition||(e[t].definition=a.allSettings.find(function(e){return e.id===t}))});var n={version:3,settings:Object.keys(e).map(function(t){return{id:e[t].definition.id,isEnabled:e[t].isEnabled}})};return this.preferenceService.setPreference("ultraui.stream.settings.v2",angular.toJson(n)).then(function(){return t._loadUserSettings()})},e.prototype._loadLegacyUserSettings=function(){var e=this;return this.preferenceService.getPreference("ultraui.stream.settings",null).then(function(t){if(!t||!t.value)return!1;var n=angular.fromJson(t.value);return e.userSettings=a.allSettings.reduce(function(e,t){var i,o=m[t.id];return r.__assign({},e,((i={})[t.id]={definition:t,isEnabled:!!o&&"N"!==n[o]},i))},{}),!0})},e.prototype._loadUserSettings=function(){var e=this;return this.preferenceService.getPreference("ultraui.stream.settings.v2",null).then(function(t){if(!t||!t.value)return e._loadLegacyUserSettings().then(function(t){if(!t)return e._loadDefaultSettings()});var n=angular.fromJson(t.value);e.userSettings={},n.settings.forEach(function(t){var n=a.allSettings.find(function(e){return e.id===t.id});n&&(e.userSettings[t.id]={isEnabled:t.isEnabled,definition:n})})})},e.prototype._loadDefaultSettings=function(){var e=this;return this.loadAdminNotificationSettings().then(function(){e.userSettings=a.allSettings.reduce(function(t,n){var r=n.defaultSetting(e.adminNotificationSettings);return t[n.id]={isEnabled:r,definition:n},t},{})})},e.prototype.getUserSettings=function(){var e=this;return this._hasUserSettings()?this.$q.resolve(this.userSettings):this._loadUserSettings().then(function(){return e.userSettings})},e.prototype._hasUserSettings=function(){return null!==this.userSettings},e.prototype._updateMembership=function(e){var t;this.userMemberships=r.__assign({},this.userMemberships,((t={})[e.id]=r.__assign({},this.userMemberships[e.id],e),t))},e.prototype.hidden=function(e){if(!e)return!1;var t=!!this.userMemberships?Object.values(this.userMemberships).find(function(t){return t.course.$pk===e.courseId}):null;if(t&&t.userHasHidden)return!0;if(t&&(e.courseColorClass=Object(l.a)(t)),!this.userSettings||!this.adminNotificationSettings)return!1;var n=!1;for(var r in this.userSettings)if(this.userSettings.hasOwnProperty(r)){var i=this.userSettings[r];if(i.definition.canHandle(e)&&(n=!0,i.definition.isStreamEntryVisible(i.isEnabled,this.adminNotificationSettings)))return!1}return n},e=r.__decorate([r.__param(0,Object(u.b)("$rootScope")),r.__param(1,Object(u.b)("$q")),r.__param(2,Object(u.b)(o.c)),r.__param(3,Object(u.b)(i.Qb.serviceName)),r.__param(4,Object(u.b)(s.b)),r.__param(5,Object(u.b)("$ngRedux"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(h);angular.module(p,[o.b]).service(f,h)},Mc6f:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("yC9S"),a=n("pjml"),u="ultra.components.services.grade.gradeNotation.Service",c="gradeNotationService",l=function(){function e(e,t,n){var r=this;this.$q=e,this.$rootScope=t,this.CourseModel=n,this.courseGradeNotationMap={},s.b.OnRootScope(t,"grade-notation-update",function(e,t){r.CourseModel.$new(t).gradebook.performancecodes.$fetch().$then(function(e){r.courseGradeNotationMap[t]=e,r.$rootScope.$broadcast("grade-notation-cache-update",t)})})}return e.prototype.getGradeNotationsMap=function(e,t){var n=this;if(t&&this.courseGradeNotationMap[e])return this.$q.when(this.courseGradeNotationMap[e]);var r=this.$q.defer();return this.CourseModel.$new(e).gradebook.performancecodes.$fetch().$then(function(t){n.courseGradeNotationMap[e]=t,r.resolve(t)}),r.promise},e.prototype.isValidPerformanceCodeGrade=function(e,t){return!(!t||i.isEmpty(e))&&!!i.find(e,function(e){return e.code===t})},e.$inject=["$q","$rootScope",a.o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l);o.module(u,[]).service(c,l)},MifD:function(e,t){e.exports='<bb-modal id="close-without-saving-modal" class="notification"\n          modal-title-key="components.directives.fileUpload.closeDuringUploadTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.closeDuringUploadInstructions</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.closeDuringUploadClose">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadClose</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.closeDuringUploadGoBack">\n    <bb-translate>components.directives.fileUpload.closeDuringUploadGoBack</bb-translate>\n  </button>\n</bb-modal>\n'},N7x3:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});var r=n("mrSG"),i=n("IbG+"),o=n("aHpC"),s=n("5MwF"),a=n("td+C"),u=n("YzQO"),c=n("622u"),l=n("y9V7"),d="ultra.components.services.integration.eventListener",p="integrationServiceEventListener",f=function(){function t(e){var t=this;this.integrationService=e,this.integrationForceClick="integration-force-click",this.onClick=function(e){if(!e.originalEvent||!e.originalEvent.manualFireFlag){var n=i.element(e.target),r=Object(u.c)(n)||Object(u.d)(n.parent());t._sendEventMessage(r,c.h.Click)}},this.onHover=function(e){var n=i.element(e.target),r=Object(u.c)(n);r!==t.lastHoverElementId&&(t.lastHoverElementId=r,t._sendEventMessage(r,c.h.Hover))},s.a.features.integrationFramework&&Object(l.subscribeToFramework)("Ultra",function(e,n){e===l.AnalyticsEventTypes.CLICK_EVENT?t._sendEventMessage(n.analyticsId,c.h.Click):e===l.AnalyticsEventTypes.HOVER_EVENT&&t._sendEventMessage(n.analyticsId,c.h.Hover)})}return t.prototype.addClickListener=function(){!s.a.unitTesting&&s.a.features.integrationFramework&&(e(document).on("click",this.onClick),e(document).on(this.integrationForceClick,this.onClick))},t.prototype.addHoverListener=function(){!s.a.unitTesting&&s.a.features.integrationFramework&&e(document).on("mouseover",this.onHover)},t.prototype._sendEventMessage=function(e,t){e&&this.integrationService.sendEventMessage({type:c.d,eventType:t,analyticsId:e})},t=r.__decorate([r.__param(0,Object(o.b)(a.b))],t)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(f);i.module(d,[a.a]).service(p,f)}).call(this,n("EVdn"))},NMEb:function(e,t,n){"use strict";n("41sU");var r=n("IbG+"),i=function(){function e(){}return e.convertToGrayscale=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=e.naturalWidth,i=e.naturalHeight;t.width=r,t.height=i,n.drawImage(e,0,0);for(var o,s=n.getImageData(0,0,r,i),a=s.data.length,u=0;u<a;u+=4)o=(s.data[u]+s.data[u+1]+s.data[u+2])/3,s.data[u]=o,s.data[u+1]=o,s.data[u+2]=o;return n.putImageData(s,0,0,0,0,s.width,s.height),t.toDataURL()},e}();n.d(t,"a",function(){return o});var o="ultra.components.directives.imageGrayscale",s=function(){function e(e,t,n){this.scope=e,this.element=t,this.attributes=n,"true"===this.attributes.bbImageGrayscale&&u()&&t.one("load",this.onLoadCallback())}return e.prototype.onLoadCallback=function(){var e=this;return function(){var t=i.convertToGrayscale(e.element[0]);e.element[0].src=t}},e}(),a=function(){this.restrict="A",this.link=function(e,t,n){return new s(e,t,n)}};function u(){var e=document.documentMode;return 10===e||11===e}var c=r.module(o,[]);u()&&c.directive("bbImageGrayscale",["$injector",function(e){return e.instantiate(a)}])},NXdT:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a});n("Wr5T"),n("nh++");var r=n("LvDl"),i=n("zFCC"),o="bbIntersectionObservableDirective";function s(e,t){return void 0===t&&(t=null),function(n,i,o,s,a){var u=this,c=s[s.length-1],l=Object(r.once)(function(){e.call(u,n,i,o,s,a)}),d=l;t&&t>0?d=Object(r.debounce)(function(){l(),n.$evalAsync(r.noop)},t):d.cancel=r.noop,c?c.link(i[0],n,function(e,t,n){n.isIntersecting?d():d.cancel()}):l()}}function a(e){return void 0===e&&(e=null),function(t){var n=t,o=function(){n.apply(this,arguments),this.require=[].concat(this.require||[]).concat(["^^?"+i.a]),this.link=s(this.link||r.noop,e)};return o.prototype=n.prototype,Object.assign(o,t)}}!function(){function e(){}e.prototype.link=function(e,t,n,r){return s(this.linkInView).apply(this,arguments)},e.prototype.getRequiredControllers=function(){return[]},Object.defineProperty(e.prototype,"require",{get:function(){return[].concat(this.getRequiredControllers()).concat(["^^?"+i.a])},set:function(e){},enumerable:!0,configurable:!0})}();angular.module(o,[]).directive("bbIntersectionObservable",["$compile",function(t){return{transclude:"element",priority:6e3,terminal:!0,require:"^^?"+i.a,restrict:"A",link:function(n,i,o,s,a){if(!s)return a(function(e,t){i.replaceWith(e)});var u=Object.assign({placeholder:"div",debounce:0},n.$eval(o.bbIntersectionObservable||"{}")),c=e("<"+u.placeholder+' class="intersection-observable-placeholder"></'+u.placeholder+">");t(c)(n),i.replaceWith(c);var l=Object(r.debounce)(Object(r.once)(function(){a(function(e,t){s.unlink(c[0]),c.replaceWith(e)})}),u.debounce);s.link(c[0],n,function(e,t,n){n.isIntersecting?l():l.cancel()})}}}])}).call(this,n("EVdn"))},Nrpd:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("IbG+"),i=n("0JpG"),o=n("pjml"),s=n("TnpK"),a=n("MOka"),u=n("Sa5G"),c=n("5MwF"),l="ultra.base.notification-settings.routes";r.module(l,[i.moduleName,s.b]).config([s.c,function(e){e.peekState("notification-settings",{abstract:!0,require:function(){return n.e(300).then(n.bind(null,"gE0d"))},resolve:{mobileDistributorSettings:[o.U.serviceName,function(e){return e.$build().courseSettings.$new(u.y.Mobile).$fetch().$allow([400])}],isMobileDistributorActive:["$q","mobileDistributorSettings","memberships",function(e,t,n){var r=n.length>0,i=n.every(function(e){return e.isStudentMembership()});return c.a.features.instructorPushNotifications||r&&i?t.$then(function(e){return!!e.settings}).$asPromise():e.resolve(!1)}],notificationGeneralSettings:[o.T.serviceName,function(e){return e.$build().$fetch().$asPromise()}],memberships:[a.b,function(e){return e.reloadStreamMemberships()}]}}).peekState("notification-settings.content",{url:"/notification/settings?tab",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/notifications-settings/base-notifications-settings")}],memberships:[a.b,function(e){return e.reloadStreamMemberships()}]},views:{"email-settings@":{require:function(){return n.e(387).then(n.bind(null,"IwlP"))}},"stream-settings@":{require:function(){return n.e(413).then(n.bind(null,"wgch"))},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/stream/base-stream")}]}},"sms-settings@":{require:function(){return Promise.all([n.e(23),n.e(39),n.e(361)]).then(n.bind(null,"EKn0"))}},"mobile-settings@":{require:function(){return n.e(388).then(n.bind(null,"pVU+"))}}}})}])},"O+iS":function(e,t){e.exports='<bb-modal id="folder-drop-depth-limit-modal" class="notification js-folder-drop-limit"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.folderDropDepthLimitTitle\' : \'components.directives.fileUpload.folderDropDepthLimitNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.folderDropDepthLimitFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.folderDropDepthLimitFulNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},OAwL:function(e,t,n){},OBf2:function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r,i=n("5MwF"),o=n("Q/M7"),s="cloud.account.tokens";!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Failed=2]="Failed"}(r||(r={}));var a=function(){},u=function(){function e(e,t,n,o,s){this.$q=e,this.bbLocalize=t,this.$timeout=n,this.bbScriptLoader=o,this.preference=s,this.credentials={},this.status=r.Uninitialized,this.enabledServices=i.a.kloudlessServices}return Object.defineProperty(e.prototype,"isInitialized",{get:function(){return this.status===r.Initialized},enumerable:!0,configurable:!0}),e.prototype.init=function(){var e=this,t=this.$q.defer(),n=this.loaderUrl||"https://kloudless.blackboardcdn.com/loader/js/loader.js",o=n.substring(0,n.indexOf("/loader"))+"/authenticator/js/kloudless-authenticator.js";if(this.status===r.Initialized)t.resolve();else if(this.status===r.Failed)t.resolve();else{var s,a=!1,u=r.Uninitialized,c=r.Uninitialized,l=function(){a||u!==r.Uninitialized&&c!==r.Uninitialized&&(u===r.Initialized?(e.status=r.Initialized,t.resolve()):(e.status=r.Failed,t.resolve()),a=!0,e.$timeout.cancel(s))};s=this.$timeout(function(){e.authenticator||(c=r.Failed,console.error("Authenticator initialization timed out. Disabling Authenticator Service.")),e.explorer||(u=r.Failed,console.error("Kloudless initialization timed out.  Disabling Kloudless Service.")),l()},i.a.kloudlessInitializationTimeout||1e4),this.$q.all({Kloudless:this.bbScriptLoader.getScript(n,{exports:"Kloudless"}).then(function(t){e.explorer=t.explorer,u=r.Initialized,l()}),KloudlessAuth:this.bbScriptLoader.getScript(o,{exports:"Kloudless"}).then(function(t){e.authenticator=t.authenticator,c=r.Initialized,l()})}).catch(function(){e.authenticator||(c=r.Failed,console.error("Failed to load kloudless authenticator. Disabling Authenticator Service.")),e.explorer||(u=r.Failed,console.error("Failed to load kloudless.  Disabling Kloudless Service.")),l()})}return t.promise},e.prototype.getExplorer=function(e){var t=this,n=e?this.explorerInstance_multi:this.explorerInstance_single;if(!n){var r={app_id:this.clientId,retrieve_token:!0,multiselect:e,display_backdrop:!0,create_folder:!1,types:["files"]};(this.enabledServices||[]).length>0&&(r.services=this.enabledServices),this.apiUrl&&(r.base_url=o.i(this.apiUrl)),this.useLoaderExplorer&&(r.use_loader_explorer=this.useLoaderExplorer),r.inst_prov_type=this.instProvType,r.inst_domain=this.instDomain,r.persist="none",(n=this.explorer(r)).on("success",function(e){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.resolve(e),t.currentChooserPromiseObject=null)}),n.on("cancel",function(){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.resolve(),t.currentChooserPromiseObject=null)}),n.on("error",function(e){t.currentChooserPromiseObject&&(t.currentChooserPromiseObject.reject(e),t.currentChooserPromiseObject=null)}),n.on("addAccount",function(e){t.preference.getPreference(s).then(function(n){var r=t.deleteKloudlessAccount(JSON.parse(n.value),e.id);r.push(e),t.preference.setPreference(s,JSON.stringify(r))}).catch(function(){var n=[];n.push(e),t.preference.setPreference(s,JSON.stringify(n))})}),n.on("deleteAccount",function(e){t.preference.getPreference(s).then(function(n){var r=t.deleteKloudlessAccount(JSON.parse(n.value),e);t.preference.setPreference(s,JSON.stringify(r))})}),e?this.explorerInstance_multi=n:this.explorerInstance_single=n}return n},e.prototype.openFilePicker=function(e,t){var n=this;if(this.currentChooserPromiseObject){var i=this.$q.defer();return i.reject(new Error("multiple explorer instances are not allowed")),i.promise}return this.currentChooserPromiseObject=this.$q.defer(),this.init().then(function(){if(n.status===r.Initialized){var i=n.getExplorer(t),o=n.bbLocalize.getLocale(e);return n.preference.getPreference(s,"[]",!0).then(function(e){var t=JSON.parse(e.value).map(function(e){return e.bearer_token.key});i.update({locale:o,tokens:t}),i.choose()}).catch(function(e){console.error(e);i.update({locale:o,tokens:[]}),i.choose()})}}),this.currentChooserPromiseObject.promise},e.prototype.getKloudlessInfo=function(){return{client_id:this.clientId,base_url:this.apiUrl}},e.prototype.deleteKloudlessAccount=function(e,t){return e.filter(function(e){return e.id!==t})},e}()},OMme:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var r=n("IbG+"),i=n("pjml"),o=n("vdfi"),s=n("bF8R"),a=n("0JpG"),u=n("JXhc"),c=n("TnpK"),l=n("Qbdf"),d=n("Sa5G"),p="base.proctoring-attempt",f="ultra.base.proctoring.routes";r.module(f,[a.moduleName,c.b,l.b]).config([c.c,l.c,function(t,r){var f,m;t.baseState(p,{url:"^/proctoring/attempt?courseId&contentId",peekStates:["conversations","message","assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-view",o.b,u.b],onEnter:function(){e("body").addClass("proctoring-attempt-open")},onExit:function(){e("body").removeClass("proctoring-attempt-open")},resolve:(f={},f[l.d]=r.resolve,f.contentData=[l.d,s.b,c.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],f.translations=[a.serviceName,function(e){return e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])}],f.currentContent=["contentData",function(e){return e.courseContent}],f.currentColumn=["contentData",function(e){return e.gradingColumn}],f.attempt=["$q",l.d,"contentData",i.C.serviceName,i.H.serviceName,function(e,t,n,r,o){var s=n.courseContent,a=n.groupAttempt||n.attempt,u=e.defer();if(a&&a.isInProgress())u.resolve(a);else{var c,l={scoreProviderHandle:d.B.Test,status:i.C.AttemptStatus.InProgress,toolAttemptDetail:{"resource/x-bb-assessment":{type:i.d.AssessmentType.Test}}};c=s.isGroupContent?o.$build(l):r.$build(l),n.gradingColumn.createAttempt(c,{},s.isGroupContent,s.isGroupContent?s.assignedGroups[0].groupId:null).then(function(e){var n=e.id;s.isGroupContent?t.gradebook.groupAttempts.$find(n,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then(function(e){u.resolve(e)}):t.gradebook.attempts.$find(n,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then(function(e){u.resolve(e)})})}return u.promise}],f),require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(243)]).then(n.bind(null,"RTst"))},pageTitle:"components.services.proctoring.delivery.attempt.pageTitle",peekViewName:"proctored-assessment-peek"}).baseState("base.proctoring-review",{url:"^/proctoring/review?courseId&contentId&attemptId",peekStates:[],onEnter:function(){e("body").addClass("proctoring-attempt-open")},onExit:function(){e("body").removeClass("proctoring-attempt-open")},resolve:(m={translations:[a.serviceName,function(e){return e.loadAllBundles(["components/services/proctoring","features/course/content/assessment/assessment"])}]},m[l.d]=r.resolve,m.currentContent=[l.d,c.d,function(e,t){return e.contents.$find(t.nextParams.contentId).$asPromise()}],m.currentAttempt=[l.d,c.d,function(e,t){return e.gradebook.attempts.$find(t.nextParams.attemptId,{expand:"toolAttemptDetail,alignedGoals,viewUrl"}).$asPromise()}],m.currentGradedQuestionAttempts=["$q","currentAttempt",function(e,t){var n=e.defer();return t.assessment.gradedQuestionAttempts.$fetch({expand:"questionAttempt.question,questionAttempt.answerCorrectness"}).$asPromise().then(function(e){e.setPostStatusAndGroupAttemptId(t),n.resolve(e)}),n.promise}],m),require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(247)]).then(n.bind(null,"Mpwm"))},pageTitle:"components.services.proctoring.delivery.review.pageTitle"})}])}).call(this,n("EVdn"))},OTLg:function(e,t,n){"use strict";var r=n("mrSG"),i=n("IbG+"),o=n("pjml"),s=n("vYaK"),a=n("f8ya"),u=function(){function e(e){this.content=e,this._groups=[],this._memberships=[],this.counts={count:0,withAccommodationCount:0,dueDateAccommodationCount:0,timeLimitAccommodationCount:0,maxLimit:0},this.refreshGroups()}return Object.defineProperty(e.prototype,"groups",{get:function(){return this._groups},set:function(e){var t=this;this.dueDateGroups=[],this.timeLimitGroups=[],this._groups=null!=e?e.filter(function(e){return e.accommodation=a.a.fromTypes(e.dueDateExceptionType,e.timeLimitExceptionType),e.accommodation.dueDate.hasAccommodation&&t.dueDateGroups.push(e),e.accommodation.timeLimit.hasAccommodation&&t.timeLimitGroups.push(e),e.accommodation.hasAccommodation}):[]},enumerable:!0,configurable:!0}),e.prototype.sortGroups=function(e){this._groups.sort(e),this.dueDateGroups.sort(e),this.timeLimitGroups.sort(e)},e.prototype.refreshGroups=function(){null!=this.content&&(this.groups=this.content.assignedGroups)},Object.defineProperty(e.prototype,"memberships",{get:function(){return this._memberships},set:function(e){var t=this;this.dueDateMembers=[],this.timeLimitMembers=[],this._memberships=null!=e?e.filter(function(e){var n=e.accommodation();return n.dueDate.hasAccommodation&&t.dueDateMembers.push(e),n.timeLimit.hasAccommodation&&t.timeLimitMembers.push(e),n.hasAccommodation}):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroups",{get:function(){return this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroupsDueDate",{get:function(){return this.groups.filter(function(e){return e.accommodation.dueDate.hasAccommodation}).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nGroupsTimeLimit",{get:function(){return this.groups.filter(function(e){return e.accommodation.timeLimit.hasAccommodation}).length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsers",{get:function(){return this.counts.withAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsersDueDate",{get:function(){return this.counts.dueDateAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nUsersTimeLimit",{get:function(){return this.counts.timeLimitAccommodationCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGroupContent",{get:function(){if(null==this.content)return!1;var e=this.content.assignedGroups&&0!==this.content.assignedGroups.length;return this.content.isGroupContent||e||0!==this.groups.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstances",{get:function(){return this.isGroupContent?this.nGroups:this.nUsers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesDueDate",{get:function(){return this.isGroupContent?this.nGroupsDueDate:this.nUsersDueDate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesTimeLimit",{get:function(){return this.isGroupContent?this.nGroupsTimeLimit:this.nUsersTimeLimit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nInstancesShown",{get:function(){if(this.isGroupContent){if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nGroups;if(this.showDueDateAccommodation)return this.nGroupsDueDate;if(this.showTimeLimitAccommodation)return this.nGroupsTimeLimit}else{if(this.showDueDateAccommodation&&this.showTimeLimitAccommodation)return this.nUsers;if(this.showDueDateAccommodation)return this.nUsersDueDate;if(this.showTimeLimitAccommodation)return this.nUsersTimeLimit}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAccommodation",{get:function(){return this.showDueDateAccommodation||this.showTimeLimitAccommodation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showDueDateAccommodation",{get:function(){return null!=this.content&&(this.content.hasDueDate()&&this.content.getDueDate()&&this.hasDueDateAccommodation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTimeLimitAccommodation",{get:function(){return null!=this.content&&(this.content.getTimedTestDetail().hasTimeLimit&&this.hasTimeLimitAccommodation)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return this.hasDueDateAccommodation||this.hasTimeLimitAccommodation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDueDateAccommodation",{get:function(){return this.nInstancesDueDate>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTimeLimitAccommodation",{get:function(){return this.nInstancesTimeLimit>0},enumerable:!0,configurable:!0}),e}();n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var c="ultra.services.accommodation.Service",l="accommodationService",d=["id","isAvailable","role","user","userId","courseRole","dueDateExceptionType","timeLimitExceptionType","permissions"],p=d.concat(["displayOrder"]),f=["alignedGoals","assignedGroups","isGroupContent"],m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(function(){function e(e){this.courseModel=e,this._cache={},this._invalidCache={}}return e.prototype.createContentAccommodation=function(e){var t=new u(e);return null!=e&&e.id&&(e.assignedGroups&&!this._invalidCache[e.id]?t.refreshGroups():this.fetchGroupsOrCounts(t)),t},e.prototype.getContentAccommodation=function(e){return null==e?this.createContentAccommodation(e):((null==this._cache[e.id]||this._invalidCache[e.id])&&(this._cache[e.id]=this.createContentAccommodation(e),this._invalidCache[e.id]=!1),this._cache[e.id])},e.prototype.forceNewContentAccommodation=function(e){null!=e&&(this._invalidCache[e.id]=!0)},e.prototype.invalidateContentAccommodationOtherThan=function(e){var t=this;null!=e&&Object.keys(this._cache).forEach(function(n){n!==e.id&&(t._invalidCache[n]=!0)})},e.prototype.refreshAccommodation=function(e){null!=e.content&&(e.isGroupContent?e.refreshGroups():this.fetchCount(e.content.courseId,e))},e.prototype.fetchGroupsOrCounts=function(e){var t=this;null!=e.content&&(null==e.content.isGroupContent||e.isGroupContent?e.content.$fetch({fields:f.join(","),expand:"selfEnrollmentGroups.group"}).$then(function(n){e.refreshGroups(),e.isGroupContent||t.fetchCount(n.courseId,e)}):this.fetchCount(e.content.courseId,e))},e.prototype.sortGroupsByTitle=function(e){e.sortGroups(function(e,t){return e.groupTitle.localeCompare(t.groupTitle)})},e.prototype.fetchCount=function(e,t){this.courseModel.$new(e).memberships.getDetailsCount().then(function(e){t.counts=e})},e.prototype.fetchMemberships=function(e,t){this.courseModel.$new(e).memberships.$refresh({fields:d.join(","),sort:"user.givenName"}).$then(function(e){return t.memberships=e})},e.$inject=[s.serviceName],e}());i.module(c,[o.R]).service(l,m)},OcoR:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});n("7Q+E");var r=n("IbG+"),i=n("Fvsw"),o=n("oQrK"),s=n("lEL+"),a=n("pGpj"),u=n("yC9S"),c="ultra.components.directives.firstVisit",l=function(){function t(e,t,n){var r=this;this.$q=e,this.bbContext=t,this.timeout=n,this.restrict="E",this.template=a,this.link=function(e,t,n){r.alterBodyStyles(e,"ftue-on");var i="ultraui.first.time."+n.path+"."+n.place+".visited";e.firstVisit=!1,e.loadImage=function(e,t,n,r){void 0===r&&(r=null);var i=n.inViewTarget;e&&"both"===t&&!i.src.match(new RegExp(r+"$"))&&(i.src=r)},r.bbContext.getPreference(i,"false").then(function(n){"false"===n.value?(e.firstVisit=!0,r.bbContext.setPreference(i,"true"),r.resizeWelcomeWindow(e,t)):"true"===n.value&&(e.firstVisit=!1)})}}return t.prototype.alterBodyStyles=function(t,n){e("body").addClass(n),t.$on("$destroy",function(){e("body").removeClass(n)})},t.prototype.resizeWelcomeWindow=function(t,n){var r,i=this,s=function(){var e=n.find(".current-view"),t=e.offset().top,r=i.$q.defer(),o=i.$q.defer();n.closest("body").animate({scrollTop:t},{duration:500,always:function(){r.resolve()}}),n.closest("html").animate({scrollTop:t},{duration:500,always:function(){o.resolve()}}),i.$q.all([r.promise,o.promise]).then(function(){return e.find("a.ftue-img").focus()})},a=function(t){var n=e(t.target).closest(".ftue-new-slide").next();e(n).addClass("current-view").siblings().removeClass("current-view"),s()};n.on("click",".scroll-button",a),o.a.detect().desktop()&&u.b.OnWindow("resize",function(){i.timeout.cancel(r),r=i.timeout(function(){for(var t=n.find(".ftue-new-slide"),r=0;r<t.length;r++){var i=t.eq(r),o=i.find(".slide-content").height()+i.find(".slide-control").height()+parseInt(i.find(".slide-content").css("top"),10)+40;i.css("min-height",o);var a=e(window).height();a>o&&i.css("height",a)}s()},t,250,!1)},t),t.$on("$destroy",function(){n.off("click",".scroll-button",a)})},t.$inject=["$q",i.b,s.b],t}();r.module(c,[i.a,"angular-inview",s.a]).directive("bbFirstVisit",["$injector",function(e){return e.instantiate(l)}])}).call(this,n("EVdn"))},Oki6:function(e,t,n){e.exports=n("ZJ/X")(1715)},OmEq:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r="[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\s*",i=new RegExp("^"+r+",?$","i"),o=new RegExp("^"+r+"(,+\\s*\\n*"+r+")*,*\\s*$","i")},Oovi:function(e,t){e.exports='<bb-modal class="notification js-dismiss-modal" role="alertdialog" bb-translate-attrs="{\'aria-label\': \'course.outline.previewCourse.alert.modalTitle\'}"\n          modal-title-key="course.outline.previewCourse.alert.modalTitle"\n          analytics-id-tag-prefix="course.outline.previewCourse.alert">\n  <div name="modal-contents">\n    <bb-translate>course.conversion.statusBar.page-out-of-date</bb-translate>\n  </div>\n  <button name="modal-footer-button-primary" ng-click="$parent.$close(\'refresh\')" class="button js-primary-button" analytics-id="course.outline.previewCourse.alert.ok.button">\n    <span bb-translate="global.ok"></span>\n  </button>\n</bb-modal>'},OvxF:function(e,t,n){"use strict";n.d(t,"a",function(){return c});n("+cQS"),n("H4qw");var r=n("LvDl"),i=n("IbG+"),o=n("0JpG"),s=n("XGja"),a=n("+4Px"),u=n("8pBP"),c="ultra.components.directives.modal",l=function(){function e(e,t,n,i,o){this.scope=e,this.element=t,this.attrs=n,this.transcludes=i,this.bbLocalize=o,this.ariaType="dialog",this.ariaType=e.modalAriaType?e.modalAriaType:this.ariaType,this.analyticsIdTagPrefix=e.analyticsIdTagPrefix||"";var s=e.modalTranslateOptions&&e.modalTranslateOptions();this.titleKey=e.modalTitleKey,this.titleString=o.translateSync(r.merge({key:e.modalTitleKey},s?s.title:{})),this.dismissKey=e.modalDismissKey,(e.modalDismissKey||s&&s.dismiss)&&(this.dismissString=o.translateSync(r.merge({key:e.modalDismissKey},s?s.dismiss:{})));var a=t.find("[name=modal-footer] button");t.find(".reveal-modal__footer").addClass("buttons-"+a.length+"-md")}return e.prototype.handleKeyDown=function(e){e.keyCode===a.u?(e.preventDefault(),e.shiftKey?s.c(this.element):s.b(this.element)):e.keyCode===a.g&&(e.stopPropagation(),this.dismiss())},e.prototype.dismiss=function(){this.scope.modalDismissCallback?this.scope.modalDismissCallback():this.scope.$parent.$dismiss()},e.$inject=["scope","element","attrs","transcludes",o.serviceName],e}(),d=function(){function e(e){var t=this;this.$injector=e,this.replace=!0,this.restrict="E",this.template=u,this.transclude=!0,this.scope={modalDismissCallback:"&?",modalDismissKey:"@?",modalTitleKey:"@?",modalTranslateOptions:"&?",modalAriaType:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,n,r,i,o){e.modal=t.$injector.instantiate(l,{scope:e,element:n,attrs:r,transcludes:o})}}return e.$inject=["$injector","$rootScope"],e}();i.module(c,["multi-transclude"]).directive("bbModal",["$injector",function(e){return e.instantiate(d)}])},"Oyr+":function(e,t,n){"use strict";var r=n("mrSG"),i=(n("HiZj"),n("sMjt"),n("6hn2"),n("KuLw"),n("lhpd"),n("LvDl")),o=n("EVdn"),s=n("IbG+"),a=n("oSB+"),u=n.n(a),c=n("X455"),l=n("0JpG"),d=(n("H4qw"),n("0+Qs")),p=n("rxY8"),f=n("b4mq"),m=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.bbLocalize=t,this.interval=n,this.$q=r,this.spinner=i,this.processingSpinnerArgs={canvasSize:43,scaleX:1.5,scaleY:1.5},this.cancelUpload=function(e,t){e.stopImmediatePropagation(),e.preventDefault();var n=o.scope.inProgressFiles.filter(function(e){return e.id===t})[0];o.cancelUploadFile(n)},this.scope.$on("cancel-upload-all",function(e){o.scope.inProgressFiles.forEach(function(e){o.cancelUploadFile(e)})})}return e.prototype.cancelUploadFile=function(e){e.content&&this.scope.$root.$broadcast(B,e.content,H.DeleteContent),e.interval&&this.interval.cancel(e.interval);var t=this.scope.inProgressFiles.splice(this.scope.inProgressFiles.indexOf(e),1)[0];this.scope.$root.$broadcast(B,e.id,t,H.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.remove=function(e){i.remove(this.scope.inProgressFiles,function(t){return t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.ui.fileId===e.ui.fileId:t.fileName===e.fileName.replace(/^_/,"")||e.ui&&e.ui.originFileName&&t.fileName===e.ui.originFileName.replace(/^_/,"")}),this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,0,e.id,H.Cancel,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.transformModelForDisplay=function(e){return{barId:e.file.id?e.file.id.replace(/\D/g,""):"",content:e.content,currentMimeType:e.currentMimeType,currentProgress:0,file:e.file,fileName:e.fileName,fileSize:e.file.size,id:e.id,interval:null,ui:e.ui}},e.prototype.setProgress=function(e,t,n){var r,o,s,a,u,c=this;if(n){u=i.find(this.scope.inProgressFiles,function(e){return e.file.id===n});var l="#file-progress-"+n.replace(/\D/g,"");a=this.scope.element.find(l+" .progress-circle .bar"),s=this.scope.element.find(l+" .processing-spinner .canvas")}else{u=this.scope.inProgressFiles.filter(function(t){return t.id===e})[0];var d=this.scope.inProgressFiles.indexOf(u);a=this.scope.element.find(".progress-circle-svg .bar").eq(d),s=this.scope.element.find(".processing-spinner .canvas").eq(d)}if(u&&!(u.currentProgress>=t)){null!=u.interval&&this.interval.cancel(u.interval);var p=u.currentProgress;u.interval=this.interval(function(){if(u&&(u.currentProgress++,r=a.attr("stroke-dashoffset"),o=r-r*(.01*u.currentProgress),a.css({strokeDashoffset:o+"px"}),100===u.currentProgress))return u.isProcessing||(c.spinner.initInlineLoader(s,c.processingSpinnerArgs).start(),u.isProcessing=!0),n?c.scope.$root.$broadcast(B,n,H.UploadProgressComplete):c.scope.$root.$broadcast(B,c.scope.fileUploadDivId,c.scope.inProgressFiles.indexOf(u),e,H.UploadProgressComplete),void c.interval.cancel(u.interval)},this.scope,20,t-p)}},e.$inject=["scope",l.serviceName,d.b,"$q",p.b],e}(),h=function(){function e(e,t,n){var r=this;this.$injector=e,this.interval=t,this.bbLocalize=n,this.template=f,this.restrict="E",this.scope={displayResults:"=",progressId:"=",targetDiv:"@",primaryKey:"&?"},this.link=function(e,t,n){e.element=t,e.progress=r.$injector.instantiate(m,{scope:e}),e.progress.progressId=n.id||"directive-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.inProgressFiles=[],e.$on(B,function(n,i,o,s,a){if(null!=o&&(null!=o.content&&o.content.ui.fileUploadId===e.progress.progressId||e.progress.progressId===o.progressId||e.targetDiv&&e.targetDiv===a))if(s!==H.Uploading||o.content)if(s===H.Uploaded)e.progress.displayResults||e.progress.remove(o);else if(s===H.Error)e.progress.remove(o);else if(s===H.CommenceUpload)if(null!=o.content){if(e.fileUploadDivId=i,t.attr("id")===o.targetElement.attr("id")){e.inProgressFiles.push(e.progress.transformModelForDisplay(o));var u=r.interval(function(){t.find(".progress-circle").length>0&&(e.$root.$broadcast(B,i,o,H.ProgressRenderComplete),r.interval.cancel(u))},e,100,10)}}else o.progressId===e.progress.progressId&&(e.inProgressFiles.push(e.progress.transformModelForDisplay(o)),e.$root.$broadcast(B,i,o,H.ProgressRenderComplete));else s===H.Cancel&&e.progress.remove(o);else if(e.fileUploadDivId=i,e.inProgressFiles.push(e.progress.transformModelForDisplay(o)),e.progress.displayResults){e.lastPiesRendered=0;var c=r.interval(function(){var n=t.find(".progress-circle").length;if(n>e.lastPiesRendered){for(var o=e.lastPiesRendered;o<e.lastPiesRendered+n;o++)e.$root.$broadcast(B,i,o,e.inProgressFiles[o].id,H.ProgressRenderComplete),r.interval.cancel(c);r.interval.cancel(c)}e.lastPiesRendered=n},e,100,10)}else e.$root.$broadcast(B,i,e.inProgressFiles.length-1,e.inProgressFiles[e.inProgressFiles.length-1].id,H.ProgressRenderComplete,e.targetDiv)}),e.$on(B,function(t,n,r,i,o,s,a){(s&&s===e.targetDiv||i&&i.attr&&i.attr("id")===e.element.attr("id")&&o===H.UpdateProgress)&&e.progress.setProgress(n,r,a)}),e.progress.displayResults=!0,e.$watch("::displayResults",function(t){e.progress.displayResults=t})}}return e.$inject=["$injector",d.b,l.serviceName],e}();s.module("ultra.directives.bbProgress",[]).directive("bbProgress",["$injector",function(e){return e.instantiate(h)}]);var g=n("5MwF"),v=n("Vsv2"),b=n("k9iv"),y=n("b2lU"),S=n("A+IJ"),C=n("12mu"),w=n("pjml"),$=n("lEL+"),k=n("hkqm"),T=n("TnpK"),I=n("Q/M7"),E=n("GbAM"),P=n("fYJU"),A=n("MifD"),x=n("lAa/"),D=n("qYqL"),_=n("sTW1"),L=n("O+iS"),M=n("9CxF"),N=n("QejK"),R=n("4ekl"),O=n("oC7+"),G=n("XPhQ");n.d(t,"f",function(){return U}),n.d(t,"e",function(){return B}),n.d(t,"d",function(){return F}),n.d(t,"b",function(){return q}),n.d(t,"a",function(){return j}),n.d(t,"c",function(){return H});var U="ultra.directives.bbFileUpload",B="bbFileUpload",F="thirdPartyFileSelectedEvent",q="fileSelected",j="dismissUploadModalEvent",H=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.AllUploadsCompleted=new t("allUploadsCompleted"),t.AssignDropTarget=new t("assignDropTarget"),t.Cancel=new t("cancel"),t.CommenceUpload=new t("commenceUpload"),t.ContentCreated=new t("contentCreated"),t.Delete=new t("delete"),t.DeleteContent=new t("deleteContent"),t.Error=new t("error"),t.File=new t("file"),t.FileDrop=new t("fileDrop"),t.Folder=new t("folder"),t.LinkProgress=new t("linkProgress"),t.OutlineAddContentButtonFileSelected=new t("outlineAddContentButtonFileSelected"),t.ProgressRenderComplete=new t("progressRenderComplete"),t.UpdateFileTypes=new t("updateFileTypes"),t.UpdateProgress=new t("updateProgress"),t.Uploaded=new t("uploaded"),t.Uploading=new t("uploading"),t.UploadProgressComplete=new t("uploadProgressComplete"),t}(u.a),V=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorKey=n,r}return r.__extends(t,e),t.prototype.getErrorKey=function(){return this.errorKey},t.General=new t("generalFileUploadError","components.directives.fileUpload.errorFull"),t.Security=new t("securityFileUploadError","components.directives.fileUpload.errorSecurity"),t}(u.a),z=function(){function e(t,n,r,a,u,c,d,p,f,m,h,v,b,y,C,w,$,k){var T=this;if(this.scope=t,this.element=n,this.attrs=r,this.contextCourseMembership=a,this.bbLocalize=u,this.cloudDrive=c,this.interval=d,this.$modal=p,this.$http=f,this.timeout=m,this.$compile=h,this.Upload=v,this.ultraState=b,this.FileUtilityFactory=y,this.errorModal=C,this.toast=w,this.$q=$,this.contextUser=k,this.aborted=!1,this.alertedUserForFolderIncompatibility=!1,this.fileReviewVisible=!1,this.isMultipleUpload=!1,this.letMeChooseSelected=!1,this.progressVisible=!1,this.successVisible=!1,this.transcludeVisible=!0,this.uploadInProgress=!1,this.isUploadCompleteEventRegistered=!1,this.currentUploadCount=0,this.failedUploadCount=0,this.idCounter=0,this.originalUploadCount=0,this.successfulUploadCount=0,this.allowedFileTypes="",this.allowMultiple=!1,this.hideTranscludeDuringUpload=!0,this.id="",this.isContent=!1,this.monitorLeave=!1,this.useDefaultSuccessMethod=!1,this.isThirdPartyUpload=!1,this.model={fileLocation:null,files:[]},this.uploadingFiles=[],this.uploadsInProgress={},this.cancelUpload=function(e){var t=T.getUploadingFileIndexById(e);T.scope.isThirdPartyUpload&&t>=0?T.uploadingFiles.splice(t,1):T.uploadsInProgress[e]&&t>=0&&(T.abortUpload(e),T.aborted=!0,T.originalUploadCount--,T.resetFileInput(),t>=0&&T.uploadingFiles.splice(t,1),T.allowMultiple&&0!==T.model.files.length||T.hideTranscludeDuringUpload&&(T.fileReviewVisible=!1,T.transcludeVisible=!0)),T.uploadingFiles&&0!==T.uploadingFiles.length||(T.uploadInProgress=!1)},this.updateModel=function(e,t,n,r,i){var o=e.mimeType?e.mimeType:n,s=T.fileUtil.calculateSize(t.size),a={fileLocation:e.fileLocation,webLocation:e.webLocation,fileName:e.fileName,currentMimeType:o,fileSize:T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.sizeOutput",params:{label:s.sizeLabel,size:parseFloat(s.size.toFixed(2)).toString()}}),isMedia:e.isMedia,uploadDate:T.uploadDate,targetClass:r,ui:{position:i}};return T.allowMultiple?T.model.files.push(a):T.model.files[0]=a,T.model.fileLocation=e.fileLocation,T.currentFileName=a.fileName,a},this.success=function(e,t){T.currentUploadCount--,T.model.files=[],T.currentUploadCount<=0&&T.scope.$root.$broadcast(B,H.AllUploadsCompleted,null,null,null,T.scope.primaryKey&&T.scope.primaryKey()),"/v1/files"===T.attrs.url&&T.useDefaultSuccessMethod&&T.hideTranscludeDuringUpload&&(T.transcludeVisible=!0)},this.displayUploadError=function(e){T.scope.errorModalErrorKey=e?e.getErrorKey():V.General.getErrorKey(),T.modalInstance=T.$modal.open({template:O,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then(function(){},function(){T.resetFileInput(),T.hideTranscludeDuringUpload&&(T.transcludeVisible=!0)})},this.getMoreSupportURL=function(){return T.contextCourseMembership.isActAsInstructorMembership()||T.contextUser.userModel.isInstructor()?"http://help.blackboard.com/001_562en_US":"http://help.blackboard.com/001_563en_US"},this.progress=function(e,t,n){T.scope.$root.$broadcast(B,e,t,n,H.UpdateProgress,T.scope.targetDiv)},this.conductUpload=function(e,t,n){var r,o,s=0;if(o=n?T.uploadingFiles.filter(function(e){return e.id===n})[0]:T.uploadingFiles.filter(function(t){return t.ui.primaryKey===e.ui.primaryKey})[0],r=e.targetElement?e.targetElement:T.scope.targetElement,T.scope.isThirdPartyUpload)e&&(e.ui.index=t,e.ui.position=T.scope.position&&T.scope.position(),e.ui.targetDiv=T.scope.targetDiv,T.scope.thirdPartyDownloadHandler(e));else{var a=I.j()+g.a.apiBasePath+"/v1/files?expand=mimeType,isMedia";T.scope.fileLocation&&(a=a+"&fileLocation="+T.scope.fileLocation),T.scope.webLocation&&(a=a+"&webLocation="+T.scope.webLocation),T.scope.extraParams&&(a=a+"&"+i.map(T.scope.extraParams(),function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&")),T.uploadsInProgress[o.id]=T.Upload.upload({url:a,method:"POST",headers:{"Content-Type":e.type},data:e.data,file:e.file,fileName:e.fileName}).progress(function(e){100!==(s=parseInt((100*e.loaded/e.total).toString(),10))?o.currentProgress=s:o.currentProgress<100&&(o.currentProgress=99),T.progress(o.id,s,r)}).success(function(n,r,i,s){var a=T.interval(function(){if(100===o.currentProgress||0===o.currentProgress){var r=T.updateModel(n,e.file,e.currentMimeType,e.targetClass,T.scope.position&&T.scope.position());if(r.ui.originFileName=e.fileName,T.success(r,t),T.successfulUploadCount++,T.removeUploadingFile(e),(!T.uploadingFiles||0===T.uploadingFiles.length)&&(T.uploadInProgress=!1,T.failedUploadCount+T.successfulUploadCount===T.originalUploadCount)){var i=void 0;i=T.originalUploadCount>1?0===T.failedUploadCount?T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadSuccessful.plural",params:{filesCount:T.originalUploadCount},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:T.originalUploadCount-T.failedUploadCount,filesCount:T.originalUploadCount},noWrap:!0})+" "+T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:T.failedUploadCount,filenameList:T.bbLocalize.formatItemsSync(T.failedUploadFilenames,T.failedUploadFilenames.length,null,T.scope,!1,{noWrap:!0})},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.singleFile.uploadSuccessful",noWrap:!0}),T.scope.$root.$broadcast(E.a,i)}r.ui.id=e.id,null!=e.content?T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,e.content,r,H.Uploaded,T.scope.targetDiv,T.isMultipleUpload):T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,r,H.Uploaded,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey()),T.interval.cancel(a)}},T.scope,100,5e3,!0)}).error(function(t){if(T.removeUploadingFile(e),T.failedUploadCount++,T.failedUploadFilenames.push(e.fileName),(!T.uploadingFiles||0===T.uploadingFiles.length)&&(T.uploadInProgress=!1,T.failedUploadCount+T.successfulUploadCount===T.originalUploadCount)){var n=void 0;n=T.originalUploadCount>1?T.failedUploadCount===T.originalUploadCount?T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFailed",noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadFinished.plural",params:{successfulFilesCount:T.originalUploadCount-T.failedUploadCount,filesCount:T.originalUploadCount},noWrap:!0})+" "+T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.failedFiles.plural",params:{filesCount:T.failedUploadCount,filenameList:T.bbLocalize.formatItemsSync(T.failedUploadFilenames,T.failedUploadFilenames.length,null,T.scope,!1,{noWrap:!0})},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.singleFile.uploadFailed",noWrap:!0}),T.scope.$root.$broadcast(E.a,n)}if(T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,e,H.Error,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey()),T.aborted)T.aborted=!1;else{var r=t&&422===t.status?V.Security:V.General;T.displayUploadError(r)}})}},this.prepareToUpload=function(e,t,n,r){T.resetFileInput();var o=JSON.stringify({fileLocation:T.model.fileLocation}),a=e.type;a||(a=T.unknownMimeType);var u,c=e.name||e.filename;T.scope.isThirdPartyUpload?((u={id:e.id,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:c,targetClass:"img-icon-document",type:e.type}).ui=s.copy(e.ui),u.ui?u.ui.primaryKey=T.scope.primaryKey&&T.scope.primaryKey():u.ui={primaryKey:T.scope.primaryKey&&T.scope.primaryKey()},t&&T.isZipFile(c)&&(u.ui.needUnzip=t),u.ui.fileId=e.id,T.uploadingFiles.push(u),T.isUploadCompleteEventRegistered||(T.scope.$on("uploadComplete",function(e,t){i.findIndex(T.uploadingFiles,function(e){return t.ui.fileId===e.ui.fileId})>=0&&(T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,t,H.Uploaded,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey()),T.removeUploadingFile(t)),T.uploadingFiles&&0!==T.uploadingFiles.length||(T.uploadInProgress=!1)}),T.isUploadCompleteEventRegistered=!0),T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,u,H.Uploading,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey())):((u={content:r,currentMimeType:a,currentProgress:0,data:o,file:e,fileName:c,id:Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),progressId:null,targetClass:"img-icon-document",type:e.type}).ui={primaryKey:T.scope.primaryKey&&T.scope.primaryKey()},T.uploadingFiles.push(u),null!=r?T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,u,H.FileDrop,T.scope.targetDiv):T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,u,H.Uploading,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey()))},this.uploadFiles=function(e,t){T.isContent||(T.fileReviewVisible=!0),T.hideTranscludeDuringUpload&&(T.transcludeVisible=!1),e.forEach(function(n){T.isContent?T.isFolder(n).then(function(e){e?(T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,n,H.Folder),T.scope.isChrome||T.alertedUserForFolderIncompatibility||(T.alertedUserForFolderIncompatibility=!0,T.errorModal.handleError(T.browserFolderWarning))):(T.uploadInProgress=!0,T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,n,H.File),T.currentUploadCount++)}):(T.uploadInProgress=!0,T.prepareToUpload(n,t,e.indexOf(n),null))})},this.continueCurrentUpload=function(e,t){e.length>0&&T.uploadFiles(e,t)},this.uploadEnabled=function(){return(T.allowMultiple||T.allowMultipleSelects||0===T.uploadingFiles.length&&0===T.model.files.length)&&!T.scope.isThirdPartyUpload},this.fileUploadClick=function(){T.uploadEnabled()&&T.element.find(".fileUploadInput").trigger("click",!0)},this.modalCancelUpload=function(){T.modalInstance.dismiss()},this.addContent=function(e){e&&T.modalInstance.close(e)},this.closeModal=function(e){if(null===e||s.isUndefined(e))return T.modalInstance.close();e?T.modalInstance.close(e):(T.modalInstance.close(e),T.resetFileInput())},this.closeModalAndChooseFiles=function(){T.closeModal(!0),T.resetFileInput(),T.element.find(".file-upload-container div:first-child").eq(0).click()},this.containsPackageFile=function(e,t){t?(T.modalInstance=T.$modal.open({template:N,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then(function(t){t&&T.continueCurrentUpload(e,t)},function(e){T.notifyUploadCancelled(),T.resetFileInput()})):T.continueCurrentUpload(e)},this.containsZipFile=function(e){0!==e.filter(function(e){return T.isZipFile(e.name)}).length?(T.modalInstance=T.$modal.open({template:G,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then(function(t){T.continueCurrentUpload(e,t)},function(e){T.notifyUploadCancelled(),T.resetFileInput()})):T.containsPackageFile(e)},this.checkAllowedFileTypes=function(e){var t=T.validateFiles(e);t.length!==e.length?(T.validFiles=t,T.modalInstance=T.$modal.open({template:T.disallowedFileTypeErrorTemplate||x,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then(function(e){T.scope.skipZipFileCheck&&T.scope.skipZipFileCheck()?T.continueCurrentUpload(t,!1):T.containsZipFile(t)},function(e){T.notifyUploadCancelled(),T.resetFileInput()})):T.scope.skipZipFileCheck&&T.scope.skipZipFileCheck()?T.continueCurrentUpload(t,!1):T.containsZipFile(t)},this.removeFoldersIfBreaksDepthLimit=function(e){T.scope.depth&&T.scope.depth()>S.l?T.removeFolders(e,L):T.checkAllowedFileTypes(e)},this.removeFoldersIfDisallowed=function(e){T.scope.disallowFolderUploads&&T.scope.disallowFolderUploads()?T.removeFolders(e,D):T.removeFoldersIfBreaksDepthLimit(e)},this.removeFolders=function(e,t){var n={};T.$q.all(e.map(function(e){return T.isFolder(e).then(function(t){return t?n:e})})).then(function(r){var i=r.filter(function(e){return e!==n});i.forEach(function(e){e.path=null}),i.length!==e.length?(T.scope.hasFiles=0!==i.length,T.modalInstance=T.$modal.open({template:t,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then(function(e){T.checkAllowedFileTypes(i)},function(e){T.notifyUploadCancelled(),T.resetFileInput()})):T.checkAllowedFileTypes(i)})},this.ensurePlurality=function(e){e.length>1&&!T.allowMultiple?(T.uploadedFiles=e,T.modalInstance=T.$modal.open({template:_,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),T.modalInstance.result.then(function(t){var n=o('input[type="radio"][name="fileListing"]:checked').val();T.removeFoldersIfDisallowed([e[n]])},function(e){T.notifyUploadCancelled(),T.resetFileInput()})):T.removeFoldersIfDisallowed(e)},this.onFileSelect=function(e,t,n,r,i,s){if(!(s&&(o(s.target).is(".js-no-file-drop")||o(s.target).is(".js-show-add-options"))||e&&e.length&&"Blob"===e[0].constructor.name))if(e.length){T.isMultipleUpload=e.length>1,T.scope.$root.$broadcast(B,T.scope.primaryKey&&T.scope.primaryKey(),H.AssignDropTarget),T.scope.$root.$broadcast(B,T.scope.primaryKey&&T.scope.primaryKey(),H.OutlineAddContentButtonFileSelected),T.setUploadDate(),T.ensurePlurality(e),T.originalUploadCount=e.length,T.failedUploadCount=T.successfulUploadCount=0,T.failedUploadFilenames=[];var a=void 0;a=T.originalUploadCount>1?T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.multipleFiles.uploadStarted.plural",params:{filesCount:T.originalUploadCount},noWrap:!0}):T.bbLocalize.translateSync({locale:T.bbLocalize.getLocale(T.scope),key:"components.directives.fileUpload.aria.singleFile.uploadStarted",noWrap:!0}),T.scope.$root.$broadcast(E.a,a)}else T.throwModalForNonFileUpload()},this.confirmLeaveDuringUpload=function(t,n,r){!T.uploadInProgress&&!T.cloudDrive.isGettingFilesInfo||e.isLeaveConfirmModalOpened||(t.preventDefault(),T.modalInstance=T.$modal.open({template:A,scope:T.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),e.isLeaveConfirmModalOpened=!0,T.modalInstance.result.then(function(t){e.isLeaveConfirmModalOpened=!1,T.scope.isThirdPartyUpload||T.abortAllUploads(),T.aborted=!0,T.uploadInProgress=!1,T.uploadingFiles.forEach(function(e){T.scope.$root.$broadcast(B,T.scope.fileUploadDivId,e,H.Cancel,T.scope.targetDiv,T.scope.primaryKey&&T.scope.primaryKey())}),T.ultraState.go(n.name,r)},function(){e.isLeaveConfirmModalOpened=!1,T.scope.$root.$broadcast("$stateChangeAbort",{reason:"ABORTED_BY_FILE_UPLOAD"})}))},this.initialState=this.ultraState.current.name,this.allowMultipleSelects=t.$eval(t.allowMultipleSelects),this.scope.isChrome=/Chrome/.test(navigator.userAgent),this.disallowedFileTypeErrorTemplate=this.scope.disallowedFileTypeErrorTemplate,t.dragClass="drag",t.$on("bb-drag-start",function(){t.dragClass=""}),t.$on("file-drag-restore",function(){t.dragClass="drag"}),!t.isThirdPartyUpload){if(!r.url)throw new Error("'url' attribute required in file upload");if(this.url=r.url,!r.data)throw new Error("'data' attribute required in file upload")}this.element.find(".file-upload:first").on("click",function(e,t){T.scope.clickEnabled&&!T.scope.clickEnabled()||t||T.fileUploadClick()}),["hideTranscludeDuringUpload","useDefaultSuccessMethod","allowedFileTypes","forceReselectDisallowedFiles","allowMultiple","isContent","fileUploadClick"].forEach(function(e){var t=T.scope.$watch(e,function(n){null!=n&&(t(),T[e]=n)})});var P=this.scope.$watch("targetDiv",function(e){if(null!=e)P(),T.scope.targetElement=n.find(e),0===T.scope.targetElement.length&&(T.scope.targetElement=o(e));else{T.progressVisible=!0;var r=T.interval(function(){var e=n.find(".file-upload-panel");e.length>0&&(T.scope.targetElement=e,T.interval.cancel(r))},t,100,10)}}),M=this.scope.$watch("monitorLeave",function(e){e&&(T.registerRouterStateChangeEventHandlers(),M())});this.isThirdPartyUpload=t.isThirdPartyUpload,this.loadTranslations(),this.fileUtil=this.FileUtilityFactory()}return e.prototype.throwModalForNonFileUpload=function(){var e=this;this.modalInstance=this.$modal.open({template:M,scope:this.scope,resolve:{translations:[l.serviceName,function(e){return e.loadBundle("components/directives/file-upload")}]}}),this.modalInstance.result.catch(function(t){e.notifyUploadCancelled(),e.resetFileInput()})},e.prototype.endsWith=function(e,t){return e.lastIndexOf(t),e.lastIndexOf(t)===e.length-t.length},e.prototype.getUploadingFileIndexById=function(e){var t=this.uploadingFiles.filter(function(t){return t.id===e})[0];return this.uploadingFiles.indexOf(t)},e.prototype.isFolder=function(e){var t=this,n=this.$q.defer();if("directory"===e.type)n.resolve(!0);else if(e instanceof Blob){var r=new FileReader;r.onload=function(){1===r.readyState&&r.abort(),n.resolve(!1)},r.onerror=function(){t.isLikelyAFile(e)&&(t.displayUploadError(),t.scope.$root.$broadcast(B,t.scope.fileUploadDivId,e,H.Error,t.scope.targetDiv,t.scope.primaryKey&&t.scope.primaryKey()),n.reject()),n.resolve(!0)},r.readAsText(e)}else n.resolve(!1);return n.promise},e.prototype.isZipFile=function(e){return".zip"===e.substring(e.lastIndexOf(".")).toLowerCase()},e.prototype.isLikelyAFile=function(e){return"directory"!==e.type&&(""!==e.type||e.size>4096)},e.prototype.loadTranslations=function(){var e=this;this.bbLocalize.loadBundle("components/directives/file-upload").then(function(){e.browserFolderWarning=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.browserFolderWarning"}),e.cancelUploadText=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.cancelUploadText"}),e.unknownMimeType=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.unknownMimeType"}),e.uploaded=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.uploaded"}),e.uploading=e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(e.scope),key:"components.directives.fileUpload.uploading"})})},e.prototype.notifyUploadCancelled=function(){this.scope.$root.$broadcast(B,this.scope.fileUploadDivId,null,H.Cancel,this.scope.targetDiv,this.scope.primaryKey&&this.scope.primaryKey())},e.prototype.removeUploadingFile=function(e){i.remove(this.uploadingFiles,function(t){return t.ui&&e.ui&&t.ui.fileId&&e.ui.fileId?t.ui.fileId===e.ui.fileId:e&&t.fileName===e.fileName}),delete this.uploadsInProgress[e.id]},e.prototype.resetFileInput=function(){for(var e=o(document.body).find(".fileUploadInput"),t=0;t<e.length;t++){e.eq(t)[0].value=""}},e.prototype.registerRouterStateChangeEventHandlers=function(){var e=this;this.scope.$on("$stateChangeStart",function(t,n,r,i,o){i.name===n.name||n.name===e.initialState||e.isStateIgnored(i,n)||e.confirmLeaveDuringUpload(t,n,r)})},e.prototype.isStateIgnored=function(e,t){if(this.scope.ignoredStates&&this.scope.ignoredStates())for(var n=0,r=this.scope.ignoredStates();n<r.length;n++){var i=r[n];if(e.name.indexOf(i)>=0||t.name.indexOf(i)>=0)return!0}return!1},e.prototype.setUploadDate=function(){var e=this;this.bbLocalize.formatDatetime(new Date,l.ILocaleDatetimeFormat.Short).then(function(t){e.uploadDate=t})},e.prototype.validateFiles=function(e){if(""===this.allowedFileTypes)return e;var t=[],n=!1;this.allowedFileTypes.indexOf("/")>0?(n=!0,t[0]=this.allowedFileTypes.substr(0,this.allowedFileTypes.indexOf("/")),t[1]=this.allowedFileTypes.substr(this.allowedFileTypes.indexOf("/")+1)):t=this.allowedFileTypes.toLowerCase().split(",");for(var r=[],i=0;i<e.length;i++){var o=e[i];if(n){var s=[];s[0]=o.type.substr(0,this.allowedFileTypes.indexOf("/")),s[1]=o.type.substr(this.allowedFileTypes.indexOf("/")+1),t[0]!==s[0]||t[1]!==s[1]&&"*"!==t[1]||r.push(o)}else for(var a=0;a<t.length;a++)if("."!==t[a].charAt(0)&&(t[a]="."+t[a]),this.endsWith(o.name.toLowerCase(),t[a])){r.push(o);break}}return r},e.prototype.abortUpload=function(e){this.uploadsInProgress[e].abort(),delete this.uploadsInProgress[e]},e.prototype.abortAllUploads=function(){var e=this;Object.keys(this.uploadsInProgress).forEach(function(t){return e.abortUpload(t)})},e.isLeaveConfirmModalOpened=!1,e}(),K=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,p,f,m){var h=this;this.contextCourseMembership=e,this.bbLocalize=t,this.cloudDrive=n,this.$modal=r,this.$http=i,this.interval=o,this.timeout=s,this.$compile=a,this.Upload=u,this.ultraStateService=c,this.FileUtilityFactory=l,this.errorModal=d,this.toast=p,this.$q=f,this.contextUser=m,this.replace=!1,this.transclude=!0,this.restrict="E",this.template=R,this.scope={allowedFileTypes:"@",allowMultiple:"=",allowMultipleSelects:"@",cancelUpload:"=",clickEnabled:"&?",confirmLeaveDuringUpload:"=",closeModal:"=",closeModalAndChooseFiles:"@",delete:"=",disableDrag:"&?",disallowFolderUploads:"&?",extensions:"=",fileUploadClick:"=",forceReselectDisallowedFiles:"&?",hideTranscludeDuringUpload:"=",isContent:"=",improperAmountOfFilesUpload:"=",isThirdPartyUpload:"=?",primaryKey:"&?",modalCancelUpload:"=",monitorLeave:"=",onFileSelect:"=",position:"&?",showUnzippedSelection:"=",skipZipFileCheck:"&?",targetDiv:"@",thirdPartyDownloadHandler:"=",uploadUnzippedFiles:"=",unzippedFileSelection:"=",uploadEnabled:"=",useDefaultSuccessMethod:"=",fileLocation:"@?",webLocation:"@?",ignoredStates:"&?",extraParams:"&?",depth:"&?",initialUpload:"=?",disallowedFileTypeErrorTemplate:"@?"},this.link=function(e,t,n,r){e.fileUploadDivId="fileUploadDiv-"+Math.floor(1e4*Math.random())+"-"+Math.floor(1e4*Math.random()),e.targetElement=t.find(".file-upload-panel"),e.fileUpload=new z(e,t,n,h.contextCourseMembership,h.bbLocalize,h.cloudDrive,h.interval,h.$modal,h.$http,h.timeout,h.$compile,h.Upload,h.ultraStateService,h.FileUtilityFactory,h.errorModal,h.toast,h.$q,h.contextUser),e.$on(F,function(t,n,r){t.stopPropagation(),r&&r===(e.primaryKey&&e.primaryKey())&&e.fileUpload.onFileSelect(n),e.$emit(q,n,r)}),e.$on(j,function(){e.fileUpload.modalInstance&&e.fileUpload.modalInstance.dismiss()}),e.$on(B,function(t,n,r,i,o,s,a){if(n===e.fileUploadDivId)if(o===H.Cancel)e.fileUpload.cancelUpload(i);else if(o===H.ProgressRenderComplete)"number"==typeof r&&e.fileUpload.conductUpload(e.fileUpload.uploadingFiles.filter(function(e){return e.id===i})[0],r,i);else if(o===H.UploadProgressComplete){var u=e.fileUpload.uploadingFiles.filter(function(e){return e.id===i})[0];u&&(u.currentProgress=100)}}),e.$on(B,function(n,r,i,o,s){r===(e.primaryKey&&e.primaryKey())&&s===H.UpdateFileTypes&&(e.fileUpload.allowedFileTypes=i,t.find("input").attr("accept",i),o())}),e.$on(B,function(t,n,r,i){n===e.fileUploadDivId&&r&&r.fileName&&i===H.ProgressRenderComplete&&e.fileUpload.conductUpload(r,0,r.id)}),e.$on(B,function(t,n,r,i){if(n===e.fileUploadDivId&&i===H.ContentCreated)var o=h.interval(function(){e.fileUpload.prepareToUpload(r.ui.file,!1,0,r),h.interval.cancel(o)},e,100,20)}),e.$on(B,function(t,n,r,i,o,s){if(n===e.fileUploadDivId&&s===H.LinkProgress)for(var a=0;a<e.fileUpload.uploadingFiles.length;a++)r.content?e.fileUpload.uploadingFiles[a].fileName===r.fileName&&e.fileUpload.uploadingFiles[a].file.path===r.file.path&&e.fileUpload.uploadingFiles[a].id===r.id&&(e.fileUpload.uploadingFiles[a].progressId=r.content.ui.fileUploadId,e.$root.$broadcast(B,e.fileUploadDivId,r,H.CommenceUpload)):e.fileUpload.uploadingFiles[a].fileName===r.fileName&&e.fileUpload.uploadingFiles[a].file.path===r.file.path&&e.fileUpload.uploadingFiles[a].id===r.id&&null==e.fileUpload.uploadingFiles[a].progressId&&(e.fileUpload.uploadingFiles[a].progressId=e.fileUpload.isContent?null:i,e.fileUpload.uploadingFiles[a].targetElement=o,e.$root.$broadcast(B,e.fileUploadDivId,r,H.CommenceUpload))}),e.initialUpload&&e.fileUpload.uploadFiles([e.initialUpload],!1)}}return e.$inject=[c.d,l.serviceName,v.c,C.b,"$http",d.b,$.b,"$compile","Upload",T.d,y.a,b.c,k.b,"$q",P.b],e}();s.module(U,["ngFileUpload",c.a,l.moduleName,v.b,d.a,C.a,w.R,y.b,$.a,"ultra.directives.bbProgress",b.b,k.a,T.b]).directive(B,["$injector",function(e){return e.instantiate(K)}])},P2dS:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("pjml"),a=n("0+Qs"),u="ultra.components.services.gradebookColumnCategory.Service",c="gradeColumnCategoryService",l=function(){function e(t,n,r,i){var o=this;this.$q=t,this.$rootScope=n,this.CourseModel=r,this.interval=i,this.categoriesByCourse={},this.interval(function(){o.categoriesByCourse={}},this.$rootScope,60*e.CLEAN_CACHE_CATEGORIES_INTERVAL*1e3)}return e.prototype.getIconByGradebookCategory=function(t,n){var r=null;if(null!=t){if(!1===n||s.E.GradeCategoryTitleEnum.Attendance.isEqualTo(t)){var i=s.E.GradeCategoryTitleEnum.parse(t);i&&(r=i.getIconName())}r||(r=e.DEFAULT_ICON_FOR_CATEGORY)}return r},e.prototype.getCategoryIcon=function(t){var n=e.DEFAULT_ICON_FOR_CATEGORY;return t&&t.title&&(n=this.getIconByGradebookCategory(t.title,t.isUserDefined)),n},e.prototype.loadGradeCategories=function(e){return this.CourseModel.$new(e).gradebook.categories.$fetch().$asPromise()},e.prototype.getOrLoadCategoriesForCourse=function(e,t){var n=this;if(t||!this.categoriesByCourse[e])return this.loadGradeCategories(e).then(function(t){return n.reorderCategories(t,0),n.categoriesByCourse[e]=t,t});var r=this.$q.defer();return r.resolve(this.categoriesByCourse[e]),r.promise},e.prototype.getFilteredCategoriesForCourse=function(e,t){return this.getOrLoadCategoriesForCourse(e,!0).then(function(e){return i.filter(e,t)})},e.prototype.updateCategoriesForCourse=function(e,t){if(this.categoriesByCourse[e]){var n=this.categoriesByCourse[e],r=i.findIndex(n,function(e){return e.id===t.id});-1===r?n.splice(0,0,t):n.splice(r,1,t)}},e.prototype.deleteCategoriesForCourse=function(e,t){if(this.categoriesByCourse[e]){var n=this.categoriesByCourse[e],r=i.findIndex(n,function(e){return e.id===t.id});r>-1&&n.splice(r,1)}},e.prototype.reorderCategories=function(e,t){for(var n=e.length,r=t;r<n;++r){var i=e[r];i.isUserDefined&&(e.splice(r,1),e.unshift(i))}},e.DEFAULT_ICON_FOR_CATEGORY="custom-item",e.CLEAN_CACHE_CATEGORIES_INTERVAL=5,e.$inject=["$q","$rootScope",s.o.serviceName,a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l);o.module(u,[a.a]).service(c,l)},P2rh:function(e,t,n){},P43K:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("IbG+"),i=n("w9Zy"),o=n("fYJU"),s=n("pjml"),a=n("TnpK"),u=n("qhd3"),c="ultra.features.base.profile.update.basicProfile.routes";r.module(c,["ui.router",i.d,s.R,a.b]).config([a.c,function(e){e.peekState("update-profile",{url:"/update?focusField",require:function(){return Promise.all([n.e(23),n.e(39),n.e(84),n.e(397)]).then(n.bind(null,"SqGJ"))},pageTitle:"base.profile.update.sectionTitle",resolve:{currentUser:[u.serviceName,o.b,function(e,t){return e.$find(t.userId).$asPromise()}]}}).peekState("update-language",{url:"/language",require:function(){return n.e(349).then(n.bind(null,"Upnn"))},pageTitle:"base.profile.updateLanguage.pageTitle",resolve:{currentUser:[u.serviceName,o.b,function(e,t){return e.$find(t.userId).$asPromise()}]}})}])},P82Y:function(e,t,n){e.exports=n("ZJ/X")(1721)},PCGa:function(e,t,n){},PSJS:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"MessageLifeCycleEnum",function(){return l}),n.d(t,"MessageType",function(){return d}),n.d(t,"serviceName",function(){return p});var r=n("mrSG"),i=n("oSB+"),o=n.n(i),s=n("yCC5"),a=n("Rjd/"),u=n("nkTj"),c=n("z6Q5"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Published=new t("PUBLISHED"),t.Deleted=new t("DELETED"),t.Drafted=new t("DRAFT"),t}(o.a),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.next=function(){var e=parseInt(this.toString(),0)+1,n=t.getKeys();return n.length<e&&(e=n.length-1),t[n[e]]},t.Discussion=new t("0"),t.Comment=new t("1"),t.Reply=new t("2"),t.ClassConversation=new t("3"),t}(o.a),p=s.P;a.a.factory(p,["restmod","$q",u.d,c.b,function(t,n,r,i){return t.model().mix({replies:{mask:!0},parent:{mask:!0},states:{hasOne:s.F},discussion:{mask:!0},type:{mask:!0},isAvailable:{mask:!0},user:{mask:!0},lastUpdateUser:{mask:!0},ui:{mask:!0,init:function(){return{isEdit:!1}}},postDate:{serialize:"date"},editDate:{serialize:"date"},"gradedColumn.dueDate":{serialize:"date"},$hooks:{"after-fetch-many":function(){"messages"===this.$scope.$partial&&this[0]&&(this[0].type=d.Discussion,this[0].parent=this[0],this[0].discussion=this[0],this[0].states.readStateInd=this[0].messageStatus.isRead)},"after-destroy":function(e){e.data&&this.$unwrap(e.data)}},$extend:{Record:{getReplies:function(e,t){var r=this;if(t&&0===this.messageStatus.numberOfChildren)return this.replies=this.$scope.$collection(),this.replies.$asPromise=function(){return n(function(e){return e(r.replies)})},this.replies;var i=this;return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/replies",params:{sort:e.sort,limit:e.limit,offset:e.offset,userId:e.userId,groupId:e.groupId,messageLifecycle:e.messageLifecycle}},function(e){this.$unwrap(e.data),i.replies=this,i.ui.count=e.data.paging.count,this.forEach(function(e){e.type=i.type.next(),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead})})},saveReply:function(t,n){void 0===n&&(n={});var r=this.$scope.$url()+"/"+this.id+"/replies?"+e.param(n);return this.$scope.$build().$send({method:"POST",url:r,data:t.$wrap()},function(e){this.$unwrap(e.data),this.replies=this.$scope.$collection()})},getRepliesCount:function(t){void 0===t&&(t={});var n=this.$scope.$url()+"/"+this.id+"/replies/count?"+e.param(t),r=this;return this.$scope.$build().$send({method:"GET",url:n},function(e){r.ui.count=e.data.count},function(){r.ui.count=0})},updateMessageStatus:function(t,n){void 0===n&&(n={});var r=this.$scope.$url()+"/"+this.id+"/states?"+e.param(n);return this.$scope.$build().$send({method:"PATCH",url:r,data:t.$wrap()},function(e){return this.states=this.$unwrap(e.data),this.states},function(e){400===e.status||e.$response&&e.$response.status})},copy:function(e){var t=this;Object.getOwnPropertyNames(e).filter(function(e){return"$"!==e[0]}).forEach(function(n){t[n]=e[n]})}},Collection:{batchGetReplies:function(e){e&&Object.keys(e).forEach(function(t){t,"="+e[t]+"&"});var t=n.defer(),r=[],o=function(t){var o=n.defer();return i.performBatch(function(){n.all(t.map(function(t){return t.getReplies(e,!0).$asPromise()})).then(o.resolve)}),o.promise.then(function(e){return e.forEach(function(e,n){var i=t[n];e.forEach(function(e){e.type=i.type.next(),e.parent=i,e.discussion=i.discussion,e.states.readStateInd=e.messageStatus.isRead,r.push(e)})}),r})};return o(this).then(o).then(t.resolve),t.promise}}}})}])}.call(this,n("EVdn"))},"Q/M7":function(e,t,n){"use strict";(function(e){var r;function i(){return r||"undefined"==typeof location||(r=o(location.href)),r}function o(e){var t=/^[^\/]*\/\/[^\/]+/.exec(e);return t&&t[0]||e}function s(e){return 0===e.indexOf("https://")}function a(e){return/^[a-zA-Z]*:?\/\//.test(e)}function u(e,t){return e&&e.indexOf("//")<0&&("/"!==e[0]&&(e="/"+e),e=t?t+e:i()+e),e}function c(e){return e?/[^\?#]*/.exec(e)[0]:e}function l(e,t){var n="";return t&&e&&e.isClassic()&&(n=decodeURIComponent(t).trim()),n.length>0&&"/"===n[0]&&n||null}function d(e){e.match(/:\/\//)||(e="http://"+e),window.open(e,"_blank")}function p(e){window.location=e}function f(e){return e?e.replace(/^https?:/,""):""}function m(e){return e&&e.indexOf("://")>=0?e.substring(e.indexOf("://")+3):e}function h(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split("?")[0].split(":")[0]}function g(e){var t=e.indexOf("?");if(t<0)return e;var n=e.substring(t+1).split("&"),r={};return n.map(function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])}),r}function v(e,t,n){return e.indexOf(t+"=")<0?e+(e.indexOf("?")<0?"?":"&")+t+"="+n:e}function b(t,n,r){return encodeURIComponent(t+"/"+n+"?"+e.param(r))}function y(e){return u("/webapps/blackboard/execute/ultraFramePassThrough?redirectTo="+encodeURIComponent(u(e)))}function S(e,t){var n=v(e,"isForcedDownload","true");return n=v(n,"downloadFileName",t)}function C(e){var t=e.split("/");return t[t.length-1]}function w(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.d(t,"j",function(){return i}),n.d(t,"i",function(){return o}),n.d(t,"n",function(){return s}),n.d(t,"s",function(){return a}),n.d(t,"c",function(){return u}),n.d(t,"r",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"o",function(){return d}),n.d(t,"p",function(){return p}),n.d(t,"l",function(){return f}),n.d(t,"q",function(){return m}),n.d(t,"e",function(){return h}),n.d(t,"b",function(){return g}),n.d(t,"a",function(){return v}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return y}),n.d(t,"h",function(){return S}),n.d(t,"k",function(){return C}),n.d(t,"m",function(){return w})}).call(this,n("EVdn"))},QWGI:function(e,t){e.exports='\n<footer class="panel-footer notification toast-container">\n  <bb-save-tray tray-type="LoadMoreResults"\n                tray-id="{{::trayId}}"\n                tray-localization-keys-prefix="{{::trayLocalizationKeysPrefix}}">\n  </bb-save-tray>\n</footer>'},QaOk:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("+4Px"),o="ultra.directives.accessibility.arrowKeyNavigation",s="bb-arrow-key-container",a="["+s+"]",u="[bb-arrow-key-destination]",c=function(){function t(t){var n=this;this.$parse=t,this.restrict="A",this.link=function(t,r,o){var s=n.$parse(o.bbArrowKeyNavigation)(null);if("rows"!==s.layout&&"columns"!==s.layout&&"both"!==s.layout)throw new Error("bb-arrow-key-navigation directive is missing or has an invalid layout specified");if(s.tabDirection&&"vertical"!==s.tabDirection&&"horizontal"!==s.tabDirection)throw new Error("bb-arrow-key-navigation directive has an invalid tabDirection specified");r.on("keydown",function(t){var o=e(t.target),a=t.keyCode;s.tabDirection&&a===i.u&&("vertical"===s.tabDirection?a=t.shiftKey?i.v:i.d:"horizontal"===s.tabDirection&&(a=t.shiftKey?i.j:i.s)),"rows"===s.layout&&(a=n.rotateKeyCode(a)),s.upEqualsLeft&&(a=n.upEqualsLeftKeyCode(a)),n.navigate(o,r,a,s.wrap,s.explicit)&&(n.body.removeClass("hide-focus-outline"),t.preventDefault(),t.stopPropagation())}),t.$on("$destroy",function(){r.off()})},this.body=e("body")}return t.prototype.navigate=function(e,t,n,r,o){var c;switch(n){case i.v:if(o){var l=parseInt(e.closest(a).attr("bb-arrow-key-container"),10),d=(p=t.find(this.containerWithValue(l)).find(u).filter(":visible")).index(e.closest(u));"0"===e.attr("tabindex")||0===d&&!r||(c=p.eq(d-1))}else!(c=e.closest(u).prev(u)).length&&r&&(c=e.closest(a).find(u).last());break;case i.d:if(o){var p;l=e.closest(a).attr("bb-arrow-key-container"),d=(p=t.find(this.containerWithValue(l)).find(u).filter(":visible")).index(e.closest(u));!(c=p.eq(d+1)).length&&r&&(c=p.first())}else!(c=e.closest(u).next(u)).length&&r&&(c=e.closest(a).find(u).first());break;case i.j:if(o){l=parseInt(e.closest(a).attr(s),10);var f=e.closest(u).attr("bb-arrow-key-destination");c=t.find(this.containerWithValue(l-1)).find(this.destinationWithValue(f)).first()}else{var m=e.closest(u).prevAll(u).length;(h=this.getPreviousContainer(e).find(u)).length?c=h.eq(m).add(h.last()).first():r&&m>0&&(c=e.closest(a).nextAll(a).last().find(u).eq(m))}break;case i.s:if(o){l=parseInt(e.closest(a).attr(s),10),f=e.closest(u).attr("bb-arrow-key-destination");c=t.find(this.containerWithValue(l+1)).find(this.destinationWithValue(f)).first()}else{var h;m=e.closest(u).prevAll(u).length;(h=this.getNextContainer(e).find(u)).length?c=h.eq(m).add(h.last()).first():r&&(c=e.closest(a).prevAll(a).last().find(u).eq(m))}}return!(!c||!c.length)&&(c.focus(),!0)},t.prototype.containerWithValue=function(e){return"["+s+'="'+e+'"]'},t.prototype.destinationWithValue=function(e){return'[bb-arrow-key-destination="'+e+'"]'},t.prototype.getPreviousContainer=function(e){return e.closest(a).prevAll(a).first()},t.prototype.getNextContainer=function(e){return e.closest(a).nextAll(a).first()},t.prototype.rotateKeyCode=function(e){switch(e){case i.v:return i.j;case i.d:return i.s;case i.j:return i.v;case i.s:return i.d}},t.prototype.upEqualsLeftKeyCode=function(e){switch(e){case i.j:return i.v;case i.s:return i.d;default:return e}},t.$inject=["$parse"],t}();r.module(o,[]).directive("bbArrowKeyNavigation",["$injector",function(e){return e.instantiate(c)}])}).call(this,n("EVdn"))},Qbdf:function(e,t,n){"use strict";var r=n("mrSG"),i=n("pjml"),o=n("yC9S"),s=n("ZzR9"),a=n("LvDl"),u=function(e){function t(t){var n=e.call(this)||this;return n.courseId=t,n}return r.__extends(t,e),t}(function(){function e(){var e=this;this._cache={},this.hookUserModel=a.once(function(t){var n=e;return e.offHookUserModelFunc||(e.offHookUserModelFunc=t.$mixHook("after-feed",function(){n.cache(this.id,this)})),e.offHookUserModelFunc})}return e.prototype.destroy=function(){this._cache={},this.offHookUserModel()},e.prototype.miss=function(e){var t=this;return e.filter(function(e){return!(e in t._cache)})},e.prototype.hit=function(e){var t=[].concat(e),n=this.miss(t);return a.isEmpty(n)},e.prototype.get=function(e,t){var n=this._cache[e];return!n&&t?t:n},e.prototype.invalidate=function(e){delete this._cache[e]},e.prototype.cache=function(e,t){e&&t&&!t.isPlaceHolder&&(this._cache[e]=t)},e.prototype.fetchUsers=function(e,t,n){var r=this,i=n.defer(),o=this.miss([].concat(e));return a.isEmpty(o)?i.resolve(this):(this.offHookUserModelFunc||this.hookUserModel(t),t.findMany(o).$then(function(e){i.resolve(r)})),i.promise},e.prototype.offHookUserModel=function(){this.offHookUserModelFunc&&(this.offHookUserModelFunc(),this.offHookUserModelFunc=void 0)},e}()),c=n("0JpG"),l=n("x+T+"),d=n("lVRt"),p=n("AzI/");n.d(t,"b",function(){return f}),n.d(t,"e",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"d",function(){return v});var f="ultra.service.course-context.course",m="currentCourseModel",h=m+"Provider",g=f+"."+m+".changed",v=d.b,b=function(){this.$get=["$injector",function(e){return e.instantiate(y)}],this.name=v,this.resolve=["$state",m,function(e,t){var n=e.nextParams.courseId;return t.load(n)}]},y=function(){function e(e,t,n,r,i,a){this.$q=e,this.$rootScope=t,this.bbLocalize=n,this.entitlementCache=r,this.CourseModel=i,this.UserModel=a;var u=this;o.b.OnRootScope(t,s.a.$stateHasCourseInContextChanged,function(e,t,n){n&&!t&&u.clear()})}return Object.defineProperty(e.prototype,"courseId",{get:function(){return this._courseId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"course",{get:function(){return this._courseModel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previewStatus",{get:function(){return this._previewStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usersCache",{get:function(){return this._usersCache},enumerable:!0,configurable:!0}),e.prototype.isInIframeOfPreviewMode=function(){return this.previewStatus&&this.previewStatus.previewing&&window.top!==window},e.prototype.load=function(e){var t=this;return e?e&&this.courseId===e&&this.course?this.course.$asPromise():this.loadCourse(e).then(function(n){return t.$q.all([t.loadLocalizationBundle(n),t.entitlementCache.loadCourseEntitlements(e)]).then(function(){return t.update(e,n),t._courseModel.studentPreview.$resolve().$asPromise().then(function(e){return t._previewStatus=e,e.courseMembershipId?t.course.memberships.$new(e.courseMembershipId).$fetch().$asPromise().then(function(n){return e.user=t.UserModel.$buildRaw(e.user),e.user.memberships.push(t.course.memberships.$buildRaw(n)),t._courseModel}):t._courseModel})})},function(e){return t.$q.reject(Object.assign(e||{},{goToBasePage:!0}))}):this.$q.when(null)},e.prototype.loadCourse=function(e){var t=this;return this.CourseModel.$find(e,{expand:"instructorsMembership, instructorsMembership.courseRole, effectiveAvailability, isChild"}).$allow([404]).$asPromise().then(function(n){var r=n.$response;if(r&&404===r.status){var i=new Error("Course "+e+" not found");return Object.assign(i,{goToBasePage:!0,errorModalConfig:{response:r,template:p}}),t.$q.reject(i)}return n})},e.prototype.loadLocalizationBundle=function(e){var t;return t=e.isClassic()||!e.locale?this.bbLocalize.getLocale(this.$rootScope):e.locale,this.$q.all([this.bbLocalize.loadLocale(t),this.bbLocalize.loadBundle("features/course/course",t)])},e.prototype.clear=function(){this.update(null,null)},e.prototype.update=function(e,t){var n=this.courseId,r=this.course;this._courseId=e,this._courseModel=t,this._usersCache&&this._usersCache.courseId!==e&&(this._usersCache.destroy(),this._usersCache=null),e&&(this._usersCache=new u(e),this._usersCache.hookUserModel(this.UserModel)),this.$rootScope.$broadcast(g,{id:e,model:t},{id:n,model:r})},e.prototype.refreshStudentPreviewStatus=function(){return this._courseModel.studentPreview.$fetch()},e.$inject=["$q","$rootScope",c.serviceName,l.c,i.o.serviceName,i.Qb.serviceName],e}(),S=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(y),[i.R,c.moduleName,l.b]);angular.module(f,S).provider(m,b)},QejK:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.packageTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.packageFull</bb-translate>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button button--secondary js-secondary-button dismiss-message expand" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.takeMeBack">\n          <bb-translate>components.directives.fileUpload.takeMeBack</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(true)" class="button button--secondary js-secondary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.addAllContent\'}" analytics-id="components.directives.fileUpload.addAllContent">\n          <bb-translate>components.directives.fileUpload.addAllContent</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" ng-click="fileUpload.addContent(false)" class="button js-primary-button" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.letMeChoose\'}" analytics-id="components.directives.fileUpload.letMeChoose">\n          <bb-translate>components.directives.fileUpload.letMeChoose</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},RDfZ:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p});n("yDoS");var r=n("IbG+"),i=n("Qbdf"),o=n("0JpG"),s=n("pjml"),a=n("lEL+"),u=n("TnpK"),c=n("t6LR"),l=n("Oovi"),d=n("CPVT"),p="ultra.directives.conversionStatusBar",f=function(){function t(t,n,r,i,o,s,a,u,c){var l=this;this.$scope=t,this.$rootScope=n,this.$q=r,this.$modal=i,this.CourseModel=o,this.ultraState=s,this.contextCourse=a,this.bbLocalize=u,this.timeout=c,this.displayGuidanceBackToClassic=!1,this.identifyCourse().then(function(e){l.course=e,l.courseId=l.course.id,l.showStatusBar=!1,l.course.canConvert()&&(l.showStatusBar=l.course.isUltraPreview())}),t.$on("confirmNewExperience",function(){l.useTheNewExperience()}),t.$on("TOGGLE-PREVIEW",function(e,t){l.inPreview=t,l.updateStatusClass(),l.showStatusBar=l.course.isUltraPreview()}),t.$on("$stateChangeSuccess",function(){l.updateStatusClass()}),t.$on("$destroy",function(){e("body").removeClass("has-conversion-status-bar")})}return Object.defineProperty(t.prototype,"showStatusBar",{get:function(){return this._showStatusBar},set:function(e){var t=this._showStatusBar;this._showStatusBar=e,t!==e&&this.updateStatusClass()},enumerable:!0,configurable:!0}),t.prototype.updateStatusClass=function(){!this.showStatusBar||this.hideStatusBar()||this.inPreview?e("body").removeClass("has-conversion-status-bar"):e("body").addClass("has-conversion-status-bar")},t.prototype.identifyCourse=function(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()},t.prototype.useTheNewExperience=function(){var e=this;this.course.setUltraStatusDecided().then(function(){e.showStatusBar=!1,e.$rootScope.$broadcast("reloadCourse",e.courseId)})},t.prototype.backToClassic=function(){var e=this;this.course.undoCourseConversion().then(function(t){var n=t.$response;if(200===n.status)e.ultraState.transitionTo(e.course.getBaseRoute()),e.$rootScope.$broadcast("convertToClassicCourse",e.course.id);else if(400===n.status||404===n.status){e.$modal.open({template:l,scope:e.$scope,resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/outline/course-outline")}]}}).result.then(function(){e.ultraState.transitionTo(e.course.getBaseRoute())})}})},t.prototype.hideStatusBar=function(){return(this.ultraState.current.name.match(/\.peek\./g)||[]).length>1},t.$inject=["scope","$rootScope","$q","$modal",s.o.serviceName,u.d,i.e,o.serviceName,a.b],t}(),m=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=c,this.scope={courseId:"@?"},this.link=function(e){e.conversionStatusBarController=t.$injector.instantiate(f,{scope:e})}}return e.$inject=["$injector"],e}();r.module(p,[i.b,o.moduleName,s.R,u.b,a.a,d.a]).directive("bbConversionStatusBar",["$injector",function(e){return e.instantiate(m)}])}).call(this,n("EVdn"))},"RJ/U":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s=n("Qbdf"),a="ultra.course.question-banks.routes";r.module(a,[i.moduleName,o.b,s.b]).config([o.c,s.c,function(e,t){var r;e.peekState("question-banks",{url:"/banks",resolve:(r={},r[s.d]=t.resolve,r.translations=[i.serviceName,function(e){return e.loadBundle("features/course/question-banks/question-banks")}],r),peekStates:["import-details"],peekViewName:"question-banks-peek",panelClass:"full",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(269)]).then(n.bind(null,"lXpl"))},pageTitle:"course.question-banks.pageTitle"}).peekState("import-details",{url:"/importDetails/{taskId:_[0-9]+_1}",require:function(){return n.e(324).then(n.bind(null,"zGGy"))},pageTitle:"course.question-banks.import-details.pageTitle"})}])},RNuw:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("LvDl"),i=n("IbG+");function o(e,t,n,o){var s={};return e.$watch(function(){return t},function(t,a){var u=Object.keys(t).filter(function(e){return!s.hasOwnProperty(e)&&t[e]&&t[e].hasOwnProperty("$viewValue")&&(!o||!(o.indexOf(e)>-1))});i.forEach(u,function(i){s[i]=e.$watch(function(){return t[i].$viewValue},function(e,o){!t[i].$dirty&&(null==o||isNaN(o))||r.isEqual(e,o)||n(e,o)})});var c=Object.keys(a).filter(function(e){return!t.hasOwnProperty(e)&&a[e]&&a[e].hasOwnProperty("$viewValue")});i.forEach(c,function(e){s[e](),delete s[e]})},!0),function(){i.forEach(s,function(e){e()})}}},"Rjd/":function(e,t,n){"use strict";n("TeAI"),n("M8gh");var r=n("IbG+"),i=n("nkTj"),o=n("z6Q5"),s=r.module("ultra.models",["restmod","angular-data.DSCacheFactory",i.e,o.a]);t.a=s},RphD:function(e,t){},SWI0:function(e,t,n){e.exports=n("ZJ/X")(503)},Sa5G:function(e,t,n){"use strict";var r,i=n("817J"),o=n("mrSG"),s=n("oSB+"),a=n.n(s),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.Text=new t("textBlock"),t.File=new t("fileBlock"),t.AttemptFile=new t("attemptFileBlock"),t}(a.a),c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e),t.stringToEnum=function(e){var n=null;switch(e){case t.SingleText.toString():n=t.SingleText;break;case t.SingleFile.toString():n=t.SingleFile;break;default:n=t.TextAndFiles}return n},t.SingleText=new t("SingleText"),t.SingleFile=new t("SingleFile"),t.TextAndFiles=new t("TextAndFiles")}(a.a),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e),t.prototype.getOptionValue=function(){switch(this){case t.Add:return"+";case t.Subtract:return"-";case t.Multiply:return"*";case t.Divide:return"/";case t.Open_Parenthesis:return"(";case t.Close_Parenthesis:return")";case t.Value:return"value"}},t.Add=new t("ADD"),t.Subtract=new t("SUBTRACT"),t.Multiply=new t("MULTIPLY"),t.Divide=new t("DIVIDE"),t.Open_Parenthesis=new t("OPEN_PARENTHESIS"),t.Close_Parenthesis=new t("CLOSE_PARENTHESIS"),t.Value=new t("VALUE")}(a.a),n("7CA4"),n("Y3OE")),l=n("pqmn"),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.keys=n,r.keys.buttonKey||(r.keys.buttonKey="base.courses.conversion.ok"),r}return o.__extends(t,e),t.ConversionInProgress=new t("ConversionInProgress",{titleKey:"base.courses.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.courses.conversion.beingConvertedAlert"}),t.ConversionComplete=new t("ConversionComplete",{titleKey:"base.courses.conversion.hasBeenConverted",bodyKey:"base.courses.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.courses.conversion.hasBeenConvertedAlert"}),t.OrgConversionInProgress=new t("OrgConversionInProgress",{titleKey:"base.organizations.conversion.beingConverted",bodyKey:"base.courses.conversion.mayTakeAwhile",ariaAlertKey:"base.organizations.conversion.beingConvertedAlert"}),t.OrgConversionComplete=new t("OrgConversionComplete",{titleKey:"base.organizations.conversion.hasBeenConverted",bodyKey:"base.organizations.conversion.clickToSeeNewCourse",buttonKey:"base.courses.conversion.seeNewExperience",ariaAlertKey:"base.organizations.conversion.hasBeenConvertedAlert"}),t.StudentTryAgain=new t("StudentTryAgain",{titleKey:"base.courses.noAccess.studentCurrentlyNoAccess",bodyKey:"base.courses.noAccess.studentTryAgain"}),t.StudentNoLongerAccessible=new t("StudentNoLongerAccessible",{titleKey:"base.courses.noAccess.studentCourseHasEnded",bodyKey:"base.courses.noAccess.studentNoLongerAccess"}),t.ParticipantTryAgain=new t("ParticipantTryAgain",{titleKey:"base.organizations.noAccess.studentCurrentlyNoAccess",bodyKey:"base.organizations.noAccess.studentTryAgain"}),t.ParticipantNoLongerAccessible=new t("ParitcipantNoLongerAccessible",{titleKey:"base.organizations.noAccess.studentCourseHasEnded",bodyKey:"base.organizations.noAccess.studentNoLongerAccess"}),t.None=new t("None",{titleKey:"",bodyKey:""}),t}(a.a),p=n("1y/X"),f=(n("a8V0"),n("lCpV")),m=(n("r6n2"),n("VJfD")),h=n("K4f8"),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.Contains=new t("CONTAINS"),t.Exact=new t("EXACT"),t.Matches=new t("MATCHES"),t}(a.a);!function(e){e.CUSTOM="CUSTOM"}(r||(r={}));var v,b=r,y=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e),t.Assignment=new t("Assignment"),t.Test=new t("Test"),t.Exam=new t("Exam"),t.Homework=new t("Homework"),t.Presentation=new t("Presentation"),t.Quiz=new t("Quiz")}(a.a),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.ReadyToPost=new t("READY_TO_POST"),t.IsPosted=new t("IS_POSTED"),t.NoOverride=new t("NO_OVERRIDE"),t.GradingInProgress=new t("GRADING_IN_PROGRESS"),t}(a.a)),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.AttemptScore=new t("a"),t.None=new t("-"),t.OverrideScore=new t("m"),t}(a.a),C=n("BOxd"),w=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}o.__extends(t,e),t.Letter=new t("Letter"),t.Percentage=new t("Percentage"),t.Points=new t("Points"),t.Text=new t("Text")}(a.a),n("dtd2")),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.Email=new t("email"),t.Mobile=new t("mobile"),t.SMS=new t("sms"),t.Voice=new t("voice"),t.Dashboard=new t("dashboard"),t}(a.a),k=n("A0nf"),T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.Available=new t("AVAILABLE"),t.Opened=new t("OPENED"),t.Started=new t("STARTED"),t.Saved=new t("SAVED"),t.Submitted=new t("SUBMITTED"),t}(a.a);n("KiLF");!function(e){e.ViewPostedCourseAnnouncement="course.announcements.VIEW",e.ViewUnpostedCourseAnnouncement="course.announcements.admin.VIEW",e.CreateCourseAnnouncement="course.announcements.CREATE",e.ModifyCourseAnnouncement="course.announcements.MODIFY",e.DeleteCourseAnnouncement="course.announcements.DELETE",e.ViewPostedSystemAnnouncement="system.announcements.VIEW",e.ViewUnpostedSystemAnnouncement="system.announcements.admin.VIEW",e.CreateSystemAnnouncement="system.announcements.CREATE",e.ModifySystemAnnouncement="system.announcements.MODIFY",e.DeleteSystemAnnouncement="system.announcements.DELETE"}(v||(v={}));var I,E=v;!function(e){e.ModifyException="course.assessment.exceptions.MODIFY",e.ViewException="course.assessment.exceptions.VIEW"}(I||(I={}));var P,A=I;!function(e){e.ViewCalendar="course.calendar.VIEW"}(P||(P={}));var x,D=P;!function(e){e.CreateContent="course.content.CREATE",e.DeleteContent="course.content.DELETE",e.ModifyContent="course.content.MODIFY",e.ViewContent="course.content.VIEW",e.ViewAsDesigner="course.content.designer.VIEW",e.DeployAssessment="course.content.assessment.deploy.EXECUTE",e.ModifyContentAvailability="course.content.availability.MODIFY"}(x||(x={}));var _,L=x;!function(e){e.DeleteAdaptiveRelease="course.adaptiverelease.DELETE",e.ModifyAdaptiveRelease="course.adaptiverelease.MODIFY",e.ViewAdaptiveRelease="course.adaptiverelease.VIEW",e.ModifyAdaptiveReleaseDates="course.adaptiverelease.dates.MODIFY",e.DeleteAssessment="course.assessment.DELETE",e.ModifyAssessment="course.assessment.MODIFY",e.ViewAssessment="course.assessment.VIEW",e.ModifyAttendance="course.attendance.MODIFY",e.ViewAttendance="course.attendance.VIEW",e.ModifyAllowConversationReplies="course.conversations.allow-replies.MODIFY",e.ModifyTimeLimitAccomodation="course.timelimit-exception.MODIFY",e.ModifyDueDateException="course.duedate-exception.MODIFY"}(_||(_={}));var M,N=_;!function(e){e.ModifyRubrics="course.rubrics.MODIFY",e.ViewRubrics="course.rubrics.VIEW"}(M||(M={}));var R,O=M;!function(e){e.EmailAllUsers="course.email-all-users.EXECUTE"}(R||(R={}));var G,U=R,B=n("d2bc");!function(e){e.CreateGroups="course.groups.CREATE",e.DeleteGroups="course.groups.DELETE",e.ModifyGroups="course.groups.MODIFY",e.ViewGroups="course.groups.VIEW",e.ViewGroupsAsAdmin="course.groups.admin.VIEW",e.ManageGroupMembership="course.group-user.manage.EXECUTE"}(G||(G={}));var F,q=G;!function(e){e.ViewAdmin="system.admin.VIEW",e.ViewAdminTop="system.administration.top.VIEW"}(F||(F={}));var j,H=F;!function(e){e.CreatePortalOptionsModuleManagement="system.portaloptions.managemodules.CREATE",e.ModifyPortalOptionsModuleManagement="system.portaloptions.managemodules.MODIFY",e.ViewBrand="system.portaloptions.brand.VIEW",e.CreateBrand="system.portaloptions.brand.CREATE",e.ModifyBrand="system.portaloptions.brand.MODIFY",e.DeleteBrand="system.portaloptions.brand.DELETE",e.ModifyUltraThemeData="system.ultra.themedata.MODIFY"}(j||(j={}));var V=j,z=n("z1U9");n.d(t,"A",function(){return z.QuestionType}),n.d(t,"z",function(){return z.QuestionSubType}),n.d(t,"c",function(){return i.a}),n.d(t,"d",function(){return u}),n.d(t,"g",function(){return c.a}),n.d(t,"h",function(){return l.a}),n.d(t,"i",function(){return d}),n.d(t,"k",function(){return p.a}),n.d(t,"m",function(){return f.a}),n.d(t,"p",function(){return m.a}),n.d(t,"q",function(){return h.a}),n.d(t,"o",function(){return g}),n.d(t,"r",function(){return b}),n.d(t,"t",function(){return S}),n.d(t,"s",function(){return y}),n.d(t,"u",function(){return C.a}),n.d(t,"x",function(){return w.a}),n.d(t,"y",function(){return $}),n.d(t,"B",function(){return k.a}),n.d(t,"E",function(){return T}),n.d(t,"a",function(){return E}),n.d(t,"b",function(){return A}),n.d(t,"e",function(){return D}),n.d(t,"f",function(){return L}),n.d(t,"j",function(){return N}),n.d(t,"l",function(){return O}),n.d(t,"n",function(){return U}),n.d(t,"v",function(){return B.a}),n.d(t,"w",function(){return q}),n.d(t,"C",function(){return H}),n.d(t,"D",function(){return V})},Sjpn:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("TnpK"),o="ultra.features.base.profile.privacy.routes";r.module(o,["ui.router",i.b]).config([i.c,function(e){e.peekState("privacy",{url:"/privacy",require:function(){return Promise.all([n.e(23),n.e(39),n.e(134)]).then(n.bind(null,"0OB5"))},pageTitle:"base.profile.updatePrivacySettings.pageTitle"})}])},TAnh:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("JURN");var r=n("IbG+"),i=n("4GL6"),o=n("e6jQ"),s=n("vLHv"),a="ultra.components.directives.squareToggle",u=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n,this.oneControlId=o.a(),this.twoControlId=o.a()}return e.prototype.handleKeyUp=function(e){13!==e.keyCode&&32!==e.keyCode||(this.scope.property=e.target.value)},e.prototype.handleClick=function(e){this.scope.property=e.target.value},e.$inject=["scope","element","attrs"],e}(),c=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=s,this.scope={oneIconClass:"@",oneAriaLabel:"@",oneAriaControls:"@?",oneViewValue:"@",oneTooltipTemplate:"@?",oneTooltipScope:"&?",property:"=",twoIconClass:"@",twoAriaLabel:"@",twoAriaControls:"@?",twoViewValue:"@",twoTooltipTemplate:"@?",twoTooltipScope:"&?",analyticsIdTagPrefix:"@?"},this.compile=function(e,n){return r.isDefined(n.oneTooltipTemplate)&&e.find("input.input-one").attr("bb-complex-tooltip",""),r.isDefined(n.twoTooltipTemplate)&&e.find("input.input-two").attr("bb-complex-tooltip",""),{post:function(e,n,r){e.squareToggle=t.$injector.instantiate(u,{scope:e,element:n,attrs:r})}}}}return e.$inject=["$injector"],e}();r.module(a,[i.b]).directive("bbSquareToggle",["$injector",function(e){return e.instantiate(c)}])},TB6y:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("mrSG"),i=(n("sMjt"),n("WiaB"),n("Oki6"),n("aHpC")),o=n("EVdn"),s=n("LvDl"),a=n("IbG+"),u=n("e6jQ"),c=n("lUN/"),l=n("lEL+"),d=n("+4Px"),p=n("7+Tq"),f=n("d7QB"),m="ultra.directives.bbFoundation";window.Foundation.libs.dropdown.dirs._base=function(e){var t,n=this.offsetParent().offset(),r=e.offset();r.top-=n.top,r.left-=n.left,r.missRight=!1,r.missTop=!1,r.missLeft=!1,r.leftRightFlag=!1,t=document.getElementsByClassName("row")[0]?document.getElementsByClassName("row")[0].clientWidth:window.innerWidth;var i=(window.innerWidth-t)/2;if(!this.hasClass("mega")){var o=this.outerWidth(),s=e.offset();s.top<=this.outerHeight()&&(r.missTop=!0,window.innerWidth-i,r.leftRightFlag=!0),s.left-i+o>t?(r.missRight=!0,r.missLeft=!1):s.left-i-o<=0&&(r.missLeft=!0,r.missRight=!1)}return this.toggleClass("miss-right",r.missRight),this.toggleClass("miss-left",r.missLeft),r};var h=window.Foundation.libs.dropdown.adjust_pip;window.Foundation.libs.dropdown.adjust_pip=function(e){e.hasClass("disable-pip-adjustment")||h.apply(this,arguments)};var g=function(e,t,n,r){e.$on("$destroy",function(){window.Foundation.scope===t[0]&&(window.Foundation.scope=null),s.forEach(window.Foundation.libs,function(e){e.scope===t[0]&&(e.scope=null),delete e.bindings,delete e.settings.callback})});["small","small-only","medium","medium-only","large","large-only","xlarge","xlarge-only","xxlarge"].forEach(function(e){window.Foundation.media_queries[e]=o(".foundation-mq-"+e).css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")}),c.a();var i=function(e){e.each(function(t,r){var i=o(r),s=i.hasClass("active"),a=i.children("a").first(),u=i.children(".content").first(),c=o("body");u.attr("aria-hidden",!s+""),a.attr({"aria-selected":s,"aria-expanded":s});var l=i.find(':tabbable[role!="tab"]').add(i.find('[tabindex="-1"]')).add(i.find("input")).not(i.children("a").first());s?l.attr("tabindex",0):l.attr("tabindex","-1"),n||(a.on("keydown",function(n){if(n.keyCode===d.v||n.keyCode===d.j){var r=0===t?e.length-1:t-1;o(e.get(r)).children("a").first().focus()}else if(n.keyCode===d.d||n.keyCode===d.s){var i=t===e.length-1?0:t+1;o(e.get(i)).children("a").first().focus()}else n.keyCode===d.i?o(e.get(0)).children("a").first().focus():n.keyCode===d.e&&o(e.get(e.length-1)).children("a").first().focus();c.removeClass("hide-focus-outline")}),u.on("keydown",function(n){if(n.ctrlKey&&n.keyCode===d.v)a.focus();else if(n.ctrlKey&&n.keyCode===d.q){var r=0===t?e.length-1:t-1;o(e.get(r)).children("a").first().focus()}else if(n.ctrlKey&&n.keyCode===d.p){var i=t===e.length-1?0:t+1;o(e.get(i)).children("a").first().focus()}c.removeClass("hide-focus-outline")})),i.addClass("accordion-complete")})},a=t.find(".accordion");a.length>0&&a.each(function(e,t){var n=o(t),r=n.find(".accordion-navigation:not(.accordion-complete)");n.attr("role","tablist"),r.each(function(t,n){var r=o(n),i=r.children("a").first(),s=r.children(".content").first();i.attr("role","tab"),s.attr("role","tabpanel");var a=u.a(),c="accordion"+e+"-"+a+"-header"+t,l="accordion"+e+"-"+a+"-panel"+t;i.attr("id",c),s.attr("id",l),i.attr("href","#"+l),i.attr("aria-controls",l),s.attr("aria-labelledby",c)}),i(r)}),r(t,e),t.foundation({accordion:{multi_expand:!0,callback:function(e){e.closest(".accordion").removeAttr("aria-multiselectable");var t=e.closest(".accordion").children(".accordion-navigation");i(t)}},dropdown:{}})},v=function(){function e(e,t){var n=this;this.dropdownInit=e,this.integrationEventEmitterService=t,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,r){n.onDestroyHandler=n.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(r.rubricOverride);e.$on("$destroy",function(){n.onDestroyHandler&&n.onDestroyHandler()}),g(e,t,i,n.dropdownInit)},this.onDestroyHandler=null}return e=r.__decorate([r.__param(0,Object(i.b)(p.b)),r.__param(1,Object(i.b)(f.serviceName))],e)}(),b=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",function(){r.onDestroyHandler&&r.onDestroyHandler()}),r.timeout(function(){g(e,t,i,r.dropdownInit)},e,0,!1)},this.onDestroyHandler=null}return e=r.__decorate([r.__param(0,Object(i.b)(l.b)),r.__param(1,Object(i.b)(p.b)),r.__param(2,Object(i.b)(f.serviceName))],e)}(),y=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",function(){r.onDestroyHandler&&r.onDestroyHandler()});var o=e.$watch(n.bbFoundationWait,function(n){n&&(o(),r.timeout(function(){g(e,t,i,r.dropdownInit)},e,0,!1))})}}return e=r.__decorate([r.__param(0,Object(i.b)(l.b)),r.__param(1,Object(i.b)(p.b)),r.__param(2,Object(i.b)(f.serviceName))],e)}(),S=function(){function e(e,t,n){var r=this;this.timeout=e,this.dropdownInit=t,this.integrationEventEmitterService=n,this.onDestroyHandler=null,this.restrict="A",this.link=function(e,t,n){r.onDestroyHandler=r.integrationEventEmitterService.addIntegrationEventClickListener(t);var i=e.$eval(n.rubricOverride);e.$on("$destroy",function(){r.onDestroyHandler&&r.onDestroyHandler()}),e.$watch(n.bbFoundationWaitContinuous,function(n){n&&r.timeout(function(){g(e,t,i,r.dropdownInit)},e,0,!1)},null!=n.bbDeepWatch&&n.bbDeepWatch)}}return e=r.__decorate([r.__param(0,Object(i.b)(l.b)),r.__param(1,Object(i.b)(p.b)),r.__param(2,Object(i.b)(f.serviceName))],e)}();a.module(m,[l.a,p.a,f.moduleName]).directive("bbFoundation",["$injector",function(e){return e.instantiate(v)}]).directive("bbFoundationDefer",["$injector",function(e){return e.instantiate(b)}]).directive("bbFoundationWait",["$injector",function(e){return e.instantiate(y)}]).directive("bbFoundationWaitContinuous",["$injector",function(e){return e.instantiate(S)}])},TSYQ:function(e,t,n){e.exports=n("ZJ/X")(1908)},TU15:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-insufficient-storage.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-insufficient-storage">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-insufficient-storage.description</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},TeAI:function(e,t,n){e.exports=n("ZJ/X")(1426)},TnpK:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return C}),n.d(t,"d",function(){return w}),n.d(t,"c",function(){return $}),n.d(t,"a",function(){return T});var r=n("mrSG"),i=(n("VZTK"),n("pJBw"),n("LvDl")),o=n("IbG+"),s=n("yC9S"),a=n("t6zR"),u=n("0JpG"),c=n("yA26"),l=n("w9Zy"),d=n("5MwF"),p=n("Fvsw"),f=n("lVRt"),m=n("jhBu"),h=n("lEL+"),g=n("k9iv"),v=n("ZzR9"),b=n("Q/M7"),y=n("IVtk"),S=n("F/WY"),C="ultra.router",w="ultraState",$=w+"Provider",k="DefaultBasePage",T=".peek.";function I(e,t){var n=/^(\^)?(\??)(\w+)/.exec(e),r={searchParents:!1,optional:!1,name:t};return n&&(r.searchParents="^"===n[1],r.optional="?"===n[2],r.name=n[3]?n[3]:t),r}var E=function(){function t(t,n){var r,u,c=this;this.$stateProvider=t,this.addedStates={},this.initAllStates=!1,this.$get=["$rootScope","$state","$injector","$sce",l.e,p.b,k,h.b,g.c,function(t,n,r,i,o,u,l,p,f){c.$state=n,c.$rootScope=t,c.defaultBasePage=l,c.context=u,c.timeout=p;var m=c.baseStates.map(function(e){return e.name});if(s.b.OnRootScope(t,v.a.$stateChangeSuccess,function(e,t){-1!==m.indexOf(t.name)&&(u.basePage=t.name,sessionStorage.setItem(a.a.getBasePageStorageKey(),u.basePage))}),s.b.OnRootScope(t,v.a.$stateChangeSuccess,function(e,t,n,r,i){if(!(r.name&&t.name&&r.name.split(T).length<t.name.split(T).length)){var s=""===r.name,a=r.panelClass||"peek",u=t.panelClass||"peek";c.timeout(function(){"peek"!==a||"full"!==u||s||o.expandTopPanel(),"full"===a&&"peek"===u&&o.shrinkTopPanel()},c.$rootScope,0,!1)}}),s.b.OnRootScope(t,v.a.$stateChangeStart,function(e,t,i,o,s){n.next=t,n.nextParams=i,o&&(n.prev={name:o.name}),n.prevParams=s,t.routingFunction&&(e.preventDefault(),r.invoke(t.routingFunction))}),s.b.OnRootScope(t,v.a.$stateChangeError,function(t,r,o,s,a,u){if(u.errorModalConfig&&f.openModal(u.modalConfig),u&&u.userNotEntitled)n.go(l);else if(u.goToBasePage)n.goCurrentBasePage();else{if(b.m("inPreviewMode",window.location.href)){var c=i.trustAsResourceUrl(b.c("/ultra/courses/"+n.nextParams.courseId+"/outline/?inPreviewMode=true"));e(window.parent.document).find("#preview-iframe").attr("src",c)}if(!d.a.production)throw console.error("$stateChangeError when moving from "+s.name+" to "+r.name),u}}),c.initAllStates)c.createAllStates();else{c.registerPeekStates(n.get(c.defaultBasePage));var h=n.get(sessionStorage.getItem(a.a.getBasePageStorageKey())||c.defaultBasePage);h&&h.name!==c.defaultBasePage&&c.registerPeekStates(h)}return n}],this.baseStates=[],this.peekStates={},this.absoluteUrls=[],t.decorator("resolve",function(e,t){var n=t?t(e):e.resolve;return n.childrenStates&&n.childrenStates.length>0&&n.childrenStates.push(i.once(n.childrenStates.pop())),n}),t.decorator("resolve",function(e,t){var n=t?t(e):e.resolve,r=function(e){var t=n[e],r=I(e,e);r.optional&&(delete n[e],e=r.name,n[e]=t);var o=function(e){if(i.isString(e))return e;var t=e[e.length-1];return i.isString(t)?t:""}(t);if(o){var s=I(o,e);s.searchParents?n[e]=[s.name,function(e){return e&&e.isLazy?e():e}]:console.error("Illegal resolve format. Did you forget to prepend ^?")}if(r.optional){var a=n[e],u=a.slice?a.slice(0,a.length-1):[];n[e]=["$injector"].concat(u,[function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=i.once(function(){for(var n={},r=0;r<u.length;r++)n[u[r]]=t[r];return e.invoke(a,void 0,n)});return r.isLazy=!0,r}])}};for(var o in n)r(o);return n}),t.decorator("url",function(e,t){var r=t(e);return r&&(r.exec=function(t,i){var s=this.regexp.source;return new RegExp(s.substr(0,s.length-1)+"/").test(t)&&n.invoke(e.resolve.childrenStates||[o.noop]),r.constructor.prototype.exec.apply(this,arguments)}),r}),r=t.state,u=c,t.state=function(){return u.addedStates["string"==typeof arguments[0]?arguments[0]:arguments[0].name]=!0,r.apply(this,arguments)}}return t.prototype.baseState=function(e,t){var r=this;return window.top!==window&&b.m("inPreviewMode",window.location.href)&&(t.require=function(){return n.e(396).then(n.bind(null,"shLZ"))},t.peekViewName=void 0),t=this.getStateWithName(e,t),this.baseStates.push(t),(t.resolve=t.resolve||{}).childrenStates=[function(){r.registerPeekStates(t)}],this.$stateProvider.state(t),this},t.prototype.peekState=function(e,t){var n=(t=this.getStateWithName(e,t)).name.split(".")[0];return this.peekStates[n]=this.peekStates[n]&&this.peekStates[n].concat(t)||[t],this},t.prototype.state=function(e,t){return t=this.getStateWithName(e,t),this.$stateProvider.state(t),this},t.prototype.registerPeekStates=function(e){var r=this;if(e&&e.peekStates){var i={};i.name=e.name+".peek",this.addedStates.hasOwnProperty(i.name)||null!=this.$state.get(i.name)||(i.onExit=[l.e,function(e){e.close(i.name)}],i.resolve={offCanvasArgs:[w,function(n){var o=t.getPanelStateNameFromNextState(n.next.name,i.name),s=n.get(o);return{panelClass:s&&s.panelClass||"peek",pageTitle:s&&s.pageTitle,template:S.replace("{0}",r._getPanelName(e)),close:function(){return r.$rootScope.bbOffcanvasOpened&&n.go(e.name),!1},stateName:i.name,overlay:null==s||null==s.overlay||s.overlay}}]},e.peekViewName?(i.views={},i.views[e.peekViewName]={require:function(){return Promise.resolve().then(n.bind(null,"yA26"))}}):i.require=function(){return Promise.resolve().then(n.bind(null,"yA26"))},this.$stateProvider.state(i)),this.createAllPeekStates(e,e.peekStates)}},t.prototype.createAllPeekStates=function(e,t){var n=this,r=e.name+T;t.forEach(function(t){(n.peekStates[t]||[]).forEach(function(t){n._checkAbsoluteUrl(t);var i=r+t.name;if(!n.addedStates.hasOwnProperty(i)&&null==n.$state.get(i)){var s=o.copy(t);s.name=i,s.abstract||(s.urlHandler=["$location",w,"$match",function(e,t,r){var o,s=function(e){var t=e.split("."),n=i.split(".");return t.forEach(function(e,t){n[t]=e}),n.join(".")};(o=n._isAbsoluteUrl(e.url())?s(sessionStorage.getItem(a.a.getBasePageStorageKey())||n.defaultBasePage):i)!==t.current.name&&(t.get(o)||(o=s(n.defaultBasePage)),t.transitionTo(o,r,{location:!1}))}]),s.views||(s.views={},s.views[n._getPanelName(e)]={template:s.template,controller:s.controller,require:s.require}),delete s.template,delete s.controller,delete s.require,s.getPageTitle&&(s.pageTitle=s.getPageTitle());var u=function(){s.peekStates&&s.peekStates.length>0&&("full"===s.panelClass||s.allowChildPeekStates?n.registerPeekStates(s):n.createAllPeekStates(e,s.peekStates))};if(n.initAllStates)n.$stateProvider.state(s),u();else(s.resolve=s.resolve||{}).childrenStates=[u],n.$stateProvider.state(s),s.peekStates&&s.peekStates.length>0&&"full"!==s.panelClass&&!s.allowChildPeekStates&&n.createAllPeekStates(e,s.peekStates)}})})},t.getPanelStateNameFromNextState=function(e,t){var n=e.indexOf(T,t.length);return-1!==n?e.substr(0,n):e},t.prototype._getPanelName=function(e){return e.name.split(".").join("-").concat("-panel@")},t.prototype._checkAbsoluteUrl=function(e){var t=this;if(e.url&&0===e.url.indexOf("^")){var n=e.url.match(/\/:[a-zA-Z]+/),r=e.url;n&&(r=r.substring(0,n.index));var i=(r=r.substring(1)).match(/\(\?:([^\)]*)/);i?i[1].split("|").forEach(function(e){t.absoluteUrls.push("/"+e)}):-1===this.absoluteUrls.indexOf(r)&&this.absoluteUrls.push(r)}},t.prototype._isAbsoluteUrl=function(e){return i.find(this.absoluteUrls,function(t){return 0===e.indexOf(t)})},t.prototype.createAllStates=function(){var e=this;this.baseStates&&this.baseStates.length>0&&this.baseStates.forEach(function(t){e.registerPeekStates(t)})},t.prototype.createAllStatesOnInit=function(){this.initAllStates=!0},t.prototype.getStateWithName=function(e,t){return o.isObject(e)?t=e:t.name=e,this._initStateEntitlements(t),t},t.prototype._initStateEntitlements=function(e){this._initSystemEntitlementChecks(e),this._initCourseEntitlementChecks(e)},t.prototype._initSystemEntitlementChecks=function(e){var t=this;e.systemEntitlement&&(e.resolve||(e.resolve={}),e.resolve.systemEntitlement=["$q",m.b,function(n,r){return r.hasSystemEntitlement(e.systemEntitlement).then(t._configureStateChangeCallback(n))}])},t.prototype._configureStateChangeCallback=function(e){return function(t){var n=e.defer();return t?n.resolve():n.reject({userNotEntitled:!0}),n.promise}},t.prototype._ensureCourseIdParam=function(e,t){return t.nextParams.courseId?e.resolve():e.reject("Cannot check course entitlements when the state does not have a courseId parameter.")},t.prototype._guardEntitlementInjectable=function(e){var t=this,n=Array.isArray(e)?e.slice(0,e.length-1):[];return["$q","$injector",w].concat(n,[function(r,o,s){for(var a=[],u=3;u<arguments.length;u++)a[u-3]=arguments[u];var c=i.zipObject(n,a);return t._ensureCourseIdParam(r,s).then(function(){try{return o.invoke(e,void 0,c)}catch(e){return r.reject(e)}}).then(t._configureStateChangeCallback(r)).catch(function(){return r.reject({userNotEntitled:!0})})}])},t.prototype._getDefaultEntitlementInjectable=function(e){return[m.b,w,function(t,n){return"string"==typeof e?t.hasCourseEntitlement(e,n.nextParams.courseId):t.hasAnyCourseEntitlement(e,n.nextParams.courseId)}]},t.prototype._initCourseEntitlementChecks=function(e){var t;e.courseEntitlement&&(t=this._getDefaultEntitlementInjectable(e.courseEntitlement)),e.resolve&&e.resolve.hasOwnProperty("courseEntitlement")&&(t=e.resolve.courseEntitlement),t&&(e.resolve||(e.resolve={}),e.resolve.courseEntitlement=this._guardEntitlementInjectable(t))},t.$inject=["$stateProvider","$injector"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(E);o.module(C,["ui.router","oc.lazyLoad",p.a,l.d,c.moduleName,h.a]).provider(w,E).constant(k,d.a.defaultBasePage).config(["$provide","$ocLazyLoadProvider",function(e,t){e.decorator("$state",["$injector","$delegate","$resolve","$q","$$animateJs","$ocLazyLoad",p.b,l.e,function(e,t,n,r,s,a,c,d){t.goPeekState=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return d.getTopElement().then(function(n){var r=n&&n.name||c.basePage;return t.getPeekStateName(e[0],r).then(function(n){return e[0]=n,t.go.apply(t,e)})})},t.leavePeekState=function(e){null==e&&(e=t.current.name);var n=e.lastIndexOf(T);return-1!==n?t.go(e.substring(0,n)):r.when()},t.peekHref=function(e,n,i){return(i?r.when(new l.a(null,null,i)):d.getTopElement()).then(function(r){return i=r&&r.name||c.basePage,t.getPeekStateName(e,i).then(function(e){return t.href(e,n)})})},t.isPeekPanelOpen=function(){return-1!==t.current.name.indexOf(".peek.")},t.getPeekStateName=function(n,i){return i===c.basePage?r.when(i+T+n):d.getElement(i).then(function(){var e=E.getPanelStateNameFromNextState(t.current.name,i),r=e.lastIndexOf(T),o=t.current.name.substring(r+T.length).split(".")[0],s=n.split(".")[0];if(o===s)return t.current.name.substring(0,r+T.length)+n;var a=e.indexOf(n);if(-1!==a)return e.substring(0,a+n.length);var u=t.get(e);return"full"===u.panelClass||u.allowChildPeekStates&&-1!==u.peekStates.indexOf(s)?e+T+n:e.substring(0,r+T.length)+n}).then(function(n){var r=function(n){if(!t.get(n.join("."))){var i=n.pop();r(n),n.push(i)}e.invoke((t.get(n.join("."))&&t.get(n.join(".")).resolve||{}).childrenStates||[o.noop])};return r(n.replace(/\n/g,"").replace(/(^[^\(\)]*)\(.*\)$/,"$1").split(".")),n})},t.goCurrentBasePage=function(){return t.go(t.getBaseState())},t.goToRoute=function(e){return t.go(e)},t.getBaseState=function(){return c.basePage},t.search=function(e,n){var r=t.params;if(o.isString(e)&&n?r[e]=n:Object.keys(e).forEach(function(t){r[t]=e[t]}),t.current.name)return t.go(t.current.name,r)},t.getCurrentUrlParams=function(){var e=t.$current.url.parameters(),n=Object.create(null);return e.forEach(function(e){t.params[e]&&(n[e]=t.params[e])}),n},t.requireAllStates=function(){var e=this,t=this.get(),n=[];return t.forEach(function(t){t&&null!=t.name&&n.push(e.requireState(t.name))}),r.all(n)},t.requireState=function(e){for(var t=this,n=e.split("."),s=[],c=0;c<n.length;c++)s.push(n.slice(0,c+1).join("."));var l=function(){var e=s.shift();if(null==e)return!0;var n=t.get(e);if(!n)return l();var c=[],d=[];if(n.require&&(o.isArray(n.require)||(n.require=[n.require]),c=c.concat(n.require),d.push(n)),n.views&&o.isObject(n.views)&&Object.keys(n.views).forEach(function(e){var t=n.views[e];t.require&&(o.isArray(t.require)||(t.require=[t.require]),c=c.concat(t.require),d.push(t))}),c.length<1)return l();var p=r.defer(),f=[],m=new Map,h=c.map(function(e){return e().then(function(t){return m.set(e,t),t})});return r.all(i.compact(h)).then(function(){d.forEach(function(e){o.isArray(e.require)&&(e.require.forEach(function(t){var r=m.get(t),i=r.panelDefinition||{},s=i&&i.moduleName||r.moduleName;s&&f.push(a.load({name:s}));var c=i&&i.template||r.template;c&&!e.template&&(e.template=c);var l=i&&i.templateProvider||r.templateProvider;l&&(e.templateProvider=l);var d=i&&i.controllerName||r.controllerName;d&&!e.controller&&(e.controller=d);var p=i&&i.resolve;p&&(e.resolve=o.extend(e.resolve||{},p));var h=i&&i.translations;h&&(e.resolve=o.extend(e.resolve||{},{loadedTranslations:["$q",u.serviceName,function(e,t){return e.all(h.map(function(e){return t.loadBundle(e)}))}]}));var g=i&&i.pageTitle;g&&!n.pageTitle&&(n.pageTitle=g)}),e.require=!1)}),r.all(i.compact(f)).then(function(){p.resolve(l())},function(e){p.reject(e)})},function(e){p.reject(e)}),p.promise};return l()};var p=t.transitionTo;t.transitionTo=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this,i=e[0];return o.isObject(i)&&(i=i.self.name),r.all([this.requireState(i)]).then(function(){return p.apply(n,e)})};var m=t.href;return t.href=function(e,t,n){return m(e,t,o.extend(n||{},{absolute:!0}))},t.getCurrentResolvedValues=function(){return t.$current&&t.$current.locals&&t.$current.locals.resolve?t.$current.locals.resolve.$$values:{}},t.hasCourseInContext=function(e){if(!e||!e.name)return!1;if("resolve"in e&&f.b in e.resolve)return!0;var n=t.get(i.dropRight(e.name.split(".")).join("."));return t.hasCourseInContext(n)},t}])}]),o.module(C).run(["$rootScope",w,p.b,k,function(e,t,n,r){var i=sessionStorage.getItem(a.a.getBasePageStorageKey());n.basePage=i||r,e.$on(v.a.$stateChangeSuccess,function(n,r,i,o,s){var a=t.hasCourseInContext(o),u=t.hasCourseInContext(r);a!==u&&e.$broadcast(v.a.$stateHasCourseInContextChanged,u,a),y.e(r,o)})}])}).call(this,n("EVdn"))},TwJE:function(e,t){e.exports='<div>\n  <div class="notification-container {{::toastStatus()}}">\n    <div class="close-notification">&times;</div>\n    <div class="progress-indicator icon">\n      <i class="{{::toastIcon()}}"></i>\n    </div>\n    <span class="progress-status {{::toastClass()}}">\n    </span>\n  </div>\n</div>\n'},U718:function(e,t,n){e.exports=n("ZJ/X")(1496)},U8wS:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("5MwF"),o=n("TnpK"),s="ultra.data-ui.routes";r.module(s,[o.b]).config([o.c,function(e){e.baseState("base.dataUi",{url:"^/data-ui",require:function(){return n.e(348).then(n.bind(null,"gNT0"))},onEnter:[o.d,function(e){i.a.production&&e.go("base.not-found")}]})}])},UC5D:function(e,t,n){},UD9g:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("0JpG"),a=n("pjml"),u=n("TnpK"),c=n("3bn4"),l="ultra.course.engagement.course-no-grade-content-goal-alignment",d="ultra.course.engagement.course-no-grade-content-goal-alignment.service",p="no-grade-content-goal-alignment",f=["course","goal-alignment","goal"],m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelClass="peek no-grade-content-goal-peek",t}return r.__extends(t,e),t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q",s.serviceName,"$injector",u.d,a.o.serviceName,function(t,n,r,i,o){var s,a,u=null;return i.nextParams&&i.nextParams.contentId&&(u=i.nextParams.contentId),i.nextParams&&i.nextParams.id&&(u=i.nextParams.id),u&&"create"!==u?o.$find(i.nextParams.courseId).$asPromise().then(function(e){return s=e,e.contents.$find(u).$asPromise()}).then(function(e){a=e}).then(function(){return t.all([s.contents.$find(a.id,{expand:"alignedGoals,permissions"}).$asPromise(),n.loadBundle("features/"+f.join("/"))]).then(function(t){var r=t[0];return e.groupGoals(s.contents.$buildRaw(r),n)})}):t.when([])}]},t.prototype.getPeekStateName=function(){return p},t.prototype.groupGoals=function(e,t){var n="alignedGoalsDefaultTitle";return e.isDiscussion()?n="goalsAlignedWithDiscussion":e.isDocument()?n="goalsAlignedWithDocument":e.isFile()?n="goalsAlignedWithFile":e.isLink()?n="goalsAlignedWithLink":e.isLtiLink()&&(n="goalsAlignedWithLtiLink"),[{getContentTitleForGoalAlignment:function(){return t.translateSync({locale:null,key:f.join(".")+"."+n})},getContentIdForGoalAlignment:o.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:o.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map(function(t){return t.content=e,t}):[],coreContent:e}]},t.prototype.getOverrideSubTitle=function(){return[u.d,a.o.serviceName,function(e,t){var n=null;return e.nextParams&&e.nextParams.contentId&&(n=e.nextParams.contentId),e.nextParams&&e.nextParams.id&&(n=e.nextParams.id),n?t.$find(e.nextParams.courseId).$asPromise().then(function(e){return e.contents.$find(n).$asPromise()}).then(function(e){return e.title}):""}]},t.$inject=["$injector","$q"],t}(c.a);o.module(l,[u.b,s.moduleName]).config([u.c,function(e){var t=new m;e.peekState(t.getPeekStateName(),t)}]).service(d,["$injector",s.serviceName,function(e){return{resolveGoalAlignableContents:function(){return e.invoke((new m).resolveGoalAlignableContent(),null,{}).then(function(e){return[e,i.flatten(i.compact(e.map(function(e){return e.alignedGoals}))).length]})}}}])},URyr:function(e,t){e.exports='<div class="import-status-bar import-course-error" ng-class="{\'below\': contentImportStatusBarController.hideStatusBar()}"\n     ng-if="display" bb-load-bundle="components/directives/import-status-bar">\n  <div class="row">\n      <div bb-first-time-container>\n        <div class="columns guidance-wrapper import-status-bar-message">\n          <span class="successful-import-message ellipsis" bb-focus bb-translate ng-if="contentImportStatusBarController.notCarriedForwardItemsCount === 0">\n            course.import.statusBar.success\n          </span>\n          <bb-guidance component-key="importAnalysis" page-container-selector=".course-outline"\n                       class="guidance-element-overlay push-right push-top" ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0">\n            <bb-translate>course.import.statusBar.tooltip.main</bb-translate>\n          </bb-guidance>\n          <a bb-focus \n             href="javascript:void(0);" \n             class="not-copied-details" \n             ng-if="contentImportStatusBarController.notCarriedForwardItemsCount > 0"\n             ng-class="{\'not-carry-details-warn\': contentImportStatusBarController.notCarriedForwardItemsCount > 0}"\n             ng-click="contentImportStatusBarController.goToImportReport()"\n             analytics-id="course.import.statusBar.importReport.link">\n            <div class="status-bar-alarm" bb-guidance-target component-key="importAnalysis">\n                <bb-translate class="ellipsis" translate-values="{ count: contentImportStatusBarController.notCarriedForwardItemsCount }">\n                  course.import.statusBar.itemsCount.plural\n                </bb-translate>\n            </div>\n          </a>\n        </div>\n      </div>\n    <div class="columns confirm-column right">\n      <button class="button default js-import-confirm" \n              ng-click="contentImportStatusBarController.confirm()"\n              analytics-id="course.import.statusBar.confirm.button">\n        <span bb-translate="course.import.statusBar.confirm"></span>\n      </button>\n      \x3c!-- POST v1 --\x3e\n      \x3c!--<button tabindex="0" class="right inverse undo-import" ng-click="contentImportStatusBarController.undo()">--\x3e\n      \x3c!--<span>Undo Import</span>--\x3e\n      \x3c!--</button>--\x3e\n    </div>\n  </div>\n</div>'},UiBk:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("IbG+"),i=n("0JpG"),o=n("Qbdf"),s=n("X455"),a=n("8W6D"),u=n("pjml"),c=n("p7NW"),l=n("2Tae"),d=n("TnpK"),p=n("gkef"),f="ultra.course.rubrics.router";r.module(f,[i.moduleName,d.b,p.a,l.b,o.b,s.a]).config([d.c,o.c,s.b,function(e,t,r){var f,m,h;e.peekState("rubric",{abstract:!0,url:"/rubric",resolve:(f={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric"),t.loadBundle("features/course/goal-alignment/goal")])}]},f[o.d]=t.resolve,f.mode=function(){return a.a.NONE},f)}).peekState("rubric.mode",{url:"?rubricId&mode",panelClass:"full",pageTitle:"course.rubric.title",peekStates:[l.a],peekViewName:"rubric-grid-peek@",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(83),n.e(260)]).then(n.bind(null,"gAA+"))},resolve:{currentRubric:[o.d,c.c,d.d,function(e,t,n){switch(n.nextParams&&n.nextParams.mode.toLowerCase()){case a.a.CREATE.toString():return t.generateDefaultRubric(e);case a.a.EDIT.toString():return n.nextParams.rubricId?e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise():null;case a.a.COPY.toString():return e.rubrics.$find(n.nextParams.rubricId,{expand:"rows.alignedGoals,permissions"}).$asPromise().then(function(e){return t.createRubricCopy(e)});default:return null}}],hasEvaluations:["currentColumn",d.d,function(e,t){return(t.nextParams&&t.nextParams.mode.toLowerCase())===a.a.EDIT.toString()&&(e?e.hasEvaluations():null)}],mode:[d.d,function(e){switch(e.nextParams&&e.nextParams.mode.toLowerCase()){case a.a.CREATE.toString():return a.a.CREATE;case a.a.EDIT.toString():return a.a.EDIT;case a.a.COPY.toString():return a.a.COPY;default:return a.a.NONE}}]}}).peekState("rubric-evaluation",{url:"/rubric-evaluation?userId",panelClass:"peek",pageTitle:"course.rubricEvaluation.title",params:{columnId:null,groupId:null,userId:{array:!1}},require:function(){return Promise.all([n.e(2),n.e(305)]).then(n.bind(null,"iguP"))},resolve:(m={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/services/rubric")])}],currentContent:["currentContent",function(e){return e}]},m[o.d]=t.resolve,m.currentColumn=[d.d,"currentColumn",o.d,function(e,t,n){var r=e.nextParams.columnId;return r?r&&r!==u.F.CREATE_COLUMN_ID?n.gradebook.columns.$find(r,{expand:"associatedRubrics"}).$asPromise():void 0:t}],m[s.c]=r.resolve,m.offCanvasArgs=["offCanvasArgs",p.b,function(e,t){return e.overlay=!t.isLargeBreakpoint(),e}],m)}).peekState("rubric-view",{url:"/rubric-view",panelClass:"peek",pageTitle:"course.rubricView.title",params:{columnId:null},require:function(){return n.e(329).then(n.bind(null,"l3UH"))},resolve:(h={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/rubric/rubric"),t.loadBundle("components/directives/rubric/rubric-view"),t.loadBundle("components/services/rubric")])}],currentContent:["currentContent",function(e){return e}]},h[o.d]=t.resolve,h.currentColumn=[d.d,"currentColumn",o.d,function(e,t,n){var r=e.nextParams.columnId;return r?r&&r!==u.F.CREATE_COLUMN_ID?n.gradebook.columns.$find(r,{expand:"associatedRubrics"}).$asPromise():void 0:t}],h.offCanvasArgs=["offCanvasArgs",p.b,function(e,t){return e.overlay=!t.isLargeBreakpoint(),e}],h)})}])},UioO:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("mrSG"),i=n("IbG+"),o=n("0JpG"),s="ultra.components.directives.bbDatetime",a=function(){function e(e,t,n){var r=this;this.$parse=e,this.$q=t,this.bbLocalize=n,this.restrict="E",this.scope={value:"&"},this.link=function(e,t,n){var s=n.format,a=n.timezoneFormat;e.$watch(function(){return e.value()},function(n){var u=o.ILocaleDatetimeFormat.Short,c=o.ILocaleTimezoneFormat.Short;if(!i.isDate(n))return t.html("");(s&&(u=r.bbLocalize.getFormatEnum(o.ILocaleDatetimeFormat,s)),a&&(c=r.bbLocalize.getFormatEnum(o.ILocaleTimezoneFormat,a)),s&&a)?r.bbLocalize.translate({locale:r.bbLocalize.getLocale(e),key:"components.directives.datetime.datetimeWithTimezone."+s.toUpperCase()+"_datetime_"+a.toUpperCase()+"_timezone",params:{datetime:n},noWrap:!0,noEscape:!0}).then(function(e){t.html(e)}):(a?r.bbLocalize.formatTimezone(n,c):r.bbLocalize.formatDatetime(n,u,e)).then(function(e){t.html(e)})},!0)}}return e.$inject=["$parse","$q",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(a);i.module(s,[o.moduleName]).directive("bbDatetime",["$injector",function(e){return e.instantiate(a)}])},Us01:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("0JpG"),o="ultra.directives.bbTranslate",s=function(){function e(e,t,n,i,o,s,a,u,c){var l,d=this;(this.$parse=e,this.$rootScope=t,this.bbLocalize=n,this.$interpolate=i,this.scope=o,this.iElement=s,this.iAttr=a,this.rawKey=u,this.translateValuesExist=c,this.interpolateParams={},this.analyticsIdSet=!1,this.intSym="{{",a.bbTranslate=a.bbTranslate||s.text(),s.text(""),a.bbTranslate&&!a.bbTranslate.match(this.intSym)&&this.onAttrUpdate(a.bbTranslate),this.attrWatcher=a.$observe("bbTranslate",this.onAttrUpdate.bind(this)),this.translateValuesExist)&&a.$observe("translateValues",function(e){if(e){l&&l();var t=d.$parse(e);l=o.$parent.$watch(t.bind(null,o.$parent),function(e){r.extend(d.interpolateParams,e),d.updateTranslation()},!0)}});var p=this.$rootScope.$on("$translateChangeSuccess",function(){return d.updateTranslation()});o.$on("$destroy",function(){return p()})}return e.prototype.setAnalyticsId=function(e){this.iElement.prop("tagName")&&"bb-translate"===this.iElement.prop("tagName").toLowerCase()?this.iElement.parent()&&!this.iElement.parent().attr("analytics-id")&&this.iElement.parent().attr("analytics-id",e):this.iElement.attr("analytics-id")||this.iElement.attr("analytics-id",e),this.analyticsIdSet=!0},e.prototype.shouldUnwatch=function(e){return e.indexOf(this.intSym)<0&&this.rawKey.indexOf(this.intSym)<0||(e.indexOf("::")>=0&&this.rawKey.indexOf("::")>=0||void 0)},e.prototype.unwatch=function(){this.attrWatcher(),this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher()},e.prototype.onTranslationIdUpdate=function(e){e&&(e=e.replace(/^\s+|\s+$/g,""),this.analyticsIdSet||this.setAnalyticsId(e),this.updateTranslation(e))},e.prototype.onAttrUpdate=function(e){var t=this;if(e!==this.bbTranslateAttrValue)if(this.bbTranslateAttrValue=e,e.match(this.intSym)){this.interpolatedAttrWatcher&&this.interpolatedAttrWatcher();var n=this.$interpolate(e);this.interpolatedAttrWatcher=this.scope.$watch(function(){return n(t.scope)},this.onTranslationIdUpdate.bind(this))}else this.onTranslationIdUpdate(e)},e.prototype.updateTranslation=function(e){var t=this;void 0===e&&(e=this.translationId),e&&(this.translationId=e,this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.scope),key:e,params:this.interpolateParams}).then(function(n){n===e?t.iElement.text(n):t.iElement.html(n),t.shouldUnwatch(t.bbTranslateAttrValue)&&t.unwatch()},function(){t.iElement.text(e)}))},e.$inject=["$parse","$rootScope",i.serviceName,"$interpolate","scope","iElement","iAttr","rawKey","translateValuesExist"],e}(),a=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.scope=!0,this.compile=function(e,n){var r=n.bbTranslate=(n.bbTranslate||e.text()||"").replace(/^[\s\n]+|[\s\n]+$/g,"");if(r){var i=n.translateValues?n.translateValues:void 0;return function(e,n,o){return t.$injector.instantiate(s,{scope:e,iElement:n,iAttr:o,rawKey:r,translateValuesExist:i})}}}}return e.$inject=["$injector"],e}();r.module(o,[i.moduleName]).directive("bbTranslate",["$injector",function(e){return e.instantiate(a)}])},V17J:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("+4Px"),o="ultra.components.directives.accessibility.enterKeyUpFocus",s=function(){function t(t){this.injector=t,this.restrict="A",this.link=function(t,n,r){n.on("keydown",function(e){e.keyCode!==i.f||r.bbTriggerEnterKeydown||e.preventDefault()}),n.on("keyup",function(n){if(n.keyCode===i.f&&(n.preventDefault(),n.stopPropagation(),t.$apply(function(){t.$eval(r.ngClick||r.bbClick,{$event:n}),t.$eval(r.ngBlur,{$event:n})}),r.bbEnterKeyUpFocus)){var o=e(r.bbEnterKeyUpFocus);if(r.indexToFocus){var s=Number(r.indexToFocus);o.eq(s).focus()}else o.focus()}})}}return t.$inject=["$injector"],t}();r.module(o,[]).directive("bbEnterKeyUpFocus",["$injector",function(e){return e.instantiate(s)}])}).call(this,n("EVdn"))},V5JH:function(e,t){e.exports='<th class="table-cell"\n    scope="row"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</th>'},V6ed:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return c}),n.d(t,"a",function(){return p});n("MISG");var r=n("9zo4"),i=n("IbG+"),o=n("LvDl"),s=n("+4Px"),a=n("lUN/"),u=n("lEL+"),c="ultra.directives.accessibility.hideFocusOutline",l="hide-focus-outline",d="is-focusVisible",p=function(){function t(e){this.bbTimeout=e,this.restrict="A",this.link=function(e,n,r){a.a(),n.addClass(l),n.removeClass(d),t.instanceCount++,t.ensureEvents(n),e.$on("$destroy",function(){t.instanceCount--,0===t.instanceCount&&t.unregisterEvents(),n.off()})}}return t.enableFocusOutline=function(){e(document.body).removeClass(l),e(document.body).addClass(d)},t.ensureEvents=function(n){function i(e){e.keyCode===s.u&&(t.enableFocusOutline(),r.a.isLastNavigationByKeyboard=!0)}t.eventHandlers||(t.eventHandlers={keyup:i,keydown:i,mousedown:o.debounce(function(t){n.addClass(l),n.removeClass(d),r.a.isLastNavigationByKeyboard=!1,r.a.lastClickedElement=e(t.target).closest(":tabbable"),o.delay(function(){r.a.lastClickedElement&&0===r.a.lastClickedElement.parents("body").length&&(r.a.lastClickedElement=void 0)},800)},200)},Object.keys(t.eventHandlers).forEach(function(e){document.addEventListener(e,t.eventHandlers[e],!0)}))},t.unregisterEvents=function(){Object.keys(t.eventHandlers).forEach(function(e){document.removeEventListener(e,t.eventHandlers[e],!0)}),t.eventHandlers=null},t.$inject=[u.b],t.instanceCount=0,t.eventHandlers=null,t}();i.module(c,[u.a]).directive("bbFocusHelper",["$injector",function(e){return e.instantiate(p)}])}).call(this,n("EVdn"))},VGQd:function(e,t,n){e.exports=n("ZJ/X")(55)},VJfD:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.NoneSpecified=new t("ns"),t.AfterSubmission=new t("as"),t.AfterSubmissionHideResults=new t("ashr"),t.OnSpecifiedDate=new t("osd"),t.AfterDueDate=new t("add"),t.AfterAvailEndDate=new t("aaed"),t.AfterAttemptGraded=new t("aag"),t}(n.n(i).a);t.a=o},VKHV:function(e,t,n){e.exports=n("ZJ/X")(1417)},VZTK:function(e,t,n){e.exports=n("ZJ/X")(1429)},VdDF:function(e,t,n){"use strict";var r,i=n("ZJYp"),o=function(){function e(){}return e.isWithinDateRange=function(e,t){return(null==t.start||t.start<=e)&&(null==t.end||t.end>=e)},e.isSameDay=function(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},e.getCurrentTimeZoneId=function(){return r||(r=i.determine().name()),r},e.parseStringToDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)?e:null==e||""===e?null:new Date(e)},e.convertToLocalDate=function(t){var n=e.parseStringToDate(t);return null!==n&&n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),n},e.parseDateToISOString=function(e){return null==e||isNaN(e.getDate())?"":e.toISOString()},e.compareDates=function(e,t,n){return void 0===n&&(n=!0),n?e>t?null==t?e:t:null==e?t:e:e<t?t:e},e.breakdownSeconds=function(e){var t,n,r,i,o;return t=Math.floor(e%60),i=e/60,n=Math.floor(i%60),o=i/60,r=Math.floor(o%24),{days:Math.floor(o/24),hours:r,minutes:n,seconds:t}},e}();t.a=o},VfFK:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.attendance.routes";r.module(s,[o.b]).config([o.c,function(e){e.peekState("attendance",{url:"/attendance?courseId&attendanceView&meetingId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},reloadOnSearch:!1,require:function(){return Promise.all([n.e(35),n.e(395)]).then(n.bind(null,"kmhM"))},pageTitle:"course.attendance.pageTitle",panelClass:"full",peekStates:["attendance-settings","attendance-student-records"]}).peekState("attendance-settings",{url:"/settings",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(35),n.e(394)]).then(n.bind(null,"qT3r"))},pageTitle:"course.attendance.settings.pageTitle"}).peekState("attendance-student-records",{url:"/studentRecords/:membershipId?userId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(35),n.e(148)]).then(n.bind(null,"OYHs"))},pageTitle:"course.attendance.studentRecords.pageTitle"}).peekState("attendance-student-view",{url:"/attendanceGrade?courseId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/attendance/attendance")])}]},require:function(){return Promise.all([n.e(35),n.e(148)]).then(n.bind(null,"OYHs"))},pageTitle:"course.attendance.studentRecords.pageTitle"})}])},Vsv2:function(e,t,n){"use strict";var r=n("mrSG"),i=n("IbG+"),o=n("oSB+"),s=n.n(o),a=n("HAJP"),u=n("0JpG"),c=n("pjml"),l=n("gkef"),d=n("emI2"),p=n("5MwF"),f=n("Q/M7"),m=function(){function e(e,t){this.$q=e,this.bbLocalize=t,this.oneDriveLocaleStrMapper={ms_MY:"ms",cs_CZ:"cs",cy_GB:"cy-gb",da_DK:"da",de_DE:"de",en_GB:"en-GB",en_US:"en",es_ES:"es",fr_FR:"fr",it_IT:"it",nl_NL:"nl",pl_PL:"pl",pt_BR:"pt-br",sv_SE:"sv",tr_TR:"tr",ru_RU:"ru",ar_SA:"ar",th_TH:"th",zh_CN:"zh-hans",zh_TW:"zh-hant",ja_JP:"ja",ko_KR:"ko"},this.isInitialized=!1}return e.prototype.isConnected=function(){return this.isInitialized&&!!this.getAccessToken()},e.prototype.init=function(){var e=this,t=this.$q.defer(),r=this.bbLocalize.getAppLocale(),i="ms-onedrive-"+(this.oneDriveLocaleStrMapper[r]||"en");return n("MAx4")("./"+i).then(function(n){e.WL=n,e.WL?e.WL.init({redirect_uri:f.j()+p.a.basePath+"/fixed/onedrive/onedrive-callback.html",client_id:e.clientId,scope:["wl.signin","wl.basic","wl.emails","wl.skydrive"],logging:!1}).then(function(n){n&&"unknown"!==n.status&&(e.isInitialized=!0),t.resolve(n)},function(e){t.reject(e)}):t.reject()}),t.promise},e.prototype.logout=function(){var e=this,t=this.$q.defer();return this.WL.logout().then(function(n){t.resolve(n),e.accessToken=null,e.driveUserInfo=null},function(e){t.reject(e)}),t.promise},e.prototype.login=function(){var e=this,t=this.$q.defer();return this.WL.login({scope:["wl.signin","wl.basic","wl.emails"]}).then(function(n){e.accessToken=e.WL.getSession()&&e.WL.getSession().access_token,t.resolve(n)},function(e){t.reject(e)}),t.promise},e.prototype.openFilePicker=function(e,t){var n=this.$q.defer();return this.WL.fileDialog({mode:"open",select:!1===t?"single":"multi"}).then(function(e){n.resolve(e)},function(e){n.reject()}),n.promise},e.prototype.getAccessToken=function(){return this.accessToken||(this.accessToken=this.WL.getSession()&&this.WL.getSession().access_token),this.accessToken},e}(),h=n("OBf2"),g=n("aHpC");n.d(t,"b",function(){return v}),n.d(t,"c",function(){return b}),n.d(t,"a",function(){return y});var v="ultra.service.cloud.drive",b="cloudDrive",y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.ONE_DRIVE=new t("OneDrive"),t.KLOUDLESS=new t("Kloudless"),t}(s.a),S=function(){function e(e,t,n,r,i,o,s){this.$q=e,this.$timeout=t,this.bbLocalize=n,this.CloudDriveModel=r,this.windowSize=i,this.bbScriptLoader=o,this.preferences=s,this.cloudDriveStorage={},this.isGettingFilesInfo=!1,this.isShowOneDrive=!0,this.currentLocale=this.bbLocalize.getAppLocale(),this.isShowOneDrive=!window.Modernizr.touch||i.isLargeBreakpoint()}return e.prototype.cloudDriveStorageFactory=function(e){var t;switch(e.name){case y.ONE_DRIVE.toString():t=new m(this.$q,this.bbLocalize);break;case y.KLOUDLESS.toString():t=new h.b(this.$q,this.bbLocalize,this.$timeout,this.bbScriptLoader,this.preferences)}return t&&(t.clientId=e.clientId,t.redirectUrl=e.redirectUrl,t.provider=e.name,t.apiUrl=e.apiUrl,t.loaderUrl=e.loaderUrl,t.useLoaderExplorer=e.useLoaderExplorer,t.persist=e.persist,t.tokens=e.tokens,t.instProvType=e.instProvType,t.instDomain=e.instDomain),t},e.prototype.getCloudDrivesInfo=function(){var e=this,t=this.$q.defer();return this.cloudDrivesInfo?t.resolve():this.CloudDriveModel.$collection().$fetch().$then(function(n){e.cloudDrivesInfo=n,i.forEach(e.cloudDrivesInfo,function(t){e.cloudDriveStorage[t.name]=e.cloudDriveStorageFactory(t)}),t.resolve()},function(e){t.reject(e)}),t.promise},e.prototype.initializeCloudDrive=function(e){var t=this,n=this.$q.defer();return this.getCloudDrivesInfo().then(function(){t.cloudDriveStorage[e.toString()]?t.cloudDriveStorage[e.toString()].isInitialized&&t.currentLocale===t.bbLocalize.getAppLocale()?n.resolve(t.cloudDriveStorage[e.toString()]):(t.currentLocale=t.bbLocalize.getAppLocale(),t.cloudDriveStorage[e.toString()].init().then(function(){n.resolve(t.cloudDriveStorage[e.toString()])})):n.reject("No such cloud drive!")}),n.promise},e.prototype.isCloudServiceAvailable=function(e){var t=this.$q.defer();return this.initializeCloudDrive(e).then(function(e){t.resolve(e.isInitialized)}).catch(function(){t.resolve(!1)}),t.promise},e.prototype.getDriveUserInfo=function(e){var t=this.$q.defer(),n=this.cloudDriveStorage[e.toString()].driveUserInfo,r=this.cloudDriveStorage[e.toString()].accessToken;return n?t.resolve(n):r?t.resolve(this.CloudDriveModel.$new(e.toString()).me.$fetch({accessToken:r}).$asPromise()):t.resolve(),t.promise},e=r.__decorate([r.__param(0,Object(g.b)("$q")),r.__param(1,Object(g.b)("$timeout")),r.__param(2,Object(g.b)(u.serviceName)),r.__param(3,Object(g.b)(c.j.serviceName)),r.__param(4,Object(g.b)(l.b)),r.__param(5,Object(g.b)(a.b)),r.__param(6,Object(g.b)(d.c))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(S);i.module(v,[c.R,l.a,a.a,d.b]).service(b,S)},WShm:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var r=n("mrSG"),i=n("IbG+"),o=n("0JpG"),s="ultra.directives.validate.date",a="bbValidateDate",u=function(){function e(e,t){var n=this;this.$parse=e,this.bbLocalize=t,this.require="ngModel",this.restrict="A",this.getISODate=function(e){return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},this.getDateParser=function(e,t,r,i){return function(s){if(i.$isEmpty(s))return i.$setValidity("date",!0),null;var a;try{a=n.bbLocalize.parseDateSync(s,o.ILocaleDateFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("date",!1),i.$modelValue}return i.$setValidity("date",!0),"date"!==r.type&&(s=n.bbLocalize.formatDateSync(a,o.ILocaleDateFormat.Short,e))!==i.$viewValue&&(i.$setViewValue(s),t.is(":focus")||i.$render()),a}},this.getMinDateValidator=function(e,t,r,i){return function(t){var s=n.$parse(r.min)(e),a=i.$isEmpty(t)||t.getTime()>s.getTime();return a?delete i.$error.minDate:i.$error.minDate={dateMin:n.bbLocalize.formatDateSync(s,o.ILocaleDateFormat.Short)},a}},this.getMaxDateValidator=function(e,t,r,i){return function(t){var s=n.$parse(r.max)(e),a=i.$isEmpty(t)||t.getTime()<s.getTime();return a?delete i.$error.maxDate:i.$error.maxDate={dateMax:n.bbLocalize.formatDateSync(s,o.ILocaleDateFormat.Short)},a}},this.getDateFormatter=function(e,t,r,i){return function(){i.$setValidity("date",!0);var t=i.$modelValue;return i.$isEmpty(t)?"":"date"===r.type?n.getISODate(t):n.bbLocalize.formatDateSync(t,o.ILocaleDateFormat.Short,e)}},this.link=function(e,t,r,i){i.$parsers.push(n.getDateParser(e,t,r,i)),i.$formatters.push(n.getDateFormatter(e,t,r,i)),r.min&&(i.$validators.minDateValidator=n.getMinDateValidator(e,t,r,i)),r.max&&(i.$validators.maxDateValidator=n.getMaxDateValidator(e,t,r,i)),t.on("blur",function(){i.$render()})}}return e.$inject=["$parse",o.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(u);i.module(s,[o.moduleName]).directive(a,["$parse",o.serviceName,function(e,t){return new u(e,t)}])},WdDz:function(e,t,n){e.exports=n("ZJ/X")(1428)},WiaB:function(e,t,n){e.exports=n("ZJ/X")(1714)},WmjM:function(e,t){e.exports='<div class="save-buttons">\n  <footer class="panel-footer" ng-if="!(hideCancel() || hideSave() || hideDelete())">\n    \x3c!--footer tag is removed, and its children appended to parent if the directive is marked as \'isInline\'--\x3e\n    <div ng-class="{\'inline\':isInline(), \'panel-footer-right\':!isInline()}" class="buttons-2 equal-buttons">\n      <button ng-if="!(hideDelete() != null ? hideDelete() : true)"\n              class="button js-delete js-primary-button non-first-focus" ng-class="{\'small clear icon\':isInline}"\n              bb-confirmation-needed="{{ deleteConfirmationResourceType }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isDeleteDisabled()"\n              ng-click="saveButtons.deleteAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices()}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.delete.button">\n                <span ng-if="!isInline()">{{saveButtons.deleteButtonStatus}}</span>\n                <span ng-if="isInline()"><i class="icon-trash"></i></span>\n      </button>\n      <button ng-if="!hideCancel()"\n              class="button button--secondary js-cancel js-secondary-button non-first-focus"\n              bb-confirmation-needed="{{ saveButtons.isCancelNowADelete() ? deleteConfirmationResourceType : \'\' }}"\n              show-type="{{mustShowDeleteConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isCancelDisabled()"\n              ng-click="saveButtons.cancelAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="button"\n              choices="{{choices}}"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.cancel.button">{{saveButtons.cancelButtonStatus}}</button>\n      <button ng-if="!hideSave()"\n              class="button js-save js-primary-button non-first-focus"\n              bb-confirmation-needed="{{ saveConfirmationResourceType }}"\n              show-type="{{mustShowSaveConfirmation() ? \'always\' : \'userChoice\'}}"\n              ng-disabled="saveButtons.isSaveDisabled()"\n              ng-click="saveButtons.saveAction()"\n              ng-mousedown="saveButtons.mousedownAction()"\n              type="submit"\n              analytics-id="{{::analyticsIdTagPrefix}}.autosave.saveButtons.save.button">{{saveButtons.saveButtonStatus}}</button>\n    </div>\n  </footer>\n</div>'},Wr5T:function(e,t,n){e.exports=n("ZJ/X")(1720)},WtY9:function(e,t,n){e.exports=n("ZJ/X")(53)},"X/qj":function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var r=n("mrSG"),i=n("IbG+"),o=n("Fvsw"),s=n("Qbdf"),a=n("fYJU"),u=n("jhBu"),c=n("Sa5G"),l=n("aHpC"),d=n("d2bc"),p="ultra.components.services.gradebookPermission",f="gradebookPermission",m=function(){function e(e,t,n,r){this.context=e,this.currentCourse=t,this.currentUser=n,this.entitlementService=r}return e.prototype.isEntitled=function(e,t){return this.entitlementService.isEntitled(e,t)},e.prototype.canDeanonymizeGrades=function(e){return this.isEntitled("course.gradebook-deanonymize.EXECUTE",e)},e.prototype.canEnterFeedback=function(e){return this.isEntitled("course.gradebook-grades.feedback.EXECUTE",e)},e.prototype.canEnterGrades=function(e){return this.canExecute(e)},e.prototype.canViewAssessmentException=function(e){return this.isEntitled(c.b.ViewException,e)},e.prototype.canDelegatedEnterAttemptFeedback=function(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterFeedback()},e.prototype.canDelegatedEnterAttemptGrades=function(e,t){return this.canDelegatedModifyAttempt(e,t)&&this.canEnterGrades()},e.prototype.canDelegatedModifyAttempt=function(e,t){return!e.delegatedGrading||(!t||(!!e.isUserReconciler(this.currentUser.userId)||!t.isReconciled()))},e.prototype.canExecute=function(e){return this.isEntitled("course.gradebook-grades.EXECUTE",e)},e.prototype.canModify=function(e){return this.isEntitled("course.gradebook.MODIFY",e)},e.prototype.canModifyItemDueDate=function(e){return this.isEntitled("course.gradebook-item.duedate.MODIFY",e)},e.prototype.canObserve=function(e){return this.isEntitled("observer.gradebook.VIEW",e)},e.prototype.canOverrideGrades=function(e){return this.canExecute(e)},e.prototype.canPostGrades=function(e,t){var n=t||this.context.column,r=e||this.currentCourse.courseId;return n&&n.delegatedGrading?n.isUserReconciler(this.currentUser.userId)&&this.isEntitled("course.gradebook-grades.publish.EXECUTE",r):this.isEntitled("course.gradebook-grades.publish.EXECUTE",r)},e.prototype.canView=function(e){return this.isEntitled("course.gradebook-metadata.VIEW",e)},e.prototype.canViewAttempts=function(e){return this.isEntitled("course.gradebook.attempts.VIEW",e)},e.prototype.canViewGrades=function(e){return this.isEntitled("course.gradebook-grades.VIEW",e)},e.prototype.canViewBulkDownload=function(e){return this.isEntitled(d.a.ViewGrades,e)},e=r.__decorate([r.__param(0,Object(l.b)(o.b)),r.__param(1,Object(l.b)(s.e)),r.__param(2,Object(l.b)(a.b)),r.__param(3,Object(l.b)(u.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(m);i.module(p,[u.a,s.b,o.a]).service(f,m)},X455:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return p});var r=n("mrSG"),i=n("pjml"),o=n("yC9S"),s=n("fYJU"),a=n("Qbdf"),u=n("lVRt"),c="ultra.service.course-context.membership",l="currentCourseMembership",d=l+"Provider",p=u.a,f=function(){this.$get=["$injector",function(e){return e.instantiate(m)}],this.name=p,this.resolve=[u.b,l,function(e,t){return t.load(e)}]},m=function(){function e(e,t,n,r,i){this.$q=e,this.$rootScope=t,this.currentUser=n,this.CourseModel=r,this.contextCourse=i;var s=this;o.b.OnRootScope(t,a.a,function(e,t,n){null!=t&&null!==t.id||s.clear()})}return Object.defineProperty(e.prototype,"courseMembership",{get:function(){return this._courseMembership},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._courseMembership=null},e.prototype.load=function(e){var t=this;return e?this.currentUser.userId?this.courseMembership&&this.courseMembership.course?e.id!==this.courseMembership.course.id?this.$q.reject(new Error("Cannot resolve course membership because given course does not match the one for the current course membership")):this.courseMembership.$asPromise():e.users.$find(this.currentUser.userId,{expand:"courseRole"}).$allow(["400-499"]).$asPromise().then(function(e){return t._courseMembership=e,t._courseMembership.isInStudentPreview=function(){return t.contextCourse.isInIframeOfPreviewMode()},e}):this.$q.reject(new Error("Cannot resolve course membership because currentUser service has no userId")):this.$q.reject(new Error("Cannot load course membership because no course model was provided"))},e.prototype.availabilityHasBeenBypassed=function(){return this._courseMembership&&this.courseMembership.availabilityHasBeenBypassed()},e.prototype.courseIsAvailable=function(){return this.courseMembership&&this.courseMembership.courseIsAvailable()},e.prototype.courseIsOpen=function(){return this.courseMembership&&this.courseMembership.courseIsOpen()},e.prototype.courseIsPrivate=function(){return this.courseMembership&&this.courseMembership.courseIsPrivate()},e.prototype.isStudentMembership=function(){return this.courseMembership&&this.courseMembership.isStudentMembership()},e.prototype.isGuestMembership=function(){return this.courseMembership&&this.courseMembership.isGuestMembership()},e.prototype.isStudentOrGuestMembership=function(){return this.courseMembership&&this.courseMembership.isStudentOrGuestMembership()},e.prototype.isActAsInstructorMembership=function(){return this.courseMembership&&this.courseMembership.isActAsInstructorMembership()},e.prototype.isTeachingAssistantMembership=function(){return this.courseMembership&&this.courseMembership.isTeachingAssistantMembership()},e.prototype.isInRoleBucket=function(e){return this.courseMembership&&this.courseMembership.isInRoleBucket(e)},e.prototype.isDueDateExcepted=function(){return this.courseMembership&&this.courseMembership.isDueDateExcepted()},e.$inject=["$q","$rootScope",s.b,i.o.serviceName,a.e],e}(),h=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(m),[i.R,s.a,a.b]);angular.module(c,h).provider(l,f)},XGja:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return a});var r=n("EVdn"),i=n("lUN/");function o(e,t){i.a();var n=e?e.find(":tabbable"):r(":tabbable"),o=t||r(document.activeElement),s=0;if(1===o.length){var a=n.index(o);a+1<n.length&&(s=a+1)}n.eq(s).focus()}function s(e,t){i.a();var n=e?e.find(":tabbable"):r(":tabbable"),o=t||r(document.activeElement),s=n.length-1;if(1===o.length){var a=n.index(o);a>0&&(s=a-1)}n.eq(s).focus()}function a(e,t){i.a(),e.is(":tabbable")||null!=e.attr("tabindex")?e.is(":tabbable")&&"-1"===e.attr("tabindex")&&e.removeAttr("tabindex"):e.attr("tabindex","-1"),t?t(e):e.focus()}},XH2s:function(e,t){e.exports='<bb-modal id="content-deleted-modal"\n          class="notification"\n          modal-title-key="base.stream.modal.accessDenied.title"\n          analytics-id-tag-prefix="base.stream.modal.accessDenied">\n  <div name="modal-contents">\n    <p bb-translate>base.stream.modal.accessDenied.body</p>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="$parent.$close()" bb-translate analytics-id="global.ok">global.ok</button>\n</bb-modal>\n'},XLiA:function(e,t,n){},XPRq:function(e,t,n){e.exports=n("ZJ/X")(1719)},XPhQ:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.zipTitle"\n          modal-dismiss-key="components.directives.fileUpload.takeMeBack"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.zipFull</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" ng-click="fileUpload.closeModal(true)" class="button js-primary-button" analytics-id="components.directives.fileUpload.unzipFile">\n    <bb-translate>components.directives.fileUpload.unzipFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" ng-click="fileUpload.closeModal(false)" class="button button--secondary js-secondary-button" analytics-id="components.directives.fileUpload.uploadAsZip">\n    <bb-translate>components.directives.fileUpload.uploadAsZip</bb-translate>\n  </button>\n</bb-modal>\n'},XfOu:function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",function(){return a}),n.d(t,"ILearnRubricType",function(){return r}),n.d(t,"sortRubricData",function(){return u});n("TeAI");var r,i=n("yCC5"),o=n("Rjd/"),s=n("nkTj"),a=i.Xb;function u(e){e.columnHeaders&&e.columnHeaders.length>0&&e.columnHeaders.sort(function(e,t){return e.position-t.position}),e.rows&&e.rows.length>0&&(e.rows.sort(function(e,t){return e.position-t.position}),e.rows.forEach(function(e){e.cells&&e.cells.length>0&&e.cells.sort(function(e,t){return e.position-t.position})}))}function c(e){e.rows&&e.rows.length>0&&e.rows.forEach(function(t){t.isCurrentUserEligibleToAlignGoals=function(){return!0===e.permissions.edit&&!e.readOnly},t.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+t.id},t.getContentTitleForGoalAlignment=function(){return t.header}})}!function(e){e.PERCENTAGE="PERCENTAGE",e.PERCENTAGE_RANGE="PERCENTAGE_RANGE"}(r||(r={})),o.a.factory(a,["restmod",s.d,function(e,t){return e.model().mix({$extend:{Record:{canDelete:function(){return this.permissions&&this.permissions.delete},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.edit},getContentIdForGoalAlignment:function(){return"blackboard.plugin.rubric.api.core.data.Rubric;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},saveAlignedGoals:function(e,t){var n,r=this;return t&&(n=t.map(function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}})),e&&(this.rows=this.rows.map(function(t){return t.id===e&&(t.alignedGoals=n),t})),this.$send({method:"PATCH",url:this.$url(),data:{rows:this.rows}}).$then(function(){r.$getPreviousVersion()&&(r.$getPreviousVersion().rows=r.rows)})}}},$hooks:{"after-request":function(e){e&&e.data&&(e.data.rows&&e.data.columnHeaders?(u(e.data),c(e.data)):e.data.results&&e.data.results.length>0&&e.data.results.forEach(function(e){e.rows&&e.columnHeaders&&(u(e),c(e))}))},"before-save":function(e){e.data.columnHeaders&&e.data.columnHeaders.forEach(function(e,t){e.position=t}),e.data.rows&&e.data.rows.forEach(function(e,t){e.position=t,e.cells.forEach(function(e,t){e.position=t})})}}})}])},XhL2:function(e,t,n){e.exports=n("ZJ/X")(1423)},XhfK:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-small-course_catalog_default",use:"icon-small-course_catalog_default-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-course_catalog_default"><path d="M5 14.5c-2 1.0446-4 0-4 0v-13c2-1 4 0 4 0v13zM15 14.5c-2 1.125-4 0-4 0v-13s2-1 4 0v13zM8 11v1m0-7v1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 14.5357c-3 1.0447-6 0-6 0V1.5s3-1 6 0v13.0357z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},XoDE:function(e,t,n){e.exports=n("ZJ/X")(1427)},"Xq/A":function(e,t,n){"use strict";var r=n("mrSG"),i=n("IbG+"),o=n("pjml"),s=n("g66W");var a=n("DsaG"),u=n("Q/M7"),c=n("e6jQ");n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p});var l="ultra.services.bbml-editor",d="bbMLEditorService",p=function(){function e(e,t,n){this.$q=e,this.DSCacheFactory=t,this.fileViewer=n}return Object.defineProperty(e,"VERSION_INDICATOR_PREFIX",{get:function(){return'\x3c!-- {"bbMLEditorVersion":'},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CURRENT_VERSION_INDICATOR",{get:function(){return e.VERSION_INDICATOR_PREFIX+"1} --\x3e"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EMBEDDED_LINK_PREFIX",{get:function(){return"https://"},enumerable:!0,configurable:!0}),e.prototype.getBbMLFileType=function(e){return e.dataset&&e.dataset.bbtype?e.dataset.bbtype:"file"},e.prototype.convertBbMLToContentBlocks=function(t){var n,r=[],i=!1;n=t,s.k(n,p.VERSION_INDICATOR_PREFIX)&&(i=!0);var o=document.createElement("div");o.innerHTML=t;for(var a=0;a<o.children.length;a++){var u=o.children[a];if("A"===u.tagName&&"file"===this.getBbMLFileType(u))r.push(this.convertBbMLToFileBlock(u));else if("DIV"===u.tagName){var c=this.getBlockIdFromBbML(u),l=u.innerHTML.trim();l&&r.push({textBlock:l,id:c})}}return i||0!==r.length||(this.contains(t,e.EMBEDDED_LINK_PREFIX)||(i=!0),r.push({textBlock:t,id:this.generateBlockId()})),{contentBlocks:r,isBbmlEditorCompliant:i}},e.prototype.contains=function(e,t){return(e||"").indexOf(t)>-1},e.prototype.convertBbMLToFileBlock=function(e){var t,n={file:{}};if(e.dataset&&e.dataset.bbfile)try{var r=JSON.parse(e.dataset.bbfile);n.isDecorative=r.isDecorative,n.alternativeText=r.alternativeText,n.linkName=r.linkName,n.currentMimeType=r.mimeType,r.render&&(n.ui={isRenderedInline:"inline"===r.render}),r.bbFileUuid&&(n.viewerData||(n.viewerData={bbFileUuid:r.bbFileUuid}),n.viewerData.bbFileUuid=r.bbFileUuid),r.viewerUuid&&(n.viewerData.viewerUuid=r.viewerUuid),r.viewerUrl&&(n.viewerData.viewerUrl=r.viewerUrl),r.viewerTimeToWait&&(n.viewerData.viewerTimeToWait=parseInt(r.viewerTimeToWait+"",10))}catch(e){}n.linkName||(n.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),n.currentMimeType||(n.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1)),n.ui||(n.ui={isRenderedInline:this.fileViewer.shouldRenderInlineByDefault(n)}),t=this.getBlockIdFromBbML(e);var i=e.href;return 0===i.indexOf("http://localhost")&&(i=u.c(i.substr("http://localhost".length))),n.downloadUrl=i,this.fileViewer.initUiField(n),{fileBlock:n,id:t}},e.prototype.getBlockIdFromBbML=function(e){return e.dataset&&e.dataset.bbid?e.dataset.bbid:e.id?e.id:this.generateBlockId()},e.prototype.convertContentBlocksToBbML=function(t,n){var r=document.createElement("div");if(t.forEach(function(e){if("fileBlock"in e){var t=document.createElement("a");if(t.href=e.fileBlock.downloadUrl,e.fileBlock.ui){var n={};e.fileBlock.ui.isRenderedInline?n.render="inline":n.render="attachment",null!=e.fileBlock.isDecorative&&(n.isDecorative=e.fileBlock.isDecorative),e.fileBlock.alternativeText&&(n.alternativeText=e.fileBlock.alternativeText),e.fileBlock.linkName&&(n.linkName=e.fileBlock.linkName),e.fileBlock.currentMimeType&&(n.mimeType=e.fileBlock.currentMimeType),e.fileBlock.viewerData&&(e.fileBlock.viewerData.bbFileUuid&&(n.bbFileUuid=e.fileBlock.viewerData.bbFileUuid),e.fileBlock.viewerData.viewerUuid&&(n.viewerUuid=e.fileBlock.viewerData.viewerUuid)),t.dataset.bbfile=JSON.stringify(n)}t.dataset.bbid=e.id,t.innerHTML=e.fileBlock.linkName,r.appendChild(t)}else if("textBlock"in e&&e.textBlock){var i=document.createElement("div");i.dataset.bbid=e.id,i.innerHTML=e.textBlock,r.appendChild(i)}e.isNewToBbML&&delete e.isNewToBbML}),r.innerHTML){var i="";return n&&t&&t.length&&(i=e.CURRENT_VERSION_INDICATOR),i+r.innerHTML}return r.innerHTML},e.prototype.generateBlockId=function(){return"bbml-editor-id_"+c.b()},e.prototype.writeBbMLLink=function(e,t,n){if(0!==n.length){n.length>1&&"<ul>",n.forEach(function(e){n.length>1&&"<li>","lti"===e.type?'<a data-bbfile="'+e.data+'" data-bbtype="lti" href="#">'+e.title+"</a>":'<a href="'+e.url+'" target="_blank">'+e.title+"</a>",n.length>1&&"</li>"}),n.length>1&&"</ul>"}},e.$inject=["$q","DSCacheFactory",a.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(p);i.module(l,["angular-data.DSCacheFactory",o.R,a.a]).service(d,p)},XseH:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s});n("hh8V");var r=n("LvDl"),i=n("IbG+"),o=n("H8CZ"),s="ultra.components.directives.hasFooter",a=function(){function t(t,n,i){var s=this;this.scope=t,this.element=n,this.attrs=i,this.domChanged=function(){var t=s.element.find("footer:not(.notification)").filter(":visible").filter(function(){return e(this).height()>0}),n=s.element.find(".import-status-bar").filter(":visible").filter(function(){return e(this).height()>0});t.length>0||n.length>0?(e(s.element).addClass("has-footer"),e(s.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").addClass("has-footer-in-preview-mode")):(e(s.element).removeClass("has-footer"),e(s.element).hasClass("in-preview-mode")&&e(window.parent.document).find("body").removeClass("has-footer-in-preview-mode"))};var a=r.debounce(this.domChanged,100,{leading:!0,trailing:!0});this.observer=new MutationObserver(a),this.observer.observe(n[0],{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","style"]}),o.b(this.element,a),o.a(this.element,a),this.scope.$on("$destroy",function(){s.observer.disconnect(),o.b(s.element,a),o.a(s.element,a)})}return t.$inject=["scope","element","attrs"],t}(),u=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.link=function(e,n,r){e.hasfooter=t.$injector.instantiate(a,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();i.module(s,[]).directive("bbHasFooter",["$injector",function(e){return e.instantiate(u)}])}).call(this,n("EVdn"))},"Y/dt":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return s}),n.d(t,"e",function(){return a});var r="EVENT_ATTEMPT_SAVING_START",i="EVENT_ATTEMPT_SAVING_DONE",o="EVENT_ATTEMPT_SUBMITTING_START",s="EVENT_ATTEMPT_SUBMITTING_DONE",a="EVENT_ATTEMPT_TRIGGER_SAVE"},Y2su:function(e,t){e.exports="<div ng-transclude></div>"},Y3OE:function(e,t,n){"use strict";var r=n("z1U9");t.a=r.ContentHandler},Y88D:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return i});var r=n("IbG+"),i="ultra.components.directives.accessibility.clickFocus",o=function(){function t(t,n){var r=this;this.injector=t,this.timeout=n,this.restrict="A",this.link=function(t,n,i){i.bbClickFocus.length&&n.on("click",function(){r.timeout(function(){if(i.indexToFocus){var t=Number(i.indexToFocus);e(i.bbClickFocus).eq(t).focus()}else{e(i.bbClickFocus).focus()}},120)})}}return t.$inject=["$injector","$timeout"],t}();r.module(i,[]).directive("bbClickFocus",["$injector",function(e){return e.instantiate(o)}])}).call(this,n("EVdn"))},YIUI:function(e,t){e.exports='\x3c!-- Onsubmit Errors first --\x3e\n<script type="text/ng-template" id="default-onsubmit-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="numberInvalidOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.number_invalid</span></span>\n  <span ng-message="numberLargeOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberLargeOnsubmit.max }">components.directives.validation.messages.onsubmitErrors.number_large</span></span>\n  <span ng-message="numberSmallOnsubmit"><span bb-translate translate-values="{ value: onsubmitErrors.numberSmallOnsubmit.min }">components.directives.validation.messages.onsubmitErrors.number_small</span></span>\n  <span ng-message="maxlengthOnsubmit"><span bb-translate>components.directives.validation.messages.onsubmitErrors.maxlength</span></span>\n  <span ng-message="urlOnsubmit"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="requiredOnsubmit"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="emailOnsubmit"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="timeOnsubmit"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="dateOnsubmit"><span bb-translate>components.directives.validation.messages.errors.date</span></span>\n<\/script>\n\n\x3c!-- Errors --\x3e\n<script type="text/ng-template" id="default-error-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.errors.invalid_bbml_markups</span></span>\n  <span ng-message="rangeInvalid"><span bb-translate translate-values="{ value: errors.rangeInvalidArgs.min }">components.directives.validation.messages.errors.range_invalid</span></span>\n  <span ng-message="numberInvalid"><span bb-translate>components.directives.validation.messages.errors.number_invalid</span></span>\n  <span ng-message="numberLarge"><span bb-translate translate-values="{ value: errors.numberLarge.max }">components.directives.validation.messages.errors.number_large</span></span>\n  <span ng-message="numberSmall"><span bb-translate translate-values="{ value: errors.numberSmall.min }">components.directives.validation.messages.errors.number_small</span></span>\n  <span ng-message="maxlength"><span bb-translate translate-values="{ diff: errors.maxlength.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n  <span ng-message="url"><span bb-translate>components.directives.validation.messages.errors.url</span></span>\n  <span ng-message="required"><span bb-translate>components.directives.validation.messages.errors.required</span></span>\n  <span ng-message="email"><span bb-translate>components.directives.validation.messages.errors.email</span></span>\n  <span ng-message="phoneNumber"><span bb-translate>components.directives.validation.messages.errors.phone_number_noSymbolsOrSpaces</span></span>\n  <span ng-message="time"><span bb-translate>components.directives.validation.messages.errors.time</span></span>\n  <span ng-message="date"><span bb-translate>components.directives.validation.messages.errors.date</span></span>\n  <span ng-message="maxDate"><span bb-translate translate-values="{ value: errors.maxDate.dateMax }">components.directives.validation.messages.errors.max_date</span></span>\n  <span ng-message="minDate"><span bb-translate translate-values="{ value: errors.minDate.dateMin }">components.directives.validation.messages.errors.min_date</span></span>\n  <span ng-message="schemaSymbolString"><span bb-translate>components.directives.validation.messages.errors.schema_symbol_string</span></span>\n<\/script>\n\n\x3c!-- Immediate Errors --\x3e\n<script type="text/ng-template" id="default-immediate-error-messages">\n  <span ng-message="maxlengthImmediate"><span bb-translate translate-values="{ diff: immediateErrors.maxlengthImmediate.diff }">components.directives.validation.messages.errors.maxlength.plural</span></span>\n<\/script>\n\n\x3c!-- Warnings --\x3e\n<script type="text/ng-template" id="default-warning-messages">\n  <span ng-message="bbmlMarkup"><span bb-translate>components.directives.validation.messages.warnings.invalid_bbml_markups_cleanup</span></span>\n  <span ng-message="maxlengthWarning"><span bb-translate translate-values="{ left: warnings.maxlengthWarning.left }">components.directives.validation.messages.warnings.maxlength.plural</span></span>\n<\/script>\n\n<div class="bb-validation-messages form-element-onsubmit-errors" ng-class="{\'sr-only\': !showOnsubmitErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.onsubmitFieldHasError</div>\n  </div>\n\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="onsubmitErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-onsubmit-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showErrors}">\n  <div ng-repeat="label in labels track by label" class="sr-only">\n    <div bb-translate translate-values="{ label: label }">components.directives.validation.messages.fieldHasError</div>\n  </div>\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="errors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-errors" ng-class="{\'sr-only\': !showImmediateErrors}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="immediateErrors">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-immediate-error-messages"></div>\n  </div>\n</div>\n\n<div class="bb-validation-messages form-element-warnings" ng-class="{\'sr-only\': !showWarnings}">\n  <bb-svg-icon size="small" icon="attention"></bb-svg-icon>\n  <div ng-messages="warnings">\n    <ng-transclude></ng-transclude>\n    <div ng-messages-include="default-warning-messages"></div>\n  </div>\n</div>\n'},"YOs/":function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d});n("IyP6");var r=n("LvDl"),i=n("IbG+"),o=n("e6jQ"),s=n("lr7J"),a=n("0JpG"),u=n("en1n"),c=n("KRhF"),l="ultra.components.directives.table";function d(e,t,n){var r=e+"("+t+")";return n&&(r+=","+n+"("+t+")"),r}var p=function(){function e(e,t,n,o){var a=this;this.scope=e,this.element=t,this.$q=n,this.localizeService=o,this.fetchingMoreRows=!1,this.initialDataLoaded=!1,this.throttledShowMore=r.throttle(function(){var e=a.scope.config();if(a.scope.tableData().length<e.totalCount&&!a.fetchingMoreRows){a.fetchingMoreRows=!0;var t=a.$q.defer();a.scope.$emit("table.showMore",{instanceId:e.instanceId,callback:function(e){t.resolve(e)}}),a.scope.$root.$broadcast(s.a,e.instanceId+"-scroll-tray",t.promise),t.promise.then(function(){a.fetchingMoreRows=!1})}},500);var u=this.scope.$watch("config()",function(e){i.isDefined(e)&&(u(),a.init())})}return e.prototype.init=function(){var e=this,t=this.scope.config();t.instanceId=t.instanceId||o.a(),t.currentSortDirection=t.currentSortDirection||"asc",t.currentSortColumnIndex=t.currentSortColumnIndex||0,t.columns.forEach(function(e){i.isUndefined(e.visible)&&(e.visible=!0)});var n=this.scope.$watchCollection("tableData()",function(t){i.isArray(t)&&(e.initialDataLoaded=!0,n())});if(t.customBreakpointFn){var s=r.throttle(function(e){t.customBreakpointFn(e)},500);this.scope.$watch(function(){return u.d()},function(e){s(e)})}this.addEventListeners(),this.setCaption()},e.prototype.addEventListeners=function(){var e=this;this.element.on("click","tr th.sortable-header",function(t){var n=i.element(t.currentTarget).attr("data-heading-index");if(i.isDefined(n)){var r=parseInt(n,10);e.sort(r)}})},e.prototype.setCaption=function(){var e=this,t=this.scope.config();this.localizeService.loadBundle("components/directives/table").then(function(){var n=e.localizeService.translateSync({locale:e.localizeService.getLocale(e.scope),key:"components.directives.table.caption",params:{caption:t.title,column:t.columns[t.currentSortColumnIndex].heading,direction:e.localizeService.translateSync({locale:e.localizeService.getLocale(e.scope),key:"components.directives.table."+t.currentSortDirection})},noWrap:!0});e.element.find("caption").text(n)})},e.prototype.sort=function(e){var t=this,n=this.scope.config();this.initialDataLoaded=!1,n.currentSortColumnIndex===e?n.currentSortDirection="asc"===n.currentSortDirection?"desc":"asc":n.currentSortDirection="asc",n.currentSortColumnIndex=e,this.scope.$emit("table.sorted",{instanceId:n.instanceId,columnIndex:n.currentSortColumnIndex,sortDirection:n.currentSortDirection,callback:function(){t.initialDataLoaded=!0,t.setCaption()}})},e.prototype.showMore=function(){this.throttledShowMore()},e.$inject=["scope","element","$q",a.serviceName],e}(),f=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=c,this.transclude=!0,this.scope={config:"&",tableData:"&"},this.controller=["$scope",function(e){this.getConfig=function(){return e.config()}}],this.link=function(e,n){e.table=t.$injector.instantiate(p,{scope:e,element:n})}}return e.$inject=["$injector"],e}();i.module(l,[s.b,a.moduleName]).directive("bbTable",["$injector",function(e){return e.instantiate(f)}])},YQEa:function(e,t,n){},"YVo+":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("w9Zy"),o=n("TnpK"),s="profile.update-password.routes";r.module(s,[i.d,o.b]).config([o.c,function(e){e.peekState("update-password",{url:"/password/update",require:function(){return n.e(340).then(n.bind(null,"aJE6"))},pageTitle:"base.profile.update-password.pageTitle"})}])},YfM7:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("5MwF"),o=n("TnpK"),s="ultra.base.demo.routes";r.module(s,[o.b]).config([o.c,function(e){i.a.features.componentDemos&&e.peekState("demoComponent",{url:"/component/:componentId",require:function(){return n.e(374).then(n.bind(null,"YZN4"))},panelClass:"full",pageTitle:"Sample Component"})}])},YuTi:function(e,t,n){e.exports=n("ZJ/X")(108)},YzQO:function(e,t,n){"use strict";function r(e){return!(!e||!e.length)&&(e.hasClass("bb-editor")||!!e.attr("analytics-on")||r(e.parent()))}function i(e){if(e&&e.length)return e.attr("analytics-id")||e.find("[analytics-id]").attr("analytics-id")}function o(e){if(e&&e.length)switch((e.prop("tagName")||"").toLowerCase()){case"a":case"input":case"button":return i(e);default:return o(e.parent())}}function s(e){var t=e.attr("id");t&&(t+=":"),t+=e.prop("tagName");var n=e.text();if(n){var r=n.replace(/\W/g,"-");r.length>20&&(r=r.substr(0,20)+"..."),t+=":"+r}return t}function a(e){if(e&&e.length)return e.attr("analytics-context")||a(e.parent())}n.d(t,"e",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a})},ZBYA:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a});var r=n("mrSG"),i=n("IbG+"),o=n("pjml"),s="ultraUi.components.services.predict.institutionPreference",a="predictInstitutionPreference",u=function(){function e(e,t){this.$rootScope=e,this.predictInstitutionPreferenceModel=t}return e.prototype.getInstitutionPreference=function(e){return this.predictInstitutionPreferenceModel.getInstitutionPreference(e)},e.$inject=["$rootScope",o.gb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(u);i.module(s,[o.R]).service(a,u)},"ZJ/X":function(e,t){e.exports=vendor_dll_02693035f43773a8a633},ZJYp:function(e,t,n){e.exports=n("ZJ/X")(1931)},ZQey:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(t){var n=e.call(this,t)||this;return n.courseStatus=t,n}return r.__extends(t,e),t.Open=new t("OPEN"),t.Complete=new t("COMPLETE"),t.Private=new t("PRIVATE"),t.OpenTermClassic=new t("OPEN_CLASSIC"),t.PrivateTermClassic=new t("PRIVATE"),t.TermOpen=new t("OPEN"),t.TermComplete=new t("COMPLETE"),t.TermPrivate=new t("PRIVATE"),t.OpenClassic=new t("OPEN_CLASSIC"),t}(n.n(i).a)},Zwxv:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error-forbidden.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-forbidden">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-forbidden.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},"ZzN+":function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("mrSG"),i=n("IbG+"),o=n("5MwF"),s=n("pjml"),a=n("0+Qs"),u="ultra.service.course.conversion",c="courseConversion",l=function(){function e(e,t,n,r,i,o){this.interval=e,this.CourseModel=t,this.$modal=n,this.$q=r,this.$rootScope=i,this.ScheduledTaskModel=o,this.showPreviewAlert=!0,this.taskCache={},this.queuedTaskCache={}}return e.prototype._getConversionTask=function(e){return this.ScheduledTaskModel.$find(e)},e.prototype.isPreview=function(e){return!e.isOpen()&&e.isUltraPreview()},e.prototype.isConversionComplete=function(e){return!e||(s.sb.QueueTaskStatus.Complete.isEqualTo(e)||s.sb.QueueTaskStatus.CompleteErrors.isEqualTo(e))},e.prototype.isConversionSuccess=function(e){return!e||s.sb.QueueTaskStatus.Complete.isEqualTo(e)},e.prototype.setCheckConversionIntervalIfNotExist=function(e,t){this.taskCache[e.courseId]||this.setCheckConversionInterval(e,t)},e.prototype.setCheckConversionInterval=function(e,t){var n=this,r=this.cancelConversionInterval(e);this.removeQueuedTaskFromCache(e),void 0===t&&r&&(t=r.onCompleteCallback),e.refreshConvertToUltraStatus().then(function(r){n.queuedTaskCache[e.courseId]=r.ui.convertToUltraTaskId,n._getConversionTask(n.queuedTaskCache[e.courseId]).$then(function(r){n.setUpIntervalToPollForConversionTaskCompletion(r,e,t)})})},e.prototype.setUpIntervalToPollForConversionTaskCompletion=function(e,t,n){var r=this,i=e.taskTitle;if(i&&(i.indexOf("ConvertTOUltraQueuedOperation")>=0||i.indexOf("UndoUltraQueuedOperation")>=0)){var s,a;if(s=function(){a()},a=function(){r._getConversionTask(e.taskId).$then(function(e){var n=e.taskStatus.toString(),i=r.isConversionComplete(n),o=r.isConversionSuccess(n);if(i){var s=r.cancelConversionInterval(t);r.removeQueuedTaskFromCache(t),s&&s.onCompleteCallback&&s.onCompleteCallback(n,{complete:i,success:o,taskId:e.taskId,taskTitle:e.taskTitle})}})},!this.taskCache[t.courseId]){var u=o.a.production?6e4:6e3;this.taskCache[t.courseId]={interval:this.interval(s,this.$rootScope,u),onCompleteCallback:n}}}},e.prototype.cancelConversionInterval=function(e){var t=this.taskCache[e.courseId];return t&&(this.interval.cancel(t.interval),this.taskCache[e.courseId]=null),t},e.prototype.removeQueuedTaskFromCache=function(e){delete this.queuedTaskCache[e.courseId]},e.$inject=[a.b,s.o.serviceName,"$modal","$q","$rootScope",s.sb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l);i.module(u,[s.R,a.a]).service(c,l)},ZzR9:function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.$stateChangeError="$stateChangeError",e.$stateChangeStart="$stateChangeStart",e.$stateChangeSuccess="$stateChangeSuccess",e.$stateNotFound="$stateNotFound",e.$stateHasCourseInContextChanged="$stateHasCourseInContextChanged"}(r||(r={}))},ZzYr:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("mrSG"),i=n("TnpK"),o=n("Qbdf"),s=n("aHpC"),a=n("IbG+"),u="ultra.components.directives.courseOrgTokenReplacementDirective",c=[{coursePrefix:"base.baseCourses",orgPrefix:"base.baseOrganizations"},{coursePrefix:"base.courses",orgPrefix:"base.organizations"},{coursePrefix:"course",orgPrefix:"organization"},{coursePrefix:"components.directives.message",orgPrefix:"components.directives.message.organization"},{coursePrefix:"components.directives.learning-module.ghost-panel",orgPrefix:"components.directives.learning-module.orgs-ghost-panel"},{coursePrefix:"components.directives.calendar",orgPrefix:"components.directives.calendar.organization"},{coursePrefix:"components.directives.content-visibility",orgPrefix:"components.directives.content-visibility.organization"},{coursePrefix:"components.directives.grade",orgPrefix:"components.directives.grade.organization"}],l=function(){function e(e,t,n,r,i){var o=this;this.element=e,this.attributes=t,this.scope=n,this.ultraState=r,this.currentCourse=i;try{if((r.includes("base.organizations.**")||i.course&&i.course.isOrganization)&&(t.bbTranslate&&(t.bbTranslate=this.replaceToken(t.bbTranslate),e.attr("bb-translate",this.replaceToken(t.bbTranslate))),t.bbTranslateAttrs)){var s=t.bbTranslateAttrs;a.forEach(this.scope.$eval(s),function(e){s=s.replace(e,o.replaceToken(e))}),t.bbTranslateAttrs=s,e.attr("bb-translate-attrs",s)}}catch(e){}}return e.prototype.replaceToken=function(e){if(e){var t=c.find(function(t){return e.startsWith(t.coursePrefix)});if(t)return e.replace(t.coursePrefix,t.orgPrefix)}return e},e}(),d=function(){function e(e,t){var n=this;this.ultraState=e,this.currentCourse=t,this.restrict="A",this.scope=!1,this.priority=-1,this.compile=function(){return function(e,t,r){return new l(t,r,e,n.ultraState,n.currentCourse)}}}return e=r.__decorate([r.__param(0,Object(s.b)(i.d)),r.__param(1,Object(s.b)(o.e))],e)}();a.module(u,[i.b]).directive("courseOrgTokenResolver",["$injector",function(e){return e.instantiate(d)}])},a8V0:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Assessment=new t("Assessment"),t.Section=new t("Section"),t.Item=new t("Item"),t}(n.n(i).a);t.a=o},aHpC:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return u});var r=n("LvDl");function i(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Symbol(e.name);return function(n,i,o){var s=o.value;o.value=function(){return this[r]=this[r]||e.apply(null,[s].concat(t||[])),this[r].apply(this,arguments)}}}var o=function(e){return i(r.debounce,e)},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,n,i){var o=i.value,s=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")"),a=Symbol("@ScopeOnce("+t.constructor.name+"."+n+")");i.value=function(){var t=this,n=t.$scope||t.scope;if(!n)throw new Error("NO_SCOPE_FOUND");return Object(r.isEmpty)(e)||(t[a]=t[a]||Object(r.once)(function(){n.$watchGroup(e,function(){t[s]=null})}),t[a]()),t[s]=t[s]||Object(r.once)(function(){return o.apply(t,arguments)}),t[s].apply(t,arguments)}}},a=function(e){if(!e)throw"Empty name is not accepted";return function(t,n,r){if("function"!=typeof t)throw"@Inject only supports constructor arguments";t.$inject=t.$inject||[],t.$inject[r]=e}},u=function(){return function(e,t,n){var r=n.value;n.value=function(){var e=this,t=r.apply(this,arguments),n=e.$injector;if(!n)throw new Error("$injector NotFound, the decorator requires $injector to be injected into class.");n.invoke(["$rootScope","$q",function(e,n){n.when(t).then(function(){return e.$applyAsync()})}])}}}},aNYC:function(e,t,n){e.exports=n("ZJ/X")(406)},aWNp:function(e,t){e.exports='<div class="preview-header"\n     ng-if="shouldShowHeader && !previewHeader.contextCourse.isInIframeOfPreviewMode()"\n     role="banner">\n  <div>\n    <h2 bb-translate course-org-token-resolver>course.outline.previewCourse.headerBar.title</h2>\n    <div ng-if="hasExceptionReport">\n      <bb-translate>course.outline.previewCourse.headerBar.description</bb-translate>\n      <a href="javascript:void(0);" bb-peek-sref="conversion-risk-analysis" bb-translate\n         analytics-id="course.outline.previewCourse.headerBar.exceptionsLink">course.outline.previewCourse.headerBar.exceptionsLink</a>\n    </div>\n  </div>\n</div>\n'},adx1:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("LvDl"),i=function(){function e(){this.events=Object.create(null)}return e.prototype.$onEvent=function(e,t){var n=this;return this.events[e]=this.events[e]||[],this.events[e].push(t),r.once(function(){r.remove(n.events[e],function(e){return e===t})})},e.prototype.$emitEvent=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i={type:e};(this.events[e]||[]).forEach(function(e){e.call.apply(e,[t,i].concat(n))})},e}()},alXF:function(e,t,n){e.exports=n("ZJ/X")(1411)},aohr:function(e,t,n){"use strict";var r;!function(e){e.CcAdvisors="CC_ADVISORS",e.DisableAdvisorViewAllStudents="DISABLE_ADVISOR_VIEW_ALL_STUDENTS",e.EmailBranding="EMAIL_BRANDING",e.EmailSender="EMAIL_SENDER",e.EnableLogOut="ENABLE_LOG_OUT",e.InstructorViewMajorDegreeColumn="INSTRUCTOR_VIEW_MAJOR_DEGREE_COLUMN",e.OverrideLanguagePack="OVERRIDE_LANGUAGE_PACK",e.TypeaheadCourseLimit="TYPEAHEAD_COURSE_LIMIT",e.TypeaheadStudentLimit="TYPEAHEAD_STUDENT_LIMIT"}(r||(r={})),t.a=r},awu3:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("IbG+"),i=n("0JpG"),o=n("Qbdf"),s=n("UD9g"),a=n("pjml"),u=n("TnpK"),c=n("oB9e"),l="ultra.course.engagement.blog.router";r.module(l,[i.moduleName,u.b,s.b,c.a,o.b]).config([u.c,o.c,function(e,t){var r;e.peekState("journal",{abstract:!0,url:"/journal",resolve:(r={},r[o.d]=t.resolve,r.translations=["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("features/course/content/blog/blog")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}],r)}).peekState("journal.view",{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.journalItem",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(262)]).then(n.bind(null,"QJ18"))},resolve:{translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}],currentCourseMemberships:"^courseMembershipsLoader"}}).peekState("journal.view.with-grading",{url:"?view&disGroupId",panelClass:"full",views:{"engagement-edit@":{require:function(){return Promise.all([n.e(0),n.e(149),n.e(278)]).then(n.bind(null,"83Gf"))}},"engagement-grade@":{require:function(){return Promise.all([n.e(7),n.e(24),n.e(0),n.e(8),n.e(9),n.e(33),n.e(25),n.e(42),n.e(85)]).then(n.bind(null,"4Rme"))}}},onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conditional-release","content-market","course-group","blog-details","blog-participants","blog-settings",s.a,"lti","message","rubric","rubric-evaluation","rubric-view","submission-list","view-exceptions","blog-feedback"],peekViewName:"blog-peek@",pageTitle:"course.content.journalItem",resolve:{currentContent:[u.d,o.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==a.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}],currentColumn:[u.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==a.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}]}})}])},b2lU:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var r=n("0JpG"),i="fileUtility",o="FileUtilFactory",s=function(){function e(e,t){var n=this;this.bbLocalize=e,this.$q=t,this.bytes="components.directives.fileUpload.bytes",this.GB="components.directives.fileUpload.GB",this.KB="components.directives.fileUpload.KB",this.MB="components.directives.fileUpload.MB",this.calculateSize=function(e){var t=n.bytes;return e>1024&&(e/=1024,t=n.KB,e>1024&&(e/=1024,t=n.MB,e>1024&&(e/=1024,t=n.GB))),{size:e,sizeLabel:t}}}return e.$inject=[r.serviceName,"$q"],e}();angular.module(i,[r.moduleName]).factory(o,["$injector",function(e){return function(){return e.instantiate(s)}}])},b4mq:function(e,t){e.exports='<div>\n  <div class="upload-list">\n    <div ng-repeat="file in inProgressFiles" ng-attr-id="file-progress-{{file.barId}}" bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.document\'}" class="file-container file-container-progress">\n      <div class="file-meta-container">\n        <div class="file-meta">\n          <ng-switch on="file.currentMimeType">\n            <div ng-switch-when="application/zip" class="element-image img-icon-zip"></div>\n          </ng-switch>\n          <div ng-hide="file.isProcessing" class="progress-circle">\n            <svg class="progress-circle-svg" viewBox="-10 -10 220 220">\n              <path class="back" ng-attr-d="{{\'M0,100 a100,100 0 1 0 200,0 a100,100 0 1 0 -200,0\'}}" fill="transparent" />\n              <path class="bar" ng-attr-d="{{\'m100,0a100,100 0 0 1 0,200a100,100 0 0 1 0,-200\'}}" fill="transparent" stroke-dasharray="629" stroke-dashoffset="629"/>\n            </svg>\n            <i class="progress-icon file-error-icon icon-exclamation" ng-if="state === \'error\'"></i>\n            <span class="progress-value" bb-translate translate-values="{percentage: file.currentProgress}">global.percent</span>\n          </div>\n          <span ng-show="file.isProcessing" class="processing-spinner">\n            <div class="canvas success-state"></div>\n          </span>\n          <p class="progress-status">\n            <span class="ellipse" bb-translate="components.directives.fileUpload.uploadingFile" translate-values="{fileName: file.fileName}"></span>\n          </p>\n        </div>\n        <div class="content-item-controls file-container-controls">\n          <button ng-hide="file.isProcessing"\n                  class="button super-clear js-cancel-upload"\n                  bb-translate-attrs="{\'aria-label\':\'components.directives.fileUpload.cancelUploadText\'}"\n                  ng-click="progress.cancelUpload($event, file.id)"\n                  analytics-id="components.directives.fileUpload.cancelUploadText.button">\n            <bb-svg-icon size="small" icon="close"></bb-svg-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},bF8R:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("pjml"),a=n("fYJU"),u=n("o5Lu"),c=n("Bu0u"),l=n("1y/X"),d=n("0JpG"),p="ultra.components.services.courseContent",f="courseContent",m=function(){function e(e,t,n,r,i,o,s){this.$q=e,this.$rootScope=t,this.$log=n,this.grade=r,this.contextUser=i,this.UserModel=o,this.bbLocalize=s,this.contentDataResult=new h}return e.prototype.loadContentAndGrades=function(e){var t,n=this;if(e.content)t=e.content.$asPromise&&e.content.$asPromise()||this.$q.when(e.content);else{if(!e.contentId)throw new c.a({message:"Content or contentId must be provided."});var r="assignedGroups,selfEnrollmentGroups.group,extensionAttributes"+(e.contentExtraExpand?","+e.contentExtraExpand:"");t=e.course.contents.$find(e.contentId,{expand:r}).$asPromise()}if(!this.contextUser.userId)throw new c.a({message:"There is no userId in the context."});return t.then(function(t){var r=new h;return r.courseContent=t,r.groupMembers=[],e.column?r.gradingColumn=e.column:r.gradingColumn=e.course.gradebook.columns.$buildRaw(t.getAssociatedGradingColumn(e.columnId)),r.gradingColumn.rubricAssociations||r.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise().then(function(e){r.gradingColumn.rubricAssociations=e.rubricAssociations}),n.grade.loadGrade({attemptQueryParams:{expand:"toolAttemptDetail,alignedGoals,members,attempts,attempts.toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor",overrideAggregationModel:s.F.AttemptAggregationModel.Last},gradeQueryParams:{expand:"attemptsLeft"},courseId:e.course.id,column:r.gradingColumn,content:r.courseContent,userId:n.contextUser.userId},!0).then(function(o){if(r.submitter=n.contextUser.userModel,o){if(r.gradeDetail=o,r.attempt=o.ui.attempt,r.groupAttempt=o.ui.groupAttempt,t.isGroupContent)return n.getGroupMembers(e.course,t,r.groupAttempt).then(function(e){return r.groupMembers=e,r.groupAttempt&&(r.submitter=i.find(e,function(e){return e.id===r.groupAttempt.submittedBy}),!r.submitter&&(r.submitter=null,r.groupAttempt.submittedBy))?n.UserModel.$find(r.groupAttempt.submittedBy).$then(function(e){r.submitter=e||null},function(e){return n.$log.error(e.$response)}).$asPromise().then(function(){return r}):r})}else if(t.isGroupContent)return n.getGroupMembers(e.course,t).then(function(e){return r.groupMembers=e,r});return r})})},e.prototype.getGroupMembers=function(e,t,n){var r=this;return t.assignedGroups&&t.assignedGroups.length>0?e.groups.$find(t.assignedGroups[0].groupId,{expand:"memberships",excludeUnavailableMembers:!0}).$asPromise().then(function(t){return e.memberships.$refresh({fields:"id, user, courseRole",roleBucket:l.a.TAKING.toString()}).$asPromise().then(function(e){return r.sortGroupMembers(e,t)})}):this.$q.when([])},e.prototype.sortGroupMembers=function(e,t){var n=this,r={},i=[],o=t.memberships||t.members;e.forEach(function(e){e.user&&(e.user.ui=e.user.ui||{},r[e.user.id]=e.user)});var s=[];return o.forEach(function(e){var t=e.userId||e,i=r[t];if(i){var o=n.bbLocalize.formatUsername(i,d.ILocaleUsernameFormat.Short,n.$rootScope);s.push(o),o.then(function(e){i.ui.formatUserName=e})}}),this.$q.all(s).then(function(){return(o=o.filter(function(e){return!!r[e.userId||e]})).sort(function(e,t){var n=e.userId||e,i=t.userId||t;return r[n].ui.formatUserName.localeCompare(r[i].ui.formatUserName)}),o.forEach(function(e){var t=e.userId||e;r[t]&&(i.push(r[t]),delete r[t])}),i})},e.$inject=["$q","$rootScope","$log",u.g,a.b,s.Qb.serviceName,d.serviceName],e}(),h=function(){};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(m);o.module(p,[s.R,a.a]).service(f,m)},bZMm:function(e,t,n){e.exports=n("ZJ/X")(1950)},bd9L:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var r=n("mrSG"),i=n("IbG+"),o=n("oSB+"),s=n.n(o),a=n("+brj"),u=n("7/CN"),c=n("RNuw"),l=n("lEL+"),d="ultra.directives.autosave",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Change=new t("change"),t.Saving=new t("saving"),t.Saved=new t("saved"),t.SaveFailure=new t("saveFailure"),t.ValidationFailure=new t("validationFailure"),t}(s.a),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.BrowserLocalStorage=new t("browserLocalStorage"),t.BrowserSessionStorage=new t("browserSessionStorage"),t.Server=new t("server"),t}(s.a),m=function(){function e(e,t,n,r,i){switch(this.$q=e,this.scope=t,this.formController=n,this.browserStorage=r,this.timeout=i,this.timeoutMillis=2e3,this.startAutoSubmit=!1,this.saveTo=this.scope.debounceSaveDestination&&f.parse(this.scope.debounceSaveDestination())||f.Server,this.saveTo){case f.BrowserSessionStorage:this.browserStorageDestination=a.a.SessionStorage;break;case f.BrowserLocalStorage:this.browserStorageDestination=a.a.LocalStorage}this.checkForDirectiveConfigErrors(),t.timeoutMillis?this.timeoutMillis=t.timeoutMillis():this.browserStorageDestination&&(this.timeoutMillis=1e3),this.setupListeners(),this.browserStorageDestination&&this.restoreFromBrowser(),this.setupWatcher()}return e.prototype.setupListeners=function(){var e=this;this.scope.$on("bb-autosave-interrupt-timer",function(){e.timeout.cancel(e.autoSaveTimeout)}),this.scope.$on("bb-autosave-save-trigger-debounce",function(){e.scope.delayAutosave&&e.scope.delayAutosave()||e.debounceSave()}),this.scope.$on("bb-autosave-save-to-server-now",function(){e.scope.delayAutosave&&e.scope.delayAutosave()||(e.timeout.cancel(e.autoSaveTimeout),e.saveToServerNow())}),this.scope.$on("bb-autosave-save-to-browser-now",function(){e.scope.delayAutosave&&e.scope.delayAutosave()||(e.scope.$emit("bb-autosave-form",p.Change),e.timeout.cancel(e.autoSaveTimeout),e.saveToBrowserNow())}),this.scope.$on("bb-autosave-browser-restore",function(){e.restoreFromBrowser()}),this.scope.$on("bb-autosave-browser-delete",function(){e.deleteFromBrowser()}),this.scope.$on("bb-start-auto-submission",function(t,n){e.startAutoSubmit=!0,n.resolve()}),this.scope.$on("bb-cancel-auto-submission",function(){e.startAutoSubmit=!1})},e.prototype.setupWatcher=function(){var e=this,t=function(t,n){if(!e.scope.delayAutosave||!e.scope.delayAutosave()){if(null===t&&""===n)return;e.debounceSave()}};if(!this.scope.delayAutosave||!this.scope.delayAutosave())return c.a(this.scope,this.formController,t);var n=this.scope.$watch(function(){return e.scope.delayAutosave()},function(r){null==r||r||(c.a(e.scope,e.formController,t),n())})},e.prototype.checkForDirectiveConfigErrors=function(){if(this.saveTo.isEqualTo(f.Server)&&(!this.scope.saveFunc||!this.scope.validationFunc))throw new Error("saving to the server requires save-func and validate to be defined")},e.prototype.isValid=function(){return this.formController.$valid&&this.scope.validationFunc()},e.prototype.debounceSave=function(){var e=this;this.startAutoSubmit||(this.scope.$emit("bb-autosave-form",p.Change),this.scope.$emit("bb-autosave-form-to-browser",p.Change),this.timeout.cancel(this.autoSaveTimeout),this.autoSaveTimeout=this.timeout(function(){e.saveTo.isEqualTo(f.Server)?e.saveToServerNow():e.browserStorageDestination&&e.saveToBrowserNow()},this.scope,this.timeoutMillis))},e.prototype.saveToServerNow=function(){var e=this;if(this.startAutoSubmit||!u.a()){if(!this.scope.saveFunc||!this.scope.validationFunc)throw new Error("saving to the server requires save-func and validate to be defined");this.isValid()?(this.scope.$emit("bb-autosave-form",p.Saving),this.scope.saveFunc().then(function(t){e.scope.$emit("bb-autosave-form",p.Saved,t),e.browserStorageDestination&&e.deleteFromBrowser()},function(t){e.scope.$emit("bb-autosave-form",p.SaveFailure,t)})):this.scope.$emit("bb-autosave-form",p.ValidationFailure)}},e.prototype.saveToBrowserNow=function(){var e=this;if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");this.scope.$emit("bb-autosave-form-to-browser",p.Saving),this.browserStorage.serializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(function(t){e.scope.$emit("bb-autosave-form-to-browser",p.Saved,t)})},e.prototype.restoreFromBrowser=function(){var e=this;if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deserializeCurrentRouteScopes(this.browserStorageDestination,this.scope.$parent).then(function(t){if(t)return e.scope.$root.$broadcast("bb-autosave-browser-restore-data",t),t})},e.prototype.deleteFromBrowser=function(){if(!this.browserStorageDestination)throw new Error("saving/restoring with browser storage requires the debounceSaveDestination attribute be set");return this.browserStorage.deleteCurrentRouteScopes(this.browserStorageDestination)},e.$inject=["$q","scope","formController",a.c,l.b],e}(),h=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.require="^form",this.scope={debounceSaveDestination:"&?",delayAutosave:"&?",saveFunc:"&?",timeoutMillis:"&?",validationFunc:"&?"},this.link=function(e,n,r,i){e.autoSave=t.$injector.instantiate(m,{scope:e,formController:i})}}return e.$inject=["$injector"],e}();i.module(d,[l.a,a.b]).directive("bbAutosave",["$injector",function(e){return e.instantiate(h)}])},cFWd:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c});n("LvpZ");var r=n("LvDl"),i=n("IbG+"),o=n("oQrK"),s=n("lEL+"),a=n("fid7"),u=n("yC9S"),c="ultra.components.directives.dropdown",l=function(){function t(e,t,n,s){var a,c=this;(this.scope=e,this.element=t,this.$window=n,this.timeout=s,this.RESIZE_DELAY=150,this.isMobile=!1,this.isIos=!1,this.setMaxHeight=function(){var e=c.element.offset().top,t=i.element(c.$window).height(),n=34;"avatar-list"===c.scope.listKind&&(n=57);var r=Math.max(Math.floor((c.scope.forceAbove?e:t-e)/n),2);c.scope.simplifiedMaxItemsPerPage&&c.scope.simplifiedMaxItemsPerPage()>0&&(r=Math.min(r,c.scope.simplifiedMaxItemsPerPage())),c.element.find(".dropdown-directive").css({maxHeight:n*r+2})},this.element.addClass("bb-dropdown"),this.isMobile=!o.a.detect().desktop(),this.isIos=o.a.detect().ios(),this.selectedItem=this.scope.selectedItem,e.$watch("::selectedItem",function(e){c.selectedItem=e}),this.useNativeSelect())||(this.element.on("opened.fndtn.dropdown",function(){c.setMaxHeight(),c.scope.$applyAsync(),a=u.b.OnWindow("resize",r.debounce(c.setMaxHeight,c.RESIZE_DELAY),e),(c.scope.onOpen||i.noop)()}),this.element.on("closed.fndtn.dropdown",function(){a(),(c.scope.onClose||i.noop)()}))}return t.prototype.selectItem=function(e,t){e.isHeader?t.stopPropagation():this.scope.clickFunction({item:e})},t.prototype.getRole=function(){return"menu"===this.scope.listKind?"menu":"listbox"},t.prototype.clickItem=function(t){this.selectedItem&&(this.scope.selectedItem=this.selectedItem,e(event.target).blur(),this.scope.clickFunction({item:this.selectedItem}))},t.prototype.useNativeSelect=function(){return this.isMobile&&"avatar-list"!==this.scope.listKind&&"custom"!==this.scope.listKind&&"region"!==this.scope.listKind},t.prototype.isUserCourseAvailable=function(e){var t=this.scope.getUserCourseAvailabilities&&this.scope.getUserCourseAvailabilities();return!(t&&!t[e])},t.prototype.shouldHaveBlankOption=function(e){return this.isIos&&"group"===e},t.$inject=["scope","element","$window",s.b],t}(),d=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=a,this.transclude=!0,this.scope={listId:"@",itemList:"=",listKind:"@",selectedItem:"=?",selectedText:"@?",listHeader:"@?",clickFunction:"&?",onOpen:"&?",onClose:"&?",getUserCourseAvailabilities:"&?userCourseAvailabilities",selectionFullWidth:"&?",simplifiedMaxItemsPerPage:"&?",forceAbove:"=?",analyticsIdTagPrefix:"@?"},this.link=function(e,n,r,i,o){e.dropdown=t.$injector.instantiate(l,{scope:e,element:n})}}return e.$inject=["$injector"],e}(),p=function(){function e(e){this.$injector=e,this.restrict="EA",this.link=function(e,t,n,r,i){"custom"===e.listKind||"region"===e.listKind?i(function(n,r){r.dropdown=e.dropdown,t.replaceWith(n)}):t.remove()}}return e.$inject=["$injector"],e}();i.module(c,[s.a]).directive("bbDropdown",["$injector",function(e){return e.instantiate(d)}]).directive("bbDropdownTransclude",["$injector",function(e){return e.instantiate(p)}])}).call(this,n("EVdn"))},cMqb:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("9zo4"),i=n("IbG+"),o=n("w9Zy"),s=n("XGja"),a="ultra.directives.accessibility.focus",u=function(){function e(e,t){var n=this;this.bbOffcanvas=e,this._accessibility=t,this.restrict="A",this.link=function(e,t,r){var o=r.keepTriggerFocus,a=e.$watch(r.bbFocus,function(e){null!=e&&"true"!==i.lowercase(e.toString())||!n._accessibility.isElementInActivePanel(t)||(s.a(t,n.bbOffcanvas.safeFocus.bind(n.bbOffcanvas)),"true"!==o&&a())})}}return e.$inject=[o.e,r.c],e}();i.module(a,[o.d]).directive("bbFocus",["$injector",function(e){return e.instantiate(u)}])},cYWG:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var r=n("IbG+"),i=n("LvDl"),o=n("5MwF"),s="ultra.components.services.angular.http.ease",a="shelfLifeInEase",u=function(){function e(e,t){this.$q=e,this.$log=t,this._queue={},this._queueSeq=0,this.delay=500}return e.prototype.enqueue=function(e){var t=this;e.shelfLifeInEase=(e.params||{})[a]||this.delay,(e.params||{})[a]=void 0;var n=this.$q.defer(),r=(new Date).getTime();if(!i.some(this._queue,function(i,o){return!!i&&(i.completedAt&&r-i.completedAt>i.shelfLifeInEase?(t._queue[o]=void 0,!1):((i.originalUrl||i.url)===(e.originalUrl||e.url)&&(s=t.isServableBy(i,e)),!!s&&(i.httpEaseResponseQ.promise.then(function(e){t.$q.when(s(e)).then(function(e){n.resolve(e)})}),!0)));var s})){var o="x"+this._queueSeq++;e.originalUrl=e.url,e.httpEaseResponseQ=this.$q.defer(),e.httpEaseResponseQ.promise.finally(function(){e.completedAt=(new Date).getTime()}),this._queue[o]=e,n.resolve()}return n.promise},e.prototype.getHttpInterceptor=function(){var e=this,t=function(t){return function(n){var r=n.config||n;return e.isDebouncable(r)?t(r,n):e.$q.when(n)}};return{request:t(function(t){return t.cache?t:e.enqueue(t).then(function(e){return void 0===e?t:i.extend(t,{method:"JSONP",cache:{get:function(){return e}}})})}),responseError:function(t){var n=t.config;return n.httpEaseResponseQ&&n.httpEaseResponseQ.resolve([t.status,JSON.parse(JSON.stringify(t.data)),{}]),e.$q.reject(t)},response:t(function(t,n){return t.httpEaseResponseQ&&t.httpEaseResponseQ.resolve([n.status,void 0===n.data?void 0:JSON.parse(JSON.stringify(n.data)),{}]),e.$q.when(n)})}},e.prototype.isDebouncable=function(e){return o.a.features.httpEase&&"GET"===e.method&&new RegExp("^(http.+)?(/learn/api/.*)$").test(e.url)},e.prototype.isServableBy=function(e,t){if(!(e.method===t.method))return null;var n,r,o=(n=function(e){var t=[];return i(e).keys().sortBy().value().forEach(function(n){"expand"!==n&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}),t.join("&")})(e.params)===n(t.params),s=(r={},((e.params||{}).expand||"").split(",").forEach(function(e){""!==e&&(r[e]=e)}),((t.params||{}).expand||"").split(",").every(function(e){return""===e||r.hasOwnProperty(e)}));if(o&&s)return this.$log.debug("Eased "+t.url,e,t),function(e){return e};this.$log.warn('Concurrent Requests Captured - "'+t.method+" "+t.url+'" (with different parameters). Please consider to merge them for performance')},e.$inject=["$q","$log"],e}();e=r.module(s,["ng"]);o.a.features.learnApiCaching||e.config(["$httpProvider",function(e){e.interceptors.push(["$injector",function(e){return e.instantiate(u).getHttpInterceptor()}])}])},cacA:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.base.messages.routes";r.module(s,[o.b]).config([o.c,function(e){e.peekState("create-message",{url:"/create?courseId&{allowReplies:bool}",require:function(){return Promise.all([n.e(27),n.e(32),n.e(43)]).then(n.bind(null,"BrlV"))},pageTitle:"components.directives.message.newMessage"}).peekState("edit-message",{url:"/edit/:conversationId?courseId&offset&count",require:function(){return Promise.all([n.e(27),n.e(32),n.e(43)]).then(n.bind(null,"BrlV"))},pageTitle:"components.directives.message.message"}).peekState("message",{url:"/message?courseId&recipientIds&conversationPerRecipient",onExit:["$rootScope","$stateParams",function(e,t){var n,r;n=e,r=t.courseId,n.$broadcast("bb-message-refresh",r)}],resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/messages/base-messages")}]},require:function(){return Promise.all([n.e(27),n.e(32),n.e(43)]).then(n.bind(null,"BrlV"))},pageTitle:"base.messages.newMessage"})}])},che8:function(e,t,n){e.exports=n("ZJ/X")(1349)},cueX:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-small-accommodation",use:"icon-small-accommodation-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-accommodation"><circle cx="8" cy="8" r="7" stroke-width="2" /><path d="M4 6l1 2 5-3M12 10l-1-2-5 3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},cwoR:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.base.system-content-market.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("system-content-market",{url:"/systemcontentmarket",require:function(){return Promise.all([n.e(80),n.e(317)]).then(n.bind(null,"tcBX"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/system-content-market/system-content-market"),t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])}]},panelClass:"full",pageTitle:"base.systemContentMarket.title",params:{mode:null}})}])},d2bc:function(e,t,n){"use strict";var r;!function(e){e.ModifyGradebook="course.gradebook.MODIFY",e.ModifyItemDueDate="course.gradebook-item.duedate.MODIFY",e.ViewAttempts="course.gradebook.attempts.VIEW",e.ViewGradebookMetaData="course.gradebook-metadata.VIEW",e.ViewGrades="course.gradebook-grades.VIEW",e.ExportGradebookData="course.gradebook-data.export.EXECUTE"}(r||(r={})),t.a=r},d7QB:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",function(){return a}),n.d(t,"serviceName",function(){return u}),n.d(t,"IntegrationEventEmitterService",function(){return c}),n.d(t,"Service",function(){return l});var r=n("mrSG"),i=n("IbG+"),o=n("aHpC"),s=n("N7x3"),a="ultra.components.services.event-emitter",u="integration-event-emitter",c=function(){function e(e){var t=this;this.integrationServiceEventListener=e,this.emitIntegrationEvent=function(e){e.originalEvent||(e.originalEvent=e.originalEvent||{}),e.originalEvent.manualFireFlag||(i.element(e.target).trigger(t.integrationServiceEventListener.integrationForceClick),e.originalEvent.manualFireFlag=!0)},this.addIntegrationEventClickListener=function(e){return e.on("click",t.emitIntegrationEventOnClickHandler),function(){e.off("click",e.selector,t.emitIntegrationEventOnClickHandler)}},this.emitIntegrationEventOnClickHandler=function(e){return t.emitIntegrationEvent(e)}}return e=r.__decorate([r.__param(0,Object(o.b)(s.b))],e)}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(c);i.module(a,[s.a]).service(u,c)},d8yC:function(e,t,n){"use strict";function r(e){var t=[],n=0;e.forEach(function(e,r){n+=Math.floor(e),t.push({integer:Math.floor(e),remainder:e-Math.floor(e),index:r})});var r=100-n;if(r>0){t.sort(function(e,t){return t.remainder-e.remainder});for(var i=0;r>0;)t[i].integer>0||t[i].remainder>0?(t[i].integer+=1,i++,r-=1):i++,i===t.length&&(i=0);t.sort(function(e,t){return e.index-t.index})}return t.map(function(e){return e.integer})}function i(e,t){var n=e.toString(),r=n.indexOf(".");if(r>0&&n.length-r-1>t){var i=n.slice(0,r+t+1);return parseFloat(i)}return e}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},dRiK:function(e,t){e.exports='\x3c!-- this button is for screenreader users only and should be placed at the end of an infinite scroll list in the DOM so that they know that more items can be loaded --\x3e\n<button class="sr-only load-more-items"\n        ng-click="infiniteScroll.loadMoreItems()"\n        ng-disabled="infiniteScroll.disabled || infiniteScroll.remainingCount <= 0"\n        bb-load-bundle="components/directives/infinite-scroll"\n        bb-translate translate-values="infiniteScroll.loadMoreLocalizationValues"\n        analytics-id="{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}">{{::infiniteScroll.localizationKeysPrefix + \'.loadMoreButton.label.plural\'}}</button>\n'},dabL:function(e,t){e.exports='<div id="aria-live-polite-region-1" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-polite-region-2" class="sr-only" role="status" aria-live="polite"></div>\n<div id="aria-live-assertive-region-1" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>\n<div id="aria-live-assertive-region-2" class="sr-only" role="alert" aria-live="assertive" aria-atomic="true"></div>'},dtd2:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Outline=new t("outline"),t.Inline=new t("inline"),t}(n.n(i).a);t.a=o},du0d:function(e,t,n){e.exports=n("ZJ/X")(1388)},"e/U5":function(e,t){e.exports='<div class="bb-course-catalog-link" ng-if="shouldDisplayCatalogLink">\n  <a href="javascript:void(0);" \n     class="catalog-anchor-tag" \n     ng-if="!isExternalCatalog" \n     ng-click="handleCatalogLink()" \n     course-org-token-resolver \n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.link\'}"\n     analytics-id="base.baseCourses.courseCatalog.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.link</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="small" icon="course_catalog_default" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_hc_light" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n  <a class="catalog-anchor-tag" \n     ng-if="isExternalCatalog" \n     href="{{ ::externalCatalogUrl }}" \n     target="_blank" \n     rel="noopener noreferrer"\n     course-org-token-resolver \n     bb-translate-attrs="{\'aria-label\': \'base.baseCourses.aria-label.externalLink\'}"\n     analytics-id="base.baseCourses.courseCatalog.externalLink.link">\n    <span ng-if="windowSizeService.isLargeBreakpoint()">\n      <bb-translate course-org-token-resolver>base.baseCourses.externalLink</bb-translate>\n      <bb-svg-icon class="catalog-icon-large-breakpoint" size="small" icon="course_catalog_default" />\n    </span>\n    <bb-svg-icon class="catalog-icon-small-breakpoint" size="small" icon="course_catalog_hc_light" ng-if="!windowSizeService.isLargeBreakpoint()" />\n  </a>\n</div>'},e6ZA:function(e,t,n){"use strict";n.r(t);n("BfLg"),n("du0d"),n("zRpB"),n("alXF"),n("r4fA"),n("HiZj"),n("sMjt"),n("6hn2"),n("LATI"),n("ldnM"),n("Wr5T"),n("+cQS"),n("XhL2"),n("HuMO"),n("20OV"),n("wmx0"),n("rEGj"),n("7sec"),n("M8gh"),n("6Wkp"),n("zAPs"),n("bZMm");var r=new Map,i=function(){function e(e){this.name=e,this.id="$BroadcastChannel$"+e+"$",r.has(this.id)||r.set(this.id,new Set),r.get(this.id).add(this),this.onStorage=this._onStorage.bind(this),window.addEventListener("storage",this.onStorage),this.messageChannel=new MessageChannel}return e.prototype.close=function(){window.removeEventListener("storage",this.onStorage);var e=r.get(this.id);e.delete(this),e.size||r.delete(this.id)},e.prototype._onStorage=function(e){var t=e.key,n=e.newValue;if(e.storageArea===window.localStorage&&null!==n&&t.substring(0,this.id.length)===this.id)try{var r=JSON.parse(n);this.dispatchEvent(new MessageEvent("message",{data:r}))}catch(e){this.dispatchEvent(new ErrorEvent("messageerror",{error:e,message:"Failed to deserialize incoming message."}))}},e.prototype.postMessage=function(e){var t=this;e=JSON.stringify(e);var n=""+this.id+Date.now()+"$"+Math.random();window.localStorage.setItem(n,e),setTimeout(function(){return window.localStorage.removeItem(n)},500),r.get(this.id).forEach(function(n){n!==t&&n.dispatchEvent(new MessageEvent("message",{data:JSON.parse(e)}))})},Object.defineProperty(e.prototype,"onmessage",{get:function(){return this.messageChannel.port1.onmessage},set:function(e){this.messageChannel.port1.onmessage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onmessageerror",{get:function(){return this.messageChannel.port1.onmessageerror},set:function(e){return this.messageChannel.port1.onmessageerror=e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(){return this.messageChannel.port1.addEventListener.apply(this.messageChannel.port1,arguments)},e.prototype.removeEventListener=function(){return this.messageChannel.port1.removeEventListener.apply(this.messageChannel.port1,arguments)},e.prototype.dispatchEvent=function(e){return this.messageChannel.port1.dispatchEvent.apply(this.messageChannel.port1,arguments)},e}();"BroadcastChannel"in window||(window.BroadcastChannel=i);var o=n("EVdn"),s=n("IbG+"),a=n("1mXj"),u=n("sINF"),c=n("lEL+"),l="ultra.components.directives.animatedGif",d=function(){function e(e,t){var n=this;this.$injector=e,this.timeout=t,this.restrict="E",this.link=function(e,t,r){var i=s.element('<img role="presentation" alt="" style="width:0; height:0">');i.attr("src",t.attr("src")),t.append(i),n.timeout(function(){t.attr("alt")&&i.attr("alt",t.attr("alt"))},e,0,!1);var o=function(){i.off("load",o),i.attr("src",""),i.addClass("animated-gif"),n.timeout(function(){i.removeAttr("style"),i.attr("src",t.attr("src"))},e,250,!1)};i.on("load",o)}}return e.$inject=["$injector",c.b],e}();s.module(l,[c.a]).directive("bbAnimatedGif",["$injector",function(e){return e.instantiate(d)}]);var p=n("jciN"),f=(n("VKHV"),n("zAlr"),n("5MwF")),m=n("Qbdf"),h=n("YzQO"),g=n("pjml"),v=n("w9mJ"),b="ultra.bb.angulartics",y=function(e){},S=function(e,t){};s.module(b,["angulartics","angulartics.scroll",g.R,v.a,m.b]).config(["$analyticsProvider",function(e){e.registerPageTrack(function(e){y(e)}),e.registerEventTrack(function(e,t){S(e,t)}),o.fn.extend({waypoint:function(){return this.each(function(){o(this).triggerHandler("scrollby")})}})}]).run(["$timeout",g.b.serviceName,v.b,m.e,function(e,t,n,r){var i=n.getQueue("telemetry"),a=1e3;function u(n){i.enqueue(function(){return e(function(){return t.$create(n)},a,!1)})}function c(){return r.course?{id:r.course.id,uuid:r.course.uuid,batchUid:r.course.batchUid,ultraStatus:r.course.ultraStatus}:null}function l(e){if(e){if("{"===e[0])try{return JSON.parse(e)}catch(e){}return{value:e}}}y=function(e){u({action:"pageview",analyticsId:e,url:document.URL,applicationId:f.a.telemetryAppId,course:c(),screenDimension:{innerHeight:window.innerHeight,innerWidth:window.innerWidth,outerHeight:window.outerHeight,outerWidth:window.outerWidth}})},S=function(e,t){!t.id||"click"!==t.eventType&&"scrollby"!==t.eventType||u({action:t.eventType,analyticsId:t.id,url:document.URL,context:l(t.context),applicationId:f.a.telemetryAppId,course:c()})},o(document).on("click",function(e){var t=s.element(e.target);if(!Object(h.e)(t)){var n=Object(h.c)(t)||Object(h.d)(t.parent())||Object(h.a)(t),r=l(Object(h.b)(t));u({action:"click",analyticsId:n,url:document.URL,context:r,applicationId:f.a.telemetryAppId,course:c()})}})}]);var C=n("/KQw"),w=n("lmMM"),$=n("0JpG"),k="ultra.components.directives.dir",T=function(){function e(e){var t=this;this.bbLocalize=e,this.restrict="A",this.link=function(e,n,r){e.$watch("locale",function(){r.attr=r.attr||"dir",r.rtl=r.rtl||"rtl",r.ltr=r.ltr||"ltr",t.bbLocalize.isRTL(e)?n.attr(r.attr,r.rtl):n.attr(r.attr,r.ltr)})}}return e.$inject=[$.serviceName],e}();s.module(k,[]).directive("bbDir",["$injector",function(e){return e.instantiate(T)}]);var I=n("Xq/A"),E=n("07uq"),P=n("Us01"),A=n("t3AZ"),x=n("J0Qq"),D=n("mrSG"),_="ultra.directives.bbTime",L=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var o,s=function(n){var o=t.bbLocalize.getFormatEnum($.ILocaleTimeFormat,i.format)||$.ILocaleTimeFormat.Short;if("true"===i.epoch){var s=new Date(0);s.setUTCSeconds(n),n=s}var a=function(e){"bb-time"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)};null==n?a(""):t.bbLocalize.formatTime(n,o,e).then(a)};"true"===i.autoUpdate?i.$observe("bbTime",function(){o=new Date(t.$parse(i.bbTime)(e)),s(o)}):(o=t.$parse(n)(e)||new Date(t.$parse(i.bbTime)(e)),s(o))}},e.$inject=["$parse",$.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(L);s.module(_,[$.moduleName]).directive("bbTime",["$injector",function(e){return e.instantiate(L)}]);var M=n("UioO"),N="ultra.directives.bbNumber",R=function(){function e(e,t){this.$parse=e,this.bbLocalize=t,this.restrict="AE"}return e.prototype.compile=function(e){var t=this,n=e.html();return function(e,r,i){var o=t.$parse(n)(e);t.bbLocalize.formatNumber(o,e).then(function(e){"bb-number"===r.prop("tagName").toLowerCase()?r.replaceWith(e):r.html(e)})}},e.$inject=["$parse",$.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(R);s.module(N,[$.moduleName]).directive("bbNumber",["$injector",function(e){return e.instantiate(R)}]);var O=n("Oyr+"),G=n("bd9L"),U=n("pIXs"),B=n("43zP"),F=n("naHn"),q="ultra.directives.saveForm",j=function(){function e(e,t){var n=this;this.scope=e,this.$q=t,this.queuedSave=!1,e.editMode?(e.$broadcast("bb-save-button",G.a.Saved),this.autoSaveState=B.a.Saved):this.autoSaveState=B.a.NotSaved,e.$on("bb-autosave-form",function(t,r,i){switch(e.$broadcast("bb-save-button",r,i),r){case G.a.Change:n.autoSaveState=B.a.NotSaved;break;case G.a.Saving:n.autoSaveState=B.a.Saving;break;case G.a.Saved:n.autoSaveState=B.a.Saved;break;case G.a.SaveFailure:case G.a.ValidationFailure:}})}return e.prototype.validate=function(){return this.scope.validate()&&this.scope.baseForm&&this.scope.baseForm.$valid},e.prototype.save=function(){var e=this;if(this.validate()){if(this.savePromise)this.queuedSave||(this.queuedSave=!0,this.savePromise=this.savePromise.finally(function(){return e.savePromise=null,e.queuedSave=!1,e.save()}));else{this.autoSaveState=B.a.Saving;var t=this.scope.save();this.savePromise=t.then(function(t){return e.autoSaveState=B.a.Saved,t})}return this.savePromise}},e.prototype.saveClicked=function(){var e=this;if(this.autoSaveState===B.a.NotSaved)return this.save().then(function(){e.scope.$emit("autosave-button-click",{target:"save"}),e.scope.showAlertMessage&&e.scope.showAlertMessage()});this.scope.$emit("autosave-button-click",{target:"save"})},e.prototype.cancelClicked=function(){var e=this;if(this.scope.cancel){var t=this.scope.cancel();t?t.then(function(){e.scope.$emit("autosave-button-click",{target:"cancel"})}):this.scope.$emit("autosave-button-click",{target:"cancel"})}},e.prototype.deleteClicked=function(){var e=this;if(this.scope.delete){var t=this.scope.delete();t?t.then(function(){e.scope.$emit("autosave-button-click",{target:"delete"})}):this.scope.$emit("autosave-button-click",{target:"delete"})}},e.prototype.mouseDown=function(){this.scope.$emit("bb-autosave-interrupt-timer"),this.scope.$emit("autosave-button-click",{target:"mouseDown"})},e}(),H=function(){function e(e){var t=this;this.$q=e,this.transclude=!0,this.restrict="E",this.scope={save:"&",cancel:"&?",validate:"&",delete:"&?",canDelete:"=",deleteConfirmationResourceType:"@?",choices:"=?",editMode:"=",hideFooter:"=",baseForm:"=?",delayAutosave:"&?",displayDeleteAfterSaving:"&?",debounceSaveDestination:"&?",showAlertMessage:"&?",analyticsIdTagPrefix:"@"},this.link=function(e,n){e.saveForm=new j(e,t.$q)},this.template=F}return e.$inject=["$q"],e}();s.module(q,[G.b,U.a]).directive("bbSaveForm",["$injector",function(e){return e.instantiate(H)}]);var V=n("gZo5"),z="ultra.services.security",K="xsrf",W="X-Blackboard-XSRF",J="xsrf-token-changed",X=function(){function e(e,t){var n=this;this.$rootScope=e,this.crossWindowMessaging=t,this.xsrfCallbacks=new Set,e.$on(J,function(e,t){return n.updateToken(t)}),e.$on("$destroy",function(){n.xsrfCallbacks.clear()})}return e.prototype.registerXsrfCallback=function(e){this.xsrfCallbacks.add(e),this.token&&this.invokeXsrfCallback(e)},e.prototype.unregisterXsrfCallback=function(e){return this.xsrfCallbacks.delete(e)},e.prototype.getToken=function(){return this.token},e.prototype.updateToken=function(e){var t=this;return this.token===e?this.token:(this.token=e,this.xsrfCallbacks.forEach(function(e){return t.invokeXsrfCallback(e)}),this.crossWindowMessaging.postMessage(J,this.token),this.token)},e.prototype.invokeXsrfCallback=function(e){try{e(this.token)}catch(e){}},e.$inject=["$rootScope",V.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(X);s.module(z,[V.a]).service(K,X);var Q=n("Fvsw"),Z=n("fYJU"),Y=n("t6zR"),ee=n("QaOk"),te=n("Y88D"),ne=n("FR7u"),re=n("+g6d"),ie=n("RDfZ"),oe=n("V17J"),se=n("tcaZ"),ae=n("V6ed"),ue=n("P2dS"),ce=n("g66W"),le=n("TnpK"),de=n("w9Zy"),pe=n("nXcJ"),fe="ultra.components.directives.bbGuidance",me=/[_-]/g,he="guidance";se.c({name:he,priority:35});var ge=function(){function e(e,t,n){var r=this;this.ultraState=e,this.offCanvas=t,this.timeout=n,this.require="^bbFirstTimeContainer",this.replace=!0,this.restrict="E",this.scope={componentKey:"@",pageContainerSelector:"@?",alwaysShow:"@",displayPriority:"&?",broadcastGuidanceHideEvent:"@?",onGuidanceEnabledEvent:"@?",disableHideInPanelState:"@?",forceShowInPanelState:"@?"},this.transclude={title:"?bbGuidanceTitle"},this.template=pe,this.link=function(e,t,n,i){if(!e.componentKey)throw new Error("'component-key' attribute required in bb-guidance");e.componentKey=ce.a(e.componentKey,me);var s,a=t.closest(".bb-offcanvas-panel").attr("data-base-state-name"),u=!!e.onGuidanceEnabledEvent,c=new se.a(t,e,he,e.componentKey,i,e.$eval(e.alwaysShow),e.displayPriority&&e.displayPriority(),a,u);c.registerToManager(),e.pageContainerSelector&&(s=t.parents(e.pageContainerSelector)),s&&s.length||(s=o(document));var l,d=function(t){o(t.target).parents().addBack();var n=!!e.disableHideInPanelState&&r.ultraState.includes(e.disableHideInPanelState);!e.isShown||r.ultraState.transition||n||(c.hideAndInformManager(),s[0].removeEventListener("click",d,!0),e.broadcastGuidanceHideEvent&&e.$root.$broadcast(e.broadcastGuidanceHideEvent))},p=function(){c.showComponent(),s[0].addEventListener("click",d,!0)};l=null,e.onGuidanceEnabledEvent?(l=e.$root.$on(e.onGuidanceEnabledEvent,function(){p()}),l=e.$root.$on("show-guidance-component",function(){r.timeout(function(){p()},e,600)}),i.firstTimeHelper.shouldShow("predict.wizard").then(function(t){var n=!!e.forceShowInPanelState&&r.ultraState.includes(e.forceShowInPanelState);t&&!n||p()})):s[0].addEventListener("click",d,!0),e.$on("$destroy",function(){c.deregisterFromManager(),s[0].removeEventListener("click",d,!0),l&&l()})},this.ultraState=e}return e.$inject=[le.d,de.e,c.b],e}();s.module(fe,[le.b,se.b]).directive("bbGuidance",["$injector",function(e){return e.instantiate(ge)}]);var ve="ultra.components.directives.guidanceTarget",be=function(){function e(e,t,n,r){this.element=e,this.componentKey=t,this.isNeedExclude=r,this.manager=n.manager}return e.prototype.registerToManager=function(){this.manager&&(this.hideImpl(),this.manager.registerFTUETarget(this))},e.prototype.deregisterToManager=function(){this.manager&&this.manager.deregisterFTUETarget(this)},e.prototype.showByManager=function(){this.showImpl()},e.prototype.hideByManager=function(){this.hideImpl()},e.prototype.showImpl=function(){this.element.addClass("is-guided")},e.prototype.hideImpl=function(){this.element.removeClass("is-guided")},e}(),ye=function(){this.require="^bbFirstTimeContainer",this.restrict="A",this.link=function(e,t,n,r){if("false"!==n.showGuidanceTarget){var i=n.componentKey,o=n.componentKeyList,s="true"===n.isNeedExclude,a=[],u=function(e,n,r){var i=new be(t,e,n,r);i.registerToManager(),a.push(i)};if(!i&&!o)throw new Error("'component-key' or 'component-key-list' attribute required in bb-guidance-target");if(o)var c=e.$watch(o,function(e){e&&e.length>0&&(e.forEach(function(e){e=ce.a(e,me),u(e,r,s)}),c())});if(i&&(i=ce.a(i,me),u(i,r,s)),"true"!==n.keepGuidanceWhenFocusout){var l=function(){e.$root.$broadcast("hide-ftue-component",i)};t.on("focusout",l),t.on("keypress",l),e.$on("$destroy",function(){t.off("focusout",l),t.off("keypress",l)})}e.$on("$destroy",function(){a.forEach(function(e){return e.deregisterToManager()})})}}};s.module(ve,[se.b]).directive("bbGuidanceTarget",["$injector",function(e){return e.instantiate(ye)}]);var Se=n("XseH"),Ce=n("iVgd"),we=n("/qpZ"),$e="ultra.components.directives.keyHideFtue",ke=function(){this.restrict="A",this.link=function(e,t,n){var r=n.bbKeyHideFtue;if(!r)throw new Error("'bb-key-hide-ftue' attribute should have value");var i=function(){e.$root.$broadcast("hide-ftue-component",r)};t.on("focusout",i),t.on("keypress",i),e.$on("$destroy",function(){t.off("focusout",i),t.off("keypress",i)})}};s.module($e,[]).directive("bbKeyHideFtue",["$injector",function(e){return e.instantiate(ke)}]);var Te=n("cMqb"),Ie=n("A4xO"),Ee=n("+4Px"),Pe="ultra.directives.accessibility.focusPrev";var Ae=function(){this.restrict="A",this.link=function(e,t,n){var r="true"===n.bbFocusPrevOneTimeOnly;!function(e,t,n){e.on("keydown.focusPrev",function(r){if(r.keyCode===Ee.u&&r.shiftKey&&t){var i=s.element(t);i.length>=1&&-1!==i.prop("tabindex")&&(i.first().focus(),r.preventDefault(),n&&e.off("keydown.focusPrev"))}})}(t,n.bbFocusPrev,r)}};s.module(Pe,[]).directive("bbFocusPrev",["$injector",function(e){return e.instantiate(Ae)}]);var xe=n("i8dz"),De=n("K3JI"),_e=n("GbAM"),Le=n("vhkR"),Me=n("OvxF"),Ne=n("TB6y"),Re=(n("zJ62"),n("URyr")),Oe="ultra.directives.contentImportStatusBar",Ge=function(){function e(e,t,n,r,i,o,a,u,c){var l=this;this.$scope=e,this.$rootScope=t,this.element=n,this.$q=r,this.CourseModel=i,this.ultraState=o,this.context=a,this.bbLocalize=u,this.contextCourse=c,this.identifyCourse().then(function(t){l.course=t,l.baseState=o.current.name,n.detach().appendTo(s.element(".side-panel-content")),e.$on("$destroy",function(){s.element(".side-panel-content > "+n.get(0).tagName).length>0&&s.element(".side-panel-content > "+n.get(0).tagName).remove()}),e.$watch("taskId",function(){e.taskId&&l.getItemsCount().then(function(e){l.notCarriedForwardItemsCount=e})})})}return e.prototype.identifyCourse=function(){return this.courseId=this.$scope.courseId?this.$scope.courseId:this.contextCourse.courseId,this.$scope.$parent.course?this.$scope.$parent.course.model.$asPromise():this.CourseModel.$find(this.courseId).$asPromise()},e.prototype.confirm=function(){var e=this,t="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(t,"false").then(function(){e.$scope.display=!1})},e.prototype.undo=function(){var e=this,t="courseImport"+this.course.id.replace(/\_/g,".");this.context.setPreference(t,"true").then(function(){e.$scope.display=!1})},e.prototype.goToImportReport=function(){this.ultraState.goPeekState("content-manage.import-report",{id:this.$scope.taskId})},e.prototype.hideStatusBar=function(){return-1!==this.ultraState.current.name.indexOf(this.baseState)&&this.ultraState.current.name.length>this.baseState.length},e.prototype.getItemsCount=function(){return this.course.getImportCopyTaskStatus(this.$scope.taskId).then(function(e){var t=e.$response.data.conversionReportTORest;return t?t.filter(function(e){return!g.n.ConversionReportStatus.Success.isEqualTo(e.ultraConversionStatus)}).length:0})},e.$inject=["scope","$rootScope","element","$q",g.o.serviceName,le.d,Q.b,$.serviceName,m.e],e}(),Ue=function(){function e(e){var t=this;this.$injector=e,this.restrict="E",this.template=Re,this.scope={display:"=",taskId:"=",courseId:"@?"},this.link=function(e,n){e.contentImportStatusBarController=t.$injector.instantiate(Ge,{scope:e,element:n})}}return e.$inject=["$injector"],e}();s.module(Oe,[Q.a,$.moduleName,g.R,le.b]).directive("bbContentImportStatusBar",["$injector",function(e){return e.instantiate(Ue)}]);var Be=n("yA26"),Fe="ultra.components.directives.ultraState.peekSref",qe=function(){function e(e,t,n,r){var i=this;this.$parse=e,this.uiSrefDirective=t,this.ultraState=n,this.context=r,this.restrict=this.uiSrefDirective[0].restrict,this.scope=!0,this.require=this.uiSrefDirective[0].require,this.link=function(e,t,n,r){var o=i.$parse(n.bbPeekSref)(e)||n.bbPeekSref,s=t.closest("[data-base-state-name]").data("baseStateName")||i.context.basePage;i.ultraState.getPeekStateName(o,s).then(function(o){n.uiSref=o,i.uiSrefDirective[0].compile(t,n,void 0)(e,t,n,r)})}}return e.$inject=["$parse","uiSrefDirective",le.d,Q.b],e}();s.module(Fe,["ui.router",Q.a,le.b]).directive("bbPeekSref",["$injector",function(e){return e.instantiate(qe)}]);var je="ultra.directives.preventClick",He=function(){function e(e,t){var n=this;this.$parse=e,this.$rootScope=t,this.priority=101,this.restrict="A",this.compile=function(e,t){var r=n.$parse(t.bbPreventClickIf);return{pre:function(e,t){t.on("click",function(t){function i(){if(r(e,{$event:t}))return t.stopImmediatePropagation(),t.preventDefault(),!1}n.$rootScope.$$phase?e.$evalAsync(i):e.$apply(i)})}}}}return e.$inject=["$parse","$rootScope"],e}();s.module(je,[]).directive("bbPreventClickIf",["$injector",function(e){return e.instantiate(He)}]);var Ve=n("yC9S"),ze=n("4PjW"),Ke="ultra.components.directives.accessibility.readInfo",We=function(){function e(e,t,n,r){var i=this;this.scope=e,this.element=t,this.attrs=n,this.timeout=r,this.message="",this.alertMessage="",Ve.b.OnRootScope(e,"read-info-directive",function(t,n){i.message=n,r(function(){i.message=""},e,1e3)}),Ve.b.OnRootScope(e,"read-info-directive-alert",function(t,n,o){void 0!==o?(i.alertMessage="",r(function(){i.alertMessage=n},e,o)):(i.alertMessage=n,r(function(){i.alertMessage=""},e,1e3))})}return e.$inject=["scope","element","attrs",c.b],e}(),Je=function(){function e(e,t){var n=this;this.$injector=e,this.$compile=t,this.restrict="A",this.link=function(e,t,r){t.append(n.$compile(ze)(e)),e.readInfo=n.$injector.instantiate(We,{scope:e,element:t,attrs:r})}}return e.$inject=["$injector","$compile"],e}();s.module(Ke,[c.a]).directive("bbReadInfo",["$injector",function(e){return e.instantiate(Je)}]);n("P2rh");var Xe=n("HpN/"),Qe="ultra.components.directives.accessibility.skipLink",Ze=function(){this.restrict="E",this.scope={bbSkipLinkTarget:"@",bbSkipLinkFocusNext:"@?"},this.template=Xe,this.link=function(e,t,n){t.find(".skip-link").on("click",function(){var e=t.closest(".bb-offcanvas-panel");e.length||(e=t.closest("#site-wrap"));var r=e.find(n.bbSkipLinkTarget).first();r.focus(),r.is(document.activeElement)||null!=r.attr("tabindex")||(r.attr("tabindex","-1"),r.focus())})}};s.module(Qe,[]).directive("bbSkipLink",["$injector",function(e){return e.instantiate(Ze)}]);var Ye=n("TAnh"),et=n("YOs/"),tt=n("Dwp2"),nt=n("fGgA"),rt=n("4HBD"),it=n("3vti"),ot=n("cFWd"),st=n("HDxW"),at=n("zXZW"),ut=n("nsX6"),ct=n("OcoR"),lt=n("td+C"),dt=n("q1tI"),pt=n("i8i4"),ft=n("HIKz"),mt=n("TWx7"),ht=n("622u"),gt=n("aHpC"),vt=n("e6jQ"),bt=n("DzKP"),yt=n("J8LU"),St=(n("ukqj"),function(e){var t=e.locale,n=e.babelfishInstance,r=e.babelfishFormatInstance,i=e.panelType,o=e.panelTitle,s=e.integrationId,a=e.showPanel,u=e.portalId,c=e.onPanelClose;return dt.createElement(yt.Locale,{locale:t,babelfishInstance:n,babelfishFormatInstance:r},dt.createElement(bt.BbPanel,{isOpen:a,onDismiss:function(){return c(s)},type:i},dt.createElement(bt.BbPanelHeader,{title:o}),dt.createElement("div",{className:"integration-panel"},dt.createElement("div",{className:"integration-panel-contents"},dt.createElement(mt.c,{portalId:u,initialOwningIntegrationId:s})))))}),Ct=(Object(yt.localizedComponentWrapper)(St),"ultra.components.services.integration-portal"),wt="integration-portal",$t=function(e){switch(e){case ht.n.Full:return ft.BbPanelType.full;case ht.n.Small:return ft.BbPanelType.peek;default:return console.warn("Received unknown panel type "+e),null}},kt=function(){function e(t,n){var r=this;this.integrationService=t,this.bbLocalize=n,this.onPortalEvent=function(e,t){switch(e){case ht.g.NewPortal:r.integrationService.sendEventMessage({type:ht.d,eventType:ht.h.PortalNew,portalId:t.portalId,selector:t.selector,selectorData:t.selectorData},t.owningIntegrationId);break;case ht.g.RemovedPortal:r.integrationService.sendEventMessage({type:ht.d,eventType:ht.h.PortalRemove,portalId:t.portalId,selector:t.selector,selectorData:t.selectorData},t.owningIntegrationId)}},this.onPortalPanel=function(t,n){var i=t.panelTitle,o=t.correlationId;if(!mt.b.isEmpty())return console.warn("Panel is already open; not opening another one"),void r.sendPortalMessage(n.integrationChannel,null,ht.m.Failure,o);if(!i)return console.warn("Received a panel event without a panelTitle; not opening panel"),void r.sendPortalMessage(n.integrationChannel,null,ht.m.Failure,o);if(null!==$t(t.panelType)){var s=vt.b();if(!r.updatePanelAttributes(t,s))return console.warn("Received a panel event without proper attributes or with a missing callback id."),void r.sendPortalMessage(n.integrationChannel,null,ht.m.Failure,o);var a={element:e.generateUniqueDomElement(),panelType:t.panelType,panelTitle:t.panelTitle,owningIntegrationId:n.id,portalId:s};return mt.b.addPanel(n.id,a),r.renderPanel(a,!0).then(function(){r.sendPortalMessage(n.integrationChannel,a.portalId,ht.m.Success,o)})}r.sendPortalMessage(n.integrationChannel,null,ht.m.Failure,o)},this.updatePanelAttributes=function(e,t){var n=e.attributes;if(!n)return!0;var i={},o=Object.keys(n).filter(function(e){return!n[e]||!n[e].callbackId});return o.length>0?(console.warn("Panel attributes ["+o.join(",")+"] are missing callbackId parameters"),!1):(Object.keys(n).forEach(function(e){var t,r=n[e];i=D.__assign({},i,((t={})[e]={callbackId:r.callbackId},t))}),r.panelAttributesEvents.set(t,{portalId:t,subscribedAttributes:i}),!0)},this.renderPanel=function(e,t){var n=$t(e.panelType);return new Promise(function(i){pt.render(dt.createElement(St,{babelfishInstance:r.bbLocalize.intl,babelfishFormatInstance:r.bbLocalize.frmt,locale:r.bbLocalize.getLocale(null),panelType:n,panelTitle:e.panelTitle,integrationId:e.owningIntegrationId,showPanel:t,portalId:e.portalId,onPanelClose:r.onPanelCloseAction}),e.element,function(){i()})})},this.onPortalPanelClose=function(e,t){var n=t.id,i=mt.b.getPanel(n);if(i)return r.renderPanel(i,!1).then(function(){r.onPanelCloseAction(t.id)});console.warn("No panel is open for integration "+n+"; not closing anything")},this.onPanelCloseAction=function(t){var n=mt.b.getPanel(t);if(n){var i=ht.l.onClose,o=r.panelAttributesEvents.get(n.portalId),s=o&&o.subscribedAttributes[i],a=r.integrationService.findIntegration(t);if(mt.b.removePanel(t),e.removePanel(n.element),s&&a){var u={type:ht.j,callbackId:o.subscribedAttributes[i].callbackId,event:i};a.integrationChannel.postMessage(u)}}},this.updatePortal=function(e,t){if(e){var n=e.portalId,r=e.contents,i=mt.d.getPortalData(n),o=i.owningIntegrationId;o&&o!==t.id?console.warn("Portal "+n+" is already owned by "+o+" -- not allowing render from "+t.id):(i.owningIntegrationId=t.id,mt.d.updatePortal(n,r))}},this.sendPortalMessage=function(e,t,n,r){e.postMessage({type:ht.f.PanelResponse,status:n,portalId:t,correlationId:r})},this.panelAttributesEvents=new Map}return e.prototype.init=function(){mt.d.addPortalListener(this.onPortalEvent),this.integrationService.addIntegrationMessageType(ht.f.PanelNew,this.onPortalPanel),this.integrationService.addIntegrationMessageType(ht.f.PanelClose,this.onPortalPanelClose),this.integrationService.addIntegrationMessageType(ht.k,this.updatePortal)},e.generateUniqueDomElement=function(){var e=vt.b(),t=document.getElementsByClassName("integration-react-container")[0],n=document.createElement("div");return n.className="integration-panel",n.id=e,t.appendChild(n),n},e.removePanel=function(e){e&&setTimeout(function(){pt.unmountComponentAtNode(e),e.remove()},1e3)},e=D.__decorate([D.__param(0,Object(gt.b)(lt.b)),D.__param(1,Object(gt.b)($.serviceName))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(kt);s.module(Ct,[lt.a]).service(wt,kt);var Tt="ultra.components.services.routeListener",It="routeListener",Et=function(){function e(e,t){this.integrationService=e,this.$rootScope=t}return e.prototype.addRouteListener=function(){var e=this;this.$rootScope.$on("$stateChangeSuccess",function(t,n,r){var i=n.name;e.integrationService.sendEventMessage({type:ht.d,eventType:ht.h.Route,routeName:i,routeData:r})})},e=D.__decorate([D.__param(0,Object(gt.b)(lt.b)),D.__param(1,Object(gt.b)("$rootScope"))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(Et);s.module(Tt,[]).service(It,Et);var Pt=n("N7x3"),At=n("0+Qs"),xt=n("4HXK"),Dt=n("eUpQ"),_t=n("6Ksg"),Lt=n("vT39"),Mt=n("WShm"),Nt=n("OmEq"),Rt=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.email=function(e){return Nt.b.test(e)||!e}}};s.module("ultra.directives.validate.emailAddress",[]).directive("bbValidateEmailAddress",["$injector",function(e){return e.instantiate(Rt)}]);var Ot=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.email=function(e){return!e||Nt.a.test(e)}}};s.module("ultra.directives.validate.emailAddresses",[]).directive("bbValidateEmailAddresses",["$injector",function(e){return e.instantiate(Ot)}]);var Gt=function(){this.require="?ngModel",this.link=function(e,t,n,r){r&&(t.on("focusin",function(){r.$focused=!0,e.$root.$$phase||e.$$phase||e.$root.$digest()}),t.on("focusout",function(){r.$focused=!1,e.$root.$$phase||e.$$phase||e.$root.$digest()}))}};s.module("ultra.directives.validate.input",[]).directive("input",["$injector",function(e){return e.instantiate(Gt)}]).directive("textarea",["$injector",function(e){return e.instantiate(Gt)}]);var Ut=function(){function e(){var e=this;this.require="ngModel",this.restrict="A",this.link=function(t,n,r,i){i.$validators.kvp=e.getKVPValidator(t,n,r,i)}}return e.prototype.getKVPValidator=function(e,t,n,r){return function(e,t){var n=t+"";if(""===n)return!0;var r=!0;return n.split("\n").forEach(function(e){e.trim().length>0&&r&&(2!==e.split("=").length&&(r=!1))}),r}},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(Ut);s.module("ultra.directives.validate.kvp",[]).directive("bbValidateKeyValuePair",["$injector",function(e){return e.instantiate(Ut)}]);var Bt=n("f4B+"),Ft="bbValidateMaxlength",qt=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getMaxlengthValidator=function(e,t,n,r){return function(e){var t=o("<textarea/>").val(e).text(),i=t||e;if(null==i)return!0;var s=n[Ft];if(null==s||""===s)return!0;var a=i.length;"true"===(!!n.maxlengthAfterEscape&&n.maxlengthAfterEscape)&&(a=Bt.a.HTML(i).length);var u=n.maxlengthNotice?n.maxlengthNotice:Math.floor(.9*s).toString();return u.match(/\%$/)&&(u=u.replace(/\D/,""),u=Math.floor(s*(1-u/100)).toString()),a>s?(delete r.$warning.maxlengthWarning,r.$error.maxlength={maxlength:s,diff:a-s},r.$errorImmediate.maxlengthImmediate={maxlength:s,diff:a-s},!1):a>=u?(delete r.$error.maxlength,delete r.$errorImmediate.maxlengthImmediate,r.$warning.maxlengthWarning={maxlength:s,left:s-a},!0):(delete r.$error.maxlength,delete r.$errorImmediate.maxlengthImmediate,delete r.$warning.maxlengthWarning,!0)}},this.link=function(e,n,r,i){i.$validators.maxlengthValidator=t.getMaxlengthValidator(e,n,r,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(qt);s.module("ultra.directives.validate.maxlength",[$.moduleName]).directive(Ft,[$.serviceName,function(e){return new qt(e)}]);var jt=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.selectionStart=0,this.selectionEnd=0,this.oldViewValue="",this.getNumberParser=function(e,n,r,i){return function(n){if(i.$isEmpty(n))return i.$setValidity("numberInvalid",!0),n;var o=t.regroup(e,i),s=t.bbLocalize.parseNumberSync(o,e);if(isNaN(s))return i.$setValidity("numberInvalid",!1),s;i.$setValidity("numberInvalid",!0);var a=t.bbLocalize.getDecimalStringForScope(e),u=s.toString(),c=u.split(String(a)),l=r&&r.maxDecimal?Number(r.maxDecimal):$.Service.defaultDecimalPrecision;return c.length>1&&c[1].length>l&&(u=c[0]+a+c[1].substring(0,l),s=parseFloat(u),t.reformatFromModel(i,s)),t.updateSelection(e,i,t.target,t.key),s}},this.getMinValidator=function(e,t,n,r){return function(e){var t=parseFloat(n.min),i=r.$isEmpty(e);if(!i&&isNaN(e))return delete r.$error.numberSmall,!1;var o=i||e>=t;return o?delete r.$error.numberSmall:r.$error.numberSmall={min:t},o}},this.getMaxValidator=function(e,t,n,r){return function(e){var t=parseFloat(n.max),i=r.$isEmpty(e);if(!i&&isNaN(e))return delete r.$error.numberLarge,!1;var o=i||e<=t;return o?delete r.$error.numberLarge:r.$error.numberLarge={max:t},o}},this.getNumberFormatter=function(e,n,r,i){return function(n){var o=n||i.$modelValue;if(i.$setValidity("numberInvalid",!0),o||0===o){var s=r&&r.maxDecimal?r.maxDecimal:$.Service.defaultDecimalPrecision;return t.bbLocalize.formatNumberSync(parseFloat(o),e,{maximumFractionDigits:s,useGrouping:!0})}return""}},this.regroup=function(e,n){var r=t.bbLocalize.regroupNumberSync(n.$viewValue,e);return n.$viewValue!==r&&(n.$viewValue=r,n.$render(),n.$validate()),r},this.reformatFromModel=function(e,t){t=t||e.$modelValue;for(var n=e.$formatters,r=n.length,i=t;r--;)i=n[r](i);e.$viewValue!==i&&(e.$viewValue=i,e.$render(),e.$validate())},this.allowInput=function(e,n,r,i){if(!n||!n.key)return!1;var o=i.$viewValue,s=n.target,a=s.selectionStart,u=s.selectionEnd,c=t.bbLocalize.getGroupingStringForScope(e),l=t.bbLocalize.getDecimalStringForScope(e),d=t.bbLocalize.parseNumberSync(o,e),p=r&&r.maxDecimal?Number(r.maxDecimal):$.Service.defaultDecimalPrecision,f=u-a>1,m=n.key===c,h=u-a==0&&"Backspace"===n.key&&o[a-1]===c,g=u-a==0&&"Delete"===n.key&&o[a]===c,v=u-a==1&&o[a]===c&&("Backspace"===n.key||"Delete"===n.key),b=u-a==0&&!isNaN(n.key)&&t.target.selectionStart>o.indexOf(l)&&o.split(l)[1]&&o.split(l)[1].length>=p;f||isNaN(d)||!(h||g||m||v||b)||n.preventDefault()},this.updateSelection=function(e,n,r,i){if(i&&-1===["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Shift","Meta","Tab","End","Home","-"].indexOf(i)){var o=Math.max(0,t.selectionEnd+n.$viewValue.length-t.oldViewValue.length);r.selectionStart=o,r.selectionEnd=o}},this.link=function(e,n,r,i){n.on("blur",function(){i.$valid&&t.reformatFromModel(i)}),n.on("focus",function(){n.select()}),n.on("keydown",function(n){t.target=n.target,t.key=n.key,t.selectionStart=t.target.selectionStart,t.selectionEnd=t.target.selectionEnd,t.oldViewValue=i.$viewValue,t.allowInput(e,n,r,i)}),i.$parsers.push(t.getNumberParser(e,n,r,i)),i.$formatters.push(t.getNumberFormatter(e,n,r,i)),r.min&&(i.$validators.minValidator=t.getMinValidator(e,n,r,i),r.$observe("min",function(){i.$validate()})),r.max&&(i.$validators.maxValidator=t.getMaxValidator(e,n,r,i),r.$observe("max",function(){i.$validate()}))}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(jt);s.module("ultra.directives.validate.number",[$.moduleName]).directive("bbValidateNumber",[$.serviceName,function(e){return new jt(e)}]);var Ht=function(){this.require="ngModel",this.link=function(e,t,n,r){r.$validators.phoneNumber=function(e){return/^\+?\d+$/.test(e)||!e}}};s.module("ultra.directives.validate.phoneNumber",[]).directive("bbValidatePhoneNumber",["$injector",function(e){return e.instantiate(Ht)}]);var Vt=n("xqn/"),zt=new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i"),Kt=(new RegExp("^(http://|https://)"),function(){function e(){var e=this;this.require="ngModel",this.restrict="A",this.link=function(t,n,r,i){i.$validators.url=e.getUrlValidator(t,n,r,i),i.$warning||(i.$warning={}),i.$errorImmediate||(i.$errorImmediate={})}}return e.prototype.getUrlValidator=function(e,t,n,r){return function(e){if(!e)return r.$error.urlInvalid&&delete r.$error.urlInvalid,!0;var t=e+"";return zt.test(t)?(delete r.$error.urlInvalid,!0):(r.$error.urlInvalid=!0,!1)}},e}());!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}D.__extends(t,e)}(Kt);s.module("ultra.directives.validate.url",[]).directive("bbValidateUrl",["$injector",function(e){return e.instantiate(Kt)}]);var Wt=n("lDJ8"),Jt=[_t.b,Lt.a,Mt.b,"ultra.directives.validate.emailAddress","ultra.directives.validate.emailAddresses","ultra.directives.validate.input","ultra.directives.validate.kvp","ultra.directives.validate.maxlength","ultra.directives.validate.number","ultra.directives.validate.phoneNumber",Vt.b,"ultra.directives.validate.url",Wt.a],Xt=n("2qV7"),Qt=n("Q/M7"),Zt=n("HtY7"),Yt=n("H8CZ"),en="ultra.components.directives.preventEventBubbling",tn=function(){function e(e,t,n){this.scope=e,this.element=t,this.attrs=n,n.bbPreventEventBubbling&&t.on(n.bbPreventEventBubbling,function(e){e.stopPropagation()})}return e.$inject=["scope","element","attrs"],e}(),nn=function(){function e(e){var t=this;this.$injector=e,this.restrict="A",this.link=function(e,n,r){e.bbPreventEventBubbling=t.$injector.instantiate(tn,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(en,[]).directive("bbPreventEventBubbling",["$injector",function(e){return e.instantiate(nn)}]);n("/mDi");var rn="ultra.components.directives.sizeToFitTextArea",on=function(){function e(e,t,n,r){var i=this;if(this.scope=e,this.element=t,this.attrs=n,this.timeout=r,this.defaultHeight=null!=this.scope.defaultHeight?parseInt(this.scope.defaultHeight,10):37,"textarea"!==t[0].tagName.toLowerCase())throw new Error("This directive is only for use as an attribute on textareas");this.maxHeight=this.scope.maxHeight?parseInt(this.scope.maxHeight,10):null,t.addClass("size-to-fit-textarea"),null!=e.textareaModel?this.scope.$watch("textareaModel",function(e,t){e!==t&&i.sizeToFit()}):t.keyup(this.sizeToFit.bind(this)),this.timeout(function(){i.minHeight="true"===i.scope.initialHeightLock?i.element.get(0).clientHeight:null,i.sizeToFit()},this.scope,0,!1)}return e.prototype.sizeToFit=function(){var e=this.element.get(0);e.clientHeight===e.scrollHeight&&(e.style.height=this.defaultHeight+"px");var t=e.clientHeight;(!this.maxHeight||this.maxHeight>t)&&(t=Math.max(e.scrollHeight,t,this.minHeight),this.scope.maxHeight&&(t=Math.min(this.maxHeight,t)),t>e.clientHeight&&(e.style.height=t+"px"))},e.$inject=["scope","element","attrs",c.b],e}(),sn=function(){function e(e){var t=this;this.$injector=e,this.replace=!1,this.restrict="A",this.priority=1,this.terminal=!1,this.scope={defaultHeight:"@",maxHeight:"@",initialHeightLock:"@",textareaModel:"=?"},this.link=function(e,n,r){e.sizetofittextarea=t.$injector.instantiate(on,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(rn,[c.a]).directive("bbSizeToFitTextarea",["$injector",function(e){return e.instantiate(sn)}]);var an="ultra.components.directives.bbPreventDrag",un=function(){function e(e){this.$rootScope=e,this.restrict="A",this.link=function(e,t){t.attr("draggable","false"),t.on("dragstart",function(e){var t=e.originalEvent.target;if(!(t.ownerDocument.activeElement.className.includes("bb-editor")||t.getAttribute&&"true"===t.getAttribute("draggable")))return!1})}}return e.$inject=["$rootScope"],e}();s.module(an,[]).directive("bbPreventDrag",["$injector",function(e){return e.instantiate(un)}]);n("i2kg"),n("hh8V");var cn=n("LvDl"),ln="ultra.components.directives.formlabel",dn="bbFormLabelDecorator",pn=function(){function e(t,n,r){var i=this;this.$q=t,this.$log=n,this.timeout=r,this.restrict="A",this.scope=!0,this.waitForElement=function(t,n){null==n.elementInspectStartAt&&(n.elementInspectStartAt=(new Date).getTime());var r=i.$q.defer();return i.timeout(function(){return s.element(document.getElementById(t))},n,50).then(function(o){o.length>0?r.resolve(o):(new Date).getTime()-n.elementInspectStartAt>e.elementInspectTimeout?r.reject("Cannot find element #"+t+" in "+e.elementInspectTimeout+"ms"):i.waitForElement(t,n).then(function(e){r.resolve(e)}).catch(function(e){r.reject(e)})}),r.promise},this.link=function(t,n,r){var o=t.$eval(r[dn])||{},a=r.for;a&&i.waitForElement(a,t).then(function(e){var n=function(){t.attrsElement=cn.mapValues(cn.keyBy(e[0].attributes,"nodeName"),function(e){return e.nodeValue})};o.autoupdate&&(t.domObserver=new MutationObserver(n),t.domObserver.observe(e[0],{childList:!1,attributes:!0,subtree:!1})),n()}).catch(function(e){i.$log.warn(e)}),t.$watchGroup(cn.compact(["attrsElement",r[dn]]),function(t){e.decorators.forEach(function(e){e(n,s.extend({},t[0],t[1]))})}),t.$on("$destroy",function(){void 0!==t.domObserver&&t.domObserver.disconnect()})}}return e.elementInspectTimeout=1e4,e.$inject=["$q","$log","timeout"],e.decorators=[function(e,t){var n=t.required;!0===n||["true","required",""].indexOf(n)>=0?e.addClass("required"):e.removeClass("required")}],e}();s.module(ln,[]).directive(dn,["$injector",function(e){return e.instantiate(pn)}]);var fn=n("+e2k"),mn=(n("lhRd"),n("kpD8")),hn=(n("0qUt"),n("Gq5k"),"ultra.components.directives.collabSessionIcon"),gn=(function(){function e(e,t,n){this.$scope=e,this.$element=t,this.bbLocalize=n}e.prototype.$onChanges=function(e){var t=this;this.bbLocalize.translate({locale:this.bbLocalize.getLocale(this.$scope),key:this.runningSessionFlag?"components.directives.collab-session-icon.aria-label.active-collab":"components.directives.collab-session-icon.aria-label.inactive-collab"}).then(function(e){t.$element.attr("aria-label",e)})},e.$inject=["$scope","$element",$.serviceName],e=D.__decorate([Object(Ve.a)({moduleName:hn,componentName:"bbCollabSessionIcon",template:mn,bindings:{runningSessionFlag:"<"},requireModules:[$.moduleName]})],e)}(),"ultra.directives.elementimage.accessibility"),vn="aria-label",bn=["components","directives","element-image","element-image-accessibility"],yn=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.restrict="C",this.link=function(e,t,r){if(!t.attr(vn)){var i=t.attr("class"),o=function(r){var i=/\bimg-icon-[\w-]+\b/.exec(r);null===i?t.removeAttr(vn):(n.loadBundle.then(function(){t.attr(vn,n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(e),key:bn.join(".")+"."+i[0].replace(/-[aco]$/,"")}))}),e.$digest())};requestAnimationFrame(function(){o(i)});var s=new MutationObserver(cn.debounce(function(){requestAnimationFrame(function(){var e=t.attr("class");i!==e&&o(i=e)})},100,{leading:!0}));s.observe(t[0],{attributes:!0,attributeFilter:["class"]}),e.$on("$destroy",function(){s.disconnect()})}},this.loadBundle=t.loadBundle(bn.join("/"))}return e.$inject=["$injector",$.serviceName],e}();s.module(gn,[$.moduleName]).directive("elementImage",["$injector",function(e){return e.instantiate(yn)}]);var Sn=n("cYWG"),Cn=n("K/D1"),wn=["scheduledTasks","telemetry"],$n=null,kn=function(){function e(){this.pendingRequests=[],this.httpRequestLog=[],this.registerWebRequestListener()}return e.prototype.registerWebRequestListener=function(){var e=this;window.addEventListener("message",function(t){t.source===window&&t.data&&t.data.type&&t.data.details&&e.handleWebRequestMessage(t.data.type,t.data.details)})},e.prototype.handleWebRequestMessage=function(e,t){if(this.isMonitoredUrl(t.url))switch(e){case"onBeforeRequest":this.onRequestStarted(t);break;case"onCompleted":case"onErrorOccurred":this.onRequestCompleted(t)}},e.prototype.isMonitoredUrl=function(e){return e&&e.indexOf("/learn/api/v1")>=0&&0===wn.filter(function(t){return e.indexOf(t)>-1}).length},e.prototype.onRequestStarted=function(e){this.pendingRequests.push(e)},e.prototype.onRequestCompleted=function(e){var t=cn.findIndex(this.pendingRequests,function(t){return t.requestId===e.requestId});if(t>-1){var n=this.pendingRequests[t],r={requestId:e.requestId,type:e.type,method:e.method,url:e.url,statusCode:e.statusCode,elapsedTime:e.timeStamp-n.timeStamp,requestBody:n.requestBody,error:e.error};this.httpRequestLog.push(r),this.pendingRequests.splice(t,1)}},e.prototype.dumpHttpRequestLog=function(){var e={};for(var t in window.httpRequestLog.forEach(function(t){var n=t.method+" "+t.url;null==e[n]&&(e[n]=[]),e[n].push(t.params)}),e)if(e.hasOwnProperty(t)){var n=e[t];console.log(t+" ["+n.length+"]",n)}},e.prototype.clearHttpRequestLog=function(){this.httpRequestLog.length=0},e}();var Tn=n("oQrK"),In="ultra.services.zoomUtility";s.module(In,[]),Tn.a.detect().mobile()&&o(document).on("mouseover","input, textarea, select, .editor-element",function(){o(this).css("font-size","16px")});n("rkMR");var En=n("gkef"),Pn=n("aWNp"),An="ultraUi.components.directives.conversion.previewHeader",xn=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.element=t,this.attrs=n,this.windowSize=r,this.contextCourse=i;var s=e.course,a=r.isMediumBreakpoint()||r.isLargeBreakpoint();this.scope.shouldShowHeader=a&&s.isUltraPreview(),this.scope.hasExceptionReport=!!s.ultraConversionReportId,e.$on("reloadCourse",function(e,t){t===s.id&&(o.scope.shouldShowHeader=s.isUltraPreview())})}return e.$inject=["scope","element","attrs",En.b,m.e],e}(),Dn=function(){function e(e){var t=this;this.$injector=e,this.restrict="AE",this.template=Pn,this.scope={course:"="},this.link=function(e,n,r){e.previewHeader=t.$injector.instantiate(xn,{scope:e,element:n,attrs:r})}}return e.$inject=["$injector"],e}();s.module(An,[]).directive("bbPreviewHeader",["$injector",function(e){return e.instantiate(Dn)}]);var _n=[{symbol:"d",base:86400,label:"days"},{symbol:"h",base:3600,label:"hours"},{symbol:"m",base:60,label:"minutes"},{symbol:"s",base:1,label:"seconds"}];s.module("ultra.service.filters.timespan",[$.moduleName]).filter("timeSpan",["$log",$.serviceName,function(e,t){var n={};return _n.forEach(function(e){n[e.symbol]=e}),function(r,i,o){void 0===i&&(i="hm");var s={},a={};return cn.forEach(i,function(t){var r=t.toLowerCase();n.hasOwnProperty(r)?a[r]=r!==t:e.error(r+" is not supported!")}),cn(n).filter(function(e){return a.hasOwnProperty(e.symbol)}).forEach(function(e){var i=e.symbol,u=1===cn.size(a),c=Math.floor(r/n[i].base),l=n[i].label;(c>0||!0===a[i]||u&&0===cn.size(s))&&(s[l]=t.translateSync({locale:t.getLocale(o),key:"global.timeSpan."+l+".plural",params:{v:c},noEscape:!0})),r%=n[i].base,delete a[i]}),cn.defaults(s,{days:"",hours:"",minutes:"",seconds:""}),t.translateSync({locale:t.getLocale(o),key:"global.timeSpan.oneline",params:s,noWrap:!0,noEscape:!0}).trim().replace(/\s+/g," ")}}]);var Ln=["ultra.service.filters.timespan"],Mn=n("0fB1"),Nn=n("z6Q5"),Rn="ultra.service.batch-utility-rest-api.directive";s.module(Rn,[Nn.a,c.a]).directive("bbBatchScope",[Nn.b,c.b,function(e,t){return{restrict:"A",link:function(n){var r,i;n.$on("BEFORE_REQUEST",function(o,s){o.stopPropagation(),s.params=s.params||{},s.params[Nn.c]||(r=r||e.newToken(),s.params[Nn.c]=r),r&&(t.cancel(i),i=t(function(){r.send(),r=null},n))})}}}]);var On=n("gCXj"),Gn=n("BXiQ"),Un=(n("A3SN"),n("GA7a")),Bn="ultra.directives.user-avatar-group";s.module(Bn,[Gn.a]).directive("bbUserAvatarGroup",function(){return{restrict:"E",template:Un,scope:{users:"=?"},link:function(e,t){t.addClass("avatar element-image"),e.$watch("users",function(t){t&&(e.displayUsers=Object(cn.compact)([e.users[0],e.users.length>2?{id:"_groupedusers_"+(e.users.length-1),getInitials:function(){return"+"+(e.users.length-1)},avatar:{permanentUrl:"default"},lastModifiedAt:""}:e.users[1]]))})}}});var Fn,qn=n("zFCC"),jn=n("NXdT"),Hn=n("/jNt"),Vn=n("z1U9");n.d(t,"userId",function(){return Fn}),n.d(t,"moduleName",function(){return Kn}),n.d(t,"useAbsoluteUrl",function(){return Qn}),n.d(t,"appInjector",function(){return Wn}),n.d(t,"init",function(){return er});var zn,Kn="ultra";window.Foundation.libs.reveal.settings.dismiss_modal_class="close-reveal-modal, .reveal-close",!$n&&(zn=Qt.j(),!f.a.production||zn.indexOf("perf-ultra")>-1||zn.indexOf("mylearn.int.bbpd.io")>-1)&&($n=new kn,window.httpRequestLog=$n.httpRequestLog,window.pendingRequests=$n.pendingRequests,window.dumpHttpRequestLog=$n.dumpHttpRequestLog,window.clearHttpRequestLog=$n.clearHttpRequestLog,window.disableFtueGuidance=function(){f.a.disableAllFtueGuidance=!0});var Wn,Jn=["angulartics","angulartics.scroll","ngAnimate","ngAria","ngMessages","ngSanitize","ui.router","angular-data.DSCacheFactory","fng","ngRedux",l,p.a,b,ee.a,Rn,C.a,Zt.a,te.a,ne.a,re.a,w.c,ie.a,x.a,M.a,k,ot.a,oe.a,O.f,se.b,Te.a,ae.b,Ie.b,Pe,ln,Ne.a,xe.a,ue.a,fe,ve,Se.a,De.a,Oe,$e,Ce.a,we.a,_e.c,Le.b,I.b,Me.a,E.a,N,Be.moduleName,Fe,je,Ke,q,Qe,it.b,Ye.a,et.b,tt.a,_,nt.b,A.a,P.a,rt.a,z,Q.a,st.a,at.a,ut.a,ct.a,en,an,lt.a,Ct,Tt,Pt.a,At.a,xt.a,c.a,g.R,rn,fn.a,hn,gn,Xt.a,le.b,Cn.a,Sn.b,In,An,Mn.a,On.a,Gn.a,Bn,Hn.c,qn.b,jn.b].concat(Jt).concat(Ln);function Xn(){return s.module(Kn,Jn).config([$.providerName,function(e){e.setOptions({production:f.a.production})}]).config(["$locationProvider",le.c,"$urlRouterProvider",function(e,t,n){e.html5Mode(!0),n.rule(function(e,t){var n=t.url();if(n){var r=Qt.r(n);return"/"===r[r.length-1]?r.substring(0,r.length-1):void 0}}),n.otherwise(function(e,t){var n=t.url(),r=e.get(le.d);"/"===Qt.r(n)?e.get(Q.b).getLandingPage().then(function(e){return r.go(e)}):r.go("base.not-found")})}]).config(["$ocLazyLoadProvider",function(e){e.config({loadedModules:[Kn]})}]).config(["$animateProvider",function(e){e.classNameFilter(/angular-animate/)}]).config(["$compileProvider",function(e){e.debugInfoEnabled(!f.a.production),e.preAssignBindingsEnabled(!1)}]).config(["$httpProvider",function(e){e.useApplyAsync(!0),Zn(e)}]).config(["DSCacheFactoryProvider",function(e){e.setCacheDefaults({capacity:1e3,maxAge:18e5,deleteOnExpire:"passive"})}]).config(["$ariaProvider",function(e){e.config({bindRoleForClick:!1,bindKeypress:!1,ariaRequired:!1,ariaInvalid:!1,tabindex:!1})}]).config(["$logProvider",function(e){e.debugEnabled(!f.a.production)}]).config(["$provide",function(e){e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$$digestPaused",{get:function(){return this.hasOwnProperty("$$__digestPaused")&&null!=this.$$__digestPaused?this.$$__digestPaused:(this.$parent||{}).$$digestPaused}}),e}])}]).config(["$ngReduxProvider",function(e){var t=window,n=[u.default],r=[];if(!f.a.production){var i=Object(a.createLogger)({level:"info",collapsed:!0});n.push(i),t.__REDUX_DEVTOOLS_EXTENSION__&&r.push(t.__REDUX_DEVTOOLS_EXTENSION__&&t.__REDUX_DEVTOOLS_EXTENSION__())}e.createStoreWith(Vn.rootReducer,n,r)}])}function Qn(e){return e&&e.url&&(e.url.indexOf("/api/")>=0||e.url.indexOf("/partner-cloud/app/")>=0)}function Zn(e){e.interceptors.push(function(){return{request:function(e){return Qn(e)&&(e.url=Qt.c(e.url)),e}}})}function Yn(e){e.run(["$rootScope","$ngRedux",$.serviceName,st.b,K,function(e,t,n,r,i){var o;i.registerXsrfCallback(function(e){Object(Vn.configure)({apiBasePath:f.a.apiBasePath,xsrf:e})});var s=t.connect(function(e){return{}},Vn.actions.app)(function(e,t){o=t});e.$on("destroy",s),e.$on("$stateChangeSuccess",function(t,r,i,s){o&&o.handleStateChangeSuccess({toState:r,toParams:i});var a="base.recentActivity";s.name&&(a=s.name),e.previousState=a,e.index=Object.create(null),e.index.locale=(n.getLocale(e)||"").replace("_","-");var u=r.pageTitle||"base.ultra";n.translate({locale:e.index.locale,key:u}).then(function(t){e.index.title=t})});var a=r.subscribe();e.$on("destroy",a)}]).run(["$http",Q.b,K,function(e,t,n){n.registerXsrfCallback(function(t){var n;e.defaults.headers.common[W]=t,s.element.ajaxSetup({headers:(n={},n[W]=t,n)})}),s.element.ajaxPrefilter(function(e){Qn(e)&&(e.url=Qt.c(e.url))})}]).run(["$rootScope",Q.b,Z.b,function(e,t,n){e.context=t,e.$on("bbCurrentUserModified",function(){n.userModel.$fetch()})}]).run(["$rootScope",function(e){e.Modernizr=window.Modernizr}])}function er(){var e=this;Qt.m("inPreviewMode",window.location.href)&&o("body").addClass("in-preview-mode"),s.element(document).ready(function(){s.module("pre-bootstrap-ultra",["ng",Q.a]).config(["$httpProvider",function(e){Zn(e)}]);var t=s.injector(["pre-bootstrap-ultra"]),n=t.get(Q.b),r=t.get(Z.b),i=t.get("$http"),a=t.get(c.b),u=t.get("$q");o(document).foundation(),/Android/.test(navigator.appVersion)&&"function"==typeof document.activeElement.scrollIntoViewIfNeeded&&window.addEventListener("resize",function(){"INPUT"===document.activeElement.tagName&&a(function(){document.activeElement.scrollIntoViewIfNeeded()},e.scope,0,!1)});var l=Qt.j(),d=window.__initialContext.xsrf?u.when({data:{xsrfToken:window.__initialContext.xsrf}}):i.get(l+f.a.apiBasePath+"/v1/utilities/xsrfToken");u.all([r.userModel.$asPromise(),d,n.getSystemInfo().$asPromise()]).then(function(e){var t=e[0];Fn=t.id;var n=e[2];Y.a.userId=Fn,Dt.a.setClientOffset(n.now.getTime()-(new Date).getTime());var i=o("base"),a=i.attr("href");i.attr("href",f.a.basePath+"/");var u=(Wn=s.bootstrap(document.documentElement,[Kn],{strictDi:!0})).get(Q.b),c=Wn.get(K),l=Wn.get(lt.b),d=Wn.get(wt),p=Wn.get(It),m=Wn.get(Pt.b);c.updateToken(e[1].data.xsrfToken),r._setUserId(Fn),c.registerXsrfCallback(function(e){u.sessionId=e,u.xsrfToken=e}),l.init(),d.init(),m.addHoverListener(),p.addRouteListener(),m.addClickListener(),i.attr("href",a)}).catch(function(e){401===e.status&&(location.href="/?new_loc="+encodeURIComponent(location.pathname+(location.search||"")+(location.hash||"")))}).finally(function(){var e=function(){var e=o("#initial-load-area");if(e&&e.length>0){if(window.__e2eTestingEnabled)return void e.remove();e.addClass("fade-out"),Yt.b(e,function(t){if(!t.data.noTransitions&&"opacity"!==t.originalEvent.propertyName)return!1;e.remove()})}};if(window.__e2eTestingEnabled)e();else if(Wn){var t,n=Wn.get("$rootScope"),r=n.$on("$stateChangeSuccess",function(){e(),r(),t()});t=n.$on("$stateChangeError",function(){e(),t(),r()}),n.$on("hideInitialLoadingArea",function(){e()})}else e()})})}f.a.production?(Yn(Xn()),er()):n.e(235).then(function(){Promise.resolve().then(n.bind(null,"tWb8")).then(function(e){Jn=Jn.concat(e.modules);var t=Xn();Yn(t),e.init(t),er()})}.bind(null,n)).catch(function(){})},e6jQ:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=0;function i(){return"id_"+ ++r}function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},eUpQ:function(e,t,n){"use strict";var r=function(){function e(){}return e.getServerTime=function(){return new Date((new Date).getTime()+e.clientTimeDifferenceMS)},e.setClientOffset=function(t){e.clientTimeDifferenceMS=t},e.clientTimeDifferenceMS=0,e}();t.a=r},emI2:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return u});var r=n("mrSG"),i=n("pjml"),o=n("aHpC"),s="ultra.service.preference",a="preferenceService",u=250,c=function(){function e(e,t){this.$q=e,this.MyPreferenceModel=t,this.preferences={}}return e.prototype.getPreference=function(e,t,n){var r=this,i=this.$q.defer();return n||!this.preferences.hasOwnProperty(e)?this.MyPreferenceModel.$find(e).$allow([404]).$asPromise().then(function(n){if(n.$response&&404===n.$response.status){if(void 0===t)return void i.reject(n);r._addPreferenceToCache(e,t),i.resolve(r.preferences[e])}else r.preferences[n.key]=n,i.resolve(n)},function(e){i.reject(e)}):i.resolve(this.preferences[e]),i.promise},e.prototype._addPreferenceToCache=function(e,t,n){var r=this.MyPreferenceModel.$new(e);r.key=e,r.value=t,r.isRequired=!n,this.preferences[e]=r},e.prototype.setPreference=function(e,t,n){if(e.length>u)throw new Error("Preference key is too long!");return this._addPreferenceToCache(e,t,n),this.preferences[e].$save().$asPromise()},e=r.__decorate([r.__param(0,Object(o.b)("$q")),r.__param(1,Object(o.b)(i.S.serviceName))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(c);angular.module(s,[i.R]).service(a,c)},en1n:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return d}),n.d(t,"d",function(){return m}),n.d(t,"c",function(){return h}),n.d(t,"h",function(){return g}),n.d(t,"g",function(){return v}),n.d(t,"e",function(){return b}),n.d(t,"i",function(){return y}),n.d(t,"j",function(){return S}),n.d(t,"f",function(){return C}),n.d(t,"k",function(){return k});var r,i=n("mrSG"),o=(n("sMjt"),n("EVdn")),s=n("oSB+"),a=n.n(s),u=n("DwhQ"),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.Small=new t("small"),t.Medium=new t("medium"),t.Large=new t("large"),t.Xlarge=new t("xlarge"),t.Xxlarge=new t("xxlarge"),t}(a.a),l=function(){if(!r){var e=o(".foundation-mq-small").width(),t=o(".foundation-mq-medium").width(),n=o(".foundation-mq-large").width(),i=o(".foundation-mq-xlarge").width(),s=o(".foundation-mq-xxlarge").width();r={small:{start:e,end:t},medium:{start:t,end:n},large:{start:n,end:i},xlarge:{start:i,end:s},xxlarge:{start:s,end:999999999}}}return r},d=l,p=null;o(window).resize(function(){p=null});var f=function(){return null==p&&(p=o(window).width()),p},m=f;function h(){var e=d(),t=m();return t>=e.small.start&&t<e.small.end?c.Small:t>=e.medium.start&&t<e.medium.end?c.Medium:t>=e.large.start&&t<e.large.end?c.Large:t>=e.xlarge.start&&t<e.xlarge.end?c.Xlarge:c.Xxlarge}function g(){return h().isEqualTo(c.Small)}function v(){return h().isEqualTo(c.Medium)}function b(){return h().isEqualTo(c.Large)}function y(){return h().isEqualTo(c.Xlarge)}function S(){return h().isEqualTo(c.Xxlarge)}function C(){return b()||y()||S()}function w(e){return e.replace("@media","").trim()}var $={smallUp:window.matchMedia(w(u.BbMediaQueries.smallUp)),smallOnly:window.matchMedia(w(u.BbMediaQueries.smallOnly)),mediumUp:window.matchMedia(w(u.BbMediaQueries.mediumUp)),mediumOnly:window.matchMedia(w(u.BbMediaQueries.mediumOnly)),largeUp:window.matchMedia(w(u.BbMediaQueries.largeUp)),largeOnly:window.matchMedia(w(u.BbMediaQueries.largeOnly)),xlargeUp:window.matchMedia(w(u.BbMediaQueries.xLargeUp)),xlargeOnly:window.matchMedia(w(u.BbMediaQueries.xLargeOnly)),xxlargeUp:window.matchMedia(w(u.BbMediaQueries.xXLargeUp))},k={smallUp:$.smallUp,smallOnly:$.smallOnly,mediumUp:$.mediumUp,mediumOnly:$.mediumOnly,largeUp:$.largeUp,largeOnly:$.largeOnly,xlargeUp:$.xlargeUp,xlargeOnly:$.xlargeOnly,xxlargeUp:$.xxlargeUp,"small-up":$.smallUp,"small-only":$.smallOnly,"medium-up":$.mediumUp,"medium-only":$.mediumOnly,"large-up":$.largeUp,"large-only":$.largeOnly,"xlarge-up":$.xlargeUp,"xlarge-only":$.xlargeOnly,"xxlarge-up":$.xxlargeUp}},"f4B+":function(e,t,n){"use strict";var r=n("mrSG"),i=n("EVdn"),o=n("/K+M"),s=n.n(o),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.text=function(e){return i("<div></div>").html(e).text()},t}(s.a);Object.setPrototypeOf(a,s.a),t.a=a},f8ya:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return p});var r,i,o,s=n("mrSG");!function(e){e.Add="Add",e.Delete="Delete",e.ValueChange="ValueChange",e.NoChange="NoChange"}(r||(r={})),function(e){e.NoAccommodation="Normal",e.Limited="Limited",e.Unlimited="Unlimited"}(i||(i={})),function(e){e.Unlimited="Unlimited",e.OneAndAHalf="150",e.Two="200",e.NoAccommodation="Default"}(o||(o={}));var a=function(){function e(e){this.type=e}return e.prototype.equals=function(e){return null==e?this.hasNoAccommodation():this===e||this.type===e.type},e.prototype.hasNoAccommodation=function(){return!1},Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return!this.hasNoAccommodation()},enumerable:!0,configurable:!0}),e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e){return this.equals(e)?r.NoChange:this.hasAccommodation?r.Add:r.Delete},t}(a),c=function(e){function t(){return e.call(this,i.NoAccommodation)||this}return s.__extends(t,e),t.prototype.hasNoAccommodation=function(){return!0},t}(u);var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.compare=function(e){return this.equals(e)?r.NoChange:this.hasAccommodation?e.hasAccommodation?r.ValueChange:r.Add:r.Delete},t.prototype.toKey=function(){switch(this.type){case o.OneAndAHalf:return"150Percent";case o.Two:return"200Percent";case o.Unlimited:return"Unlimited";default:return"NoAccommodation"}},t}(a),d=function(e){function t(){return e.call(this,o.NoAccommodation)||this}return s.__extends(t,e),t.prototype.hasNoAccommodation=function(){return!0},t}(l);var p=function(){function e(e,t){null!=e&&(this.dueDate=e),null!=t&&(this.timeLimit=t)}return e.fromTypes=function(t,n){var r,s=new e;return s.dueDate=null==(r=t)||r===i.NoAccommodation?new c:new u(r),s.timeLimit=function(e){return null==e||e===o.NoAccommodation?new d:new l(e)}(n),s},e.prototype.clone=function(){return e.fromTypes(this.dueDate.type,this.timeLimit.type)},e.prototype.equals=function(e){return e.dueDate.equals(this.dueDate)&&e.timeLimit.equals(this.timeLimit)},e.prototype.compare=function(e){return{dueDate:this.dueDate.compare(e.dueDate),timeLimit:this.timeLimit.compare(e.timeLimit)}},Object.defineProperty(e.prototype,"hasAccommodation",{get:function(){return this.dueDate.hasAccommodation||this.timeLimit.hasAccommodation},enumerable:!0,configurable:!0}),e}()},fGgA:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});n("XPRq"),n("saCP");var r=n("LvDl"),i=n("EVdn"),o=n("IbG+"),s=n("0JpG"),a=n("lEL+"),u=n("gkef"),c=n("/J7e"),l=n("+4Px"),d=n("e6jQ"),p="ultra.components.directives.tooltip",f=function(){function e(t,n,r,o,s,a){var u=this;this.scope=t,this.element=n,this.attrs=r,this.localizeService=o,this.timeoutService=s,this.windowSizeService=a,this.tooltipCreated=!1,this.tooltip=null,this.pip=null,this.timeout=null,this.timeoutMS=500,e.initEnhancedTooltipEvents(),this.controlId=this.attrs.tooltipId||"tooltip-"+d.a(),this.tooltipPosition=this.attrs.tooltipPosition||"top","true"===this.attrs.tooltipAlwaysUnderline&&this.getTriggerElement().addClass("tooltip-always-underline"),this.$body=i("body"),this.attrs.$observe("title",function(e){e&&u.updateTooltip(e)}),this.scope.$on("$destroy",function(){u.getTooltip()&&u.getTooltip().remove(),u.$body=null,u.tooltip=null,u.pip=null}),"true"!==this.attrs.tooltipDisableOnMouseLeave&&n.on("mouseleave",function(){(u.windowSizeService.isLargeBreakpoint()||"true"===u.attrs.tooltipEnableOnMouseLeaveForAllBreakpoints)&&(u.timeoutMS>0?u.timeout=u.timeoutService(function(){u.hideTooltip()},u.scope,u.timeoutMS):u.hideTooltip())}),"true"!==this.attrs.tooltipDisableOnMouseOver&&n.on("mouseover",function(){(u.windowSizeService.isLargeBreakpoint()||"true"===u.attrs.tooltipEnableOnMouseOverForAllBreakpoints)&&u.showTooltip()}),"true"!==this.attrs.tooltipDisableOnFocus&&(n.on("focus",function(){i("body").hasClass("hide-focus-outline")||u.showTooltip()}),n.on("blur",function(){u.hideTooltip()})),n.on("click",function(e){if(i("body").hasClass("hide-focus-outline")){var t=u.windowSizeService.isSmallBreakpoint(),n=u.windowSizeService.isMediumBreakpoint();if("true"===u.attrs.tooltipOpenOnActivation||t||n){if("true"===u.attrs.tooltipDisableOnMediumDownBreakpoint&&(n||t))return;u.isTooltipVisible()?u.hideTooltip():(u.showTooltip(),e.stopPropagation())}else u.hideTooltip()}else e.stopPropagation()}),n.on("keydown",function(e){e.which===l.g&&u.isTooltipVisible()?(u.hideTooltip(),e.stopPropagation()):e.which!==l.t&&e.which!==l.f||"true"===u.attrs.tooltipOpenOnActivation&&(u.isTooltipVisible()?u.hideTooltip():(u.showTooltip(),e.stopPropagation()))})}return e.prototype.isTooltipVisible=function(){return this.getTooltip()&&"false"===this.getTooltip().attr("aria-hidden")},e.prototype.cancelTimeout=function(){this.timeout&&this.timeoutService.cancel(this.timeout)},e.prototype.showTooltip=function(){var e=this;this.tooltipCreated||(this.addTooltipToDom(),this.attrs.tooltipInitImmediate)?(this.getTriggerElement().attr("title",""),(o.isUndefined(this.attrs.tooltipOnOverflowOnly)||"true"===this.attrs.tooltipOnOverflowOnly&&"true"===o.element(this.getTriggerElement().children()[0]).attr("data-overflowed"))&&(this.cancelTimeout(),this.hideAllTooltips(),this.positionTooltip(),this.getTooltip().attr("aria-hidden","false"),this.postShowTooltip())):this.timeoutService(function(){e.showTooltip()},this.scope,100)},e.prototype.hideTooltip=function(){this.tooltipCreated&&this.getTooltip().attr("aria-hidden","true").css({top:0,left:0})},e.prototype.hideAllTooltips=function(){i("body").find(".enhanced-tooltip").attr("aria-hidden","true").css({top:0,left:0})},e.prototype.addTooltipToDom=function(){var e=void 0===this.attrs.tooltipCenterContent||"true"===this.attrs.tooltipCenterContent?"enhanced-tooltip tooltip-max-width tooltip-center-content":"enhanced-tooltip tooltip-max-width",t=i('<span class="'+e+'" aria-hidden="true" role="tooltip" id="'+this.controlId+'">'+this.getPipHtml()+"</span>");this.addTooltipStyles(t),this.addTooltipContent(t),this.addTooltipEvents(t),this.addTooltipClose(t),this.$body.append(t),this.getTriggerElement().attr("aria-describedby",this.controlId),this.tooltipCreated=!0},e.prototype.getPipHtml=function(){var e=this.isRTL()?"is-rtl":"";return"true"===this.attrs.tooltipDisablePip?"":'<span class="enhanced-tooltip-pip '+e+'"></span>'},e.prototype.isRTL=function(){return this.localizeService.isRTL(this.scope)},e.prototype.getPipPadding=function(){return"true"===this.attrs.tooltipDisablePip?0:13},e.prototype.getTriggerElement=function(){return this.element},e.prototype.getTooltip=function(){if(!this.tooltip){var e=this.$body.find("#"+this.controlId);this.tooltip=e.length>0?e:null}return this.tooltip},e.prototype.updateTooltip=function(e){if(this.tooltipCreated){var t=this.getTooltipPip()||"";this.getTooltip().html("").append(t).append(document.createTextNode(e))}},e.prototype.getTooltipPip=function(){return this.pip||(this.pip=this.getTooltip().find(".enhanced-tooltip-pip")),this.pip},e.prototype.positionTooltip=function(){this.getTooltipPip().removeClass(this.adjustedTooltipPosition);var t=this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()/2;switch(this.checkPositionInBoundary(t),this.adjustedTooltipPosition){case"top-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()/2,null);break;case"top-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-this.getTooltip().outerWidth()+20,t-e.TOOLTIP_PIP_PADDING);break;case"top-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding(),t-20,t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING);break;case"bottom-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()/2,null);break;case"bottom-left":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING,t-e.TOOLTIP_PIP_PADDING);break;case"bottom-right":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getPipPadding(),t-e.TOOLTIP_PIP_PADDING,t-this.getTooltip().outerWidth()+e.TOOLTIP_PIP_PADDING);break;case"right-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"right-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"right-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding(),this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding());break;case"left-center":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()/2,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-top":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-this.getTooltip().outerHeight()+e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding());break;case"left-bottom":this.applyPosition(this.getTooltip(),this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()/2-e.TOOLTIP_PIP_PADDING,this.getTriggerElement().offset().left-this.getTooltip().outerWidth()-this.getPipPadding(),this.getTriggerElement().offset().left+this.getTriggerElement().outerWidth()+this.getPipPadding())}this.getTooltipPip().addClass(this.adjustedTooltipPosition)},e.prototype.applyPosition=function(e,t,n,r){var i=this.adjustLeftPercentage(n,r),o=this.ensureTopInBounds(t);e.css({top:o||"auto",left:this.isRTL()?i.rtlLeft||"auto":i.left||"auto"})},e.prototype.ensureTopInBounds=function(t){var n=t+this.getTooltip().outerHeight();return this.getWindowHeight()-n<e.TOOLTIP_VIEWPORT_EDGE_PADDING?t=this.getWindowHeight()-this.getTooltip().outerHeight()-e.TOOLTIP_VIEWPORT_EDGE_PADDING:t<e.TOOLTIP_VIEWPORT_EDGE_PADDING&&(t=e.TOOLTIP_VIEWPORT_EDGE_PADDING),t},e.prototype.adjustLeftPercentage=function(e,t){if(o.isDefined(this.attrs.tooltipLeftAdjustPercent)){var n=this.getTriggerElement().outerWidth()/100*parseInt(this.attrs.tooltipLeftAdjustPercent,10);e+=n,t-=n}return{left:e,rtlLeft:t}},e.prototype.checkPositionInBoundary=function(e){var t=this.tooltipPosition.split("-");"bottom"!==t[0]&&"top"!==t[0]||(this.getTriggerElement().offset().top+this.getTriggerElement().outerHeight()+this.getTooltip().outerHeight()+this.getPipPadding()>this.getWindowHeight()?t[0]="top":this.getTriggerElement().offset().top-this.getTooltip().outerHeight()-this.getPipPadding()<0&&(t[0]="bottom"),e+this.getTooltip().outerWidth()/2>this.getWindowWidth()?t[1]="left":e-this.getTooltip().outerWidth()/2<0?t[1]="right":t[1]=t[1]?t[1]:"center"),this.adjustedTooltipPosition=t.join("-")},e.prototype.getWindowWidth=function(){return i(window).width()},e.prototype.getWindowHeight=function(){return i(window).height()},e.prototype.addTooltipClose=function(e){var t=this,n=e.find(".close-icon");n.length>0&&n.on("click",function(){t.hideTooltip()})},e.prototype.addTooltipStyles=function(e){},e.prototype.addTooltipContent=function(e){e.append(document.createTextNode(this.getTriggerElement().attr("title")))},e.prototype.addTooltipEvents=function(e){},e.prototype.postShowTooltip=function(){},e.$inject=["scope","element","attrs",s.serviceName,a.b,u.b],e.TOOLTIP_PIP_PADDING=20,e.TOOLTIP_VIEWPORT_EDGE_PADDING=20,e.initEnhancedTooltipEvents=r.once(function(){var e=r.throttle(function(){i("body").find(".enhanced-tooltip").attr("aria-hidden","true")},500);document.addEventListener("scroll",e,!0),i(window).resize(e),i("body").click(e)}),e}(),m=function(){function e(t){var n=this;this.$injector=t,this.restrict="A",this.scope={},this.link=function(t,r,o){c.a(o.enhancedTooltip)?t.tooltip=n.$injector.instantiate(f,{scope:t,element:r,attrs:o}):(e.instanceCount++,e.ensureEvents(),r.one("mouseover",function(e){var t=i(e.currentTarget);null==t.attr("data-tooltip")&&(t.attr("data-tooltip",""),t.parent().foundation({tooltip:{disable_for_touch:!0}}))}),t.$on("$destroy",function(){e.instanceCount--,0===e.instanceCount&&e.unregisterEvents(),r.foundation("tooltip","off")}))}}return e.ensureEvents=function(){function t(){o.element("span.tooltip:visible").hide(),o.element(".button-with-active-tooltip").removeClass("open")}e.eventHandlers||(e.eventHandlers={click:t,blur:t,keyup:function(e){i.Event(e).keyCode===l.g&&t()}},Object.keys(e.eventHandlers).forEach(function(t){document.addEventListener(t,e.eventHandlers[t],!0)}))},e.unregisterEvents=function(){Object.keys(e.eventHandlers).forEach(function(t){document.removeEventListener(t,e.eventHandlers[t],!0)}),e.eventHandlers=null},e.instanceCount=0,e.eventHandlers=null,e.$inject=["$injector"],e}();o.module(p,[s.moduleName,a.a,u.a]).directive("bbTooltip",["$injector",function(e){return e.instantiate(m)}])},fMh7:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-small-calendar",use:"icon-small-calendar-usage",viewBox:"0 0 16 16",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="icon-small-calendar"><path d="M1 15h14V2H1v13zM5 1v1h6V1H5zM5 12h1M1 6h14M5 9h1M10 12h1M10 9h1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});i.add(o);e.exports=o},fYJU:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return u});var r=n("mrSG"),i=n("IbG+"),o=n("pjml"),s=n("Qbdf"),a="ultra.service.context.user",u="contextUser",c=function(){function e(e,t,n){this.$window=e,this.UserModel=t,this.contextCourse=n}return Object.defineProperty(e.prototype,"userId",{get:function(){return this.contextCourse.isInIframeOfPreviewMode()?this.contextCourse.previewStatus.user.id:this._userId||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userModel",{get:function(){return this.contextCourse.isInIframeOfPreviewMode()?this.contextCourse.previewStatus.user:(this._userModel||(this._userModel=this.getInitialUserModel(),this._userId=this._userModel.id),this._userModel)},enumerable:!0,configurable:!0}),e.prototype.update=function(){var e=this;return this.UserModel.$find("me",{expand:"systemRoles"}).$then(function(t){return e._setUserModel(t)})},e.prototype.getInitialUserModel=function(){return this.$window.__initialContext?this.UserModel.$buildRaw(this.$window.__initialContext.user):this.UserModel.$find("me",{expand:"systemRoles"})},e.prototype._setUserId=function(e){return this._userId=e,this._userId},e.prototype._setUserModel=function(e){return this._userModel=e,this._userId=e?e.id:null,this._userModel},e.$inject=["$window",o.Qb.serviceName,s.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(c);i.module(a,[o.R]).service(u,c)},fid7:function(e,t){e.exports='<div class="dropdown-directive">\n  <select id="{{::listId}}" ng-if="::dropdown.useNativeSelect()" ng-model="dropdown.selectedItem"\n          ng-options="item.name disable when item.isHeader for item in itemList"\n          ng-class="{\'drowdown-group\': listKind === \'group\'}"\n          ng-change="dropdown.clickItem($event)" analytics-id="directives.dropdown.item.select">\n    \x3c!--for the listkind=group, ios mobile will show a blank option--\x3e\n    <option ng-if="dropdown.shouldHaveBlankOption(listKind)" class="default-option" value="" analytics-id="directive.dropdown.option"></option>\n  </select>\n\n  <ul ng-attr-role="{{dropdown.getRole()}}"\n      ng-class="{\'feature-filter\': listKind !== \'custom\', \'selection-full-width\': selectionFullWidth(), \'force-above\': forceAbove}"\n      id="{{::listId}}" ng-if="::!dropdown.useNativeSelect()" class="f-dropdown ignore-accordion" data-dropdown-content\n      aria-hidden="true" aria-autoclose="true" tabindex="-1">\n    <li class="list-header" ng-if="listHeader">\n      <a href="javascript:void(0);"\n         analytics-id="{{::analyticsIdTagPrefix}}.listHeader.link"\n      >\n        {{listHeader}}\n      </a>\n    </li>\n    <li role="presentation" ng-repeat="item in itemList" ng-if="listKind === \'filter\'"\n        ng-class="{\'item-selected\': selectedItem === item}"\n        class="{{item.extraClass}}"\n    >\n      <a href="javascript:void(0);" \n         role="option" \n         aria-selected="{{selectedItem === item}}" \n         aria-setsize="{{itemList.length}}" \n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         class="js-filter-id-{{::item.index}}" \n         data-filter-id="{{::item.nature.toString()}}"\n         ng-click="dropdown.selectItem(item)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name.split(\' \').join(\'\')}}.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n        <i></i>\n      </a>\n    </li>\n    <li ng-repeat="item in itemList" ng-if="listKind === \'avatar-list\'">\n      <a href="javascript:void(0);" \n         class="item-container"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.avatar.link">\n        <div class="info-container">\n          <div class="avatar-container">\n            <bb-avatar user="item" inactive="!dropdown.isUserCourseAvailable(item.id)"></bb-avatar>\n          </div>\n          <div class="username-container">\n            <bb-username user="item" format="short"></bb-username>\n            <div ng-if="selectedItem === item" class="sub-text" ng-bind-html="selectedText"></div>\n          </div>\n        </div>\n      </a>\n    </li>\n    <li role="presentation" ng-if="listKind === \'group\'" ng-repeat="item in itemList"\n        ng-class="{\'group-header-li\': item.isHeader }">\n      <a href="javascript:void(0);" \n         role="option" \n         aria-setsize="{{itemList.length}}" \n         aria-posinset="{{itemList.indexOf(item) + 1}}"\n         ng-class="{\'group-header\': item.isHeader}" \n         ng-attr-tabindex="{{ item.isHeader ? -1 : 0 }}"\n         ng-click="dropdown.selectItem(item, $event)"\n         analytics-id="{{::analyticsIdTagPrefix}}.{{item.name}}.group.link">\n        <span class="ellipse" title="{{item.name}}">{{item.name}}</span>\n      </a>\n    </li>\n    <div bb-dropdown-transclude></div>\n  </ul>\n</div>\n'},fm95:function(e,t,n){"use strict";n.r(t),n.d(t,"CREATE_CONTENT_ID",function(){return k}),n.d(t,"FolderContentHandlerIcon",function(){return T}),n.d(t,"FileContentHandlerType",function(){return I}),n.d(t,"ForumAttacherAction",function(){return E}),n.d(t,"StateType",function(){return $}),n.d(t,"SAFE_ASSIGN_KEY",function(){return P}),n.d(t,"ScormScoringMethod",function(){return A}),n.d(t,"ScormLearningStandard",function(){return x}),n.d(t,"serviceName",function(){return D});var r=n("mrSG"),i=(n("TeAI"),n("LvDl")),o=n("IbG+"),s=n("5MwF"),a=n("wd/R"),u=n("oSB+"),c=n.n(u),l=n("4nF1"),d=n("pjml"),p=n("yCC5"),f=n("Rjd/"),m=n("eUpQ"),h=n("nkTj"),g=n("+O05"),v=n("94iD"),b=n("z1U9");n.d(t,"ContentHandler",function(){return b.ContentHandler}),n.d(t,"ContentVisibility",function(){return b.ContentVisibility}),n.d(t,"Visibility",function(){return b.ContentVisibility}),n.d(t,"ILearnCourseContent",function(){return b.ILearnCourseContent}),n.d(t,"ILearnCourseContentDetail",function(){return b.ILearnCourseContentDetail}),n.d(t,"ILearnAssignedGroup",function(){return b.ILearnAssignedGroup}),n.d(t,"ILearnSingleFile",function(){return b.ILearnSingleFile});var y=n("f8ya"),S=n("817J");n.d(t,"AssessmentType",function(){return S.a});var C=n("pqmn");n.d(t,"ContentRootNode",function(){return C.a});var w=n("r6n2");n.d(t,"DeployedAssessmentType",function(){return w.a});var $,k="create",T=function(e){function t(t){var n=e.call(this,t)||this;return n.iconClass=t,n}return r.__extends(t,e),t.OpenFolder=new t("img-icon-folder-open"),t.ClosedFolder=new t("img-icon-folder"),t}(c.a),I=function(e){function t(t,n){var r=e.call(this,t.join())||this;return r.mimeTypeKeywords=t,r.iconClass=n,r}return r.__extends(t,e),t.getIconClassByFileMIMEType=function(e){if(e&&e.trim())for(var n=e.toLowerCase(),r=t.getValues(),i=0;i<r.length;i++){var o=r[i];if(o.mimeTypeKeywords.some(function(e){return n.indexOf(e)>=0}))return o.iconClass}return""},t.Pdf=new t(["pdf"],"img-icon-pdf"),t.Presentation=new t(["powerpoint","presentation"],"img-icon-presentation"),t.Spreadsheet=new t(["excel","spreadsheet"],"img-icon-spreadsheet"),t.Zip=new t(["zip"],"img-icon-zip"),t.Audio=new t(["audio"],"img-icon-audio"),t.Image=new t(["image"],"img-icon-photo"),t.Video=new t(["video"],"img-icon-video"),t.Document=new t(["word","document","text","rtf"],"img-icon-document-text"),t}(c.a),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.ADD=new t("ADD"),t.DELETE=new t("DELETE"),t}(c.a);!function(e){e.None="None",e.Started="Started",e.Completed="Completed"}($||($={}));var P="mdb-sa",A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.SCORE=new t("SCORE"),t.COMPLETION=new t("COMPLETION"),t.SATISFACTION=new t("SATISFACTION"),t}(c.a),x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.AICC=new t("AICC"),t.CMI5=new t("CMI5"),t.SCORM_11=new t("SCORM_11"),t.SCORM_12=new t("SCORM_12"),t.SCORM_2004_2ND_EDITION=new t("SCORM_2004_2ND_EDITION"),t.SCORM_2004_3RD_EDITION=new t("SCORM_2004_3RD_EDITION"),t.SCORM_2004_4TH_EDITION=new t("SCORM_2004_4TH_EDITION"),t.TINCAN=new t("TINCAN"),t}(c.a),D=p.A;f.a.factory(D,["restmod",h.d,"$q","$rootScope","$ngRedux",function(e,t,n,r,u){var c=e.model().mix({depth:{mask:!0},children:{mask:!0},softLinks:{mask:!0},"adaptiveReleaseRules.startDate":{serialize:"date"},"adaptiveReleaseRules.endDate":{serialize:"date"},position:{mask:"CU"},selfEnrollmentGroups:{mask:"CU"},positionBefore:{mask:"R"},positionAfter:{mask:"R"},hasMoreChildren:{mask:!0},launchInNewWindow:{init:!0},ui:{mask:!0,init:function(){return{hasData:!1,isDeleted:!1,isOpen:!1}}},$extend:{Record:{getDeployedAssessment:function(){if(!this.contentDetail)throw new Error("Cannot get deployed assessment if content detail is null");var e=this.contentHandler&&w.a.parseByContentHandler(this.contentHandler.toString());if(e){var t=this.contentDetail[this.contentHandler.toString()];return t.gradingColumn?t:t[e.toString()]}},getAssociatedGradingColumn:function(e){var t=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];if(t&&t.gradingColumn)return t.gradingColumn;if(t){var n=this.getDeployedAssessment();if(n)return n.gradingColumn}},getDueDate:function(){return this.genericReadOnlyData&&this.genericReadOnlyData.dueDate},getContentHandlerByIconUrl:function(){var e=this.iconUrl.match("^/.*/(.*)_.*..*$"),t=b.ContentHandler.Unknown;if(e)switch(e[1]){case"assignment":t=b.ContentHandler.UltraAssignment;break;case"discussion":t=b.ContentHandler.Discussion;break;case"file":t=b.ContentHandler.File;break;case"folder":t=b.ContentHandler.Folder;break;case"link":t=b.ContentHandler.ExternalLink;break;case"test":t=b.ContentHandler.TestLink}return t},setupAssessmentContentDetail:function(e,t){var n=this.contentHandler.toString(),r=S.a.parseByContentHandler(n),i=w.a.parseByContentHandler(n);if(r&&i){this.contentDetail={},this.contentDetail[n]={};var o=a(m.a.getServerTime()).startOf("day").add({days:1}).toDate();this.contentDetail[n][i.toString()]={deployedAssessmentType:i.toString(),assessment:{title:this.title,type:r.toString()},deploymentSettings:{feedbackSettings:{as:{options:["USER_ANSWERS","INSTRUCTOR_FEEDBACK","SCORE"]}}},gradingColumn:{columnName:this.title,possible:0,visible:!1,gradebookCategoryId:t?t.id:null,gradebookCategory:t,gradingSchemaId:e,courseId:this.courseId,dueDate:o},permissions:{modify:!0}}}},createScormSettings:function(e){var t={method:"POST",url:this.$url()+"/scormSettings",data:e},r=n.defer();return this.$scope.$collection().$send(t,function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise},conditionalReleaseAsync:function(e,t,n,r){var i=n?"/rules/"+n+"/conditions":"";r&&(i+="/"+r);var o={method:e,url:this.$url()+"/adaptiveReleaseRules"+i};if(t&&"DELETE"!==e&&(o.data=t),"GET"===e)return this.$scope.$collection().$send(o).$then(function(e){return e.$unwrap(e.$response.data)});if("DELETE"===e){var s=b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)?this.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId:this.id;t&&t.type?u.dispatch(b.actions.content.deleteAdaptiveReleaseRuleInStore(s,t.type)):u.dispatch(b.actions.content.deleteAdaptiveReleaseRulesInStore(s))}return this.$scope.$collection().$send(o)},getChildren:function(e){e=e||{};var n=this,r=[];return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:{offset:e.offset,limit:e.limit,contentHandler:e.contentHandler,recursive:e.recursive,onlyUltraConvertableContents:e.onlyUltraConvertableContents,expand:"assignedGroups,selfEnrollmentGroups.group",sort:e.sort,"@view":"Summary"}}).$then(function(n){if(s.a.features.learningModule||i.remove(n.$response.data.results,function(e){return b.ContentHandler.LearningModule.isEqualTo(e.contentHandler)}),e.resolveLinks&&n.$response.data.results&&n.$response.data.results.length){var o=t.getDataMixin(n.findMany.bind(n),"linkSourceId","linkSource");if(n.$response.data.results.forEach(function(e){b.ContentHandler.CourseLink.isEqualTo(e.contentHandler)&&e.contentDetail&&r.push({linkId:e.id,linkSourceId:e.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId})}),r.length)return o(r,{}).then(function(){return n})}}).$then(function(e){e.$unwrap(e.$response.data);var t={};r.forEach(function(e){t[e.linkId]=e.linkSource}),e.forEach(function(e){e.depth=n.depth+1,t[e.id]&&(e.ui.linkSource=t[e.id])})})},getClassicContent:function(){return this.$scope.$collection().$send({method:"GET",url:this.$scope.$url(),params:{onlyUltraConvertableContents:"true"}}).$then(function(e){e.$unwrap(e.$response.data)})},getLinkContentSource:function(e){if(e=e||{},b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.contentDetail)return this.ui.linkSource&&this.ui.linkSource.$pk&&!e.fromServer?this.ui.linkSource:(this.ui.linkSource=this.$scope.$new(this.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId),this.contentDetail[b.ContentHandler.CourseLink.toString()].linkSourceId?this.ui.linkSource.$fetch():this.ui.linkSource)},getChildrenCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/children/count"}).$asPromise().then(function(e){return e.$response.data.count})},hasGradedContentItems:function(){return this.$scope.$build().$send({method:"GET",url:this.$url()+"/hasGrades"}).$asPromise().then(function(e){return e.$response.data.result})},isCurrentUserEligibleToAlignGoals:function(){return this.permissions&&!0===this.permissions.createLearningStandardsAlignment&&this.permissions.edit},getContentIdForGoalAlignment:function(){return"blackboard.data.content.Content;"+this.id},getContentTitleForGoalAlignment:function(){return this.title},getSibling:function(e,t){var n=this;return this.$scope.$build().$send({method:"GET",url:this.$url()+"/"+e,params:{lessonContentId:t}}).$asPromise().then(function(e){return e.$response.data.id?n.$scope.$buildRaw(e.$response.data):null})},getAttemptCount:function(){var e=this.getAssociatedGradingColumn();return this.$scope.$collection().$send({method:"GET",url:e["@id"]+"/attempts/count"}).$suppressErrorDialog().$asPromise().then(function(e){return e.$response.data.count})},getTimeLimit:function(){return this.getDeployedAssessment()&&this.getDeployedAssessment().exceptions&&this.getDeployedAssessment().exceptions.length>0?this.getDeployedAssessment().exceptions[0].timeLimit:this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings?this.getDeployedAssessment().deploymentSettings.timeLimit:void 0},getExtraTime:function(){var e=this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings;if(e&&e.softTimeLimit)return e.timeLimit-e.softTimeLimit},getTimedTestDetail:function(){var e=this.contentDetail&&this.getDeployedAssessment()&&this.getDeployedAssessment().deploymentSettings,t=null,n=null,r=e?this.getDeployedAssessment().deploymentSettings.softTimeLimit:null;e&&(n=this.getDeployedAssessment().deploymentSettings.timeLimit,t=this.getDeployedAssessment().deploymentSettings.timerCompletion);var i={timerCompletion:t,timeLimitSec:n?60*n:null,softLimitSec:r?60*r:null};return new v.a(i)},getSoftLinks:function(e){e=e||{};var t=this;return this.$scope.$collection().$send({method:"GET",url:this.$url()+"/softLinks",params:{offset:e.offset,limit:e.limit,label:e.label}},function(e){this.$unwrap(e.data),t.softLinks=this})},update:function(){var e=this.$scope.$build();for(var t in this)e[t]=this[t];return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id,data:e})},canEdit:function(){return this.permissions&&this.permissions.edit},canEditPartial:function(){var e=this.canEdit();if(this.contentDetail){var t=this.getDeployedAssessment();if(t){var n=t.permissions;n&&(e=e||n.modifyDueDate||n.view)}}return!!e},canEditAvailability:function(){return this.canEdit()||this.permissions&&this.permissions.modifyAvailability},canViewAsInstructor:function(){return this.canEdit()||this.permissions&&this.permissions.viewDesigner},canDelete:function(){return this.permissions&&this.permissions.delete},hasConversation:function(){return!!this.attachedForumLink},hasDueDateException:function(){return null!=this.dueDateExceptionType&&this.dueDateExceptionType!==y.c.NoAccommodation},hasGradingColumn:function(){return!!this.getAssociatedGradingColumn()},hasDueDate:function(){return this.genericReadOnlyData&&this.genericReadOnlyData.hasGradeColumn},isVisible:function(){return this.visibility&&b.ContentVisibility.Visible.isEqualTo(this.visibility)},isRestricted:function(){return this.visibility&&b.ContentVisibility.Restricted.isEqualTo(this.visibility)},isStarted:function(){return this.state===$.Started},isCompleted:function(){return this.state===$.Completed},isHidden:function(){return this.visibility&&b.ContentVisibility.Hidden.isEqualTo(this.visibility)},isVisibleToStudents:function(){return this.isAvailable&&!this.isPartiallyVisible&&!this.isConditionalRelease()},isHiddenFromStudents:function(){return!this.isAvailable&&!this.isPartiallyVisible},isConditionalRelease:function(){return!(!this.isAvailable||!(this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules.every(function(e){return e.criteria&&e.criteria.length})||this.isLearningModule()&&this.contentDetail[d.r.ContentHandler.LearningModule.toString()].isSequential))},isForcedSequenceModule:function(){return this.isLearningModule()&&this.contentDetail[d.r.ContentHandler.LearningModule.toString()].isSequential},isInForcedSequenceModule:function(){return this.inSequence},isForcedSequenceItem:function(){return this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules&&this.adaptiveReleaseRules.rules[0]&&!!i.find(this.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"})},isActiveForcedSequenceModule:function(){return this.isForcedSequenceModule()&&this.hasProgressed},applyForcedSequence:function(e){this.contentDetail[d.r.ContentHandler.LearningModule.toString()].isSequential=e,this.children&&(this.children.forEach(function(t){t.inSequence=e,t.children&&t.children.forEach(function(t){return t.inSequence=e})}),this.children.filter(function(e){return e.isAvailable}).forEach(function(t){t.isPartiallyVisible=e,e?i.has(t,"adaptiveReleaseRules.rules[0].criteria[0]")?t.adaptiveReleaseRules.rules[0].criteria.push({type:"Pre_Content"}):i.set(t,"adaptiveReleaseRules.rules[0].criteria[0]",{type:"Pre_Content"}):t.adaptiveReleaseRules&&t.adaptiveReleaseRules.rules&&t.adaptiveReleaseRules.rules[0].criteria.length&&(i.remove(t.adaptiveReleaseRules.rules[0].criteria,{type:"Pre_Content"}),t.adaptiveReleaseRules.rules[0].criteria.length&&(t.isAvailable=!0)),r.$broadcast("refresh-conditional-release-rules",t)}))},isConditionalReleaseWithVisibleButNotAccessible:function(){return this.isConditionalRelease()&&this.isPartiallyVisible},isConditionalReleaseWithHiddenFromStudent:function(){return this.isConditionalRelease()&&!this.isPartiallyVisible},isConditionalReleaseLocked:function(){var e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isRestricted()},isConditionalReleaseUnlocked:function(){var e=this.adaptiveReleaseRules&&this.adaptiveReleaseRules.rules;return e&&e.length>0&&this.isVisible()},getVisibilityAsStudent:function(){return this.isVisibleToStudents()?b.ContentVisibility.Visible:this.isConditionalRelease()?b.ContentVisibility.Restricted:b.ContentVisibility.Hidden},getContentDisplay:function(){return l.a.create(this)},saveAlignedGoals:function(e){var t=this;return e&&(this.alignedGoals=e.map(function(e){return{goalId:e.id,isVisibleToStudent:!0,goal:e}})),this.$send({method:"PATCH",url:this.$url(),data:{alignedGoals:this.alignedGoals}}).$then(function(){t.$getPreviousVersion()&&(t.$getPreviousVersion().alignedGoals=t.alignedGoals)})},saveAssignedGroups:function(e){var t,n,r=this;void 0===e&&(e=!1);var i=this.getDeployedAssessment(),o=this.contentHandler.toString(),s=w.a.parseByContentHandler(o),a={assignedGroups:this.assignedGroups,isGroupContent:this.isGroupContent},u=!e&&i&&i.deploymentSettings&&i.deploymentSettings.id&&1===i.deploymentSettings.attemptCount;if(u){var c={id:i.deploymentSettings.id,attemptCount:i.deploymentSettings.attemptCount,feedbackSettings:i.deploymentSettings.feedbackSettings};a.contentDetail=((t={})[o]=((n={})[s.toString()]={deployedAssessmentType:s.toString(),deploymentSettings:c},n),t)}return this.withParams({expand:"assignedGroups,selfEnrollmentGroups.group"}).$send({method:"PATCH",url:this.$url(),data:a},function(e){this.isGroupContent=e.data.isGroupContent,this.assignedGroups=e.data.assignedGroups,this.selfEnrollmentGroups=e.data.selfEnrollmentGroups,u&&(i.gradingColumn.multipleAttempts=e.data.contentDetail[o][s.toString()].gradingColumn.multipleAttempts)}).$then(function(){var e=r.$getPreviousVersion();if(e&&(e.isGroupContent=r.isGroupContent,e.assignedGroups=r.assignedGroups,e.selfEnrollmentGroups=r.selfEnrollmentGroups,u)){var t=e.contentDetail[o][s.toString()];t.deploymentSettings.attemptCount=i.deploymentSettings.attemptCount,t.gradingColumn.multipleAttempts=i.gradingColumn.multipleAttempts}})},removeTimeLimit:function(e){var t,n,r=this,i=this.contentHandler.toString(),o=w.a.parseByContentHandler(i);if(e&&o)return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:(t={},t[i]=(n={},n[o.toString()]={deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{attemptCount:e.attemptCount?e.attemptCount:1,timerCompletion:e.timerCompletion?e.timerCompletion:d.d.TimerCompletion.C}},n),t)}},function(e){delete this.getDeployedAssessment().deploymentSettings.timeLimit,delete this.getDeployedAssessment().deploymentSettings.softTimeLimit,this.contentDetail[i].test.deploymentSettings.timerCompletion=e.data.contentDetail[i].test.deploymentSettings.timerCompletion}).$then(function(){r.$getPreviousVersion()&&(delete r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.timeLimit,delete r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.softTimeLimit,r.$getPreviousVersion().contentDetail[i].test.deploymentSettings.timerCompletion=r.contentDetail[i].test.deploymentSettings.timerCompletion)})},updateProctoringSettings:function(e){var t=this,r=n.defer(),i=function(e){if(g.a.getProctoredAssessmentSettings(t)&&g.a.getProctoredAssessmentSettings(e)){var n=e.contentHandler.toString(),r=e.contentDetail[n].test.deploymentSettings,i=t.contentDetail[n].test.deploymentSettings;if(i.proctoringServiceHandle=r.proctoringServiceHandle,i.proctoringServiceVendor=r.proctoringServiceVendor,i.proctoringDownloadUrl=r.proctoringDownloadUrl,i.isSecureBrowserRequiredToTake=r.isSecureBrowserRequiredToTake,i.isSecureBrowserRequiredToReview=r.isSecureBrowserRequiredToReview,i.isWebcamRequired=r.isWebcamRequired,t.$getPreviousVersion()){var o=t.$getPreviousVersion().contentDetail[n].test.deploymentSettings;o.proctoringServiceHandle=r.proctoringServiceHandle,o.proctoringServiceVendor=r.proctoringServiceVendor,o.proctoringDownloadUrl=r.proctoringDownloadUrl,o.isSecureBrowserRequiredToTake=r.isSecureBrowserRequiredToTake,o.isSecureBrowserRequiredToReview=r.isSecureBrowserRequiredToReview,o.isWebcamRequired=r.isWebcamRequired}}};return e?(i(e),r.resolve(this)):this.withParams({fields:"contentHandler,contentDetail"}).$send({method:"GET",url:this.$url()},function(e){i(e.data),r.resolve(t)},function(){r.reject("Failed to fetch latest when updating proctoring settings.")}),r.promise},updateProctoringAssociation:function(e){var t,r,i=this,o=this.contentHandler.toString(),s=w.a.parseByContentHandler(o),a=n.defer();return this.$send({method:"PATCH",url:this.$url(),data:{contentDetail:(t={},t[o]=(r={},r[s.toString()]={deployedAssessmentType:this.getDeployedAssessment().deployedAssessmentType,deploymentSettings:{proctoringServiceHandle:e}},r),t)}},function(e){i.updateProctoringSettings(e.data).then(function(){a.resolve(i)})},function(){a.reject("Failed to update proctoring association.")}),a.promise},getProctoringLaunchLink:function(e){var t=n.defer(),r=s.a.apiBasePath+"/v1/proctoring/contents/"+this.id;return e&&(r+="/attempts/"+e),r+="/launchLink",this.$send({method:"GET",url:r},function(e){t.resolve(e.data.launchLink)},function(){t.reject("Failed to fetch assessment launch link.")}),t.promise},getProctoringServiceVendor:function(){var e=g.a.getProctoredAssessmentSettings(this);return null==e?null:e.proctoringServiceVendor||null},getProctoringServiceHandle:function(){var e=g.a.getProctoredAssessmentSettings(this);return null==e?null:e.proctoringServiceHandle||null},isSecureBrowserRequiredToTake:function(){var e=g.a.getProctoredAssessmentSettings(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isSecureBrowserRequiredToTake)},isSecureBrowserRequiredToReview:function(){var e=g.a.getProctoredAssessmentSettings(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isSecureBrowserRequiredToReview)},isWebcamRequired:function(){var e=g.a.getProctoredAssessmentSettings(this);return null!=e&&!(!e.proctoringServiceHandle||!e.isWebcamRequired)},getProctoringDownloadUrl:function(){var e=g.a.getProctoredAssessmentSettings(this);return null==e?null:e.proctoringDownloadUrl||null},userNeedsToSelfEnrollInGroup:function(){return this.isGroupContent&&this.assignedGroups&&0===this.assignedGroups.length&&this.selfEnrollmentGroups&&this.selfEnrollmentGroups.length>0},setVisibility:function(e,t){switch(void 0===t&&(t=!0),this.adaptiveReleaseRules={startDate:null,endDate:null},e){case b.ContentVisibility.Visible:this.isAvailable=!0,this.isPartiallyVisible=!1;break;case b.ContentVisibility.Hidden:this.isAvailable=!1,this.isPartiallyVisible=!1;break;case b.ContentVisibility.Restricted:this.isAvailable=!0,this.isPartiallyVisible=t}},setTitle:function(e){this.title=e;var t=this.getAssociatedGradingColumn();t&&(t.columnName=e);try{this.getDeployedAssessment().assessment.title=e}catch(e){}},isUiFolder:function(){return b.ContentHandler.Folder.isEqualTo(this.contentHandler)&&!this.isBbPage()},isFolder:function(){return!!b.ContentHandler.Folder.isEqualTo(this.contentHandler)||!!b.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isBbPage:function(){if(this.contentDetail){var e=this.contentDetail[b.ContentHandler.Folder.toString()];return!!(b.ContentHandler.Folder.isEqualTo(this.contentHandler)&&e&&e.isBbPage)||!!b.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0}return!1},isRoot:function(){return C.a.ROOT.isEqualTo(this.$pk)||C.a.INTERACTIVE.isEqualTo(this.$pk)},isAssignment:function(){return b.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)},isDocument:function(){return b.ContentHandler.Folder.isEqualTo(this.contentHandler)&&this.isBbPage()},isFile:function(){return b.ContentHandler.File.isEqualTo(this.contentHandler)},isLink:function(){return b.ContentHandler.ExternalLink.isEqualTo(this.contentHandler)},isLtiLink:function(){return b.ContentHandler.LtiLink.isEqualTo(this.contentHandler)},isTest:function(){return b.ContentHandler.TestLink.isEqualTo(this.contentHandler)},isScorm:function(){return b.ContentHandler.RusticiScorm.isEqualTo(this.contentHandler)},isGradedScorm:function(){return this.isScorm()&&!!this.getAssociatedGradingColumn()},isDiscussion:function(){return!!b.ContentHandler.Discussion.isEqualTo(this.contentHandler)||b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)&&this.isDiscussionInOutline()},isLearningModule:function(){return!!b.ContentHandler.LearningModule.isEqualTo(this.contentHandler)||!!b.ContentHandler.Unknown.isEqualTo(this.contentHandler)&&void 0},isDiscussionInOutline:function(){return this.getContentHandlerByIconUrl().isEqualTo(b.ContentHandler.Discussion)},getSafeAssignAttrs:function(){return this.extensionAttributes[P]},isSafeAssignOn:function(){return this.extensionAttributes&&this.getSafeAssignAttrs()},isSafeAssignEnabled:function(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().checkAttempts},canStudentViewReports:function(){return this.isSafeAssignOn()&&this.getSafeAssignAttrs().canStudentViewReports},canSubmitToGlobalReferenceDatabase:function(){return this.isSafeAssignOn()&&!this.getSafeAssignAttrs().excludeSubmissions&&this.getSafeAssignAttrs().globalSearch},canHaveAttempts:function(){return b.ContentHandler.UltraAssignment.isEqualTo(this.contentHandler)||b.ContentHandler.TestLink.isEqualTo(this.contentHandler)||b.ContentHandler.LtiLink.isEqualTo(this.contentHandler)||b.ContentHandler.LtiPlacement.startsWith(this.contentHandler)||b.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)||b.ContentHandler.Discussion.isEqualTo(this.contentHandler)||b.ContentHandler.CourseLink.isEqualTo(this.contentHandler)||this.isScorm()},canHaveSharedGradingColumn:function(){return b.ContentHandler.PartnerCloud.isEqualTo(this.contentHandler)},applyAvailabilitySettings:function(e){this.adaptiveReleaseRules=e.adaptiveReleaseRules,this.isAvailable=e.isAvailable,this.isPartiallyVisible=e.isPartiallyVisible},applyGroupSettings:function(e){this.isGroupContent=e.isGroupContent,this.assignedGroups=e.assignedGroups,this.selfEnrollmentGroups=e.selfEnrollmentGroups},addAndRevealAtIndex:function(e){this.$moveTo(e),this.$reveal()},findInTreeById:function(e,t){return this.findLoadedNodeByIdAndCache(e,t)},findLoadedNodeByIdAndCache:function(e,t,n){return void 0===n&&(n=3),null!=t&&t.id===e||(t=this.findLoadedNodeById(e,n)),t},findLoadedNodeById:function(e,t){if(t<0)return null;if(null==e&&null==this.id||e===this.id)return this;if(this.children){t--;for(var n=0;n<this.children.length;n++){var r=this.children[n].findLoadedNodeById(e,t);if(r)return r}}},moveTo:function(e,t,n){if(this.id!==t&&this.id!==n){this.$scope.$remove(this),this.$scope.fixPositions(),null!=t&&(n=void 0);var r=e.children.getInsertionIndex(t,n,!1,e.hasMoreChildren);null!=t&&0===r&&(t="start"),null==n||r!==e.children.length||e.hasMoreChildren||(n="end"),e.children.$add(this,r),this.$scope=e.children,this.$scope.fixPositions(),this.positionBefore=t,this.positionAfter=n,this.parentId=e.id,this.depth=null!=e.depth?e.depth+1:void 0}},shouldRestrict:function(){return!this.canEdit()&&this.isRestricted()},isQuestionAnalysisAvailable:function(){return this.isAssignment()||this.isTest()},updateState:function(e,t){var i=this;void 0===t&&(t=!1);var o=n.when(this);return this.inSequence?(this.state=e,t&&(o=this.$send({method:"PATCH",url:this.$url()+"/states/me",data:{state:e}}).$asPromise()),o.then(function(){return r.$broadcast("update-state",i,e),i})):o}},Collection:{indexOfItemById:function(e){return this.$indexOf(function(t){return(t.id===e||null==t.id&&null==e)&&!t.ui.importPlaceholder})},buildAndRevealAtPosition:function(e,t){var n=this.getInsertionIndex(e.positionBefore,e.positionAfter);if(n>-1){var r=this.$build(t);return r.addAndRevealAtIndex(n),null!=e.positionBefore&&(r.positionBefore=e.positionBefore),null!=e.positionAfter&&null==e.positionBefore&&(r.positionAfter=e.positionAfter),r}},getInsertionIndex:function(e,t,n,r){var i=null==n||n,s=-1;return null!=e&&(s="start"===o.lowercase(e)?0:this.indexOfItemById(e),!i&&s<0&&(s=0)),s<0&&null!=t&&("end"===o.lowercase(t)?null==r||r||(s=this.length):(s=this.indexOfItemById(t))>=0&&s++,!i&&s<0&&(s=this.length)),s},fixPositions:function(){for(var e=0;e<this.length;e++)this[e].position=e}}},$hooks:{"after-request":function(e){200===e.status&&(e.config.params&&e.config.params.fields||e.data.adaptiveReleaseRules||(this.adaptiveReleaseRules=null))},"before-request":function(e){if(!["/ROOT","/count","/softLinks"].some(function(t){return i.endsWith(e.url,t)})&&"DELETE"!==e.method){e.params&&e.params.expand?i.includes(e.params.expand,"gradebookCategory")||(e.params.expand+=",gradebookCategory"):e.params=Object.assign({expand:"gradebookCategory"},e.params)}"PATCH"!==e.method&&"PUT"!==e.method||(e.data&&e.data.extensionAttributes&&(e.params&&e.params.expand?e.params.expand+=",extensionAttributes":e.params=Object.assign({expand:"extensionAttributes"},e.params)),e.data&&e.data.title&&this.extensionAttributes&&(e.data.extensionAttributes=this.extensionAttributes))}}});return c.$extendRecord(function(e,t){if(t.contentHandler&&b.ContentHandler.CourseLink.isEqualTo(t.contentHandler))return{getDueDate:function(){return this.getLinkContentSource()&&this.getLinkContentSource().getDueDate()},hasDueDate:function(){return this.getLinkContentSource()&&this.getLinkContentSource().hasDueDate()}}}),c.$extendRecord(function(e,t){if(t.contentHandler&&b.ContentHandler.LtiLink.isEqualTo(t.contentHandler))return{getDueDate:function(){return this.getAssociatedGradingColumn()&&this.getAssociatedGradingColumn().dueDate},hasDueDate:function(){return this.hasGradingColumn()}}}),c.$extendRecord(function(e,t){if(t.contentHandler&&b.ContentHandler.RusticiScorm.isEqualTo(t.contentHandler))return{getAssociatedGradingColumn:function(e){var t=this.getScormGradebookItems(),n=null;return(n=e?t.find(function(t){return t.columnId===e}):t.find(function(e){return e.root})||t[0])&&n.gradingColumn},getDueDate:function(){var e=this.getAssociatedGradingColumn();return e&&e.dueDate},hasDueDate:function(){return this.hasGradingColumn()},getScormGradebookItems:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.gradebookItems||[]},getScormLearningStandard:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.learningStandard||"UNKNOWN"},getScormAdvancedSettings:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return e&&e.advancedSettings||{}},getScormReport:function(){var e={method:"GET",url:this.$url()+"/scormReport"},t=n.defer();return this.$scope.$collection().$send(e,function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},isTinCan:function(){var e=this.contentDetail&&this.contentDetail[this.contentHandler.toString()];return!(!e||!x.TINCAN.isEqualTo(e.learningStandard))},hasReport:function(){return!this.isTinCan()&&!!this.getScormGradebookItems().length},setTitle:function(e){this.title=e;var t=this.getScormGradebookItems().find(function(e){return e.root});t&&(t.title=e,t.gradingColumn.columnName=e)}}}),c}])},fzj8:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("IbG+"),i=n("0JpG"),o=n("Qbdf"),s=n("UD9g"),a=n("Cxi4"),u=n("pjml"),c=n("TnpK"),l=n("g7Mf"),d=n("w9Zy"),p="ultra.course.engagement.router";r.module(p,[i.moduleName,c.b,a.a,s.b,l.b,o.b]).config([c.c,o.c,function(e,t){var r,p;e.peekState("discussion",{abstract:!0,url:"/discussion",resolve:(r={translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("features/course/content/course-content")),n.push(t.loadBundle("features/course/goal-alignment/goal")),e.all(n)}]},r[o.d]=t.resolve,r.canCreateAllContent=[a.b,c.d,function(e,t){return e.canCreateAllContent(t.nextParams.courseId)}],r.hasEditAvailabilityPermission=[a.b,c.d,function(e,t){return e.hasEditAvailabilityPermission(t.nextParams.courseId)}],r)}).peekState("discussion.view",{abstract:!0,url:"/{contentId:_[0-9]+_1|create}?courseId&parentId&position&positionBefore&positionAfter",panelClass:"full",pageTitle:"course.content.discussion",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(38),n.e(123),n.e(263)]).then(n.bind(null,"uypo"))},resolve:{translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),e.all(n)}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[l.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[l.c,function(e){e.destroy()}]}).peekState("discussion.view.with-grading",{url:"?view&disGroupId",panelClass:"full",views:{"engagement-edit@":{require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(251)]).then(n.bind(null,"m3My"))}},"engagement-grade@":{require:function(){return Promise.all([n.e(7),n.e(24),n.e(0),n.e(8),n.e(9),n.e(33),n.e(25),n.e(42),n.e(85)]).then(n.bind(null,"4Rme"))}}},onEnter:[c.d,d.e,function(e,t){e.isPeekPanelOpen()&&t.expandTopPanel()}],onExit:["$rootScope",function(e){e.$broadcast("deadline-refresh")}],peekStates:["conditional-release","content-market","course-group","discussion-details","discussion-participants","discussion-settings",s.a,"lti","message","rubric","rubric-evaluation","rubric-view","submission-list","view-exceptions","discussion-feedback"],peekViewName:"discussion-peek@",pageTitle:"course.content.discussion",resolve:{currentContent:[c.d,o.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==u.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}],currentColumn:[c.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==u.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n).$asPromise()}]}}).peekState("submission-list",{url:"/grading/:columnId/detail?participantId&contentId&disGroupId",panelClass:"full",require:function(){return Promise.all([n.e(7),n.e(0),n.e(8),n.e(9),n.e(38),n.e(149),n.e(255)]).then(n.bind(null,"nbFo"))},resolve:(p={translations:["$q",i.serviceName,function(e,t){var n=[];return n.push(t.loadBundle("features/course/engagement/course-engagement")),n.push(t.loadBundle("components/directives/grade/submission-list")),n.push(t.loadBundle("components/directives/grade/grade-input")),n.push(t.loadBundle("components/directives/grade/display-grade")),n.push(t.loadBundle("components/directives/discussion")),e.all(n)}]},p[o.d]=t.resolve,p.currentColumn=[c.d,o.d,function(e,t){var n=e.nextParams.columnId;if(n&&n!==u.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(n,{expand:"associatedRubrics"}).$asPromise()}],p.currentContent=[c.d,o.d,"$q",function(e,t,n){var r=e.nextParams.contentId?e.nextParams.contentId:e.nextParams.id;if(r&&r!==u.r.CREATE_CONTENT_ID)return t.contents.$find(r).$asPromise()}],p.memberships=[o.d,function(e){return e.memberships.$clear(),e.memberships.$fetch({expand:"user",roleBucket:"taking"}).$asPromise()}],p),pageTitle:"course.engagement.submissionTitle",peekStates:["message","discussion-feedback","rubric-evaluation"],peekViewName:"engagement-submissions-peek@"}).peekState("discussion-settings",{url:"/settings?contentId&focusEleId",require:function(){return Promise.all([n.e(0),n.e(38),n.e(123),n.e(266)]).then(n.bind(null,"W67U"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/engagement/discussion-settings")])}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[l.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[l.c,function(e){e.destroy()}],pageTitle:"course.engagement.discussionSettingsTitle",peekViewName:"discussion-group",allowChildPeekStates:!0,peekStates:["course-group","goal-picker-legacy","rubric","rubric-view"]}).peekState("discussion-participants",{url:"/participants",require:function(){return n.e(352).then(n.bind(null,"IrK9"))},pageTitle:"course.engagement.participantsTitle"}).peekState("discussion-details",{url:"/details",require:function(){return Promise.all([n.e(0),n.e(276)]).then(n.bind(null,"DTfl"))},pageTitle:"course.engagement.discussionDetailsTitle",peekStates:["discussion-feedback"]}).peekState("discussion-feedback",{url:"/feedback?forumId&isReadOnlyPanel&columnId",require:[function(){return Promise.all([n.e(24),n.e(33),n.e(42),n.e(393)]).then(n.bind(null,"pq88"))},function(){return Promise.all([n.e(7),n.e(24),n.e(0),n.e(8),n.e(9),n.e(33),n.e(25),n.e(42),n.e(85)]).then(n.bind(null,"4Rme"))}],resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}],offCanvasArgs:["offCanvasArgs",function(e){return e.overlay=!1,e.disableFocusHandling=!0,e}],currentCourseMemberships:"^courseMembershipsLoader",discussionInit:[l.c,"currentCourseMemberships",function(e,t){return e.init(t)}]},onExit:[l.c,function(e){e.destroy()}],pageTitle:"course.engagement.grade.feedback.viewFeedbackTitle"})}])},g66W:function(e,t,n){"use strict";function r(e,t,n){return n=n||"...",(e=e.trim()).length>t&&(e=e.slice(0,t)+n),e}function i(e,t,n){e=e.trim(),n=n||"...";var r=new RegExp("^(.{0,"+t+"})\\b.*$"),i=e.trim().replace(r,"$1");return e.length>t?i+n:i}function o(e,t,n){return n=n||"",e?e.replace(t,n):""}function s(e,t){return e&&t&&e.substring(e.length-t.length,e.length)===t||!1}function a(e,t){return 0===(e||"").indexOf(t)}n.d(t,"g",function(){return r}),n.d(t,"h",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"k",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"i",function(){return p}),n.d(t,"j",function(){return f}),n.d(t,"f",function(){return m});var u=document.createElement("textarea");function c(e){return u.innerHTML=e,u.value}function l(e){return null==e?e:e.replace(/&gt;/g,">").replace(/&lt;/g,"<")}function d(e){if(""===e||null==e)return"";var t=e.match(/(&#x[0-9A-Fa-f]{2};)*/g).filter(function(e){return 0!==e.length}),n=e;return t.forEach(function(e){n=n.replace(e,String.fromCharCode(parseInt(e.substr(3,2),16)))}),n}function p(e){return null!=e.match(/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf\uac00-\ud7af]/)}function f(e){return null!=e.match(/[\-\s]/)}function m(e){var t=document.createElement("div");return t.innerHTML=e.replace(/\n/g," "),t.textContent}},g7Mf:function(e,t,n){"use strict";n.d(t,"b",function(){return y}),n.d(t,"c",function(){return S}),n.d(t,"a",function(){return C});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("Sa5G"),a=n("pjml"),u=n("0JpG"),c=n("oVrE"),l=n("nYZ0"),d=n("Fvsw"),p=n("Qbdf"),f=n("fYJU"),m=n("TnpK"),h=n("X/qj"),g=n("jhBu"),v=n("Cxi4"),b=n("g66W"),y=(n("XH2s"),"ultra.service.discussion"),S="discussionService",C="default",w=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,p,f){var m=this;this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$modal=r,this.courseModel=i,this.UserModel=o,this.context=s,this.contentService=a,this.ultraState=u,this.gradebookPermissionService=c,this.entitlementService=l,this.discussionPermission=d,this.contextUser=p,this.contextCourse=f,this.userCourseRoles={},this.userCourseAvailabilities={},this.canObserveGradebook=!1,this.canViewAssessments=!1,this.canViewGradebook=!1,this.canViewAttempts=!1,this.participantCount="-",this.hasEditPermission=!1,this.hasClassGroup=!1,this.initCount=0,this.$rootScope.$on("discussion-group-content-update",function(e,t){m.hardLinkContent&&(m.hardLinkContent.applyGroupSettings(t),m.softLinkContent&&m.softLinkContent.id&&m.softLinkContent.applyGroupSettings(m.hardLinkContent))})}return e.prototype.init=function(e){var t=this,n=this.ultraState.nextParams.contentId;if(this.initCount++,this.initCount>1){if(n===this.currentContentId)return this.$q.when();this.initCount=1,this.destroy(),this.initCount=1}return this.currentContentId=n,this.currentCourseId=this.contextCourse.courseId?this.contextCourse.courseId:this.ultraState.nextParams.courseId,this.groupId=this.ultraState.nextParams.disGroupId||"",this.userCourseAvailabilities[c.d()]=!0,this.courseMembershipsFetcher=e||this.courseModel.$new(this.currentCourseId).memberships,this.courseMembershipsFetcher.$resolve({limit:1e4}).$asPromise().then(function(e){e.forEach(function(e){var n=e.role.toString();n in a.y.toBeLocalizedRoleLabels?t.userCourseRoles[e.userId]=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(null),key:a.y.toBeLocalizedRoleLabels[n]}):t.userCourseRoles[e.userId]=n,t.userCourseAvailabilities[e.userId]=e.isAvailable})}),this.resolveCourse().then(function(e){t.course=e,t.outlineRoot=t.contentService.findRootNode(t.course,a.r.ContentRootNode.ROOT),t.engagementRoot=t.contentService.findRootNode(t.course,a.r.ContentRootNode.INTERACTIVE),t.canObserveGradebook=t.gradebookPermissionService.canObserve(e.id),t.canViewGradebook=t.gradebookPermissionService.canView(e.id),t.canViewAttempts=t.gradebookPermissionService.canViewAttempts(e.id);var n,r=t.ultraState.nextParams.columnId;return n=r&&r!==a.F.CREATE_COLUMN_ID?t.course.gradebook.columns.$find(r,{expand:"associatedRubrics"}).$asPromise():t.$q.when(),t.$q.all([n,t.entitlementService.hasCourseEntitlement(s.j.ViewAssessment,t.course.id),t.discussionPermission.hasEditPermission(t.course.id)])}).then(function(e){var n=e[0],r=e[1],i=e[2];n&&(t.column=n),t.canViewAssessments=r,t.hasEditPermission=i})},e.prototype.destroy=function(){this.initCount--,this.initCount>0||(this.course=void 0,this.userCourseRoles={},this.userCourseAvailabilities={},this.currentContentId=void 0,this.hardLinkContent=void 0,this.softLinkContent=void 0,this.engagementRoot=void 0,this.outlineRoot=void 0,this.canObserveGradebook=void 0,this.canViewAssessments=void 0,this.canViewGradebook=void 0,this.canViewAttempts=void 0,this.currentDiscussion=void 0,this.groupId=void 0,this.currentCourseId=void 0,this.column=void 0,this.assignedGroupsFiltersArray=void 0,this.selectedGroup=void 0,this.participantCount=void 0,this.loadDiscussionP=void 0,this.loadHardContentP=void 0,this.loadSoftContentP=void 0,this.hasEditPermission=void 0,this.hasClassGroup=void 0)},e.prototype.loadDiscussion=function(e,t){var n=this;return this.loadDiscussionP?this.loadDiscussionP:this.loadDiscussionP=this.loadHardContent().then(function(){return n.loadSoftContent()}).then(function(){return e&&(i.merge(n.hardLinkContent,e),n.hasGroups()?n.hardLinkContent.assignedGroups.some(function(e){return n.groupId===e.groupId})||(n.groupId=n.hardLinkContent.assignedGroups[0].groupId):n.groupId=""),n.doLoadDiscussion(t)})},e.prototype.doLoadDiscussion=function(e){var t=this;return void 0===e&&(e=this.forumId),this.course.forums.$new(e).messages.$fetch().$asPromise().then(function(e){t.currentDiscussion=e[0]})},e.prototype.createDiscussion=function(){var e=this,t=this.ultraState.params,n=this.ultraState.includes("**.course.outline.**")?void 0:t.parentId;return this.loadDiscussionP=this.$q.all([this.buildDiscussion(),this.contentService.makeContentInContentTree(this.engagementRoot,this.contextCourse.courseId,n,t.positionBefore,t.positionAfter)]).then(function(t){var n=t[0],r=t[1];e.currentDiscussion=n,e.hardLinkContent=r.content,e.hardLinkContent.contentHandler=a.r.ContentHandler.Discussion,e.hardLinkContent.visibility=e.contentService.determineVisibility(e.hardLinkContent.isAvailable),e.hardLinkContent.isAvailable=e.currentDiscussion.isAvailable})},e.prototype.newDiscussionPersist=function(e){var t=this,n=b.f(this.currentDiscussion.body.rawText),r=this.contentService.truncateDescription(n,l.b.MAX_LENGTH_IN_CONTENT_ITEM);return this.currentDiscussion.plaintextDescription=r,this.currentDiscussion.$patch(["body","plaintextDescription"]).$asPromise().then(function(){return t.doLoadDiscussion(e)}).then(function(){t.hardLinkContent.description=r,t.softLinkContent&&(t.softLinkContent.description=r)})},e.prototype.loadHardContent=function(e){var t=this;if(void 0===e&&(e=!1),this.loadHardContentP)return this.loadHardContentP;var n=(e?"":"alignedGoals,")+"assignedGroups,selfEnrollmentGroups.group,extensionAttributes";return this.loadHardContentP=this.course.contents.$find(this.currentContentId,{expand:n}).$asPromise().then(function(e){return t.hardLinkContent=e})},e.prototype.loadSoftContent=function(){var e=this;return this.hardLinkContent?this.loadSoftContentP?this.softLinkContent?this.$q.when(this.softLinkContent):this.loadSoftContentP:this.loadSoftContentP=this.hardLinkContent.getSoftLinks({label:"ROOT"}).$asPromise().then(function(t){if(t.length)return e.contentService.getOrMakeContentInContentTree(e.outlineRoot,e.course.id,t[0].courseContent).then(function(t){return e.softLinkContent=t.content})}):this.$q.when()},e.prototype.persistNew=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,i,o,s;return r.__generator(this,function(r){switch(r.label){case 0:return this.updateHardLinkContent(this.currentDiscussion),[4,this.hardLinkContent.$save().$asPromise()];case 1:return e=r.sent(),this.currentContentId=e.id,this.currentDiscussion=this.updateDiscussion(this.forumId),[4,this.currentDiscussion.$save().$asPromise()];case 2:return r.sent(),[4,this.discussionPermission.canCreateAllContent(this.currentCourseId)];case 3:return r.sent()?[3,5]:[4,this.ultraState.search("contentId",this.currentContentId)];case 4:return r.sent(),[2];case 5:return t=this.ultraState.params,n=t.parentId,i=t.positionBefore,o=t.positionAfter,this.ultraState.includes("**.course.engagement.**")&&(n=this.outlineRoot.id,i=null,o=null),[4,this.contentService.makeSoftLinkContentInContentTree(this.hardLinkContent,this.outlineRoot,this.contextCourse.courseId,n,i,o)];case 6:return(s=r.sent())?(this.softLinkContent=s,this.softLinkContent.title=this.hardLinkContent.title,[4,this.softLinkContent.$save().$asPromise()]):[3,8];case 7:r.sent(),r.label=8;case 8:return[4,this.ultraState.search("contentId",this.currentContentId)];case 9:return r.sent(),[2]}})})},e.prototype.expandUsersInParticipants=function(e,t){var n=this;if(void 0===t&&(t=!1),i.isEmpty(e))return this.$q.when(e);var r=e[0];if(null==r||null==r.userId)return this.$q.when(e);var o=e.map(function(e){return e.userId});return(!t||this.contextCourse.usersCache.hit(o)?this.$q.when():this.courseMembershipsFetcher.$fetchIfNotExpanded({limit:1e4,expand:"user"}).$asPromise()).then(function(){return n.contextCourse.usersCache.fetchUsers(o,n.UserModel,n.$q).then(function(t){return e.forEach(function(e){e.data=t.get(e.userId)}),n.$q.when(e)})})},e.prototype.getParticipantCount=function(e){var t=this;return void 0===e&&(e=null),this.loadHardContent().then(function(){return e||(e=t.forumId),t.course.forums.$new(e).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING",groupId:t.groupId}).$then(function(e){return t.expandUsersInParticipants(e)}).$asPromise()}).then(function(e){t.participantCount=e.filter(function(e){return e.topLevelReplyCount+e.secondLevelReplyCount>0}).length})},e.prototype.queryParticipants=function(e,t,n,r){var i=this;void 0===n&&(n=""),void 0===r&&(r=!1);var o={limit:t,q:n,offset:0,groupId:this.hasGroups()&&this.groupId||""};return this.course.forums.$new(e).usercounts.$fetch(o).$asPromise().then(function(e){return i.expandUsersInParticipants(e,r)})},e.prototype.isPostFirstSatisfied=function(e,t){var n=this;return void 0===t&&(t=this.forumId),this.loadHardContent().then(function(){return n.course.forums.$new(t).usercounts.$fetch({limit:1e4,offset:0,roleBucket:"TAKING"}).$then(function(e){return n.expandUsersInParticipants(e)}).$asPromise()}).then(function(t){var n=t.find(function(t){return t.data.id===e});return!(!n||!n.topLevelReplyCount)})},e.prototype.refreshParticipationGrade=function(){var e=this;if(!this.hasNoGroups())return this.resolveColumn().then(function(t){t&&(e.column=t,e.column.summary&&e.column.summary.$fetch&&(e.getParticipantCount(),e.column.summary.$fetch({groupId:e.groupId})))});this.column=void 0},e.prototype.saveContent=function(){var e=this;return this.hardLinkContent.$patch().$then(function(){e.softLinkContent&&e.softLinkContent.id&&(e.softLinkContent.applyAvailabilitySettings(e.hardLinkContent),e.softLinkContent.$patch().$then(function(){e.$rootScope.$broadcast("content-update",e.softLinkContent)})),e.$rootScope.$broadcast("content-update",e.hardLinkContent),e.$rootScope.$broadcast("attempt-base-content-update",e.hardLinkContent,e.course.id)}).$asPromise()},e.prototype.savePost=function(){this.currentDiscussion.plaintextDescription=this.contentService.truncateDescription(this.currentDiscussion.plaintextDescription,l.b.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent&&(this.hardLinkContent.description=this.currentDiscussion.plaintextDescription,this.hardLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.hardLinkContent)),this.softLinkContent&&(this.softLinkContent.description=this.currentDiscussion.plaintextDescription,this.softLinkContent.title=this.currentDiscussion.subject,this.$rootScope.$broadcast("content-update",this.softLinkContent))},e.prototype.loadGroup=function(e){var t=this;if(this.hasClassGroup=e,this.assignedGroupsFiltersArray=null,e){var n={name:this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(null),key:"components.directives.conversation.classConversation"}),index:0,groupId:C,extraClass:""};this.assignedGroupsFiltersArray=new Array(n),this.selectedGroup=n}if(this.hasGroups()){var r=!1,i=e?1:0,o=this.hardLinkContent.assignedGroups.map(function(n){var o={name:!e||t.hasEditPermission?n.groupTitle:t.bbLocalize.translateSync({locale:"",key:"components.directives.conversation.myGroup"}),index:i++,groupId:n.groupId};return t.groupId&&t.groupId===o.groupId&&(t.selectedGroup=o,r=!0),o});this.assignedGroupsFiltersArray=this.assignedGroupsFiltersArray?this.assignedGroupsFiltersArray.concat(o):o,!r&&this.assignedGroupsFiltersArray.length&&(this.selectedGroup=this.assignedGroupsFiltersArray[0],this.groupId=this.selectedGroup.groupId,e||this.refreshParticipationGrade())}else this.groupId=""},e.prototype.clearGroups=function(){var e=this;if(this.hardLinkContent.assignedGroups.length){var t=this.hardLinkContent.assignedGroups.map(function(e){return{method:"DELETE",relativeUrl:e.groupId}});this.course.groups.batchUpdate(t)}this.hardLinkContent.isGroupContent=!1,this.hardLinkContent.assignedGroups=[],this.hardLinkContent.saveAssignedGroups(!0).$then(function(){e.groupId="",e.$rootScope.$broadcast("content-update",e.hardLinkContent),e.$rootScope.$broadcast("discussion-group-content-update",e.hardLinkContent),e.$rootScope.$broadcast("load-participants")})},e.prototype.isGroupDiscussion=function(){return!!(this.hardLinkContent&&this.hardLinkContent.isGroupContent&&this.hardLinkContent.assignedGroups)},e.prototype.hasGroups=function(){return this.isGroupDiscussion()&&!!this.hardLinkContent.assignedGroups.length},e.prototype.hasNoGroups=function(){return this.isGroupDiscussion()&&!this.hardLinkContent.assignedGroups.length},e.prototype.isOpenFromConversation=function(){return!!this.ultraState.current.url&&this.ultraState.current.url.indexOf("conversations")>0},Object.defineProperty(e.prototype,"forumId",{get:function(){return this.contentService.parseForumId(this.hardLinkContent.contentDetailUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignedGoalsCount",{get:function(){return this.hardLinkContent&&this.hardLinkContent.alignedGoals?this.hardLinkContent.alignedGoals.length:0},enumerable:!0,configurable:!0}),e.prototype.updateHardLinkContent=function(e){this.hardLinkContent.title=e.subject,this.hardLinkContent.description=this.contentService.truncateDescription(e.plaintextDescription,l.b.MAX_LENGTH_IN_CONTENT_ITEM),this.hardLinkContent.visibility=this.contentService.determineVisibility(this.hardLinkContent.isAvailable),this.hardLinkContent.contentDetail={"resource/x-bb-forumlink":{title:e.subject}}},e.prototype.buildDiscussion=function(){var e=this;return this.engagementRoot.$asPromise().then(function(){var t=!1;e.contentService.canOnlyCreateDiscussion(e.engagementRoot)&&(t=!0);var n=e.contextUser.userModel;return e.course.forums.$new().messages.$build({courseId:e.contextCourse.courseId,userId:n.id,postedName:n.userName,subject:e.bbLocalize.translateSync({locale:e.bbLocalize.getLocale(null),key:"course.content.discussionTitlePlaceholder"}),body:{rawText:"",displayText:""},isDeleted:!1,isAvailable:t})})},e.prototype.updateDiscussion=function(e){var t=this.context.getServerTime();return this.course.forums.$new(e).messages.$build({subject:this.currentDiscussion.subject,id:null,forumId:e,parentId:"{unset id}",courseId:this.currentDiscussion.courseId,userId:this.currentDiscussion.userId,postedName:this.currentDiscussion.postedName,body:this.currentDiscussion.body,isDeleted:!1,postDate:t,editDate:t,isAvailable:this.currentDiscussion.isAvailable})},e.prototype.resolveCourse=function(){return this.contextCourse.course?this.contextCourse.course.$asPromise():this.courseModel.$find(this.currentCourseId).$asPromise()},e.prototype.refetchColumn=function(){return this.column?this.column.$fetch({expand:"associatedRubrics"}).$asPromise():this.resolveColumn()},e.prototype.hasViewGradebookColumnPermission=function(){return this.canViewGradebook||this.canViewAttempts||this.canViewAssessments||this.canObserveGradebook},e.prototype.resolveColumn=function(){var e=this;return this.column?this.column.$asPromise():this.loadDiscussion().then(function(){if(e.currentDiscussion.gradedColumn)return e.hasViewGradebookColumnPermission()?e.course.gradebook.columns.$new(e.currentDiscussion.gradedColumn.id).$fetch({expand:"associatedRubrics"}).$asPromise():e.$q.when(e.currentDiscussion.gradedColumn)})},Object.defineProperty(e.prototype,"isGradedDiscussion",{get:function(){return this.currentDiscussion&&this.currentDiscussion.allowGrading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupId",{get:function(){return this._groupId===C?"":this._groupId},set:function(e){var t=this._groupId;o.isArray(e)?this._groupId=e[0]:this._groupId=e,this._groupId&&this._groupId!==t&&(this.hasClassGroup?this.ultraState.search("groupId",this._groupId):this.ultraState.search("disGroupId",this._groupId))},enumerable:!0,configurable:!0}),e.$inject=[u.serviceName,"$rootScope","$q","$modal",a.o.serviceName,a.Qb.serviceName,d.b,l.d,m.d,h.b,g.b,v.b,f.b,p.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(w);o.module(y,[a.R,u.moduleName,d.a,l.c,m.b,h.a,g.a,v.a,a.R]).service(S,w)},gCXj:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n("IbG+"),i=n("LvDl"),o=n("5Dl8"),s=n("TnpK"),a=n("w9Zy"),u=n("pjml"),c="ultra.course.coursemembershipmarkups",l="ultra.course.coursemembershipmarkups.service",d=function(){function e(){this.fn=[]}return e.prototype.onStyleRefresh=function(e){this.fn.push(e)},e.prototype.$get=function(){return this},e}();r.module(c,[u.R,s.b,a.d]).run([a.e,s.d,u.v.serviceName,"$rootScope",function(e,t,n,r){r.$on(a.c,function(){t.params.courseId&&e.getTopElement().then(function(e){e.getElement().addClass("cc"+t.params.courseId)})}),n.$mixHook("after-fetch-many",function(){var e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];e&&r.$broadcast("course-"+e+"-memberships-after-fetch",Array.prototype.slice.apply(this))})}]).provider(l,d).directive("bbCourseMembershipMarkups",[l,function(e){return{restrict:"A",scope:!1,link:function(t,n,s){var a=s.bbCourseMembershipMarkups,u="css_course_"+a+"_membership",c={},l=i.once(function(){var e=r.element(document).find("#"+u);return 0===e.length&&(e=r.element('<style id="'+u+'"></style>').appendTo("head"),t.$on("$destroy",function(){e.remove()})),e});t.$on("course-"+a+"-memberships-after-fetch",function(t,n){t.preventDefault();var r=l();(n=i(n).filter(function(e){return null!=(e.userId||e.user.id)}).map(function(e){return e.userId=e.userId||e.user.id,e}).value()).forEach(function(t){var n=new o.a,r=n.selector(".cc"+a);e.fn.forEach(function(e){e(r,t)}),c[t.id]=n.build()});var s=i(c).sortBy().map(function(e,t){return e}).join("\n");s!==r.text()&&r.text(s)}),t.$on("course-"+a+"-memberships-before-fetch",function(e,t){e.preventDefault();var n=t.params||{};n.fields&&(n.fields+=",courseId,dueDateExceptionType,timeLimitExceptionType")})}}}])},gKLz:function(e,t){e.exports='<svg id="icon-large-avatar-multiple" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60"><g fill="none"  stroke-miterlimit="10"><path d="M37.685 17.545C37.976 12.214 41.593 8 46.012 8c4.609 0 8.345 4.583 8.345 10.237s-3.737 10.237-8.345 10.237c-1.683 0-3.25-.612-4.562-1.663"/><path d="M44.685 44.789h11.676C57.996 42.569 59 39.838 59 36.846c0-5.068-2.81-9.419-6.894-11.656M18.949 26.469c-1.387 1.26-3.103 2.005-4.962 2.005-4.609 0-8.345-4.583-8.345-10.237S9.379 8 13.987 8c4.39 0 7.988 4.158 8.32 9.438"/><path d="M7.894 25.191C3.81 27.428 1 31.779 1 36.847c0 2.992 1.004 5.722 2.639 7.943H15.27"/><g><ellipse cx="30" cy="27.514" rx="11.266" ry="13.223"/><path d="M19.619 32.661c-2.532 3.407-4.644 8.708-4.644 13.758 0 2.317.343 4.528.942 6.581h28.167c.599-2.054.942-4.264.942-6.581 0-5.09-2.075-10.343-4.644-13.758"/></g></g></svg>'},gOJg:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n("VZTK");var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.contentCreate.routes";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-manage.create.document",{panelClass:"full",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},reloadOnSearch:!1,peekViewName:"document-peek@",url:"/document",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(11),n.e(121)]).then(n.bind(null,"HjlN"))},peekStates:["content-manage.edit.document","document-settings","conversations","edit-file-settings","message","lti","content-market","content-collection","conditional-release"],pageTitle:"course.content.document.title"}).peekState("content-manage.edit.document",{panelClass:"full",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},peekViewName:"document-peek@",url:"/document/:id?courseId",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(11),n.e(121)]).then(n.bind(null,"HjlN"))},peekStates:["document-settings","conversations","edit-file-settings","message","lti","content-market","conditional-release"],pageTitle:"course.content.document.title"}).peekState("document-settings",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/document-settings/:id",params:{focusEleId:null},require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(11),n.e(270)]).then(n.bind(null,"Ynio"))},peekViewName:"document-settings-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.document.settings.header"}),e.peekState("content-manage",{abstract:!0,peekStates:["gradebook-item"]}).peekState("content-manage.create",{url:"/create?parentId&positionBefore&positionAfter&id",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},peekStates:["discussion","gradebook-item","journal"],require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(346)]).then(n.bind(null,"a0Ud"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.createItem"}).peekState("content-manage.create.folder",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/folder",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(145)]).then(n.bind(null,"1wJd"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.createFolder"}).peekState("content-manage.create.link",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/link",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(136)]).then(n.bind(null,"KYun"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLink"}).peekState("content-manage.create.lti",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/lti",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(137)]).then(n.bind(null,"7OXB"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy"],pageTitle:"course.content.createLti"}).peekState("content-manage.create.file",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/file",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(133)]).then(n.bind(null,"ebp7"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.fileTitlePlaceholder"}).peekState("content-manage.edit",{abstract:!0,resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}]},url:"/edit"}).peekState("content-manage.edit.folder",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/folder/:id?focusEleId",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(145)]).then(n.bind(null,"1wJd"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],peekStates:["conditional-release"],allowChildPeekStates:!0,pageTitle:"course.content.editFolder"}).peekState("content-manage.edit.file",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/file/:id?focusEleId",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(133)]).then(n.bind(null,"ebp7"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],peekViewName:"file-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.file"}).peekState("content-manage.edit.link",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/link/:id?focusEleId",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(136)]).then(n.bind(null,"KYun"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],peekViewName:"link-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.editLink"}).peekState("content-manage.edit.lti",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}]},url:"/lti/:id?focusEleId",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(137)]).then(n.bind(null,"7OXB"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],peekViewName:"lti-goal-peek",allowChildPeekStates:!0,peekStates:["goal-picker-legacy","conditional-release"],pageTitle:"course.content.editLti"}).peekState("content-manage.edit.placement",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]},url:"/placement/:id",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(11),n.e(373)]).then(n.bind(null,"1xSQ"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],peekStates:["conditional-release"],allowChildPeekStates:!0,pageTitle:"course.content.editPlacement"}).peekState("content-manage.import",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/import/content-import"),t.loadBundle("features/course/content/course-content")])}]},url:"/import?parentId&targetCourseId&oneDriveButtonId&positionBefore&positionAfter",require:[function(){return Promise.all([n.e(4),n.e(311)]).then(n.bind(null,"dTsQ"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.import.title"}).peekState("content-manage.copy",{resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/copy/content-copy"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/organization/content/copy/content-copy")])}]},url:"/copy?parentId&targetCourseId&positionBefore&positionAfter&depth",require:[function(){return Promise.all([n.e(12),n.e(342)]).then(n.bind(null,"9fW2"))},function(){return Promise.all([n.e(7),n.e(12),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(13)]).then(n.bind(null,"5lIA"))}],pageTitle:"course.content.copy.title"}).peekState("content-manage.import-report",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},url:"/importReport/:id",require:function(){return Promise.all([n.e(73),n.e(400)]).then(n.bind(null,"O9bg"))},pageTitle:"ultra.convert.analysis.importDetailsTitle"}).peekState("content-manage.copy-details",{resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/convert-and-import")}]},url:"/copyDetails",require:function(){return Promise.all([n.e(73),n.e(390)]).then(n.bind(null,"EdNC"))},pageTitle:"ultra.convert.analysis.copyDetailsTitle"})}])},gSbt:function(e,t,n){},gZo5:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var r=n("mrSG"),i=n("IbG+"),o="ultra.services.messaging",s="crossWindowMessaging",a="ultra.crossWindowMessagingService",u=function(){function e(e){var t=this;this.$rootScope=e,this.broadcastChannel=new BroadcastChannel(a),this.onMessage=this._onMessage.bind(this),this.broadcastChannel.addEventListener("message",this.onMessage),e.$on("$destroy",function(){t.broadcastChannel.close(),t.broadcastChannel.removeEventListener("message",t.onMessage)})}return e.prototype._onMessage=function(e){var t=e.data;this.$rootScope.$broadcast(t.type,t.message)},e.prototype.postMessage=function(e,t){this.broadcastChannel.postMessage({type:e,message:t})},e.$inject=["$rootScope"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(u);i.module(o,[]).service(s,u)},gkef:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var r=n("mrSG"),i=n("IbG+"),o="ultra.services.windowSize",s="windowSizeService",a=100,u=function(){function t(t){var n=this;this.$rootScope=t,this.SMALL_SIZE_MAX=40,this.MEDIUM_SIZE_MAX=64,this.LARGE_SIZE_MAX=90,this.hasQueuedRefreshWindowSizeEm=!1,this.currentWindowSizeEm=e(window).width()/parseFloat(e("html").css("font-size")),this.$rootScope.$watch(function(){n.hasQueuedRefreshWindowSizeEm||(n.hasQueuedRefreshWindowSizeEm=!0,setTimeout(function(){n.refreshCurrentWindowSizeEm()},a))})}return t.prototype.refreshCurrentWindowSizeEm=function(){var t=this,n=window.innerWidth/parseFloat(e("html").css("font-size"));n!==this.currentWindowSizeEm&&this.$rootScope.$apply(function(){t.currentWindowSizeEm=n,t.$rootScope.$broadcast("window-resize",t.currentWindowSizeEm)}),this.hasQueuedRefreshWindowSizeEm=!1},t.prototype.isSmallBreakpoint=function(){return this.currentWindowSizeEm<=this.SMALL_SIZE_MAX},t.prototype.isMediumBreakpoint=function(){return this.currentWindowSizeEm>this.SMALL_SIZE_MAX&&this.currentWindowSizeEm<=this.MEDIUM_SIZE_MAX},t.prototype.isLargeBreakpoint=function(){return this.currentWindowSizeEm>this.MEDIUM_SIZE_MAX},t.prototype.getBreakpointSize=function(){return this.currentWindowSizeEm<=this.SMALL_SIZE_MAX?"small":this.currentWindowSizeEm<=this.MEDIUM_SIZE_MAX?"medium":"large"},t.prototype.isWindowSizeAtLeast=function(e){return this.currentWindowSizeEm>=e},t.$inject=["$rootScope"],t}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(u);i.module(o,[]).service(s,u)}).call(this,n("EVdn"))},go4a:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s});var r=function(e,t){var n;return"static/images/default-banners/"+(e.course&&e.course.isOrganization?"structure":"nature")+(void 0===(n=e.courseCardColorIndex)&&(n=0),n%20+1)+(t?"_thumb":"")+".jpg"},i=function(e){return e.course&&e.course.isClassic()?"course-color-classic":"course-color-"+(e.courseCardColorIndex%10+1)},o=function(e){return r(e,!1)},s=function(e){return r(e,!0)}},hGJY:function(e,t,n){e.exports=n("ZJ/X")(2091)},hTOW:function(e,t,n){e.exports=n("ZJ/X")(122)},hWgD:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.partner-tool.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("partner-tool",{abstract:!0,url:"/partners/:partnerId"}).peekState("partner-tool.tool",{url:"/tools/:toolType?partnerParentId&mode",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/content-market/content-market")}]},params:{partnerTitle:"",toolHref:"",returnState:null},panelClass:"full",require:function(){return Promise.all([n.e(132),n.e(347)]).then(n.bind(null,"HgnN"))},pageTitle:"course.partnerTool.partnerTool"})}])},hYwd:function(e,t){e.exports='<div bb-load-bundle="components/directives/save-tray" role="status">\n  <div class="notification-container" ng-switch on="saveTray.status">\n    <span class="progress-indicator"><div class="canvas" ng-class="{\'success-state\' : saveTray.status === \'success\', \'error-state\' : saveTray.status === \'error\'}"></div></span>\n    <span class="progress-status" ng-switch-default bb-translate>{{::saveTray.localizationKeysPrefix}}.saving</span>\n    <span class="progress-status" ng-switch-when="success" bb-translate>{{::saveTray.localizationKeysPrefix}}.success</span>\n    <span class="progress-status" ng-switch-when="error" bb-translate>{{::saveTray.localizationKeysPrefix}}.error</span>\n  </div>\n</div>\n'},hkqm:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});var r=n("IbG+"),i=n("H8CZ"),o=n("0JpG"),s=n("3FFP"),a=n("GbAM"),u=n("BuJN"),c=n("QWGI"),l="ultra.services.toast",d="toast",p=function(){function e(e,t,n,r,i){this.$compile=e,this.$q=t,this.$rootScope=n,this.$timeout=r,this.localize=i,this.toastQueue=[]}return e.prototype.show=function(t){var n=this;if(!t)throw new Error("args is required");if(!t.messageKey)throw new Error("messageKey is required");this.setUpToast({bundlePromise:t.bundle?this.localize.loadBundle(t.bundle):this.$q.when(),createScope:function(){var e=n.$rootScope.$new(!0);return e.message=n.localize.translateSync({locale:t.locale||n.localize.getLocale(e),key:t.messageKey,params:t.translationParams,noWrap:!0,noEscape:!0}),e.shortMessage=t.shortMessageKey&&n.localize.translateSync({locale:t.locale||n.localize.getLocale(e),key:t.shortMessageKey,params:t.translationParams,noWrap:!0,noEscape:!0}),e.icon=t.icon||"icon-alert-triangle",e.toastClass=t.toastClass,e.toastStatus=t.toastStatus,e},triggerToastClose:function(r,i,o,s){i.$root.$broadcast(a.b,i.message);var u=function(){if(i.isActive){var o=t.durationMS||e.DEFAULT_DISPLAY_MS;n.toastQueue.length>1&&(o=Math.min(e.RUSH_DISPLAY_MS,o)),(new Date).getTime()-r.startTime>=o?s():n.$timeout(u,1e3,!1)}};u(),n.$timeout(function(){o.addClass("is-active")},0,!1)},onCloseToast:this.closeToast,template:u})},e.prototype.showLoading=function(e){var t=this;if(!e)throw new Error("args is required");if(!e.trayId)throw new Error("messageKey is required");e.promise.then(function(){return e.promise.done=!0});return this.setUpToast({bundlePromise:this.$q.when(),createScope:function(){var n=t.$rootScope.$new(!0);return n.trayId=e.trayId,n.trayLocalizationKeysPrefix=e.trayLocalizationKeysPrefix,n},triggerToastClose:function(t,n,r,i,o){e.promise.then(function(){i()},function(){o()}),n.$root.$broadcast(s.a.LoadMoreResults.eventName,e.trayId,e.promise,null,!0,e.delayTime)},template:c,footerCss:e.footerCss,promise:e.promise})},e.prototype.setUpToast=function(e){var t,n=this,i=this.$q.defer(),o=this.toastQueue[this.toastQueue.length-1]||this.$q.when();return this.toastQueue.push(i.promise),this.$q.all([o,e.bundlePromise]).then(function(){if(i.startTime=(new Date).getTime(),!e.promise||!e.promise.done){var o,s=e.createScope(),a=function(){e.onCloseToast&&e.onCloseToast(s,o),n.cleanUpToast(i,s,o)};return t=function(){n.cancelToast(i,s,o)},s.isActive=!0,s.toastClicked=function(){a()},o=n.$compile(e.template)(s),r.element(document.body).append(o),o.addClass(e.footerCss),e.triggerToastClose(i,s,o,a,t),i.promise}i.resolve()}).then(function(){n.toastQueue.shift()}),function(){return t&&t()}},e.prototype.closeToast=function(e,t){e.isActive&&t.removeClass("is-active")},e.prototype.cleanUpToast=function(e,t,n){var r=this;t.isActive&&(t.isActive=!1,i.b(n,function(){r.cancelToast(e,t,n)}))},e.prototype.cancelToast=function(e,t,n){e.resolve(),n.remove(),t.$destroy()},e.DEFAULT_DISPLAY_MS=6e3,e.RUSH_DISPLAY_MS=3e3,e.$inject=["$compile","$q","$rootScope","$timeout",o.serviceName],e}();r.module(l,[o.moduleName,s.b]).service(d,p)},hlSw:function(e,t,n){"use strict";var r=n("LvDl"),i=n("IbG+"),o=n("nYZ0"),s=n("Qbdf"),a=n("oi1r"),u=n("P2dS"),c=n("0JpG"),l=n("pjml"),d=n("TnpK"),p=n("+ohn"),f=function(){function e(){}return e.currentColumn=[d.d,s.d,"currentContent",function(e,t,n){if(n){var r=e.params.columnId||e.nextParams.columnId;return t.gradebook.columns.$buildRaw(n.getAssociatedGradingColumn(r)).$asPromise().then(function(e){return null==e.rubricAssociations?e.$fetch({expand:"associatedRubrics,externalGrade"}).$asPromise().then(function(e){return e.rubricAssociations=e.rubricAssociations,e.$asPromise()}):e.$asPromise()})}if((r=e.nextParams.columnId)&&r!==l.F.CREATE_COLUMN_ID)return t.gradebook.columns.$find(r,{expand:"associatedRubrics,externalGrade"}).$asPromise()}],e.assignmentContent=[s.d,d.d,function(e,t){var n=t.nextParams.contentId?t.nextParams.contentId:t.nextParams.id;if(n){return e.contents.$find(n,{expand:"alignedGoals,assignedGroups,isGroupContent,permissions,extensionAttributes"}).$asPromise()}}],e.assessmentContent=[s.d,"$q",c.serviceName,o.d,d.d,a.b,u.b,function(e,t,n,o,s,a,u){if(s.nextParams.contentId!==l.r.CREATE_CONTENT_ID)return o.getContentInContentTree(o.findRootNode(e,l.r.ContentRootNode.ROOT),e.id,s.nextParams.contentId).then(function(e){return e.content.$asPromise()});var c=t.defer();return a.loadSchemas(e).then(function(t){o.getOrMakeContentInContentTree(o.findRootNode(e,l.r.ContentRootNode.ROOT),e.id,void 0,s.nextParams.parentId,s.nextParams.positionBefore,s.nextParams.positionAfter).then(function(o){var a=o.content,d=r.find(t,function(e){return l.J.ScaleType.Score.isEqualTo(e.scaleType)}),f=s.nextParams.gradebookCategoryId,m=null;u.getOrLoadCategoriesForCourse(e.id).then(function(e){m=r.find(e,function(e){return e.id===f})}).then(function(){a.courseId=e.id,a.contentHandler=l.r.ContentHandler.TestLink,a.body={};var t="course.grades.gradebook-item.title.default."+(m?m.isUserDefined?"custom":m.title:"test"),r=m&&m.isUserDefined?{today:new Date,title:m.title}:{today:new Date};a.title=n.translateSync({locale:e&&e.locale,key:t,params:r,noWrap:!0}),a.setupAssessmentContentDetail(d.id,m),a.setVisibility(l.r.Visibility.Hidden),a.getAssociatedGradingColumn().visible=!1,a.getAssociatedGradingColumn().possible=p.Utils.GRADE_DEFAULT_POINTS,a.ui.hasConversationAttached=!1,a.permissions={edit:!0},a.$save().$asPromise().then(function(){c.reject(),s.go(s.next.name,i.extend(s.nextParams,{contentId:a.id,gradeitemView:"details",isCreateState:!0,parentId:void 0,positionBefore:void 0,positionAfter:void 0}))})})})}),c.promise}],e.currentContent=[s.d,"$injector",d.d,"translations",function(t,n,r){return-1===r.next.name.indexOf("gradebook-item.assessment")&&-1===r.next.name.indexOf("gradebook-item.scorm-submissions")?n.invoke(e.assignmentContent,null,{currentCourse:t}):n.invoke(e.assessmentContent,null,{currentCourse:t})}],e.nullContent=[function(){return null}],e}();t.a=f},hqh6:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return m});n("XLiA"),n("76gO"),n("fMh7");var r=n("LvDl"),i=n("EVdn"),o=n("IbG+"),s=n("0JpG"),a=n("WShm"),u=n("oQrK"),c=n("XGja"),l=n("+4Px"),d=n("wd/R"),p=n("V6ed"),f=n("yC9S"),m="ultra.components.directives.datepicker",h=function(){function t(t,r,i,o,s,a,c,l){var d=this;this.scope=t,this.element=r,this.attrs=i,this.model=o,this.$transclude=s,this.bbLocalize=a,this.bbValidateDate=c,this.$compile=l,this._dp=e.fn.datepicker;var p=this.bbLocalize.getLocale(t);null==i.bbValidateDate&&(i.bbValidateDate="short",this.bbValidateDate[0].compile(this.element,i,void 0)(t,this.element,i,o,s));if(!u.a.detect().desktop()&&window.Modernizr.inputtypes.date){if(i.$set("type","date"),this.element.removeAttr("placeholder"),i.bbTranslateAttrs){var m=t.$eval(i.bbTranslateAttrs);m.placeholder&&(delete m.placeholder,i.bbTranslateAttrs=JSON.stringify(m))}}else{this.bbLocalize.loadBundle("components/directives/datepicker").then(function(){null==i.placeholder&&i.$set("placeholder",d.bbLocalize.translateSync({locale:p,key:"components.directives.datepicker.dateFormatPlaceholder"}));var e=d.bbLocalize.translateSync({locale:p,key:"components.directives.datepicker.ariaLabel.datepickerButton"});d.widgetButton=d.$compile('<button class="open-datepicker super-clear" aria-label="'+e+'" type="button"><bb-svg-icon size="small" icon="calendar"></bb-svg-icon></button>')(d.scope),d.updateReadOnlyState(),i.$observe("disabled",function(e){d.updateReadOnlyState()}),i.$observe("readonly",function(e){d.updateReadOnlyState()})});var h=this.bbLocalize.preProcessFormatterLocale(p).replace(/_/g,"-");["zh-TW","zh-CN","rs-latin","pt-BR","nl-BE"].indexOf(h)<0&&(h="en-SC"===h?"ar":"ko-KR"===h?"kr":h.substring(2,0)),i.$set("type","text");var g=this.bbLocalize.isRTL(t),v="left",b="right";g&&(v="right",b="left");var y={todayHighlight:!0,autoclose:!0,forceParse:!1,keyboardNavigation:!1,language:h,rtl:g,showOnFocus:!1,startDate:new Date("1932-01-01"),templates:{leftArrow:'<div class="icon-arrow-'+v+'"></div>',rightArrow:'<div class="icon-arrow-'+b+'"></div>'}};"en"===h?this.setupDatePicker(y):(h="bootstrap-datepicker."+h,n.e(237).then(function(){n("xGFV")("./"+h).then(function(){d.setupDatePicker(y)})}.bind(null,n)).catch(function(){}));var S=function(){d.element.datepicker("place")};f.b.OnWindow("scroll",S,t),this.element.parents(".panel-wrap").eq(0).bind("scroll",S),t.$on("$destroy",function(){d.element.datepicker("destroy"),d.element.parents(".panel-wrap").eq(0).unbind("scroll",S)})}}return t.prototype.setupDatePicker=function(e){var t=this;this.element.datepicker(e).data("datepicker");this.scope.$watch(function(){return t.model.$modelValue},function(){t.updateDatepicker()}),this.element.on("changeDate",function(e){e.date&&(t.element.val(e.date.getFullYear()+"-"+(e.date.getMonth()+1)+"-"+e.date.getDate()),t.element.triggerHandler("change"),t.model.$render())});var n=this.element.data("datepicker");n.isInput=!1,this.element.unbind("keyup",n._events[0][1].keyup),this.element.on("show changeMonth changeYear",function(e){t.datepickerDropdownElement=i(".datepicker-dropdown"),t.iconArrowLeft=t.datepickerDropdownElement.find(".icon-arrow-left"),t.iconArrowRight=t.datepickerDropdownElement.find(".icon-arrow-right"),t.openDatepickerButton=t.element.siblings("button.open-datepicker");var n=[];t.datepickerDropdownElement.find("td.day").not(".old").not(".new").each(function(){n.push(i(this))}),t.currentMonthDays=n,t.datepickerDropdownElement.on("keydown",function(e){e.keyCode===l.g&&(t.openDatepickerButton.focus(),t.element.datepicker("hide"))}),t.iconArrowLeft.add(t.iconArrowRight).on("blur",function(){t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true")}),t.iconArrowLeft.off("keydown").on("keydown",function(e){e.preventDefault(),e.keyCode!==l.g&&e.stopPropagation(),e.keyCode===l.t||e.keyCode===l.f?(t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),t.goToPreviousMonth()):e.keyCode===l.u&&(e.shiftKey?(t.openDatepickerButton.focus(),t.element.datepicker("hide")):t.focusElement(t.iconArrowRight))}),t.iconArrowRight.off("keydown").on("keydown",function(e){e.preventDefault(),e.keyCode!==l.g&&e.stopPropagation(),e.keyCode===l.t||e.keyCode===l.f?(t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","false"),t.goToNextMonth()):e.keyCode===l.u&&(e.shiftKey?t.focusElement(t.iconArrowLeft):t.focusDefaultDay())}),t.updateAriaRolesAndStates(t.getViewDate(),e.date),t.setUpKeyboardNavigation(),"show"===e.type&&(t.datepickerDropdownElement.find("tfoot").remove(),t.datepickerDropdownElement.find(".datepicker-switch").attr("aria-hidden","true"),t.datepickerDropdownElement.on("keyup",function(e){e.stopPropagation()}),t.focusDefaultDay())})},t.prototype.updateDatepicker=function(){var e=this.model.$modelValue,t=this.element.data("datepicker");if(o.isDate(e)&&t){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDate();r&&r.getTime()===n.getTime()||(t.dates.replace([n]),t.viewDate=n,t.fill())}},t.prototype.updateReadOnlyState=function(){var e=this;this.element.prop("disabled")||this.element.prop("readonly")?this.widgetButton.remove():this.element.next()!==this.widgetButton&&(this.widgetButton.click(function(t){e.element.datepicker("show")}),this.element.after(this.widgetButton))},t.prototype.focusDefaultDay=function(){var e=r.find(this.currentMonthDays,function(e){return e.hasClass("active")}),t=null!=e?e:this.currentMonthDays[0];this.focusElement(t)},t.prototype.focusPreviousDay=function(){var e=this.getActiveElementIndex();0===e?(this.goToPreviousMonth(),this.focusLastDayOfMonth()):this.focusElement(this.currentMonthDays[e-1])},t.prototype.focusNextDay=function(){var e=this.getActiveElementIndex();e<this.currentMonthDays.length-1?this.focusElement(this.currentMonthDays[e+1]):(this.goToNextMonth(),this.focusElement(this.currentMonthDays[0]))},t.prototype.focusSameWeekdayOfPreviousWeek=function(){var e=this.getActiveElementIndex();if(e-7>=0)this.focusElement(this.currentMonthDays[e-7]);else{var t=7-e;this.goToPreviousMonth(),this.focusElement(this.currentMonthDays[this.currentMonthDays.length-t])}},t.prototype.focusSameWeekdayOfNextWeek=function(){var e=this.getActiveElementIndex();if(e+7<this.currentMonthDays.length)this.focusElement(this.currentMonthDays[e+7]);else{var t=e+7-this.currentMonthDays.length;this.goToNextMonth(),this.focusElement(this.currentMonthDays[t])}},t.prototype.focusSameDayOfPreviousMonth=function(){this.focusSameDayOfAdjacentMonth(-1)},t.prototype.focusSameDayOfNextMonth=function(){this.focusSameDayOfAdjacentMonth(1)},t.prototype.focusSameDayOfAdjacentMonth=function(e){var t=this.getActiveElementIndex();e>0?this.goToNextMonth():this.goToPreviousMonth(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()},t.prototype.focusSameDayOfPreviousYear=function(){this.focusSameDayOfAdjacentYear(-1)},t.prototype.focusSameDayOfNextYear=function(){this.focusSameDayOfAdjacentYear(1)},t.prototype.focusSameDayOfAdjacentYear=function(e){var t=this.getActiveElementIndex();e>0?this.goToNextYear():this.goToPreviousYear(),null!=this.currentMonthDays[t]?this.focusElement(this.currentMonthDays[t]):this.focusLastDayOfMonth()},t.prototype.focusFirstDayOfMonth=function(){this.focusElement(this.currentMonthDays[0])},t.prototype.focusLastDayOfMonth=function(){this.focusElement(this.currentMonthDays[this.currentMonthDays.length-1])},t.prototype.focusElement=function(e){e.attr("tabindex","-1").focus()},t.prototype.getViewDate=function(){return this.element.data("datepicker").viewDate},t.prototype.setViewDate=function(e){this.element.data("datepicker").viewDate=e},t.prototype.getActiveElementIndex=function(){return r.findIndex(this.currentMonthDays,function(e){return e.attr("id")===i(document.activeElement).attr("id")})},t.prototype.goToPreviousMonth=function(){this.moveMonth(-1)},t.prototype.goToNextMonth=function(){this.moveMonth(1)},t.prototype.goToPreviousYear=function(){this.moveYear(-1)},t.prototype.goToNextYear=function(){this.moveYear(1)},t.prototype.moveMonth=function(e){var t=this.getViewDate();this.setViewDate(this.element.datepicker("moveMonth",t,e)),this.element.datepicker("fill"),this.element.trigger("changeMonth")},t.prototype.moveYear=function(e){var t=this.getViewDate();this.setViewDate(this.element.datepicker("moveYear",t,e)),this.element.datepicker("fill"),this.element.trigger("changeYear")},t.prototype.updateAriaRolesAndStates=function(e,t){var n=this,r=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.container"});this.datepickerDropdownElement.attr("role","application").attr("aria-label",r),this.datepickerDropdownElement.find("table").attr("role","grid").attr("aria-label",r);var o=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.previousMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-left").attr("aria-label",o).attr("role","button");var s=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(this.scope),key:"components.directives.datepicker.ariaLabel.nextMonthButton"});this.datepickerDropdownElement.find(".icon-arrow-right").attr("aria-label",s).attr("role","button"),this.datepickerDropdownElement.find(".datepicker-switch").attr("aria-live","assertive").attr("aria-atomic","true"),this.datepickerDropdownElement.find("thead th").attr("role","gridcell"),this.datepickerDropdownElement.find("table").removeAttr("aria-activedescendant");var a=d(e),u=d(a).subtract({months:1}),c=d(a).add({months:1});this.datepickerDropdownElement.find("td").each(function(e,t){var r,o=i(t);r=o.hasClass("old")?u.toDate():o.hasClass("new")?c.toDate():a.toDate();var s=d({year:r.getFullYear(),month:r.getMonth(),day:+o.text()});o.attr("aria-label",n.bbLocalize.formatDateSync(s.toDate()));var l="datepicker-td-"+s.unix();o.attr("id",l),o.hasClass("active")&&(o.attr("aria-selected","true"),n.datepickerDropdownElement.find("table").attr("aria-activedescendant",l)),o.attr("role","gridcell")})},t.prototype.setUpKeyboardNavigation=function(){var e=this;this.currentMonthDays.forEach(function(t){t.off("keydown").on("keydown",function(t){switch(t.preventDefault(),t.keyCode!==l.f&&t.keyCode!==l.g&&t.stopPropagation(),p.a.enableFocusOutline(),t.keyCode){case l.j:e.focusPreviousDay();break;case l.s:e.focusNextDay();break;case l.v:e.focusSameWeekdayOfPreviousWeek();break;case l.d:e.focusSameWeekdayOfNextWeek();break;case l.q:t.ctrlKey||t.altKey?e.focusSameDayOfPreviousYear():e.focusSameDayOfPreviousMonth();break;case l.p:t.ctrlKey||t.altKey?e.focusSameDayOfNextYear():e.focusSameDayOfNextMonth();break;case l.i:e.focusFirstDayOfMonth();break;case l.e:e.focusLastDayOfMonth();break;case l.u:t.shiftKey?e.focusElement(e.iconArrowRight):(c.b(null,e.openDatepickerButton),e.element.datepicker("hide"));break;case l.f:case l.t:e.currentMonthDays[e.getActiveElementIndex()].click(),e.openDatepickerButton.focus()}})})},t.$inject=["scope","element","attrs","model","$transclude",s.serviceName,a.a+"Directive","$compile"],t}(),g=function(){function e(e){var t=this;this.$injector=e,this.priority=1,this.restrict="A",this.require="ngModel",this.link=function(e,n,r,i,o){e.datepicker=t.$injector.instantiate(h,{scope:e,element:n,attrs:r,model:i,$transclude:o})}}return e.$inject=["$injector"],e}();o.module(m,[s.moduleName,a.b]).directive("bbDatePicker",["$injector",function(e){return e.instantiate(g)}])}).call(this,n("EVdn"))},i2kg:function(e,t,n){},i8dz:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});n("Oki6");var r=n("IbG+"),i=n("+4Px"),o="ultra.directives.bbFoundationDropdownClose",s="bbFoundationDropdownClose",a=function(){this.restrict="A",this.link=function(t,n,r){var o="keyup."+s;n.on("click",function(t){var r=e(t.target);if(r.closest("[data-dropdown]").length<=0&&(r.closest(".f-dropdown").length<=0||r.closest(".f-dropdown a").length>0)){var i=n.find(".f-open-dropdown");if(i.length&&i.foundation("dropdown","close",i),window.top!==window){var o=e(window.parent.document).find(".f-open-dropdown");o.foundation("dropdown","close",o)}}}),n.on("scroll",function(t){var n=e(t.target);n.hasClass("f-dropdown")||0!==n.parents(".f-dropdown").length||e(".f-open-dropdown").each(function(){e(this).foundation("dropdown","close",e(this))})}),e("body").on(o,function(t){if(t.keyCode===i.u){var r=n.find(".f-open-dropdown"),o=e(document.activeElement).is(".f-open-dropdown"),s=e(document.activeElement).parents(".f-open-dropdown").length>0;o||s||r.foundation("dropdown","close",r)}}),t.$on("$destroy",function(){n.off(),e("body").off(o)})}};r.module(o,[]).directive(s,["$injector",function(e){return e.instantiate(a)}])}).call(this,n("EVdn"))},i8i4:function(e,t,n){e.exports=n("ZJ/X")(140)},iAaI:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("IbG+"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.base.admin.theme.routes";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){e.peekState("colorSelection",{systemEntitlement:i.C.ViewAdmin,url:"/theme/:themeId/colorSelection",require:function(){return n.e(325).then(n.bind(null,"xCEN"))},pageTitle:"base.admin.theme.colorSelection.title",panelClass:"full"})}])},iVgd:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("+4Px"),o="ultra.directives.accessibility.keyboardClick",s=function(){this.restrict="A",this.link=function(t,n,r){n.on("keyup",function(t){var n=e(t.target),r=n.closest(".react-container").length>0;(t.keyCode!==i.f||r||"file"===n.attr("type")||"INPUT"===n.prop("tagName")&&("INPUT"!==n.prop("tagName")||"checkbox"!==n.prop("type"))||"BUTTON"===n.prop("tagName")||"BODY"===n.prop("tagName")||"A"===n.prop("tagName")&&n.attr("href"))&&(t.keyCode!==i.t||r||"A"!==n.prop("tagName")&&("DIV"!==n.prop("tagName")||"button"!==n.attr("role")))||n.trigger("click")})}};r.module(o,[]).directive("bbKeyboardClick",["$injector",function(e){return e.instantiate(s)}])}).call(this,n("EVdn"))},imME:function(e,t,n){},"iwI+":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("IbG+"),i=n("0JpG"),o=n("w9Zy"),s=n("TnpK"),a=n("tuHw"),u="ultra.base.tools.routes";r.module(u,[s.b]).config([s.c,function(e){e.state("base.tools.legacy",{url:"/:toolName",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/tools/base-tools")}],offCanvasArgs:[s.d,function(e){return{panelClass:"full",template:a,close:function(){e.goCurrentBasePage()},stateName:"base.tools.legacy"}}]},require:function(){return Promise.resolve().then(n.bind(null,"yA26"))},onExit:[o.e,function(e){e.close("base.tools.legacy")}],pageTitle:"base.tools.pageTitle"})}])},j2IR:function(e,t,n){"use strict";n.d(t,"a",function(){return p});var r=n("IbG+"),i=n("0JpG"),o=n("w9Zy"),s=n("go4a"),a=n("pjml"),u=n("TnpK"),c=n("Qbdf"),l=n("M+Ig"),d=n("fYJU"),p="ultra.telemetry.routes";function f(e,t,n,r){var i=e.defer(),o=t.courseId;return o?n.$new(o).users.$find(r.userId).$then(function(e){i.resolve(s.a(e))}):i.resolve(null),i.promise}r.module(p,[i.moduleName,o.d,a.R,u.b,c.b]).config([u.c,c.c,function(e,t){var r,o,s,u,p,m,h;e.peekState("telemetry-settings",{url:"/telemetry-settings",require:function(){return n.e(306).then(n.bind(null,"W9KP"))},resolve:{currentCourseColor:["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return f(e,t,n,r)}]}}).peekState(l.a.InstructorClass.toString(),{url:"/telemetry/activityVsGrade/:courseId?notificationId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(18),n.e(20),n.e(28),n.e(31),n.e(41),n.e(281)]).then(n.bind(null,"7FjY"))},panelClass:"full",resolve:(r={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},r[c.d]=t.resolve,r),peekStates:["message","event-create","telemetry-settings",l.a.InstructorDetails.toString()],peekViewName:"telemetry-instructor-class-base@",pageTitle:"components.directives.telemetry.panel.titleInstructor"}).peekState(l.a.InstructorDetails.toString(),{url:"/telemetry/timeSeries/:courseId?userId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(18),n.e(20),n.e(28),n.e(31),n.e(321)]).then(n.bind(null,"AxRA"))},panelClass:"full",resolve:(o={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},o[c.d]=t.resolve,o),peekStates:["message","event-create","telemetry-settings"],peekViewName:"telemetry-instructor-details-base@",pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(l.a.StudentHighPerformance.toString(),{url:"/telemetry/student/high-performance/:courseId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(18),n.e(20),n.e(28),n.e(31),n.e(41),n.e(296)]).then(n.bind(null,"5a0X"))},panelClass:"peek",resolve:(s={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},s[c.d]=t.resolve,s.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return f(e,t,n,r)}],s),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(l.a.StudentLowActivity.toString(),{url:"/telemetry/student/low-performance/activity/:courseId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(18),n.e(20),n.e(28),n.e(31),n.e(41),n.e(307)]).then(n.bind(null,"ADyW"))},panelClass:"peek",resolve:(u={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},u[c.d]=t.resolve,u.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return f(e,t,n,r)}],u),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(l.a.StudentLowGrades.toString(),{url:"/telemetry/student/low-performance/grades/:courseId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(18),n.e(20),n.e(28),n.e(31),n.e(41),n.e(308)]).then(n.bind(null,"vOTS"))},panelClass:"peek",resolve:(p={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},p[c.d]=t.resolve,p.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return f(e,t,n,r)}],p),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(l.a.StudentProgress.toString(),{url:"/telemetry/student/progress/:courseId",require:function(){return Promise.all([n.e(15),n.e(21),n.e(18),n.e(20),n.e(28),n.e(31),n.e(314)]).then(n.bind(null,"09dT"))},panelClass:"peek",resolve:(m={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry"),t.loadBundle("components/services/telemetry-chart")])}]},m[c.d]=t.resolve,m.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return f(e,t,n,r)}],m),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(l.a.StudentFindAStudyPartner.toString(),{url:"/telemetry/student/request-study-help/:courseId",require:function(){return n.e(275).then(n.bind(null,"cU3T"))},panelClass:"peek",resolve:(h={translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("components/directives/telemetry/telemetry")])}]},h[c.d]=t.resolve,h.currentCourseColor=["$q","$stateParams",a.o.serviceName,d.b,function(e,t,n,r){return f(e,t,n,r)}],h),pageTitle:"components.directives.telemetry.panel.titleStudent"}).peekState(l.a.ContentActivityInDetail.toString(),{url:"/telemetry/instructor/activity-in-detail/:contentId",require:function(){return Promise.all([n.e(15),n.e(0),n.e(1),n.e(18),n.e(28),n.e(254)]).then(n.bind(null,"AeD7"))},panelClass:"full",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/telemetry/telemetry")}],currentContent:["$stateParams",c.d,function(e,t){var n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.telemetry.panel.titleStudentActivityDetails",peekStates:["message","event-create",l.a.InstructorDetails.toString()],peekViewName:"telemetry-content-activity-in-detail-base@"}).peekState(l.a.DiscussionForumInsights.toString(),{url:"/telemetry/instructor/discussion-insights/:contentId/:forumContentId",require:function(){return Promise.all([n.e(0),n.e(3),n.e(381)]).then(n.bind(null,"zl9+"))},panelClass:"full",params:{groupId:null},resolve:{translations:[i.serviceName,function(e){return e.loadBundle("components/directives/discussion")}],currentContent:["$stateParams",c.d,function(e,t){var n=e.contentId;return t.contents.$find(n).$asPromise()}]},pageTitle:"components.directives.discussion.insights.pageTitle",peekStates:["content-manage","submission-list","message"],peekViewName:"telemetry-discussion-forum-insights-base@"})}])},jciN:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return l});n("cueX"),n("1qB0");var r=n("IbG+"),i=n("oVrE"),o=n("g66W"),s=n("0JpG"),a=n("NMEb"),u=n("5MwF"),c=n("92Mn"),l="ultra.directives.avatar",d=function(){function e(e,t,n,r,i){var o=this;this.scope=e,this.$element=t,this.attributes=n,this.bbLocalize=r,this.$timeout=i,this.backgroundColors=12;var s=this.scope.$watchGroup(["user.givenName","user.familyName","user.ui.displayName","user.avatar.permanentUrl","user","inactive()"],function(){void 0!==o.scope.user&&(o.renderAvatars(),o.scope.autoUpdate&&o.scope.autoUpdate()||s())}),a=this.scope.$watchCollection("users",function(){o.scope.users&&(o.renderAvatars(),o.scope.autoUpdate&&o.scope.autoUpdate()||a())})}return e.prototype.getAvatarBG=function(e){return"default-avatar-"+(parseInt((e&&e.id||"0").replace(/[^\d]/g,""),10)%this.backgroundColors+1)},e.prototype.avatarParticipantsClass=function(e){switch(e){case 0:return"no-participants";case 1:return"one-participant";case 2:return"two-participants";default:return"two-plus-participants"}},e.prototype.canDisplayAvatarForUser=function(e){return!!e&&(!!(e.givenName||e.familyName||this.isAnonymousStudent(e))||!(!e.avatar||!e.avatar.permanentUrl||"default"===e.avatar.permanentUrl))},e.prototype.getInitials=function(e){return!e||this.isAnonymousStudent(e)||!e.givenName||!e.familyName||o.i(e.givenName)||o.i(e.familyName)||o.j(e.givenName)||o.j(e.familyName)?null:(e.givenName.charAt(0)+e.familyName.charAt(0)).toLowerCase()},e.prototype.buildAvatarData=function(e){var t={};return this.canDisplayAvatarForUser(e)?(t.avatarBg=this.getAvatarBG(e),t.userInitials=this.getInitials(e),e.ui&&e.ui.displayName?t.username=e.ui.displayName:e.givenName||e.familyName||this.isAnonymousStudent(e)?this.bbLocalize.formatUsername(e,s.ILocaleUsernameFormat.Long,this.scope,{noWrap:!0,noEscape:!0}).then(function(e){t.username=e}):t.username=null,e.avatar&&e.avatar.permanentUrl&&"default"!==e.avatar.permanentUrl&&(/^https?/.test(e.avatar.permanentUrl)&&-1===e.avatar.permanentUrl.indexOf("ts=")&&(e.avatar.permanentUrl=e.avatar.permanentUrl+(e.avatar.permanentUrl.indexOf("?")>=0?"&ts=":"?ts=")+encodeURIComponent(e.lastModifiedAt||""+(new Date).getTime())),t.avatarUrl=e.avatar.permanentUrl),t.isAllMembers=i.e(e),t):null},e.prototype.isAnonymousStudent=function(e){if(e.isAnonymousStudent)return e.isAnonymousStudent()},e.prototype.renderAvatars=function(){var e=this.scope.users;if(!e&&this.scope.user&&(e=this.scope.user),r.isArray(e)||(e=null!=e?[e]:[]),0===e.length)return this.scope.first=null,this.scope.second=null,this.scope.participants=0,void(this.scope.isAvatarRender=!0);this.scope.participants=e.length,this.scope.avatarsClasses={},r.isDefined(this.scope.inactive)&&(this.scope.avatarsClasses.inactive=this.scope.inactive()),!this.scope.avatarsClasses.inactive&&r.isDefined(this.scope.customizedActiveStyle)&&(this.scope.avatarsClasses.outline=!0,this.scope.avatarsClasses[this.scope.customizedActiveStyle]=!0),this.scope.avatarsClasses[this.avatarParticipantsClass(e.length)]=!0,this.scope.first=this.buildAvatarData(e[0]),2===e.length?this.scope.second=this.buildAvatarData(e[1]):e.length>2&&(this.scope.second={}),this.scope.isAvatarRender=!0},e}(),p=function(){function e(e,t){var n=this;this.bbLocalize=e,this.$timeout=t,this.restrict="E",this.template=c,this.scope={user:"=?",inactive:"&?",users:"=?",autoUpdate:"&?",isGray:"&?",hasException:"&?",customizedActiveStyle:"@?"},this.link=function(e,t,r){return new d(e,t,r,n.bbLocalize,n.$timeout)}}return e.$inject=[s.serviceName,"$timeout"],e}();u.a.features.newAvatar?r.module(l,[]).directive("bbAvatar",["$compile",function(t){return{restrict:"E",scope:!1,priority:Number.MAX_VALUE,terminal:!0,link:function(n,r,i){var o=i.hasOwnProperty("users")?"bb-user-avatar-group":"bb-user-avatar",s=e(r[0].outerHTML.replace(/bb\-avatar/g,o));r.replaceWith(s),t(s)(n)}}}]):r.module(l,[a.a]).directive("bbAvatar",["$injector",function(e){return e.instantiate(p)}])}).call(this,n("EVdn"))},jhBu:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("mrSG"),i=n("IbG+"),o=n("5MwF"),s=n("x+T+"),a=n("Qbdf"),u="ultra.service.entitlement",c="entitlement",l=function(){function e(e,t){this.entitlementCache=e,this.currentCourse=t}return e.prototype.isEntitled=function(e,t){if(void 0===t&&(t=this.currentCourse.courseId),!t)return o.a.production||console.error(new Error("There is no course in context. Check the configuration.")),!1;if(!o.a.production&&!this.entitlementCache.hasCachedCourseEntitlements(t))throw new Error("Cached entitlements should exist for course with ID, "+t+", but none were found.\n        Make sure the entitlement resolver is configured for this route.");return this.entitlementCache.hasCachedCourseEntitlements(t)&&this.entitlementCache.getCachedCourseEntitlements(t).has(e.toString())},e.prototype.areAllEntitled=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),e.every(function(e){return n.isEntitled(e,t)})},e.prototype.areAnyEntitled=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),e.some(function(e){return n.isEntitled(e,t)})},e.prototype.hasCourseEntitlement=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then(function(){return n.isEntitled(e,t)})},e.prototype.hasAllCourseEntitlements=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then(function(){return n.areAllEntitled(e,t)})},e.prototype.hasAnyCourseEntitlement=function(e,t){var n=this;return void 0===t&&(t=this.currentCourse.courseId),this.entitlementCache.loadCourseEntitlements(t).then(function(){return n.areAnyEntitled(e,t)})},e.prototype.hasSystemEntitlement=function(e){var t=this;return this.entitlementCache.loadCourseEntitlements(s.a).then(function(){return t.isEntitled(e,s.a)})},e.$inject=[s.c,a.e],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l);i.module(u,[s.b,a.b]).service(c,l)},jj6p:function(e,t,n){"use strict";n.d(t,"a",function(){return m});n("VZTK");var r=n("EVdn"),i=n("IbG+"),o=n("5MwF"),s=n("Sa5G"),a=n("0JpG"),u=n("wQOJ"),c=n("pjml"),l=n("MOka"),d=n("TnpK"),p=n("Q/M7"),f=n("M+Ig"),m="ultra.base.routes";i.module(m,[a.moduleName,c.R]).config([d.c,function(e){e.baseState("base.calendar",{url:"^/calendar",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}],"?courseMembershipsLoader":i.noop},peekStates:["calendar-settings","event-create","event-edit","event-view","class-schedule","office-hours","content-manage","assignment","assessment","course","lti","scorm-launch-frame","scorm-settings","gradebook-item.scorm-submissions","scorm-overview"],require:function(){return Promise.all([n.e(87),n.e(10),n.e(34),n.e(75),n.e(135)]).then(n.bind(null,"q2ny"))},pageTitle:"base.nav.calendar"}).baseState("base.deadline",{url:"^/deadline",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},peekStates:["calendar-settings","event-create","event-edit","event-view","class-schedule","office-hours","content-manage","assignment","course","assessment"],require:function(){return Promise.all([n.e(87),n.e(10),n.e(34),n.e(75),n.e(135)]).then(n.bind(null,"q2ny"))},pageTitle:"base.nav.calendar"}).baseState("base.courses",{url:"^/course?enrollmentMessage",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/courses/base-courses")}]},peekStates:["course","external","class-schedule","course-edit-banner"],peekViewName:"courses-base",require:function(){return Promise.all([n.e(0),n.e(10),n.e(82),n.e(78),n.e(118)]).then(n.bind(null,"EQ9X"))},pageTitle:"base.nav.courses"}).baseState("base.grades",{url:"^/grades",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/grades/base-grades")}],"?courseMembershipsLoader":[i.noop]},require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(10),n.e(78),n.e(259)]).then(n.bind(null,"Bfy5"))},peekStates:["assessment","assignment","grade-and-feedback","gradebook-item","telemetry","course","discussion","lti","scorm-settings","gradebook-item.scorm-submissions","scorm-launch-frame","scorm-overview",f.a.InstructorClass.toString(),f.a.InstructorDetails.toString(),f.a.StudentProgress.toString(),"overall-grade-student","attendance","attendance-student-view"],pageTitle:"base.nav.grades"}).baseState("base.messages",{url:"^/messages",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/messages/base-messages")}]},require:function(){return Promise.all([n.e(27),n.e(124),n.e(318)]).then(n.bind(null,"ZQ8w"))},peekStates:["create-message","edit-message","message","course"],pageTitle:"base.nav.messages"}).baseState("base.organizations",{url:"^/organization?enrollmentMessage",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/courses/base-courses")}]},peekStates:["course","external","class-schedule","organization-edit-banner"],peekViewName:"courses-base",require:function(){return Promise.all([n.e(0),n.e(10),n.e(82),n.e(78),n.e(118)]).then(n.bind(null,"EQ9X"))},pageTitle:"base.nav.organizations"}).baseState("base.profile",{url:"^/profile",resolve:{userConfiguration:[c.Qb.serviceName,function(e){return e.getUserConfiguration()}],translations:[a.serviceName,function(e){return e.loadBundle("features/base/profile/base-profile")}],isMobileDistributorActive:["$q",c.U.serviceName,"memberships",function(e,t,n){var r=n.length>0,i=n.every(function(e){return e.isStudentMembership()});return o.a.features.instructorPushNotifications||r&&i?t.$build().courseSettings.$new(s.y.Mobile).$fetch().$allow([400]).$then(function(e){return!!e.settings}):e.resolve(!1)}],memberships:[l.b,function(e){return e.reloadStreamMemberships()}]},require:function(){return Promise.all([n.e(23),n.e(39),n.e(84),n.e(134),n.e(282)]).then(n.bind(null,"cFSu"))},peekStates:["notification-settings","update-avatar","update-profile","update-language","update-password","privacy"],pageTitle:"base.nav.profile"}).baseState("base.recentActivity",{resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/stream/base-stream")}],memberships:[l.b,function(e){return e.reloadStreamMemberships()}],"?courseMembershipsLoader":i.noop},peekStates:["announcement","announcement-detail","assignment","assessment","content-manage","content-group","course","discussions","event-edit","event-view","gradebook-item","stream-message","telemetry","lti","content-group-enroll","notification-create","notification-history","notification-settings","scorm-overview","scorm-launch-frame","scorm",f.a.InstructorClass.toString(),f.a.InstructorDetails.toString(),f.a.StudentHighPerformance.toString(),f.a.StudentLowActivity.toString(),f.a.StudentLowGrades.toString(),f.a.StudentProgress.toString(),f.a.StudentFindAStudyPartner.toString()],peekViewName:"base-recentActivity-base",url:"^/stream",require:function(){return Promise.all([n.e(14),n.e(2),n.e(1),n.e(26),n.e(261)]).then(n.bind(null,"UFXJ"))},pageTitle:"base.nav.recentActivity"}).baseState("base.tools",{url:"^/tools",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/tools/base-tools")}]},peekStates:["lti"],require:function(){return n.e(268).then(n.bind(null,"2yHp"))},pageTitle:"base.nav.tools"}).baseState("base.admin",{resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/admin/base-admin")}]},systemEntitlement:s.C.ViewAdmin,onEnter:function(){r("body").addClass("base-admin-open")},onExit:function(){r("body").removeClass("base-admin-open")},url:"^/admin",require:function(){return n.e(338).then(n.bind(null,"9D0M"))},peekStates:["course","localization","brands","cloud-storage-admin","notification-admin"],pageTitle:"base.nav.admin"}).peekState("localization",{url:"/localization?launchUrl",require:function(){return n.e(360).then(n.bind(null,"Arco"))},pageTitle:"base.nav.localization",panelClass:"full",resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/base/admin/localization")}],enterCheck:[d.d,"$stateParams",function(e,t){if(!t.launchUrl)return e.goToRoute("base.admin")}]}}).peekState("cloud-storage-admin",{url:"/cloud-storage",require:function(){return Promise.all([n.e(16),n.e(29),n.e(36),n.e(273)]).then(n.bind(null,"nL78"))},pageTitle:"base.nav.cloud-storage-admin",panelClass:"full"}).peekState("notification-admin",{url:"/notification",require:function(){return n.e(412).then(n.bind(null,"Vf+W"))},pageTitle:"base.nav.notification-admin",panelClass:"full"}).baseState("base.redirect",{url:"^/redirect?userId&contentId&courseId&eventType&sourceType&sourceId&redirectType&legacyUrl&parentId&screen",require:function(){return n.e(415).then(n.bind(null,"kds7"))}}).baseState("base.institution-page",{url:"^/institution-page",require:function(){return Promise.all([n.e(16),n.e(140)]).then(n.bind(null,"dRT/"))},peekStates:["allLinks","lti"],pageTitle:"base.nav.institutionPage",resolve:{ipVariantId:[u.b,d.d,function(e,t){return e.getEffectiveVariantIdWithPermissions().then(function(e){var n=e.variantId;if(e.canView)return n;t.goToRoute("base.recentActivity")},function(){return t.goToRoute("base.recentActivity")})}]}}).baseState("base.institution-page-admin",{url:"^/institution-page/admin/:variantId",require:function(){return Promise.all([n.e(16),n.e(140)]).then(n.bind(null,"dRT/"))},peekStates:["allLinks","editModule","editPageImage","createModule","lti","brand-detail"],pageTitle:"base.nav.institutionPage",params:{variantId:"default"},resolve:{ipVariantId:[u.b,d.d,"$stateParams",function(e,t,n){return e.getUserCanEdit("default").then(function(e){return e||t.goToRoute("base.recentActivity"),n.variantId},function(){return t.goToRoute("base.recentActivity")})}],testResolver:["ipVariantId",function(e){return e}]}}).state("institution",{onEnter:function(){location.href=p.c("/institution")}}).baseState("base.course-catalog",{url:"^/catalog",require:function(){return n.e(146).then(n.bind(null,"Kz46"))},pageTitle:"base.nav.catalog",peekStates:["course"],resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/course-catalog")}]}}).baseState("base.organization-catalog",{url:"^/organization-catalog",require:function(){return n.e(146).then(n.bind(null,"Kz46"))},pageTitle:"base.nav.orgCatalog",peekStates:["course"],resolve:{translations:[a.serviceName,function(e){return e.loadBundle("features/course/course-catalog")}]}}),o.a.features.componentDemos&&e.baseState("base.demo",{url:"^/demo",require:function(){return Promise.all([n.e(0),n.e(23),n.e(83),n.e(248)]).then(n.bind(null,"KTgJ"))},peekStates:["demoComponent"],pageTitle:"base.nav.demo"})}])},jnoB:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("IbG+"),i=n("Sa5G"),o=n("Qbdf"),s=n("0JpG"),a=n("TnpK"),u="ultra.course.groups.router";r.module(u,[o.b,s.moduleName,a.b]).config([o.c,a.c,function(e,t){var r;t.peekState("group-set-list",{url:"/group-set-list",courseEntitlement:i.w.ViewGroupsAsAdmin,require:function(){return Promise.all([n.e(72),n.e(385)]).then(n.bind(null,"Mkxh"))},pageTitle:"course.outline.groupWorkspace.title",peekStates:["group-set-detail"],panelClass:"full"}).peekState("group-set-detail",{panelClass:"full",url:"/groupSet?courseId&groupSetId&mode",courseEntitlement:i.w.ViewGroupsAsAdmin,resolve:{translations:[s.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}]},require:function(){return Promise.all([n.e(7),n.e(72),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(246)]).then(n.bind(null,"ymtw"))},pageTitle:"course.content.courseGroup.groupSetTitle",peekStates:["message"],peekViewName:"group-message-peek"}).peekState("content-group-enroll",{url:"/group-enroll?courseId&contentId&fromView",panelClass:"full",resolve:(r={},r[o.d]=e.resolve,r.translations=[s.serviceName,function(e){return e.loadBundle("features/course/content/group/course-group")}],r),require:function(){return Promise.all([n.e(72),n.e(384)]).then(n.bind(null,"sBQA"))},pageTitle:"course.content.courseGroup.selfEnroll"})}])},k9iv:function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"c",function(){return y});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("5MwF"),a=n("0JpG"),u=n("12mu"),c=n("Dk34"),l=n("Zwxv");n.d(t,"a",function(){return l});var d=n("F6pP"),p=n("opeW"),f=n("4/g8"),m=n("TU15"),h=n("+hdB"),g=n("oIwE"),v=n("uXzy"),b="ultra.components.services.errorModal",y="errorModal",S=function(){function e(){this.isModalClosed=!0,this.handlers=[],this.$get=[u.b,"$rootScope","$q","$window","$injector",function(e,t,n,r,i){return this.$modal=e,this.$rootScope=t,this.$q=n,this.$injector=i,this.$window=r,this}]}return e.prototype.onErrorResponse=function(e){this.handlers.push(e)},e.prototype.handleApiError=function(t,n){var r=this;if(t&&null!=t.status&&!this.$window.document.getElementsByClassName("ms-Panel").length){var o={response:t,errorHandler:n};if(403===t.status)t.data&&"Question could not be created with existing attempt(s)"===t.data.message?o.template=c:o.template=l;else if(404===t.status)t.data&&i.includes(t.data.message,"No course content found for content id")?o.template=d:o.template=p;else if(409===t.status)o.template=f;else if(507===t.status)o.template=m;else if(t.status>=400&&t.status<=599){var s;if(400===t.status&&t.data&&t.data.code===e.COURSE_IS_CLOSED_CODE)o.template=h;else this.handlers.some(function(e){return(s=r.$injector.invoke(e,void 0,{response:t}))&&void 0!==s.tpl}),o.template=s&&s.tpl||g,o.scope=s&&s.scope}o.template&&this.openModal(o)}},e.prototype.showDefaultErrorModal=function(){var e={template:p};this.openModal(e)},e.prototype.handleError=function(e,t){if(e){var n={errorString:e,template:v,errorHandler:t};this.openModal(n)}},e.prototype.openModal=function(e){var t=this;if(this.isModalClosed){if(!e||!e.template)throw new Error("Modal configuration template was not supplied");var n=e.scope||this.$rootScope;s.a.errorDetails&&((n=this.$rootScope.$new()).response=e.response),n.errorString=e.errorString;var r={template:e.template,scope:n,resolve:{translations:[a.serviceName,function(e){return e.loadBundle("components/services/error-modal")}]}};this.isModalClosed=!1,this.modalInstance=this.$modal.open(r),this.modalInstance.result.then(function(){},function(){t.isModalClosed=!0,e.errorHandler&&e.errorHandler()})}},e.COURSE_IS_CLOSED_CODE="bb-rest-course-is-closed",e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(S);o.module(b,[a.moduleName,u.a]).provider(y,S)},"kj+S":function(e,t,n){},kpD8:function(e,t){e.exports='<div bb-load-bundle="components/directives/collab-session-icon" class="icon-shadow" ng-class="{\'is-running\': $ctrl.runningSessionFlag}">\n    <bb-svg-icon size="small" icon="collab" role="presentation" aria-hidden="true" status="active"></bb-svg-icon>\n    <bb-svg-icon size="medium" icon="collab-session" role="presentation" aria-hidden="true"></bb-svg-icon>\n</div>'},l5id:function(e,t,n){e.exports=n("ZJ/X")(67)},lAEu:function(e,t,n){"use strict";var r=n("mrSG"),i=n("hTOW"),o=n.n(i),s=n("rtTK"),a=n.n(s),u=n("tfZW"),c=function(e){function t(t,n){void 0===n&&(n={defaultLocale:"en",production:!1,urlRoot:""});var r=e.call(this,t,n)||this;return r.babelfishInstance=t,r.options=n,r.overrideLoader=u.a.getInstance(),r}return r.__extends(t,e),t.prototype._load=function(e){var n=this;return t._loadPromises[e]?t._loadPromises[e]:(t._loadPromises[e]=new i.InstantPromise(function(t,r){var i=[n.options.urlRoot+"/static/combined-cldrdata/"+e+"/_combined.json"].map(function(e){return fetch(e,{method:"GET",headers:{Accept:"application/json"}}).then(function(e){return e.json()})});Promise.all(i).then(function(e){return t(e)}).catch(function(e){return r(e)})}),t._loadPromises[e])},t.prototype.getPreferredLocales=function(t){return[t].concat(e.prototype.getPreferredLocales.call(this,this.overrideLoader.getBaseLocale(t)||t))},t._loadPromises={},r.__decorate([a.a],t.prototype,"getPreferredLocales",null),t}(o.a);t.a=c},"lAa/":function(e,t){e.exports='<bb-modal class="notification js-disallowed-file-type"\n          modal-title-key="components.directives.fileUpload.disallowedFileTypeTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.disallowedFileTypeFull</bb-translate>\n      <a href="{{::fileUpload.getMoreSupportURL()}}" target="_blank" rel="noopener noreferrer" analytics-id="components.directives.fileUpload.moreSupportedFiles"><bb-translate>components.directives.fileUpload.moreSupportedFiles</bb-translate></a>\n    </p>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container">\n        <button role="button" class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.validFiles.length > 0">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadValidFiles.plural">\n          <bb-translate translate-values="{count:fileUpload.validFiles.length}">components.directives.fileUpload.uploadValidFiles.plural</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-if="fileUpload.forceReselectDisallowedFiles && fileUpload.forceReselectDisallowedFiles()">\n        <button role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.closeModalAndChooseFiles()" analytics-id="components.directives.fileUpload.selectAnotherFile">\n          <bb-translate>components.directives.fileUpload.selectAnotherFile</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},lCpV:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Discussions=new t("discussions"),t.Participants=new t("participants"),t}(n.n(i).a);t.a=o},lDJ8:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("mrSG"),i=(n("20OV"),n("yq4x"),n("JHPD"),n("LvDl")),o=n("EVdn"),s=n("IbG+"),a=n("0JpG"),u=n("YIUI"),c=n("lEL+"),l=n("GbAM"),d="ultra.directives.validationMessages",p=function(){function e(t,n,r,i,o,s){var a=this;this.$rootScope=t,this.scope=n,this.element=r,this.attrs=i,this.form=o,this.timeout=s,this.error=!1,this.immediateUpdate=!1,this.elements=[],e._$rootScope=t,n.labels=[],e.onDirectiveAdded(),n.$on("$destroy",function(){e.onDirectiveRemoved()});var u=i.for;if(!u)throw new Error("`for` attribute is required.");u.split(",").forEach(function(e){var t=o[e];null==t.$warning&&(t.$warning={}),null==t.$errorImmediate&&(t.$errorImmediate={}),a.elements.push(t)}),n.$watch(this.updateMessages.bind(this)),n.$watch(function(){return document.activeElement},function(e,t){e!==t&&a.updateMessages()}),n.$watch(function(){return n.showErrors}),this.elements&&this.elements.length&&n.$watch(function(){return a.elements[0].$invalid},function(e,t){e&&e!==t?(a.immediateUpdate=!0,a.updateMessages()):a.immediateUpdate=!1})}return e.prototype.updateMessages=function(){var t=this;this.scope.showOnsubmitErrors=!1,this.scope.showErrors=!1,this.scope.showImmediateErrors=!1,this.scope.showWarnings=!1,this.scope.labels.length=0;var n=[];if(this.form.$submitted){var r=i.filter(this.elements,function(e){return Object.keys(e.$error).length>0});n=i.map(r,"$label");var o=i.merge.apply(null,i.map(r,"$error"))||{},s=Object.keys(o);s.length>0&&(this.scope.showOnsubmitErrors=!0,this.scope.onsubmitErrors={},s.forEach(function(e){t.scope.onsubmitErrors[e+"Onsubmit"]=o[e]}),this.readAriaLiveMessage(this.element.find(".form-element-onsubmit-errors").text(),"alert"))}else{var a=document.activeElement,u=i.find(this.elements,{$name:a.name});if(u&&u.$errorImmediate&&Object.keys(u.$errorImmediate).length>0)return this.scope.showImmediateErrors=!0,this.scope.immediateErrors=u.$errorImmediate,this.readAriaLiveMessage(this.element.find(".form-element-immediate-errors").text(),"alert"),!0;if(!e.mouseIsDown||this.error||this.immediateUpdate){var c=this.immediateUpdate?this.elements:i.filter(this.elements,function(e){return(e.$touched||e.$dirty||t.scope.checkWhenInit&&t.scope.checkWhenInit())&&(!(a.name===e.$name)||t.scope.immediate&&t.scope.immediate())}),l=(r=i.filter(c,function(e){return Object.keys(e.$error).length>0}),i.merge.apply(null,i.map(r,"$error"))||{});l&&Object.keys(l).length>0?(this.error=this.scope.showErrors=!0,this.scope.errors=l,n.push.apply(n,i.map(r,"$label")),this.readAriaLiveMessage(this.element.find(".form-element-errors").text(),"alert")):this.error=!1}if(!this.scope.showOnsubmitErrors&&!this.scope.showErrors){var d=i.filter(this.elements,function(e){return Object.keys(e.$warning).length>0}),p=i.merge.apply(null,i.map(d,"$warning"))||{};p&&Object.keys(p).length>0&&(this.scope.showWarnings=!0,this.scope.warnings=p,this.readAriaLiveMessage(this.element.find(".form-element-warnings").text(),"status"))}}return this.scope.labels.push.apply(this.scope.labels,i.compact(n)),!0},e.prototype.readAriaLiveMessage=function(e,t){var n=this;this.timeout(function(){"alert"===t?n.scope.$root.$broadcast(l.a,e.trim()):n.scope.$root.$broadcast(l.b,e.trim())},this.scope,0,!1)},e.mouseIsDown=!1,e._directiveCount=0,e.onDirectiveAdded=function(){var t=0===e._directiveCount;e._directiveCount++,t&&(e.mouseDownHandler||(e.mouseDownHandler=function(t){var n=o(t.target);(n.parents("ng-form").length||n.parents("form").length)&&e._$rootScope.$apply(function(){n.is("[type=submit]")||(e.mouseIsDown=!0)})}),e.mouseUpHandler||(e.mouseUpHandler=function(t){var n=o(t.target);(n.parents("ng-form").length||n.parents("form").length)&&e._$rootScope.$apply(function(){e.mouseIsDown=!1})}),o(document).on("mousedown",e.mouseDownHandler),o(document).on("mouseup",e.mouseUpHandler))},e.onDirectiveRemoved=function(){var t=e._directiveCount<=1;e._directiveCount--,t&&(o(document).off("mousedown",e.mouseDownHandler),o(document).off("mouseup",e.mouseUpHandler))},e}(),f=function(e,t,n){var r=this;this.bbLocalize=e,this.$rootScope=t,this.timeout=n,this.scope={immediate:"&?",checkWhenInit:"&?"},this.require="^form",this.restrict="A",this.transclude=!0,this.link=function(e,t,n,i){return r.bbLocalize.loadBundle("components/directives/validation-messages"),new p(r.$rootScope,e,t,n,i,r.timeout)},this.template=u};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(f);s.module(d,["ngMessages",a.moduleName]).directive("bbValidationMessages",[a.serviceName,"$rootScope",c.b,function(e,t,n){return new f(e,t,n)}]).directive("ngModel",function(){return{restrict:"A",require:"ngModel",priority:-9999,link:function(e,t,n,r){var i=t[0],o=t.parents().last();if(i.hasAttribute("aria-label"))e.$watch(function(){return i.getAttribute("aria-label")},function(e){return r.$label=e});else if(i.hasAttribute("aria-labelledby")){var s=i.getAttribute("aria-labelledby").split(" ")[0],a=o.find("#"+s)[0];a&&e.$watch(function(){return a.textContent},function(e){return r.$label=e})}else{var u=o.find('label[for="'+i.id+'"]')[0];u&&e.$watch(function(){return u.textContent},function(e){return r.$label=e})}}}})},"lEL+":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n("IbG+"),i="ultra.services.timeout",o="timeout";r.module(i,[]).factory(o,["$timeout",function(e){var t=function(t,n,r,i){var o=e(function(){return o.__bb_unregister_scope_destroy__&&(o.__bb_unregister_scope_destroy__(),o.__bb_unregister_scope_destroy__=null),t.apply(this,arguments)},r,i);return o.__bb_unregister_scope_destroy__=n.$on("$destroy",function(){e.cancel(o)}),o};return t.cancel=function(t){return t&&t.__bb_unregister_scope_destroy__&&(t.__bb_unregister_scope_destroy__(),t.__bb_unregister_scope_destroy__=null),e.cancel(t)},t}])},lTRw:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("mrSG"),i=(n("TeAI"),n("Bu0u")),o=n("nkTj"),s=n("yCC5"),a=n("Rjd/"),u=s.Y,c=function(){function e(){}return e.fromValue=function(t){return e[t]},e.ALL={resetShowComments:function(){return!0},getValue:function(){return"ALL"},validate:function(e){return!0}},e.BYCOLUMNS={resetShowComments:function(){return!1},getValue:function(){return"BYCOLUMNS"},validate:function(e){return e&&!!e.length}},e}();a.a.factory(u,["restmod",o.d,function(e,t){return e.model().mix({grades:{hasMany:s.gb},columns:{hasMany:s.fb},attempts:{hasMany:s.cb},categories:{hasMany:s.eb},performancecodes:{hasMany:s.ib},schemas:{hasMany:s.jb},bulkView:{hasOne:s.db,path:"grades/bulkView"},settings:{hasOne:s.Z},groupAttempts:{hasMany:s.hb},summaries:{hasMany:s.r},$extend:{Record:{getDownloadUrl:function(e){if(!e||!e.dataScopeType||!e.delimiterType)throw new i.a({message:"dataScoreType and delimiterType must be set"});return this.$send({method:"POST",url:this.$url()+"/prepareDownload",data:r.__assign({},e,{dataScopeType:e.dataScopeType.getValue(),downloadTo:e.downloadTo.getValue()})},function(e){this.$unwrap(e.data)}).$asPromise()},validateCalculatedFormula:function(e){if(!e)throw new i.a({message:"formula data must be set"});return this.$send({method:"POST",url:this.$url()+"/validateCalculatedFormula",data:e}).$allow([400]).$asPromise().then(function(e){return 200===e.$response.status})},parseUploadedGradebook:function(e){return this.$send({method:"GET",url:this.$url()+"/parseUploadedGradebook",params:e},function(e){this.$unwrap(e.data)}).$allow([400,403,404]).$asPromise()},importGradebook:function(e){return this.$send({method:"POST",url:this.$url()+"/importGradebook",data:e},function(e){this.$unwrap(e.data)}).$allow([400,403,404]).$asPromise()}}}})}])},"lUN/":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("EVdn");function i(){return r.extend(r.expr[":"],{tabbable:function(e){var t=r.attr(e,"tabindex"),n=null!=t;return(!n||t>=0)&&function(e,t){var n,i,o,s,a,u=e.nodeName.toLowerCase();if("area"===u)return n=e.parentNode,i=n.name,!(!e.href||!i||"map"!==n.nodeName.toLowerCase())&&((o=r("img[usemap='#"+i+"']")).length>0&&o.is(":visible"));/^(input|select|textarea|button|object)$/.test(u)?(s=!e.disabled)&&(a=r(e).closest("fieldset")[0])&&(s=!a.disabled):s="a"===u&&e.href||t;return s&&r(e).is(":visible")}(e,n)}})}},lVRt:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r="currentCourse",i="membership"},lhRd:function(e,t,n){},lhpd:function(e,t,n){},lmMM:function(e,t,n){"use strict";(function(e){n.d(t,"c",function(){return f}),n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("oSB+"),a=n.n(s),u=n("Fvsw"),c=n("0JpG"),l=n("12mu"),d=n("pjml"),p=n("vo5Q"),f="ultra.directives.confirmationNeeded",m="components.directives.confirmation-needed.",h="-",g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Always=new t("always"),t.Once=new t("once"),t.UserChoice=new t("userChoice"),t}(a.a);function v(e,t){return m+t+h+e}var b=function(){function t(e,t,n,r,i,o){var s=this;this.scope=e,this.attrs=n,this.$q=r,this.bbContext=i,this.$modal=o,this.clickHandling=!1,this.scope.confirmationNeeded=this,this.scope.modalAriaType=this.attrs.modalAriaType,this.scope.nextSelector=this.attrs.nextSelector,e.$on("show-confirmation",function(e,t,n){t===s.attrs.modalName&&s.handleButtonClick(n)}),t.on("click",function(e){s.handleButtonClick(e)}),e.$on("$destroy",function(){t.off()}),e.$on("dismiss-confirmation",function(){s.modalInstance&&s.modalInstance.dismiss()})}return t.prototype.handleButtonClick=function(e){var t=this;if(!this.clickHandling){var n;if(this.clickHandling=!0,this.attrs.getConfirmationKeyAndShowType)n=this.$q.when(this.scope.$eval(this.attrs.getConfirmationKeyAndShowType));else{if(!this.attrs.bbConfirmationNeeded)return void(this.clickHandling=!1);n=this.$q.when({confirmationKey:this.attrs.bbConfirmationNeeded,showType:this.attrs.showType})}e&&(e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.preventDefault()),n.then(function(n){if(n.confirmationKey)switch(t.resourceType=n.confirmationKey.replace("resource/",""),t.choices=[],g.parse(n.showType)){case g.Always:t.confirmAction(e);break;case g.Once:t.showConfirmationActionOnlyOnce(e);break;default:t.showConfirmationActionByUserChoice(e)}else t.invokeClickAction(e)})}},t.prototype.showConfirmationActionOnlyOnce=function(e){var t=this;this.bbContext.getPreference(this.createPreferenceKey("dont-ask-again"),"false").then(function(n){"true"===n.value?t.invokeClickAction(e):t.confirmAction(e)})},t.prototype.createResourceKey=function(e){return m+e+h+this.resourceType},t.prototype.createPreferenceKey=function(e){return"{{context}}.confirmation".replace("{{context}}",this.resourceType+h+e).replace(/\-/g,".")},t.prototype.addToChoices=function(e,t,n){var r;r=this.attrs.modalContext&&"predict"===this.attrs.modalContext?{key:e,value:!!t,localizedKey:e,preferenceKey:this.createPreferenceKey(e),isDisable:!!n}:{key:e,value:!!t,localizedKey:this.createResourceKey(e),preferenceKey:this.createPreferenceKey(e),isDisable:!!n},this.choices.some(function(t){return t.key===e})||this.choices.push(r)},t.prototype.parseChoicesFromAttr=function(e){if(e&&e.length)for(var t=0;t<e.length;t++)this.addToChoices(e[t].key,e[t].value,e[t].isDisable)},t.prototype.showConfirmationActionByUserChoice=function(e){var t=this;this.bbContext.getPreference(this.createPreferenceKey("dont-ask-again"),"false").then(function(n){if("true"===n.value)if(t.attrs.choices){var r=JSON.parse(t.attrs.choices),i=[];r.forEach(function(e){i.push(t.bbContext.getPreference(t.createPreferenceKey(e.key),"false").then(function(n){var r="true"===n.value;t.scope.$emit(e.key,r)}))}),t.$q.all(i).then(function(){t.invokeClickAction(e)})}else t.invokeClickAction(e);else t.addToChoices("dont-ask-again"),t.confirmAction(e)},function(){t.addToChoices("dont-ask-again"),t.confirmAction(e)})},t.prototype.confirmAction=function(e){var t,n=this;this.scope.titleKey=this.createResourceKey("title"),this.scope.instructionsKey=this.createResourceKey("instructions"),this.scope.cancelKey=this.createResourceKey("cancel"),this.scope.okKey=this.createResourceKey("ok"),this.attrs.choices&&this.attrs.choices.length>0&&this.parseChoicesFromAttr(JSON.parse(this.attrs.choices)),t=this.attrs.customClass?p.replace(/class="notification"/,'class="notification '+this.attrs.customClass+'"'):p,this.modalInstance=this.$modal.open({template:t,scope:this.scope,resolve:{translations:[c.serviceName,function(e){return e.loadBundle("components/directives/confirmation-needed")}]},controller:["$scope",c.serviceName,function(e,t){e.okAction=function(){e.$close(),n.okClicked=!0},e.cancelAction=function(){n.attrs.otherChoiceAction?(e.$close(),n.okClicked=!1):e.$dismiss()};var r={};n.attrs.modalTranslateOptions&&(r=e.$eval(n.attrs.modalTranslateOptions)),e.modalTranslateOptions={},e.modalStrings={title:null,instructions:null,cancel:null,ok:null},Object.keys(e.modalStrings).forEach(function(n){e.modalTranslateOptions[n]=i.merge({key:e[n+"Key"]},r[n]),e.modalStrings[n]=t.translateSync(e.modalTranslateOptions[n])})}]}),this.modalInstance.result.then(function(){n.okClicked?(n.persistResult(),n.invokeClickAction(e)):(n.scope.$eval(n.attrs.otherChoiceAction),n.clickHandling=!1)},function(){n.attrs.dismissCallback&&n.scope.$eval(n.attrs.dismissCallback),n.clickHandling=!1})},t.prototype.persistResult=function(){var e=this;switch(g.parse(this.attrs.showType)){case g.Always:this.choices.forEach(function(t){e.scope.$emit(t.key,t.value)});break;case g.Once:this.bbContext.setPreference(this.createPreferenceKey("dont-ask-again"),"true");break;default:this.choices.forEach(function(t){t.value&&(e.scope.$emit(t.key,t.value),e.bbContext.setPreference(t.preferenceKey,t.value.toString()))})}},t.prototype.invokeClickAction=function(t){this.scope.$eval(this.attrs.fngClick||this.attrs.ngClick,{$event:t}),this.clickHandling=!1,this.scope.nextSelector&&e(this.scope.nextSelector).focus()},t}(),y=function(){function e(e,t,n){var r=this;this.$q=e,this.bbContext=t,this.$modal=n,this.priority=100,this.restrict="A",this.scope=!0,this.compile=function(e,t){return{pre:function(e,t,n){return new b(e,t,n,r.$q,r.bbContext,r.$modal)}}}}return e.$inject=["$q",u.b,l.b,d.o.serviceName],e}();o.module(f,["ngSanitize",u.a,l.a]).directive("bbConfirmationNeeded",["$injector",function(e){return e.instantiate(y)}])}).call(this,n("EVdn"))},lr7J:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return d});n("XhL2"),n("I22j");var r=n("LvDl"),i=n("IbG+"),o=n("5MwF"),s=n("XGja"),a=n("hkqm"),u=n("lEL+"),c=n("dRiK"),l="ultra.components.directives.infiniteScroll",d="bbInfiniteScroll",p=function(){function e(e,t,n,i,o,a,u){var l=this;this.scope=e,this.element=t,this.attrs=n,this.$compile=i,this.$q=o,this.timeout=a,this.toast=u,this.isManualLoad=!1,this.promises=[];var p=n.$observe("infiniteScrollTrayId",function(e){l.trayId=e,p()});if(n.infiniteScrollLocalizationKeysPrefix)var f=n.$observe("infiniteScrollLocalizationKeysPrefix",function(e){l.localizationKeysPrefix=e,l.trayLocalizationKeysPrefix=e+".saveTray",f()});else this.localizationKeysPrefix="components.directives.infinite-scroll",this.trayLocalizationKeysPrefix="";n.infiniteScrollLocalizationValues&&(this.localizationValues=e.$eval(n.infiniteScrollLocalizationValues)),e.$watchGroup([n.infiniteScrollTotalCount,n.infiniteScrollCurrentCount],function(e){if(null!=e[0]&&null!=e[1]){if(l.totalCount=e[0],l.currentCount=e[1],l.remainingCount=l.totalCount-l.currentCount,l.remainingCount<0)throw"The remainingCount of "+l.remainingCount+" should never be a negative number!";l.setLoadCount()}}),e.$watch(n.infiniteScrollDisabled,function(e){l.disabled=e});var m,h=e.$watch(n.infiniteScrollLoadLimit,function(e){null!=e&&(l.loadLimit=e,l.setLoadCount(),h())});i(t)(e),this.timeout(function(){m=i(c)(e).insertAfter(t)},this.scope,0,!1),this.scope.$on(d,function(e,t,n){if(l.trayId===t){var i=l.$q.defer();if(n.then(function(){i.resolve()}).catch(function(){return i.resolve()}),l.promises.push(i),i.promise.then(function(){return r.remove(l.promises,function(e){return n===e})}),l.cancelLoading=l.toast.showLoading({trayId:t,trayLocalizationKeysPrefix:l.trayLocalizationKeysPrefix,promise:i.promise}),l.attrs.infiniteScrollFocusableChildrenSelector&&l.isManualLoad){l.isManualLoad=!1;var o=l.loadCount;n.then(function(){l.timeout(function(){var e=l.element.find(l.attrs.infiniteScrollFocusableChildrenSelector);s.a(e.eq(e.length-o))},l.scope,0,!1)})}}}),this.scope.$on("$destroy",function(){m&&m.remove(),l.breakPromises(),l.cancelLoading&&l.cancelLoading()})}return e.prototype.breakPromises=function(){r.forEach(this.promises,function(e){e.resolve()})},e.prototype.loadMoreItems=function(){this.remainingCount>0&&(this.isManualLoad=!0,this.scope.$eval(this.attrs.bbInfiniteScroll))},Object.defineProperty(e.prototype,"loadMoreLocalizationValues",{get:function(){return i.extend({},this.localizationValues,{loadCount:this.loadCount})},enumerable:!0,configurable:!0}),e.prototype.setLoadCount=function(){null!=this.loadLimit&&null!=this.remainingCount&&(this.loadCount=Math.min(this.loadLimit,this.remainingCount))},e.$inject=["scope","element","attrs","$compile","$q",u.b,a.b],e}(),f=function(){function e(e){var t=this;this.$injector=e,this.terminal=!0,this.compile=function(e,n){return function(e,n,r){var i=e.$eval(r.infiniteScrollCurrentCount),o=e.$eval(r.infiniteScrollTotalCount);null!=i&&null!=o&&i>=o||n.attr("infinite-scroll",r.bbInfiniteScroll),n.removeAttr("bb-infinite-scroll"),e.infiniteScroll=t.$injector.instantiate(p,{scope:e,element:n,attrs:r})}}}return e.$inject=["$injector"],e}();i.module(l,["infinite-scroll",u.a,a.a]).value("THROTTLE_MILLISECONDS",o.a.infiniteScrollThrottleMS).directive("bbInfiniteScroll",["$injector",function(e){return e.instantiate(f)}])},mrSG:function(e,t,n){e.exports=n("ZJ/X")(0)},nXcJ:function(e,t){e.exports='<div ng-show="isShown" class="guidance-container stop-click-propagation" aria-hidden="true">\n  <p ng-show="title" ng-transclude="title" class="guidance-title"></p>\n  <p ng-transclude></p>\n</div>'},nYZ0:function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"b",function(){return C});var r=n("mrSG"),i=n("IbG+"),o=n("LvDl"),s=n("+O05"),a=n("lmMM"),u=n("k9iv"),c=n("pjml"),l=n("e6jQ"),d=n("Q/M7"),p=n("adx1"),f=n("z1U9"),m=n("Sa5G"),h=n("yC9S"),g=9e5,v="ultra.services.content",b="contentService",y=function(e){function t(){var n;if(t._instance)throw new Error("Error: Instantiation failed: Use IndicatorCacheService.getInstance() instead of new.");return n=e.call(this)||this,t._instance=n,n}return r.__extends(t,e),t.getInstance=function(){return t._instance},t.prototype.classConversationIndicatorRemoved=function(e,n,r){this.$emitEvent(t.CLASS_CONVERSATION_INDICATOR_REMOVED,e,n,r)},t.prototype.groupConversationIndicatorRemoved=function(e,n,r){this.$emitEvent(t.GROUP_CONVERSATION_INDICATOR_REMOVED,e,n,r)},t.prototype.$onClassConversationIndicatorRemoved=function(n){return e.prototype.$onEvent.call(this,t.CLASS_CONVERSATION_INDICATOR_REMOVED,n)},t.prototype.$onGroupConversationIndicatorRemoved=function(n){return e.prototype.$onEvent.call(this,t.GROUP_CONVERSATION_INDICATOR_REMOVED,n)},t._instance=new t,t.CLASS_CONVERSATION_INDICATOR_REMOVED="class-conversation-indicator-removed",t.GROUP_CONVERSATION_INDICATOR_REMOVED="group-conversation-indicator-removed",t}(p.a),S=function(){function e(e,t,n,r,i,o,s,a){var u=this;this.$q=e,this.DSCacheFactory=t,this.CourseModel=n,this.PartnerContentIdModel=r,this.errorModal=i,this.assessment=o,this.$rootScope=s,this.$ngRedux=a,this.rootNodeCache=t.createCache("rootNodes"),this.settingsCache=t.createCache("contentSettings"),this.indicatorsCache=t.createCache("indicators",{maxAge:g,deleteOnExpire:"aggressive"}),this.fetchIndicatorsPromiseCache={},this.indicatorCacheService=y.getInstance(),h.b.OnRootScope(s,"content-update",function(e,t){return u.refreshContentInCache(t)}),this.subscribeToRedux(a)}return e.prototype.subscribeToRedux=function(e){e.connect(function(e){return{}},function(e){return{deleteContentInStore:function(t){return e(f.actions.content.deleteContentInStore(t))}}})(this)},e.prototype.truncateDescription=function(t,n){if(n=n||e.MAX_LENGTH,!t||t.length<=n)return t;n-=" ...".length;var r=t.lastIndexOf(" ",n);return r<=0&&(r=n),t.substr(0,r)+" ..."},e.prototype.findRootNode=function(e,t){var n=this.getCacheKey(t,e.$pk),r=this.rootNodeCache.get(n);return r||(r=e.contents.$find(t.toString()),this.rootNodeCache.put(n,r)),r},e.prototype.getCacheKey=function(e,t){return e.toString()+t},e.prototype.getSettings=function(e){return this.settingsCache.get(e)},e.prototype.putSettings=function(e,t){return this.settingsCache.put(e,t)},e.prototype.removeSettings=function(e){return this.settingsCache.remove(e)},e.prototype.getCourseIndicators=function(e){return this.indicatorsCache.get("courseId_"+e)},e.prototype.putCourseIndicators=function(e,t){return this.indicatorsCache.put("courseId_"+e,t)},e.prototype.removeCourseIndicators=function(e){return this.indicatorsCache.remove("courseId_"+e)},e.prototype.refreshContentInCache=function(e){if(e)for(var t=e.courseId,n=m.h.getValues(),r=0;r<n.length;r++){var i=n[r],o=this.getCacheKey(i,t),s=this.rootNodeCache.get(o);if(s)if(this.updateCachedContent(s,e))return void this.rootNodeCache.put(o,s)}},e.prototype.updateCachedContent=function(e,t){if(e.id===t.id)return null!=t.isAvailable&&(e.isAvailable=t.isAvailable),null!=t.visibility&&(e.visibility=t.visibility),null!=t.isPartiallyVisible&&(e.isPartiallyVisible=t.isPartiallyVisible),null!=t.isGroupContent&&(e.isGroupContent=t.isGroupContent),null!=t.assignedGroups&&(e.assignedGroups=t.assignedGroups),t.adaptiveReleaseRules&&(e.adaptiveReleaseRules=t.adaptiveReleaseRules),e.title=t.title,e.attachedForumLink=t.attachedForumLink,e.ui&&(void 0===e.ui.hasConversationAttached||e.isScorm())&&(e.ui.hasConversationAttached=!!t.attachedForumLink),e.updateProctoringSettings(t),!0;if(e.children)for(var n=0;n<e.children.length;n++){var r=e.children[n];if(this.updateCachedContent(r,t))return!0}return!1},e.prototype.getOrMakeContentInContentTree=function(e,t,n,r,i,o){return n?this.getContentInContentTree(e,t,n):this.makeContentInContentTree(e,t,r,i,o)},e.prototype.getContentInContentTree=function(e,t,n){var r,i,o=this;return e.$asPromise().then(function(e){return e.children=e.children||e.getChildren({limit:0,recursive:!0}),e.children.$asPromise()}).then(function(){if(n){if(r=e.findInTreeById(n))r.extensionAttributes||!r.isTest()&&!r.isAssignment()||r.$fetch({fields:"extensionAttributes"});else{r=o.CourseModel.$new(t).contents.$find(n,{expand:"alignedGoals,assignedGroups,selfEnrollmentGroups.group,extensionAttributes"}).$allow([403])}return r.$asPromise()}}).then(function(){if(r&&r.parentId)return(i=e.findInTreeById(r.parentId))||(i=o.CourseModel.$new(t).contents.$find(r.parentId)),i.$asPromise()}).then(function(){return{content:r,parentFolder:i}})},e.prototype.makeContentInContentTree=function(e,t,n,r,i,o){var s,a,u=this;return e.$asPromise().then(function(e){return e.children=e.children||e.getChildren({limit:0}),e.children.$asPromise()}).then(function(){return(a=u.getParentFolder(n,t,e)).$asPromise()}).then(function(){return a.children=a.children||a.getChildren({limit:0}),a.children.$asPromise()}).then(function(){var e=a.children.indexOfItemById(void 0);return!o&&e>=0&&a.children[e].positionBefore===r&&a.children[e].positionAfter===i?s=a.children[e]:(s=a.children.$build(),(e=a.children.getInsertionIndex(r,i,!0,a.hasMoreChildren))>=0&&s.addAndRevealAtIndex(e),a.children.paging&&a.children.paging.count++),null!=r&&(s.positionBefore=r),null!=i&&null==r&&(s.positionAfter=i),s.parentId=n||a&&a.id,s.depth=a&&null!=a.depth?a.depth+1:void 0,s.courseId=t,{content:s,parentFolder:a}})},e.prototype.getParentFolder=function(e,t,n){var r;return e?(r=n.findInTreeById(e))||(r=this.CourseModel.$new(t).contents.$find(e)):r=n,r},e.prototype.makeSoftLinkContentInContentTree=function(e,t,n,r,i,o){return this.makeContentInContentTree(t,n,r,i,o).then(function(t){var n=t.content;return e&&e.$pk&&(n.contentHandler=c.r.ContentHandler.CourseLink,n.ui.linkSource=e),n.id=null,n.description=e.description,n.title=e.title,n.courseId=e.courseId,n.isAvailable=e.isAvailable,n.visibility=e.visibility,n.contentDetail={"resource/x-bb-courselink":{linkSourceId:e.id,linkSourceTable:"CONTENT"}},n})},e.prototype.isEmpty=function(e){return!e||0===e.trim().length},e.prototype.parseForumId=function(e){var t=e.split("/");return t[t.length-1]},e.prototype.determineVisibility=function(e,t){return e?c.r.Visibility.Visible:c.r.Visibility.Hidden},e.prototype.generateDeleteConfirmationKey=function(e,t){var n=this,r=this.$q.defer();return e.ui.modalShowType=a.a.UserChoice.toString(),!e.isFolder()&&!e.isLearningModule()||e.isRoot()?e.canHaveSharedGradingColumn()&&e.hasGradingColumn()&&m.g.PartnerCloud.isEqualTo(e.contentHandler)?this.PartnerContentIdModel.getContentIds(e.courseId,e.linkRef).then(function(t){t.contentIds.length>1?(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-shared-grade-column",r.resolve(e)):n.checkForAttempts(e,r)}).catch(function(t){n.errorModal.handleApiError(t.$response),r.reject(e)}):this.checkForAttempts(e,r):e.isBbPage()?(e.ui.deleteConfirmationKey=m.g.Page.toString(),r.resolve(e)):e.getChildren().$then(function(n){if(n&&n.length>0){e.ui.modalShowType=a.a.Always.toString();var i=n.filter(function(e){return e&&e.isDiscussion()}).length;e.hasGradedContentItems().then(function(o){o?e.ui.deleteConfirmationKey=e.contentHandler+"-contains-graded-items":i===n.length?e.ui.deleteConfirmationKey=e.contentHandler+"-all-discussions-"+t:e.ui.deleteConfirmationKey=i>0?e.contentHandler+"-contains-discussions":e.contentHandler+"-no-discussions",r.resolve(e)})}else e.ui.deleteConfirmationKey=e.contentHandler+"-empty",r.resolve(e)}),r.promise},e.prototype.checkForAttempts=function(e,t){var n=this;e.canHaveAttempts()&&e.hasGradingColumn()?(e.ui.modalShowType=a.a.Always.toString(),e.getAttemptCount().then(function(n){e.ui.deleteConfirmationKey=n>0?e.getContentDisplay().deleteKey()+"-data":e.getContentDisplay().deleteKey(),t.resolve(e)}).catch(function(r){403===r.$response.status?(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-unknown",t.resolve(e)):(n.errorModal.handleApiError(r.$response),t.reject(e))})):m.g.Discussion.isEqualTo(e.contentHandler)?(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.$fetch().$then(function(n){var r=n.contentDetail[m.g.Discussion.toString()];r&&r.properties.allowForumGrading&&(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded"),t.resolve(e)})):m.g.CourseLink.isEqualTo(e.contentHandler)?(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),e.getLinkContentSource({fromServer:!0}).$then(function(n){if(m.g.Discussion.isEqualTo(n.contentHandler)){var r=n.contentDetail[m.g.Discussion.toString()];r&&r.properties.allowForumGrading&&(e.ui.modalShowType=a.a.Always.toString(),e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey()+"-graded")}t.resolve(e)})):(e.ui.deleteConfirmationKey=e.getContentDisplay().deleteKey(),t.resolve(e))},e.prototype.deleteContent=function(e){var t=this;if(e.id){e.ui.isDeleted=!0;var n={};return(e.isGroupContent||e.isFolder())&&(n.deleteGroups=!0),(e.canHaveAttempts()||e.isDiscussion()||e.isFolder())&&(n.deleteGrades=!0),e.withParams(n).$destroy().$suppressErrorDialog().$asPromise().then(function(n){return t.deleteContentInStore&&t.deleteContentInStore(e.id),n}).catch(function(n){e.ui.isDeleted=!1;var r=n.$response;return t.assessment.isExternallyRefQuestionsAPIError(r.data)?t.assessment.openHasExternallyRefQuestionsModal(t.getExternallyRefQuestionsModalType(e.contentHandler)):t.errorModal.handleApiError(r),t.$q.reject(r)})}return this.$q.when()},e.prototype.getExternallyRefQuestionsModalType=function(e){return m.g.Folder.isEqualTo(e)?s.b.FOLDER:s.b.ASSESSMENT},e.prototype.canOnlyCreateDiscussion=function(e){return e&&e.children&&e.children.permissions&&!e.children.permissions.create&&e.children.permissions.contentHandlerPermissionMap&&e.children.permissions.contentHandlerPermissionMap.createDiscussion},e.prototype.canCreateAllContent=function(e){return e&&e.children&&e.children.permissions&&e.children.permissions.create},e.prototype.convertBbMLToAttemptFileContentBlocks=function(e){var t=[];return this.convertBbMLToContentBlocks(e).forEach(function(e){"attemptFileBlock"in e&&t.push(e.attemptFileBlock)}),t},e.prototype.convertAttemptFileContentBlocksToBbML=function(e){var t=[];e.forEach(function(e){t.push({attemptFileBlock:e})});return this.convertContentBlocksToBbML(t,"question1 ")},e.prototype.convertBbMLToContentBlocks=function(e){var t=[],n=document.createElement("div");n.innerHTML=e;for(var r=0;r<n.children.length;r++){var i=n.children[r];if("A"===i.tagName)t.push(this.convertBbMLToFileBlock(i));else if("DIV"===i.tagName){var o=this.getBlockIdFromBbML(i);t.push({textBlock:i.innerHTML.trim(),id:o})}}return t},e.prototype.convertBbMLToFileBlock=function(e){var t={file:{}};if(e.dataset&&e.dataset.bbfile)try{var n=JSON.parse(e.dataset.bbfile);t.alternativeText=n.alternativeText,t.ui={isRenderedInline:"inline"===n.render},t.linkName=n.linkName,t.currentMimeType=n.mimeType}catch(e){}else if(e.dataset&&e.dataset.bbmedia)try{var r=JSON.parse(e.dataset.bbmedia);t.alternativeText=r.alternativeText,t.ui={isRenderedInline:"inline"===r.render}}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));var i=e.href;0===i.indexOf("http://localhost")&&(i=d.c(i.substr("http://localhost".length))),t.downloadUrl=i;var o=i.match(/xid-(\d+_\d+)/);return o&&(t.id=o[1]),{attemptFileBlock:t,id:this.getBlockIdFromBbML(e)}},e.prototype.convertContentBlocksToBbML=function(e,t){var n=document.createElement("div");return e.forEach(function(e){if("attemptFileBlock"in e){var t=document.createElement("a");if(t.href=e.attemptFileBlock.downloadUrl,e.attemptFileBlock.ui){var r={};e.attemptFileBlock.ui.isRenderedInline?r.render="inline":r.render="attachment",e.attemptFileBlock.alternativeText&&(r.alternativeText=e.attemptFileBlock.alternativeText),e.attemptFileBlock.linkName&&(r.linkName=e.attemptFileBlock.linkName),e.attemptFileBlock.currentMimeType&&(r.mimeType=e.attemptFileBlock.currentMimeType),t.dataset.bbfile=JSON.stringify(r)}e.id&&(t.id=e.id),t.innerHTML=e.attemptFileBlock.linkName+"?"+e.attemptFileBlock.currentMimeType,n.appendChild(t)}else if("textBlock"in e){var i=document.createElement("div");e.id&&(i.id=e.id),i.innerHTML=e.textBlock,n.appendChild(i)}e.isNewToBbML&&delete e.isNewToBbML}),(t||"")+n.innerHTML},e.prototype.getBlockIdFromBbML=function(e){return e.id?e.id:this.generateBlockId()},e.prototype.generateBlockId=function(){return"bbml-editor-id_"+l.b()},e.prototype.fetchIndicatorsPerRequest=function(e){var t=this,n=this.fetchIndicatorsPromiseCache[e];return n||(n=this.CourseModel.$new(e).indicators.$fetch().$asPromise().then(function(n){return t.putCourseIndicators(e,n),n},function(e){401!==e.$response.status&&(e.$response.status=null),console.error("Fetch indicators error!")}).finally(function(){delete t.fetchIndicatorsPromiseCache[e]}),this.fetchIndicatorsPromiseCache[e]=n,n)},e.prototype.fetchIndicators=function(e,t){if(t)return this.fetchIndicatorsPerRequest(e);var n=this.getCourseIndicators(e);return n?this.$q.when(n):this.fetchIndicatorsPerRequest(e)},e.prototype.getCourseContentCache=function(e,t){var n=this.getCourseIndicators(e);return n?n.filter(function(e){return e.contentId===t})[0]:null},e.prototype.setClassConversationHasIndicatorToFalseInCache=function(e,t){var n=this.getCourseIndicators(e);if(n){var r=o.find(n,function(e){return e.contentId===t});r&&(r.classConversationHasIndicator=!1,r.groupIds||(n=o.filter(n,function(e){return e.contentId!==t})),this.putCourseIndicators(e,n),this.indicatorCacheService.classConversationIndicatorRemoved(e,t,!!r.groupIds))}},e.prototype.removeGroupIdFromIndicatorCache=function(e,t,n){if(!n)return null;var r=this.getCourseIndicators(e);if(r){var i=o.find(r,function(e){return e.contentId===t});if(i){if(i.groupIds=o.filter(i.groupIds,function(e){return n!==e}),i.groupIds&&0===i.groupIds.length)return delete i.groupIds,i.classConversationHasIndicator||(r=o.filter(r,function(e){return e.contentId!==t})),this.putCourseIndicators(e,r),void this.indicatorCacheService.groupConversationIndicatorRemoved(e,t,i.classConversationHasIndicator);this.putCourseIndicators(e,r)}}},e.MAX_LENGTH=60,e.MAX_LENGTH_IN_CONTENT_ITEM=250,e.$inject=["$q","DSCacheFactory",c.o.serviceName,c.W.serviceName,u.c,s.d,"$rootScope","$ngRedux"],e}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(S);i.module(v,["angular-data.DSCacheFactory",c.R,u.b,s.c]).service(b,S)},naHn:function(e,t){e.exports='<ng-form name="baseForm" bb-autosave save-func="saveForm.save()" validation-func="saveForm.validate()" delay-autosave="delayAutosave()"\n         debounce-save-destination="debounceSaveDestination()" novalidate>\n    <div ng-transclude />\n    <bb-save-buttons validate-save="saveForm.validate()"\n                     save-action="saveForm.saveClicked()"\n                     cancel-action="saveForm.cancelClicked()"\n                     delete-action="saveForm.deleteClicked()"\n                     hide-save="hideFooter"\n                     hide-cancel="hideFooter"\n                     mousedown-action="saveForm.mouseDown()"\n                     can-delete="canDelete"\n                     display-delete-after-saving="displayDeleteAfterSaving()"\n                     delete-confirmation-resource-type="{{deleteConfirmationResourceType}}"\n                     must-show-delete-confirmation="true"\n                     choices="choices"\n                     analytics-id-tag-prefix="{{::analyticsIdTagPrefix}}.saveForm">\n                          \x3c!-- TODO: will update the above must-show-delete-confirmation after PR #818 (update confirmation needed) is merged --\x3e\n    </bb-save-buttons>\n</ng-form>\n'},neh4:function(e,t,n){"use strict";n.d(t,"a",function(){return h});n("VZTK");var r=n("5MwF"),i=n("IbG+"),o=n("0JpG"),s=n("w9Zy"),a=n("Qbdf"),u=n("X455"),c=n("bF8R"),l=n("vdfi"),d=n("jhBu"),p=n("o5Lu"),f=n("TnpK"),m=n("pjml"),h="ultra.course.content.assignment.routes";i.module(h,[o.moduleName,c.a,d.a,p.f,f.b,a.b]).config([f.c,a.c,u.b,function(e,t,i){var p;e.peekState("assignment",{abstract:!0,url:"/assignment/:assignmentId?courseId",resolve:(p={},p[a.d]=t.resolve,p[u.c]=i.resolve,p.contentData=[a.d,c.b,f.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.assignmentId,contentHandler:m.r.ContentHandler.UltraAssignment})}],p.currentContent=["contentData",function(e){return e.courseContent}],p.currentColumn=["contentData",function(e){return null!=e.gradingColumn.rubricAssociations?e.gradingColumn.$asPromise():e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()}],p),peekStates:["conversations","message"],peekViewName:"assignment-conversation@"}).peekState("assignment.router",{url:"/route",routingFunction:[m.o.serviceName,d.b,f.d,function(e,t,n){var r=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;e.$new(r).contents.$find(n.nextParams.assignmentId).$then(function(e){e.canViewAsInstructor()?n.go(n.prev.name,n.prevParams).then(function(){n.goPeekState("gradebook-item.assignment",{courseId:e.courseId,contentId:e.id,gradeitemView:"details"})}):n.go(n.prev.name,n.prevParams).then(function(){n.goPeekState("assignment.view",{courseId:e.courseId,assignmentId:e.id})})})}]}).peekState("assignment.view",{url:"/view",resolve:{translations:["$q",o.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/content/course-content"),t.loadBundle("features/course/goal-alignment/goal")])}],prefetch:["$q",m.o.serviceName,f.d,function(e,t,n){var i=n.nextParams.courseId?n.nextParams.courseId:n.prevParams.courseId;r.a.features.httpEase&&t.$new(i).contents.$find(n.nextParams.assignmentId,{expand:"assignedGroups,associatedRubrics,alignedGoals"}).$then(function(e){t.$new(i).gradebook.columns.$find(e.getDeployedAssessment().gradingColumn.id,{expand:"associatedRubrics,rubricAssociations.rubricDefinition.alignedGoals,rubricAssociations.rubricDefinition.rows.alignedGoals"})})}]},require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(40),n.e(81)]).then(n.bind(null,"pA7Z"))}],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations","message"],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt",{abstract:!0,url:"/attempt"}).peekState("assignment.view.attempt.edit",{url:"/{attemptId:_[0-9]+_1}",onEnter:[s.e,f.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{translations:["$q",o.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assignment/assignment"),t.loadBundle("features/course/goal-alignment/goal")])}]},require:[function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(40),n.e(295)]).then(n.bind(null,"OXIQ"))}],pageTitle:"course.content.assignmentAttempt",peekStates:["conversations","message","rubric-evaluation","rubric-view",l.b],peekViewName:"assignment-conversation@"}).peekState("assignment.view.attempt.finished",{url:"/view",onEnter:[s.e,f.d,function(e){e.shrinkTopPanel()}],params:{gradeDetail:null},resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/assignment/assignment")}]},require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(40),n.e(81)]).then(n.bind(null,"pA7Z"))},pageTitle:"course.content.assignmentAttempt"}).peekState("assignment.grade",{url:"/grade",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/content/assignment/assignment")}]},require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(40),n.e(81)]).then(n.bind(null,"pA7Z"))},pageTitle:"course.content.assignmentGrading"})}])},"nh++":function(e,t,n){},nkTj:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"f",function(){return m}),n.d(t,"e",function(){return h}),n.d(t,"d",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"g",function(){return b}),n.d(t,"a",function(){return S});var r=n("mrSG"),i=(n("TeAI"),n("XoDE"),n("WdDz"),n("EVdn")),o=n("IbG+"),s=n("LvDl"),a=n("oSB+"),u=n.n(a),c=n("VdDF"),l=n("HDxW"),d=n("k9iv"),p=n("z6Q5"),f=(n("z1U9"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.GET=new t("GET"),t.POST=new t("POST"),t.PATCH=new t("PATCH"),t.DELETE=new t("DELETE"),t}(u.a)),m=function(e){return e},h="ultra.model.utilities",g="ultra.model.utilities.Utilities";function v(e,t){return null!=e?e:t}function b(e,t){return e.$isCollection?"PUT"===e.$response.config.method&&Array.isArray(t)?t.map(function(e){return e.statusCode>=200&&e.statusCode<300?o.fromJson(e.body):e.body}):(e.paging=t&&t.paging,e.permissions=t&&t.permissions,t&&t.results):t}var y,S=function(){function e(){}return e.isValid=function(e){return!s.isEmpty(e)&&/^_\d+_\d+$/.test(e)},e}();o.module(h,["restmod",d.b,p.a,l.a]).factory(g,["$http","$q",function(e,t){return{getDataMixin:function(e,n,r){return function(i,o){var s=(o=o||{}).path||"",a=o.overrideIdKey,u=o.params;return t.when(i).then(function(i){var c=t.defer();if(null==i||0===i.length)return c.resolve(i),c.promise;var l={};i.forEach(function(e){var t=function(e,t){return t.split(".").reduce(function(e,t){return t?e&&e[t]:e},e)}(e,s+"."+(a||n));t&&(l[t]=l[t]||[]).push(e)});var d=Object.keys(l);return e(d,u).$asPromise().then(function(e){e.forEach(function(e,t){l[d[t]].forEach(function(t){!function(e,t,n){for(var r=t.split("."),i=0;i<r.length-1;i++)r[i]&&(e=e&&e[r[i]]);e&&(e[r[r.length-1]]=n)}(t,s+"."+(o.overrideResultKey||r),e)})}),c.resolve(i)}),c.promise})}},createHooksToFetchParent:function(){function n(n,r){n.cache={get:function(){return t.all([e(s.omit(n,"cache")),r.$resolve().$asPromise()]).then(function(e){return e[0]})}}}var r={"before-fetch-many":function(e){n(e,this.$scope.$scope)},"before-fetch":function(e){n(e,this.$scope.$scope.$scope)}};return function(e){return Object.assign({"after-fetch-many":function(){var t=this;this.forEach(function(n){return n[e]=t.$scope.$scope})},"after-fetch":function(){this[e]=this.$scope.$scope.$scope}},r)}}()}}]).factory("DateSerializer",function(){return{encode:function(e){return c.a.parseDateToISOString(e)},decode:function(e){return c.a.parseStringToDate(e)}}}).filter("localDate",function(){return function(e){return c.a.convertToLocalDate(e)}}).factory("BbRestmodFindMany",["restmod","$q",p.b,"restmod.Preload",function(e,t,n){return e.mixin({$extend:{"Scope.canCreate":function(){return this.permissions&&this.permissions.create},"Scope.canEdit":function(){return this.permissions&&this.permissions.edit},"Scope.canDelete":function(){return this.permissions&&this.permissions.delete},Scope:{findMany:function(e,r,i){var s=this,a=this.$collection();return a.$always(function(){return n.performBatch(function(n){return t.all(e.map(function(e){var t,a=s.$new(e).$fetch(o.extend(((t={})[p.c]=n,t),r));return(i||[]).length>0?a.$allow(i).$asPromise():a.$asPromise()}))}).then(function(e){e.forEach(function(e){return a.push(e)})})})}}},$hooks:{"before-find-many":function(e){e.method="PUT",e.data=(e.params&&e.params.ids||[]).map(function(t){var n=o.copy(e.params);return delete n.ids,{method:"GET",relativeUrl:t+(n&&"?"+i.param(n)||"")}}),e.params&&delete e.params.ids}}})}]).factory("BbApiStyle",["restmod",function(e){return e.mixin(function(){this.setProperty("style","BB").setProperty("primaryKey","id")})}]).factory("BbEncodeUrl",["restmod","inflector",function(e,t){return e.mixin({$extend:{Model:{encodeUrlName:function(e){return t.camelize(e)}}}})}]).factory("BbUi",["restmod",function(e){return e.mixin({ui:{mask:!0,init:function(){return{}}}})}]).factory("BbWithParams",["restmod",function(e){return e.mixin({$extend:{Record:{withParams:function(e,t){var n=function(r){r.params||(r.params=new Object),Object.keys(e).forEach(function(n){r.params[n]=t?t(r.params[n],e[n],n):e[n]}),this.$off("before-request",n)};return this.$on("before-request",n),this}}}})}]).factory("BbApiErrorHandlerInjector",["restmod","$injector","$window","$rootScope",d.c,l.b,function(e,t,n,r,i,o){return e.mixin({$hooks:{"after-request-error":function(){var e=this;this.__bb_suppressErrorDialog||setTimeout(function(){e.$then(function(){},o.handle)})}}})}]).factory("BbCheckStatusCode",["restmod",function(e){return e.mixin({$extend:{Resource:{isStatusCode:function(e){return this.$response&&this.$response.status&&this.$response.status===e}}}})}]).factory("BbPermissions",["restmod","restmod.Preload",function(e){return e.mixin({$extend:{Record:{canCreate:function(){return this.permissions&&this.permissions.create},canEdit:function(){return this.permissions&&this.permissions.edit},canDelete:function(){return this.permissions&&this.permissions.delete}}}})}]).factory("BbPermissionsMask",["restmod",function(e){return e.mixin({permissions:{mask:"CU"}})}]).factory("$ExtendRecord",["RMUtils",function(e){var t=Symbol("$extendRecord");return{$extend:{"Model.$extendRecord":function(e){return this[t]=this[t]||[],this[t].push(e),this},"Record.$decode":function(n,r){var i=this.$super.apply(this,arguments);if(void 0===this.$type)throw"NOT_FOUND_$MODEL";return(this.$type[t]||[]).some(function(t){var r=t(i,n);return!!r&&(e.extendOverriden(i,r),!0)}),i}}}}]).factory("BbExpandParams",["restmod",function(e){var t=function(e){return!!s.isString(e)&&""!==e.trim()},n=function(e){return Array.isArray(e)?e.filter(t):s.isString(e)?e.split(",").filter(t):[]},r=Symbol("$expand_params"),i=function(e){return function(e,t){void 0===t&&(t=new Set);var r=n(e);return r.length<=0||r.every(function(e){return t.has(e)})}(e&&e.expand||"",this[r])?this.$resolve():this.$fetch(e)};return e.mixin({$hooks:{"after-request":function(e){this[r]=function(e){var t=e.config&&e.config.params&&e.config.params.expand,r=n(t);return new Set(r)}(e)}},$extend:{"Record.$fetchIfNotExpanded":i,"Collection.$fetchIfNotExpanded":i}})}]).config(["restmodProvider",function(e){function t(e){e=e||[];var t=this.$promise=this.$promise||y.when(this),n=y.defer();return this.$promise=n.promise,t.then(function(e){n.resolve(e)},function(t){e.some(function(e){var n=[0];if("number"==typeof e)n[0]=e;else if("string"==typeof e){var r=e.split("-");n[0]=parseInt(r[0],10),n[1]=parseInt(r[1]||r[0],10)}return n[1]=n[1]||n[0],t&&t.$response.status>=n[0]&&t.$response.status<=n[1]})?n.resolve(t):n.reject(t)}),this}function n(){var e=this;if(this.__bb_suppressErrorDialog=!0,!this.$promise)throw new Error("suppressErrorDialog must be called after performing an action, such as $fetch or $resolve");return this.$finally(function(){e.__bb_suppressErrorDialog=!1})}function r(e,t){var n=Object.create(null);return Object.keys(e).forEach(function(r){if("$"!==r[0]){var i=e[r];o.equals(i,t[r])||(n[r]=t[r])}}),Object.keys(t).forEach(function(r){if("$"!==r[0]&&!n[r]){var i=t[r];o.equals(i,e[r])||(n[r]=i)}}),function e(t,n){var r=Object.keys(t);var i=new Array;var s;for(var a=0;a<r.length;a++)s=n?n+"."+r[a]:r[a],i.push(s),"$"!==r[a].charAt(0)&&t[r[a]]&&"object"==typeof t[r[a]]&&!o.isArray(t[r[a]])&&(i=i.concat(e(t[r[a]],s)));return i}(n,"")}e.rebase("BbRestmodFindMany"),e.rebase("BbPermissions"),e.rebase("BbPermissionsMask"),e.rebase("BbApiStyle"),e.rebase("BbApiErrorHandlerInjector"),e.rebase("BbEncodeUrl"),e.rebase("BbWithParams"),e.rebase("BbCheckStatusCode"),e.rebase("BbUi"),e.rebase("restmod.Preload"),e.rebase("restmod.FindMany"),e.rebase("$ExtendRecord"),e.rebase("BbExpandParams"),e.rebase({$extend:{"Model.$mixHook":function(e,t,n){var r=this,i="$mixHook_"+e,o=i+"_hook";r[i]=r[i]||[],r[i].push(t),r[o]=r[o]||Object(s.once)(function(){var t;r.mix({$hooks:(t={},t[e]=function(){var e=this,t=Array.prototype.slice.apply(arguments);(r[i]||[]).forEach(function(n){return n&&n.apply(e,t)})},t)})}),r[o]();var a=Object(s.once)(function(){Object(s.remove)(r[i],function(e){return e===t})});return n&&n.$on("$destroy",a),a}}}),e.rebase({"Model.unpack":b,"Record.$allow":t,"Collection.$allow":t,"Record.$suppressErrorDialog":n,"Collection.$suppressErrorDialog":n,"Record.$revert":function(e){var t=this,n=e||this.$_ultra_previous_version,i=r(n,this.$encode("U")),o=this.constructor.$buildRaw(n);return i.forEach(function(e){t[e]=o[e]}),this},"Record.$snapshot":function(){return this.$_ultra_previous_version=this.$encode("U"),this.$_ultra_previous_version},"Record.$getChangedKeys":function(){return r(this.$_ultra_previous_version||{},this.$encode("U"))},"Record.$getPreviousVersion":function(){return this.$_ultra_previous_version},"Record.$patch":function(e){var t=r(this.$_ultra_previous_version||{},this.$encode("U"));if(e&&e.length>0&&e.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t.length>0){this.$_ultra_patchHolder={data:this.$wrap("U"),changedKeys:t};var n=function(e){var t,r;t=this.$_ultra_patchHolder.changedKeys,r=this.$_ultra_patchHolder.data,t.forEach(function(t){e.data[t]=r[t]}),this.$off("before-update",n)};this.$on("before-update",n),this.$save(t)}else{var i={method:"PATCH",url:this.$url("update"),data:{}};this.$dispatch("before-request",[i])}return this},$hooks:{"after-feed":function(){this.$snapshot()}}}),e.rebase({$extend:{Collection:["slice","filter","concat"].reduce(function(e,t){return e["$"+t]=function(){var e=this.$collection();return e.push.apply(e,this[t].apply(this,arguments)),e},e},{})}})}]).run(["$q",function(e){y=e}])},nsX6:function(e,t,n){"use strict";n.d(t,"a",function(){return o});n("+3BC");var r=n("IbG+"),i=n("5MwF"),o="ultra.components.directives.featureToggle",s=function(){function e(e){var t=this;this.$parse=e,this.restrict="A",this.priority=1e3,this.transclude="element",this.terminal=!0,this.link=function(e,n,r,o,s){var a=i.a.features,u=r.prototypeContent&&"true"===r.prototypeContent.toLowerCase();if(i.a.showFeaturePrototypes||!u){var c=t.$parse(r.bbFeatureToggle);r.removeFromDom&&"true"===r.removeFromDom.toLowerCase()?c(a)&&s(function(e){n.replaceWith(e)}):s(function(e){c(a)||e.addClass("bb-feature-toggle-hide"),n.replaceWith(e)})}}}return e.$inject=["$parse"],e}();r.module(o,[]).directive("bbFeatureToggle",["$injector",function(e){return e.instantiate(s)}])},o5Lu:function(e,t,n){"use strict";(function(e){n.d(t,"f",function(){return P}),n.d(t,"g",function(){return A}),n.d(t,"a",function(){return x}),n.d(t,"b",function(){return D}),n.d(t,"c",function(){return _}),n.d(t,"d",function(){return M}),n.d(t,"e",function(){return R});var r,i=n("mrSG"),o=n("LvDl"),s=n("IbG+"),a=n("oSB+"),u=n.n(a),c=n("wd/R"),l=n("0JpG"),d=n("Fvsw"),p=n("Qbdf"),f=n("Sa5G"),m=n("jhBu"),h=n("Bu0u"),g=n("oi1r"),v=n("X/qj"),b=n("rEZX"),y=n("pjml"),S=n("Mc6f"),C=n("e6jQ"),w=n("d8yC"),$=n("A0nf"),k=n("TnpK"),T=n("5uPl"),I=n("z6Q5"),E=n("fYJU"),P="ultra.services.grade",A="grade",x="course.grades.gradebook-item.submission.grade-status-change",D="bb-update-column",_="bb-update-entire-column",L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.Possible=new t("possible"),t.Text=new t("text"),t}(u.a),M=function(){function t(e,t,n,r,i,o,s,a,u,c,l,d,p,f,m,h,g,v,b,y,S,C,w){this.$q=e,this.$rootScope=t,this.$injector=n,this.cacheFactory=r,this.CourseModel=i,this.GradeAttemptModel=o,this.GradebookSettingsModel=s,this.GradeGroupAttemptModel=a,this.GradeModel=u,this.ColumnModel=c,this.UserModel=l,this.GradeBulkViewModel=d,this.context=p,this.bbLocalize=f,this.ultraState=m,this.batchService=h,this.entitlement=g,this.notation=v,this.schemaService=b,this.gradebookPermissionService=y,this.originalityReportService=S,this.contextUser=C,this.contextCourse=w,this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE="resource/x-bb-grade",this.gbSettingsCache=r.createCache("gbSettings")}return t.prototype.loadColumnsAndGrades=function(e){var t=this,n=this.CourseModel.$new(e.courseId),r=this.loadColumns(n,e.includeExternal,{expand:"associatedRubrics,collectExternalSubmissions",includeInvisible:!!e.includeInvisible}).then(function(t){return e&&e.attachContentsByScoreProviderHandle?t.attachRelatedContentsByScoreProviderHandle(e.attachContentsByScoreProviderHandle):t}),i=this.loadGrades(n,e.userId,e.gradeQueryParams);return this.$q.all([r,i]).then(function(r){var i=r[0]||[],s=r[1]||[],a=[],u=o.keyBy(s,function(e){return e.columnId});return i.forEach(function(e){var n=u[e.id];n?n.column=e:n=t.GradeModel.$build({column:e}),a.push(n)}),t._loadAttempts(a,n,e.attemptQueryParams).then(function(e){return e})})},t.prototype.loadGrade=function(e,t){var n,r,i=this,s=this.CourseModel.$new(e.courseId);if(e.column)r=e.column&&e.column.$asPromise&&e.column.$asPromise()||this.$q.when(e.column);else{if(!e.columnId)throw new h.a({message:"Column or columnId must be provided."});r=s.gradebook.columns.$find(e.columnId).$asPromise()}return r.then(function(r){return o.merge(e.gradeQueryParams,{userId:e.userId}),r.grades.$search(e.gradeQueryParams).$allow([404]).$asPromise().then(function(o){return(n=o[0])?(n.column=r,t?i.loadAttempt(n,s,e.attemptQueryParams,e.content):i.$q.when(n)):i.$q.when(null)})})},t.prototype.loadCurrentColumnsAndGrades=function(e,t,n){var r=e||this.contextCourse.courseId;return this.loadColumnsAndGrades({courseId:r,userId:this.contextUser.userId,includeExternal:!0,includeInvisible:!!t,gradeQueryParams:{expand:"attemptsLeft"},attemptQueryParams:{overrideAggregationModel:y.F.AttemptAggregationModel.Last},attachContentsByScoreProviderHandle:n})},t.prototype.loadColumns=function(e,t,n){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var r=function(e){return t?e:e.filter(function(e){return!e.externalGrade})},i=e.gradebook.columns;return(i?i.length:0)>(n&&"offset"in n?n.offset:0)?i.$refresh(n).$asPromise().then(r):i.$fetch(n).$asPromise().then(r)},t.prototype.loadGrades=function(e,t,n){var r=this;e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var i=o.merge({userId:t},n);return i.limit=100,e.gradebook.grades.$fetch(i).$asPromise().then(function(n){return n.paging.nextPage?(i.offset=n.paging.offset+n.paging.limit,r.loadGrades(e,t,i)):e.gradebook.grades})},t.prototype.loadColumnGrades=function(e,t){return e instanceof this.ColumnModel||(e=t.gradebook.columns.$new(e)),e.grades.$refresh().$asPromise()},t.prototype.loadBulkViewRows=function(e,t,n,r,i){var s=this,a=[],u=[];e.forEach(function(e){u.push(e.id);var n=s.$injector.instantiate(N,{column:t});n.user=e.user,n.membership=e,n.dueDate=t.dueDate,n.hasDueDateException=e.isDueDateExcepted(),a.push(n)});var c=o.keyBy(a,function(e){return e.user.id}),l={courseId:t.courseId,membershipIds:u,columnIds:[t.id]};return r&&(l=o.merge(l,r)),this.CourseModel.$new(t.courseId).gradebook.bulkView.$fetch(l).$asPromise().then(function(e){return s.processBulkViewRows(e,c,t,n,i)})},t.prototype.processBulkViewRows=function(e,t,n,r,i){e.bulkViewUsers.forEach(function(e){var n=t[e.studentId];n.originalityProcessed=e.grades[0].originalityProcessed,n.originalityScore=e.grades[0].originalityScore,e.grades.forEach(function(o){n.grade=o.grade,n.grade.user=n.user,r&&r.lookup[o.grade.id]&&(n.grade.attempts=r.lookup[o.grade.id]),n.attemptCount=o.attemptCount,n.lastAttemptDate=o.lastAttemptDate,n.attemptsReadyToPost=o.attemptsReadyToPost,i&&!i(n)&&delete t[e.studentId]})});var s=o.values(t);return this.originalityReportService.setOriginalityAverageScore(s,n.id),s},t.prototype.loadCustomizedBulkViewRows=function(e,t,n,r,i){var s=this;if($.a.Discussion.isEqualTo(t.scoreProviderHandle)){var a=this.$q.defer();return this.loadBulkViewRows(e,t,null,{expand:"grade.instructorFeedback,attempts"}).then(function(i){var u=i.map(function(e){return e.user.id}).join("-"),c={limit:e.length,offset:0,userIds:u,groupId:r},l=o.merge(o.clone(c),{dateBefore:t.dueDate}),d=function(e,t){if(e&&e.length){var n={};e.forEach(function(e){var r=e.data.id;n[r]=t?{totalComment:e.topLevelReplyCount,totalReply:e.secondLevelReplyCount}:{comment:e.topLevelReplyCount,reply:e.secondLevelReplyCount}}),i.forEach(function(e){if(n&&n[e.user.id]){e.participation||(e.participation={comment:0,reply:0,totalComment:0,totalReply:0});var r=n[e.user.id];t?(e.participation.totalComment=r.totalComment,e.participation.totalReply=r.totalReply):(e.participation.comment=r.comment,e.participation.reply=r.reply)}})}};s.$q.all([s.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(l).$allow([400]).$then(function(e){d(e)}).$asPromise(),s.CourseModel.$find(t.courseId).forums.$new(n).usercounts.$fetch(c).$allow([400]).$then(function(e){d(e,!0)}).$asPromise()]).then(function(){return a.resolve(i)})}),a.promise}var u="attempts";return i&&(u+=",submissionResults"),this.loadBulkViewRows(e,t,null,{expand:u})},t.prototype.loadGradeOverall=function(e){return this.CourseModel.$new(e).gradebook.columns.getOverallColumn()},t.prototype.loadAnonymousStudentRows=function(e){var t=this;return e.getGradeIdToAttempt({expand:"toolAttemptDetail,viewUrl"}).then(function(e){return e.lookup}).then(function(n){var r=[];return Object.keys(n).forEach(function(i){var s=n[i];if(o.remove(s,function(e){return e.isInProgress()}),s.length>0){var a=t.createAnonymousStudentRow(e,s,i);r.push(a)}}),r})},t.prototype.createAnonymousStudentRow=function(e,t,n){var r=this.$injector.instantiate(N,{column:e}),i=t[t.length-1],o=t.reverse().find(function(e){return e.displayGrade&&null!=e.displayGrade.score});return r.user=this.UserModel.getAnonymousStudent(n),r.dueDate=e.dueDate,r.attemptCount=t.length,r.lastAttemptDate=i.attemptDate,r.grade=this.GradeModel.$build({id:n,user:r.user,attempts:t,displayGrade:o&&o.displayGrade||{},manualStatus:o&&o.status||f.s.NoOverride}),r},t.prototype.loadAnonymousStudentGrade=function(e,t){var n=this,r=e.grades.$new(t).attempts,i=this.UserModel.getAnonymousStudent(t);return r.$fetch().$asPromise().then(function(r){return n.GradeModel.$build({pointsPossible:e.possible,id:t,user:i,attempts:r})})},t.prototype.loadGroupRows=function(e,t,n,r,i){var s=this,a={},u=[],c=o.keyBy(n,function(e){return e.user.id});return(r.ui&&r.ui.content&&r.ui.content.assignedGroups&&r.ui.content.assignedGroups.some(function(e){return!!e.groupAssociationId})?this.$q.when(r.ui.content):e.contents.$find(r.contentId,{expand:"assignedGroups"}).$asPromise()).then(function(n){var l={};return n&&n.assignedGroups&&n.assignedGroups.forEach(function(e){l[e.groupId]=e.groupAssociationId}),u=t.map(function(t){return a[t.groupId]={},e.groups.$find(t.groupId,{expand:"memberships"}).$then(function(e){var t=s.$injector.instantiate(N,{column:r});t.group=e,t.groupDetailsShown=!1,t.dueDate=r.dueDate,t.group.ui||(t.group.ui={}),t.group.ui.groupAssociationId=l[e.id],t.group.memberships&&(t.group.memberships=t.group.memberships.filter(function(e){return!!c[e.userId]&&(e.ui||(e.ui={}),e.ui.user=c[e.userId].user,e.ui.hasDueDateException=c[e.userId].isDueDateExcepted(),e.ui.courseRole=c[e.userId].courseRole,!0)})),t.hasDueDateException=t.group.memberships.some(function(e){return c[e.userId].isDueDateExcepted()}),a[e.id]=t}).$asPromise()}),s.$q.all(u).then(function(){var e="attempts,toolAttemptDetail,lastFeedbackAuthor,attempts.lastFeedbackAuthor";return i&&(e+=",submissionResults"),r.getContentGroupIdToGroupAttempt({expand:e}).then(function(e){var t={};o.values(e.lookup).forEach(function(e){t[e[0].groupId]=e[0]});var n,i=[];return s.batchService.performBatch(function(){n=o.values(a),i=n.map(function(e){return s.updateOneGroupRow(e,r,{expand:!0,groupAttempt:t[e.group.id]})})}),s.$q.all(i).then(function(){return s.originalityReportService.setOriginalityAverageScore(n,r.id)}),s.$q.all(i).then(function(){return s.sortGroupMembers(n)})})})})},t.prototype.getOverallGradeJson=function(t){var n=e(e.parseHTML(t)),r={};if("math"===n.prop("nodeName")){var i=n.children();if(i&&i.length>0){var o=e(i[0]);if("mi"===o.prop("nodeName")){var s=o.text(),a=(s=(s=s.replace("@X@BBCalColElem(","")).replace(")@X@","")).indexOf(":")+1,u=s.substring(a);r=JSON.parse(u)}}}return r},t.prototype.sortGroupMembers=function(e){var t=this,n=[];return e.forEach(function(e){var r=[];e.group.memberships&&(e.group.memberships.forEach(function(e){r.push(t.bbLocalize.formatUsername(e.ui.user,l.ILocaleUsernameFormat.Short,t.$rootScope).then(function(t){e.ui.formatUserName=t}))}),n.push(t.$q.all(r).then(function(){e.group.memberships.sort(function(e,t){return e.ui.formatUserName.localeCompare(t.ui.formatUserName)}),e.group.ui.users=[],e.group.memberships.forEach(function(t){e.group.ui.users.push(t.ui.user)})})))}),this.$q.all(n).then(function(){return e})},t.prototype.updateOneGroupRow=function(e,t,n){var r=this;return void 0===n&&(n={expand:!0}),t.getGroupGrade(e.group.ui.groupAssociationId,n.expand).then(function(t){var i=n.groupAttempt||e.grade&&e.grade.ui.groupAttempt;return e.grade=t,i&&(e.originalityScore=i.originalityScore,e.originalityProcessed=i.originalityProcessed),r.setGroupAttemptOnRow(e,i,n.grade,n.grades||t.groupMembersGrades,n.attempt),e})},t.prototype.setGroupAttemptOnRow=function(e,t,n,r,i){var s=t||this.GradeGroupAttemptModel.$buildRaw({}),a={rawText:"",displayText:""};n&&n.instructorFeedback?a=n.instructorFeedback:r&&r.length&&r[0].instructorFeedback&&(a=r[0].instructorFeedback),e.grade.groupAttempts.push(s),e.grade.instructorFeedback=a,e.grade.ui={groupAttempt:s,currentAttemptIndex:0},e.attemptCount=y.C.AttemptStatus.NeedsGrading.isEqualTo(s.status)||y.C.AttemptStatus.NeedsMoreGrading.isEqualTo(s.status)||y.C.AttemptStatus.Completed.isEqualTo(s.status)?1:0,e.lastAttemptDate=s.attemptDate,e.isGroupGradeInProgress=e.grade.isInProgress(),e.grade.ui.isGroupGradeMultiple=e.grade.isMultipleGradesInGroup;var u=o.keyBy(e.group.memberships,function(e){return e.userId});if(r)r.forEach(function(e){var t=u[e.user.$pk];t&&(t.ui.gradeDetail=e)});else if(i){var c=s.attempts.map(function(e,t){var n;return e.id===i.id?((n=i).userId=e.userId,u[n.userId].ui.gradeDetail.displayGrade=n.displayGrade,u[n.userId].ui.gradeDetail.ui.attempt=n):n=e,n});e.grade.isInProgress()&&(e.grade.ui.groupAttempt.status=y.C.AttemptStatus.NeedsGrading),e.grade.ui.groupAttempt.attempts=c}else n?e.group.memberships=e.group.memberships.map(function(e){var t=e.userId===n.user.$pk?n:e.ui.gradeDetail;return e.ui.gradeDetail=t,e}):s.attempts&&s.attempts.forEach(function(e){u[e.userId].ui.gradeDetail.displayGrade=e.displayGrade,u[e.userId].ui.gradeDetail.ui.attempt=e});e.group.memberships=o.values(u)},t.prototype._loadAttempts=function(e,t,n){var r=this,i=[];return e.forEach(function(e){i.push(r.loadAttempt(e,t,n))}),this.$q.all(i)},t.prototype.loadAttempt=function(e,n,r,i){var s;void 0===r&&(r={});var a=o.clone(r);if(a&&a.attemptId)s=a.attemptId,delete a.attemptId;else{var u=y.F.AttemptAggregationModel.parseModel(e.column&&e.column.aggregationModel);a&&a.overrideAggregationModel&&(u=a.overrideAggregationModel,delete a.overrideAggregationModel),s=t.getDefaultAttemptIdToLoad(u,e)}if(e.column&&y.F.CalculationType.NonCalculated.isEqualTo(e.column.calculationType)){var c=void 0,l=n.gradebook.attempts,d=i&&i.isGroupContent,p=i&&i.assignedGroups&&i.assignedGroups.length&&i.assignedGroups[0].groupAssociationId;if(d&&!i.isDiscussion()){if(!p)return this.$q.when(e);c=e.column.getGroupAttemptByGroupAssociationId(p)}else{if(!s)return this.$q.when(e);c=l.$find(s,a).$asPromise()}return c.then(function(t){if(d){if(t&&t.id){var n=t;e.ui.groupAttempt=n,e.ui.attempt=n&&n.attempts&&n.attempts.length&&n.attempts[0]}}else e.ui.attempt=t;return e})}return this.$q.when(e)},t.prototype.loadColumnAttempts=function(e,t,n){return void 0===t&&(t={}),e.getGradeIdToAttempt(t,n)},t.prototype.loadUsersFinalGradeForCourse=function(e,t){return e.gradebook.grades.$search({userId:t,expand:"column",externalGrade:!0}).$asPromise().then(function(e){return e[0]})},t.prototype.loadColumnSummary=function(e,t){return e.gradebook.columns.$find(t).summary.$fetch().$asPromise()},t.prototype.loadGradebookSettings=function(e){var t=this.gbSettingsCache.get(e);if(!t){var n=this.CourseModel.$new(e).gradebook.settings.$fetch().$asPromise();return this.gbSettingsCache.put(e,{promise:n}),n}return this.$q.when(t.promise)},t.prototype.loadDefaultGradebookSettings=function(){return this.GradebookSettingsModel.$build({afterDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL,beforeDecimal:t.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL})},t.prototype.formatPoints=function(e,t,n,r){var i=this;null==n&&(n=L.Text);var o=n.toString();return this.bbLocalize.loadBundle("components/services/grade").then(function(){return i.bbLocalize.translateSync({locale:i.bbLocalize.getLocale(t),key:"components.services.grade.points_"+o,params:{points:r,possible:e},noWrap:!0})})},t.prototype.parseGrade=function(e,t,n){if(!e)return"";if(t&&y.J.ScaleType.Text.isEqualTo(t.scaleType))return e;var r=this.bbLocalize.parseNumberSync(e,n);return isNaN(r)?e:r.toString()},t.prototype.getGradeToDisplay=function(e,n,r){if(!e)return null;if(e.grade)return e.grade;if(e.perfCode)return e.perfCode.code;if(null!=e.score){var i=this.bbLocalize.formatNumberSync(e.score,n,{maximumFractionDigits:t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL});return r&&y.J.ScaleType.Percent.isEqualTo(r)&&(i=this.bbLocalize.translateSync({locale:this.bbLocalize.getLocale(n),key:"components.services.grade.percent",params:{grade:i},noWrap:!0})),i}},t.prototype.getHighestPossibleScore=function(e,t,n){var r=this.$q.defer();switch(e.scaleType){case y.J.ScaleType.Tabular.toString():return r.resolve(e.symbols[0].symbol),r.promise;case y.J.ScaleType.Percent.toString():return this.bbLocalize.formatPercentage(1,n);case y.J.ScaleType.Score.toString():var i=t.possible;return this.formatPoints(i,n,L.Text);default:return r.resolve("N/A"),r.promise}},t.prototype.validateGrade=function(e,t,n){var r=this,i=this.loadDefaultGradebookSettings(),o=this.bbLocalize.loadBundle("components/services/grade"),s=this.notation.getGradeNotationsMap(e.courseId,!0);return this.$q.all([o,s]).then(function(o){var s=e.gradeValue.getGrade(),a=!1,u=o[1];return s?!(a=r.isValidNumericGrade(s,i,t))&&e.column&&e.column.externalGrade&&(a=r.notation.isValidPerformanceCodeGrade(u,s)):a=!(n&&n.notAllowEmptyString),a})},t.prototype.clearGroupGrade=function(e,n,r){var i=this,o=this.CourseModel.$new(e.id).gradebook.columns.$new(n.id);return this.batchService.performBatch(function(){return i.$q.all(r.map(function(e){var n=o.grades.$new(e.ui.gradeDetail.id);return n.manualGrade=t.CLEAR_GRADE_CHARACTER,n.$patch(["manualGrade"]).$asPromise()}))}).then(function(){return o.grades})},t.prototype.saveGrade=function(e,t,n,r){if(!e.courseId||!e.column||!e.gradeValue)throw new Error("A valid courseId, column, and grade value are required.");if(e.column.isAttemptBased()){var i=[],o=[];r&&r.group&&r.group.memberships&&r.group.memberships.forEach(function(t){t.ui&&t.ui.gradeDetail&&(i.push(t.ui.gradeDetail.id),(t.ui.gradeDetail.displayGrade&&t.ui.gradeDetail.displayGrade.isOverride||e.setGradeToEmpty)&&o.push(t.ui.gradeDetail.id))}),(null==n||null==n.id)&&t||n&&n.isInProgress()?(r.group?e.gradeIds=i:e.gradeId=t.id,e.clearGrade&&(e.setGradeToEmpty=!0)):n&&n.id&&t?(e.clearGrade&&(r.group||(e.gradeId=t.id),e.setAttemptToEmpty=!0,e.setGradeToEmpty=!0),n instanceof this.GradeAttemptModel?(e.attemptId=n.id,n.groupAttemptId&&(e.override=!0),(t.displayGrade&&t.displayGrade.isOverride||e.setGradeToEmpty)&&(e.gradeId=t.id,e.setGradeToEmpty=!0)):(e.groupAttemptId=n.id,o.length&&(e.gradeIdsNeedClear=o))):r&&r.userId?e.userId=r.userId:r&&r.group&&r.group.id&&(e.gradeIds=i)}else e.column.externalGrade?t&&t.id?e.gradeId=t.id:e.userId=r.userId:null==t?e.userId=r.userId:(e.userId||(e.userId=r.userId),e.gradeId=t.id);return this._save(e)},t.prototype.save=function(e){return this._save(e)},t.prototype._save=function(e){var t=this;if(e.column.externalGrade)return e.gradeId?this.updateGrade(e):this.createGradeForUserAndSave(e);if(!this.canSaveGradeDetail(e))return this.updateAttempt(e);if(e.gradeId)return e.attemptId?(e.setGradeToEmpty=!0,this.updateGrade(e).then(function(){return t.updateAttempt(e)})):this.updateGrade(e);if(e.gradeIds)return this.createAndUpdateGradesForGroupMembers(e);if(e.gradeIdsNeedClear)return this.createAndUpdateGradesForGroupMembers(e).then(function(){return t.updateGroupAttempt(e)});if(e.attemptId)return this.updateAttempt(e);if(e.groupAttemptId)return this.updateGroupAttempt(e);if(e.userId)return this.createGradeForUserAndSave(e);throw new Error("A valid userId must be specified when creating a new grade.")},t.prototype.canSaveGradeDetail=function(e){return!e.column.anonymousGrading&&(!e.column.delegatedGrading||this.isDelegatedAndEntitledReconciler(e))},t.prototype.createAndUpdateGradesForGroupMembers=function(e){var t=this,n=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades;return e.gradeIdsNeedClear||e.gradeIds?this.batchService.performBatch(function(){return t.$q.all((e.gradeIdsNeedClear||e.gradeIds).map(function(r){var i=n.$buildRaw({id:r});return n.$add(i),t.setGradeValueOnGrade(e,i,!!e.gradeIdsNeedClear||e.setGradeToEmpty),i.withParams({clearCommentsIfRevertOverrides:!1}).$patch().$asPromise()}))}).then(function(){return n.$asPromise()}):n.$asPromise()},t.prototype.createGradeSubmission=function(e,t,n){return new b.a(e,t,n)},t.prototype.wasGradeCleared=function(e,t){var n=e&&e.length,r=t&&t.length;return n>0&&!r},t.prototype.updateAttempt=function(e){if(!e.attemptId)throw new Error("Attempt id is not set");var t=this.CourseModel.$new(e.courseId).gradebook.attempts.$new(e.attemptId);return this.setGradeOnAttempt(e,t),t.$patch().$asPromise()},t.prototype.updateGroupAttempt=function(e){if(!e.groupAttemptId)throw new Error("Group attempt id is not set");var t=this.CourseModel.$new(e.courseId).gradebook.groupAttempts.$new(e.groupAttemptId);return this.setGradeOnAttempt(e,t),t.withParams({expand:"attempts"}).$patch().$asPromise()},t.prototype.isReadyToPost=function(e){return!e.delegatedGrading||e.isUserReconciler(this.contextUser.userId)},t.prototype.setGradeOnAttempt=function(e,n){e.setAttemptToEmpty?(n.score=null,n.status=y.C.AttemptStatus.NeedsGrading,n.grade=t.CLEAR_GRADE_CHARACTER,n.rubricEvaluation=null):(e.gradeValue.isNumeric?n.score=parseFloat(e.gradeValue.getGrade()):n.grade=e.gradeValue.getGrade(),e.rubricEvaluation&&(n.rubricEvaluation=e.rubricEvaluation),n.readyToPost=this.isReadyToPost(e.column)),e.override&&(n.override=!0),this.isDelegatedAndEntitledReconciler(e)&&!e.setAttemptToEmpty&&(n.reconciliationMode=f.r.CUSTOM)},t.prototype.isDelegatedAndEntitledReconciler=function(e){return e.column.delegatedGrading&&e.column.isUserReconciler(this.contextUser.userId)},t.prototype.createGradeForUserAndSave=function(e){var t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new();return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.user=this.UserModel.$new(e.userId),t.withParams({userId:e.userId,clearCommentsIfRevertOverrides:!1}).$save().$asPromise()},t.prototype.updateGrade=function(e){var t=this.CourseModel.$new(e.courseId).gradebook.columns.$new(e.column.id).grades.$new(e.gradeId);return this.setGradeValueOnGrade(e,t,e.setGradeToEmpty),t.withParams({clearCommentsIfRevertOverrides:!1,includeUnpostedGrade:!0}).$patch().$asPromise()},t.prototype.setGradeValueOnGrade=function(e,n,r){if(r)n.manualGrade=t.CLEAR_GRADE_CHARACTER;else if(e.column.externalGrade&&e.perfCodeId)n.perfCodeId=e.perfCodeId;else{var i=e.gradeValue;i.isNumeric?n.manualScore=parseFloat(i.getGrade()):n.manualGrade=i.getGrade()}},t.prototype.isValidNumericGrade=function(e,t,n){var r,i=this.bbLocalize.parseNumberSync(e,n);if(isNaN(i))return!1;if(t&&null!=t.beforeDecimal&&(r=Math.floor(i).toString()).length>t.beforeDecimal)return!1;if(t&&null!=t.afterDecimal&&null!=r&&i.toString().substring(r.length+1).length>t.afterDecimal)return!1;return!0},t.isValidFormat=function(e,t){var n=e.indexOf("."),r=0,i=e.length;return n>-1&&(r=i-n-1,i=0),i<=t.beforeDecimal&&n<=t.beforeDecimal&&r<=t.afterDecimal},t.mapSchemaSymbols=function(e){if(y.J.ScaleType.Tabular.isEqualTo(e.scaleType))return e.symbols.map(function(e){return e.symbol.toLocaleLowerCase()})},t.getDefaultAttemptIdToLoad=function(e,t){switch(e){case y.F.AttemptAggregationModel.Average:return t.lastAttemptId;case y.F.AttemptAggregationModel.First:return t.firstAttemptId;case y.F.AttemptAggregationModel.Highest:return t.highestAttemptId;case y.F.AttemptAggregationModel.Last:return t.lastAttemptId;case y.F.AttemptAggregationModel.Lowest:return t.lowestAttemptId;default:return t.lastAttemptId}},t.prototype.findOverallGrade=function(e){return o.find(e,function(e){return e.externalGrade})},t.prototype.needsToSetupOverall=function(e,t){this.CourseModel.$new(t);var n=this.findOverallGrade(e);return this.$q.when(!n)},t.prototype.setDeleteConfirmationHandle=function(e){e.isOffline()?e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-column":e.isCalculated()&&(e.ui.deleteConfirmationHandle=this.GRADEBOOK_ITEM_CONFIRMATION_HANDLE_BASE+"-calculation")},t.prototype.calculateRankingsMap=function(e,t){for(var n,r,i={},o=e.length,s=0;s<o;s++)r=s/o,n=t?10*Math.floor(10*r):Math.floor(100*r),i[e[s].displayGrade.score]=n;return i},t.prototype.getPercentileColor=function(e){return e>=90?"green":e>=80&&e<90?"yellowgreen":e>=70&&e<80?"yellow":e>=60&&e<70?"orange":"red"},t.prototype.isRubricGradeOverridden=function(e,t,n,r){var i=e&&e.displayGrade&&e.displayGrade.isOverride;r&&r.memberships&&r.memberships.forEach(function(e){e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.displayGrade&&e.ui.gradeDetail.displayGrade.isOverride&&(i=!0)});var o=null!=n.rubricAssociations&&n.rubricAssociations.length>0&&n.rubricAssociations[0],s=t&&t.rubricEvaluation,a=!(!t||!t.groupAttemptId);return!(!t||a||null==t.score||!t.readyToPost||!o||s&&s.rubricAssociationId===o.id&&t.score===s.totalScore)||i&&(o||!$.a.UltraAssignment.isEqualTo(n.scoreProviderHandle)&&!$.a.Discussion.isEqualTo(n.scoreProviderHandle))},t.prototype.getCalculateByStringKey=function(e){var t="course.grades.overallGrade.settings.itemWeights";return y.F.CalculateType.Category.isEqualTo(e)&&(t="course.grades.overallGrade.settings.categoryWeights"),t},t.prototype.canGrade=function(e){return this.gradebookPermissionService.canEnterGrades()&&this.gradebookPermissionService.canOverrideGrades()},t.prototype.canUserReconcile=function(e,t){return!e.isClosed&&t.isUserReconciler(this.contextUser.userId)},t.prototype.hasItemsToReconcile=function(e){return e.summary.numSubmissionsNeedsReconciling>0},t.prototype.canPostGrades=function(e,t){if(!this.gradebookPermissionService.canPostGrades(e.id,t))return!1;var n=!e.isComplete()&&t.summary.hasGradesToPost();return t.anonymousGrading?n&&this.gradebookPermissionService.canDeanonymizeGrades(e.id):n},t.prototype.getPostAllGradeConfirmationNeededStringsKey=function(e){if(e.anonymousGrading){if(e.summary.numNeedsGrading)return"x-bb-grade-anonymous-submissions-not-graded";if(!e.isLate()){if(e.getNumMissing()>0)return"x-bb-grade-anonymous-missing-submissions";if(e.isMultipleAttempts())return"x-bb-grade-anonymous-multiple-attempts"}return"x-bb-grade-anonymous-generic"}return"x-bb-grade-column-post-grades"},t.prototype.pointToPercentage=function(e,t){return 100*e/t},t.prototype.percentageToPoint=function(e,t){return e*t/100},t.prototype.gradeDetailToPercentage=function(e){if(!e)return e;var t=o.assignInWith({},e);if(e.displayGrade&&!e.displayGrade.isOverride&&e.manualScore){var n=this.pointToPercentage(e.manualScore,e.pointsPossible);t.manualScore=w.b(n,2),t.displayGrade.score=t.manualScore}return t.pointsPossible=100,t},t.prototype.percentageToGradeDetail=function(e,t){if(!e)return e;var n=e.manualScore;e.manualScore&&(n=this.percentageToPoint(e.manualScore,t));var r=o.assignInWith({},e);return r.manualScore=n,r.displayGrade.score=n,r.pointsPossible=t,r},t.TEXT_SCHEMA_CHARACTER_LENGTH=32,t.CLEAR_GRADE_CHARACTER="-",t.DEFAULT_GRADEBOOK_SETTINGS_BEFORE_DECIMAL=5,t.DEFAULT_GRADEBOOK_SETTINGS_AFTER_DECIMAL=2,t.$inject=["$q","$rootScope","$injector","DSCacheFactory",y.o.serviceName,y.C.serviceName,y.K.serviceName,y.H.serviceName,y.G.serviceName,y.F.serviceName,y.Qb.serviceName,y.D.serviceName,d.b,l.serviceName,k.d,I.b,m.b,S.b,g.b,v.b,T.b,E.b,p.e],t}();!function(e){e[e.Graded=1]="Graded",e[e.MultiStatus=2]="MultiStatus",e[e.NeedGrade=3]="NeedGrade",e[e.Opened=4]="Opened",e[e.Unopend=5]="Unopend",e[e.Posted=6]="Posted",e[e.Completed=7]="Completed"}(r||(r={}));var N=function(){function e(e,t,n){this.column=e,this.context=t,this.contextUser=n,this.isCommentBoxShown=!1,this.hasBeenViewed=!1,this.id=C.a(),this.hasDueDateException=!1}return Object.defineProperty(e.prototype,"Column",{get:function(){return this.column},enumerable:!0,configurable:!0}),e.prototype.isCurrentUserReconciler=function(){return this.column&&this.column.isUserReconciler(this.contextUser.userId)},e.prototype.isDiscussion=function(){return this.column.isDiscussion()},e.prototype.isOverdue=function(){return this.column&&this.column.dueDate&&this.column.dueDate.getTime()-this.context.getServerTime().getTime()<0},e.prototype.getLateSubmissionCount=function(){return s.isDefined(this.lateSubmissionCount)?this.lateSubmissionCount:(this.grade.attempts&&this.grade.attempts.length>0&&(this.lateSubmissionCount=this.grade.attempts.getNumAttemptsSubmittedLate(this.dueDate)),this.lateSubmissionCount)},e.prototype.isStatusComplete=function(e){return this.isDiscussion()||e||this.grade&&!this.grade.attempts?this.isCompleted():this.grade&&(this.grade.attempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.attempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading},e.prototype.isGroupStatusComplete=function(e){return e?this.isCompleted():this.grade&&(this.grade.groupAttempts.isAllGradedAndPosted()||this.grade.isPosted())&&this.grade.groupAttempts.getNumOfGradedAttempts()===this.column.multipleAttempts&&!this.column.anonymousGrading},e.prototype.isStatusNothingToGrade=function(){return this.isDiscussion()?this.hasNoTotalParticipation():this.grade&&!this.grade.attempts.getNumAttemptsToGrade()},e.prototype.isGroupStatusNothingToGrade=function(){return this.grade&&!this.grade.groupAttempts.getNumAttemptsToGrade()},e.prototype.isStatusAttemptsToReconcile=function(){if(!this.isDiscussion()&&this.isCurrentUserReconciler())return this.grade&&this.grade.attempts.getNumAttemptsToReconcile()>0},e.prototype.isStatusAttemptsToGrade=function(e){return this.isDiscussion()?(!this.hasNoParticipation()||this.hasLateParticipation())&&(!this.grade||this.grade&&!this.grade.isGraded()):e?!this.grade||this.grade.attempts.getNumAttemptsToGrade()>=0:this.isCurrentUserReconciler()?void 0:this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0},e.prototype.isGroupStatusAttemptsToGrade=function(e){return e?this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>=0:this.grade&&this.grade.groupAttempts.getNumAttemptsToGrade()>0},e.prototype.isStatusToPost=function(){return this.isDiscussion()?this.needsPosting():this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()},e.prototype.isGroupStatusToPost=function(){return this.grade&&this.grade.isReadyToPost()&&!this.grade.isOverrideGrade()},e.prototype.overrideToPost=function(){return this.grade&&(this.grade.isOverrideGrade()||this.grade.displayGrade&&"MULTIPLE"===this.grade.displayGrade.grade)&&this.grade.isReadyToPost()},e.prototype.isMultipleStatus=function(){return this.group?this.isGroupStatusAttemptsToGrade()&&(this.isGroupStatusToPost()||this.overrideToPost()&&!this.isGroupStatusComplete()):(this.isStatusAttemptsToGrade()||this.isStatusAttemptsToReconcile())&&(this.isStatusToPost()||this.overrideToPost()&&!this.isStatusComplete())},e.prototype.hasGroupAttempts=function(){return this.grade&&this.grade.groupAttempts.length&&o.every(this.grade.groupAttempts,function(e){return!!e.id})},Object.defineProperty(e.prototype,"RowStatus",{get:function(){if(this.grade&&this.group){if(this.needsPosting())return 1;if(this.isGroupStatusAttemptsToGrade())return 3;if(this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade.groupAttempts[0].status&&!this.grade.hasGradeBeenPosted)return 5;if(this.grade.isPosted()&&!this.isGroupStatusComplete())return 6;if(this.isGroupStatusComplete())return 7}else{if(this.membership&&this.membership.isPreviewStudent)return 0;if(this.grade&&0===this.grade.attempts.getNumAttemptsToGrade()&&this.grade.isReadyToPost())return 1;if(this.grade&&this.grade.isGraded()&&this.grade.attempts.getNumAttemptsToGrade()>0&&this.grade.isReadyToPost())return 2;if(this.grade&&this.grade.attempts.getNumAttemptsToGrade()>0&&0===this.grade.attempts.getNumAttemptsToPost()&&!this.grade.isPosted())return 3;if(this.hasNoSubmissions()&&this.inProgress()&&!this.grade.hasGradeBeenPosted)return 4;if(!this.grade||!this.grade.hasGradeBeenPosted)return 5;if(this.grade&&this.grade.hasGradeBeenPosted&&!this.isStatusComplete())return 6;if(this.isStatusComplete())return 7}return 8},enumerable:!0,configurable:!0}),e.prototype.hasNoSubmissions=function(){return!this.attemptCount||0===this.attemptCount},e.prototype.hasNoParticipation=function(){return!this.participation||0===this.participation.comment&&0===this.participation.reply},e.prototype.hasNoTotalParticipation=function(){return!this.participation||0===this.participation.comment&&0===this.participation.reply&&0===this.participation.totalComment&&0===this.participation.totalReply},e.prototype.hasLateParticipation=function(){return this.participation&&0===this.participation.comment&&0===this.participation.reply&&this.participation.totalComment+this.participation.totalReply!==0},e.prototype.inProgress=function(){return this.group?this.grade&&this.grade.ui&&this.grade.ui.groupAttempt&&y.C.AttemptStatus.InProgress.isEqualTo(this.grade.ui.groupAttempt.status):this.grade&&this.grade.ui&&this.grade.ui.attempt&&y.C.AttemptStatus.InProgress.isEqualTo(this.grade.ui.attempt.status)},e.prototype.isLate=function(){if(this.hasDueDateException)return!1;var e=c(this.context.getServerTime());return this.hasNoSubmissions()&&e.isAfter(this.dueDate)||c(this.lastAttemptDate).isAfter(this.dueDate)},e.prototype.isSubmittedLate=function(){return!this.hasDueDateException&&(!this.hasNoSubmissions()&&c(this.lastAttemptDate).isAfter(this.dueDate)&&!this.inProgress())},e.prototype.isCompleted=function(){return!(this.group||!this.grade||!this.grade.isGraded()||!this.grade.isPosted())||!!(this.group&&this.group.memberships&&this.group.memberships.length>0)&&this.group.memberships.every(function(e){return e.ui&&e.ui.gradeDetail&&e.ui.gradeDetail.isPosted()})},e.prototype.needsPosting=function(){if(!this.group)return!this.isCompleted()&&this.grade&&this.grade.isReadyToPost();if(this.group&&this.group.memberships){var e=0,t=0;if(this.group.memberships.forEach(function(n){n.ui&&n.ui.gradeDetail&&(n.ui.gradeDetail.isReadyToPost()?t++:n.ui.gradeDetail.isPosted()&&e++)}),t>0&&e+t===this.group.memberships.length)return!0}return!1},e.prototype.needsGrading=function(){return this.grade.groupAttempts&&this.grade.groupAttempts.length?this.grade.groupAttempts[0].isNeedsGrading()&&!this.grade.groupAttempts[0].isPostable():this.attemptCount>0&&this.grade.isSubmitted()},e.prototype.deleteAllAttempts=function(){var e=this;this.grade.attempts.$fetch().$then(function(t){t.forEach(function(e){e.$destroy()}),e.attemptCount=0,e.lastAttemptDate=null})},e.$inject=["column",d.b,E.b],e}(),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t}(M);s.module(P,["angular-data.DSCacheFactory",y.R,d.a,k.b,S.a,g.a,v.a,T.a]).service(A,M)}).call(this,n("EVdn"))},oB9e:function(e,t,n){"use strict";n.d(t,"a",function(){return m}),n.d(t,"b",function(){return h});var r=n("mrSG"),i=(n("XH2s"),n("IbG+")),o=n("0JpG"),s=n("nYZ0"),a=n("Fvsw"),u=n("jhBu"),c=n("Sa5G"),l=n("X/qj"),d=n("pjml"),p=n("g66W"),f=n("TnpK"),m="ultra.service.blog",h="blogService",g=function(){function e(e,t,n,r,i,o,s,a,u,c,l){this.bbLocalize=e,this.$rootScope=t,this.$q=n,this.$modal=r,this.courseModel=i,this.UserModel=o,this.context=s,this.contentService=a,this.ultraState=u,this.gradebookPermissionService=c,this.entitlementService=l,this.journalAvailabilityCache={}}return e.prototype.createContent=function(e){var t=e.courseId,n=e.parentId,r=e.positionBefore,i=e.positionAfter,o=e.root;return this.contentService.makeContentInContentTree(o,t,n,r,i)},e.prototype.updateContent=function(e,t,n){var r=this;return e.$patch(n).$then(function(){r.$rootScope.$broadcast("content-update",e),r.$rootScope.$broadcast("attempt-base-content-update",e,t)}).$asPromise()},e.prototype.fetchContent=function(e,t){return t.contents.$find(e,{expand:"alignedGoals,assignedGroups,extensionAttributes"}).$asPromise()},e.prototype.isJournalAvailable=function(e){var t=this,n=this.journalAvailabilityCache[e];return n?this.$q.when(n.toolEnabledSetting.isAvailable):this.courseModel.$new(e).contentHandlers.$find(c.g.Journal.toString()).$allow([403]).$asPromise().then(function(n){return(t.journalAvailabilityCache[e]=n).toolEnabledSetting.isAvailable})},e.prototype.savePrompt=function(e,t){var n=this,r=p.f(t),i=this.contentService.truncateDescription(r,s.b.MAX_LENGTH_IN_CONTENT_ITEM),o=e.description;return e.description=i,e.$patch(["contentDetail","description"]).$asPromise().then(function(){n.$rootScope.$broadcast("content-update",e)}).catch(function(){e.description=o})},e.$inject=[o.serviceName,"$rootScope","$q","$modal",d.o.serviceName,d.Qb.serviceName,a.b,s.d,f.d,l.b,u.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(g);i.module(m,[d.R,o.moduleName,a.a,s.c,f.b,l.a,u.a,d.R]).service(h,g)},"oC7+":function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="components.directives.fileUpload.errorTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>{{::errorModalErrorKey}}</bb-translate>\n    </p>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="$parent.$dismiss()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},oIwE:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},oJ2y:function(e,t){e.exports='<bb-modal class="notification"\n          modal-title-key="course.placements.inlineGradableModalTitle"\n          analytics-id-tag-prefix="course.placements.basePlacement">\n  <div name="modal-contents">\n    <p bb-translate>course.placements.inlineGradableSupport</p>\n  </div>\n  \x3c!-- htmlhint:analytics-id:disable --\x3e\n  <button name="modal-footer-button-primary"\n          ng-click="dismissCallback()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="course.placements.basePlacement.ok.button">\n    global.ok\n  </button>\n  \x3c!-- htmlhint:analytics-id:enable --\x3e\n</bb-modal>'},oQrK:function(e,t,n){"use strict";var r=function(){function e(){}return e.detect=function(){var e,t,n;return e={},n=window.navigator.userAgent.toLowerCase(),t=function(e){return-1!==n.indexOf(e)},e.ios=function(){return e.iphone()||e.ipod()||e.ipad()},e.iphone=function(){return!e.windows()&&t("iphone")},e.ipod=function(){return t("ipod")},e.ipad=function(){return t("ipad")},e.android=function(){return!e.windows()&&t("android")},e.androidPhone=function(){return e.android()&&t("mobile")},e.androidTablet=function(){return e.android()&&!t("mobile")},e.blackberry=function(){return t("blackberry")||t("bb10")||t("rim")},e.blackberryPhone=function(){return e.blackberry()&&!t("tablet")},e.blackberryTablet=function(){return e.blackberry()&&t("tablet")},e.windows=function(){return t("windows")},e.windowsPhone=function(){return e.windows()&&t("phone")},e.windowsTablet=function(){return e.windows()&&t("touch")&&!e.windowsPhone()},e.fxos=function(){return(t("(mobile;")||t("(tablet;"))&&t("; rv:")},e.fxosPhone=function(){return e.fxos()&&t("mobile")},e.fxosTablet=function(){return e.fxos()&&t("tablet")},e.meego=function(){return t("meego")},e.mobile=function(){return e.androidPhone()||e.iphone()||e.ipod()||e.windowsPhone()||e.blackberryPhone()||e.fxosPhone()||e.meego()},e.tablet=function(){return e.ipad()||e.androidTablet()||e.blackberryTablet()||e.windowsTablet()||e.fxosTablet()},e.desktop=function(){return!e.tablet()&&!e.mobile()},e.portrait=function(){return window.innerHeight/window.innerWidth>1},e.landscape=function(){return window.innerHeight/window.innerWidth<1},e},e}();t.a=r},"oSB+":function(e,t,n){e.exports=n("ZJ/X")(1929)},oVrE:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return u}),n.d(t,"e",function(){return c}),n.d(t,"f",function(){return l});var r="allMembersId",i="anonymousId";function o(){return r}function s(){return{id:o(),givenName:"allMembers",familyName:void 0,userName:void 0}}function a(){return i}function u(e,t){var n=t.translateSync({locale:t.getLocale(e),key:"components.directives.avatar.anonymous",noWrap:!0,noEscape:!0});return{id:a(),givenName:n,familyName:"",userName:void 0}}function c(e){return e&&e.id===r}function l(e){return e&&e.id===i}},oaeU:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-translate-options="translateOpts"\n          analytics-id-tag-prefix="components.services.error-modal.error-external-questions">\n  <div name="modal-contents">\n    <p bb-translate>{{descriptionKey}}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          bb-translate\n          analytics-id="components.services.error-modal.dismiss">components.services.error-modal.dismiss</button>\n</bb-modal>\n'},oi1r:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("0JpG"),a=n("Bu0u"),u=n("pjml"),c="ultra.components.services.grade.gradeSchema.Service",l="gradeSchemaService",d=function(){function e(e,t,n,r){this.$q=e,this.CourseModel=n,this.bbLocalize=r,this.gbSchemasCache=t.createCache("gbSchemas")}return e.prototype.loadSchemas=function(e,t){e instanceof this.CourseModel||(e=this.CourseModel.$new(e));var n=e.$pk||e.id;if(!n)throw new a.a({message:"A primary key or id must be set on the course model"});var r=null,o=this.gbSchemasCache.get(n);if(o)r=this.$q.when(o.promise);else{var s=e.gradebook.schemas.$fetch().$asPromise(),c=this.bbLocalize.loadBundle("components/services/grade"),l=this.$q.defer();this.$q.all({gradeSchemas:s,bundle:c}).then(function(e){var t=i.filter(e.gradeSchemas,function(e){return!u.J.ScaleType.Text.isEqualTo(e.scaleType)});t.forEach(function(e){if(e.localizableTitle){var t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui.displayTitleKey="components.services.grade.schema."+t}else e.ui.displayTitle=e.title}),l.resolve(t)}),this.gbSchemasCache.put(n,{promise:l.promise}),r=l.promise}return r.then(function(e){return t&&t.length?e.filter(function(e){return t.some(function(t){return t.isEqualTo(e.scaleType)})}):e})},e.prototype.loadSchemaForColumn=function(e){return this.loadSchemas(e.courseId).then(function(t){return i.find(t,function(t){return t.id===e.gradingSchemaId})})},e.prototype.loadGradeSchema=function(e){var t=e.courseId;if(t){var n=void 0,r=this.gbSchemasCache.get(t);return n=r?this.$q.when(r.promise):this.loadSchemas(t),this.$q.when(n).then(function(t){return i.find(t,function(t){return t.id===e.gradingSchemaId})})}throw new a.a({message:"Valid grade column object not provided."})},e.$inject=["$q","DSCacheFactory",u.o.serviceName,s.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(d);o.module(c,["angular-data.DSCacheFactory"]).service(l,d)},opeW:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification error-something-broke-modal"\n          modal-title-key="components.services.error-modal.error-something-broke.title"\n          analytics-id-tag-prefix="components.services.error-modal.error-something-broke">\n  <div name="modal-contents">\n    <p bb-translate>components.services.error-modal.error-something-broke.description</p>\n    <pre>{{ response | json }}</pre>\n  </div>\n  <button name="modal-footer-button-primary"\n          class="button large reload-page-button js-primary-button"\n          onclick="location.reload(true)"\n          analytics-id="components.services.error-modal.reloadPage"\n          bb-translate>components.services.error-modal.reloadPage</button>\n</bb-modal>'},p7NW:function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("0JpG"),a=n("Fvsw"),u=n("pjml"),c=n("e6jQ"),l="ultra.services.rubric",d="rubric",p=255,f=[{max:100,min:85},{max:84,min:75},{max:74,min:60},{max:60,min:0}],m=function(){function e(e,t,n,r){this.context=e,this.bbLocalize=t,this.CourseModel=n,this.RubricModel=r,this.bbLocalize.loadBundle("components/services/rubric")}return e.prototype.createRubricCopy=function(e){var t=this.CourseModel.$new(e.courseId),n={courseId:e.courseId,title:this.incrementTitle(e.title,t.locale),columnHeaders:this.cloneHeaders(e.columnHeaders),rows:this.cloneRows(e.rows),permissions:i.clone(e.permissions),rubricType:e.rubricType};return t.rubrics.$build(n)},e.prototype.cloneRows=function(e){var t=this;return i.map(e,function(e){return{cells:t.cloneCells(e.cells),header:e.header,percentage:e.percentage,position:e.position}})},e.prototype.cloneCells=function(e){return i.map(e,function(e){return{position:e.position,description:e.description,percentage:e.percentage,percentageMin:e.percentageMin,percentageMax:e.percentageMax}})},e.prototype.cloneHeaders=function(e){return i.map(e,function(e){return{position:e.position,header:e.header}})},e.prototype.incrementTitle=function(e,t){return this.bbLocalize.translateSync({locale:t,key:"components.services.rubric.newCopyTitle",params:{rubricTitle:e,date:this.bbLocalize.formatDateSync(new Date,s.ILocaleDateFormat.Short)},noWrap:!0,noEscape:!0}).substring(0,p)},e.prototype.processColumnHeader=function(t,n){for(var r=0;r<e.templateColumnCount;r++)t.push({position:r,header:this.bbLocalize.translateSync({locale:n,key:"components.services.rubric.template.column"+(r+1)})})},e.prototype.processRow=function(t,n,r){for(var i=0;i<e.templateRowCount;i++){var o=new Array;this.processCell(r,o),t.push({position:i,header:this.bbLocalize.translateSync({locale:n,key:"components.services.rubric.template.criteria",params:{idx:i+1}}),percentage:Math.floor(100/e.templateRowCount),cells:o})}},e.prototype.processCell=function(t,n){switch(t){case u.rb.ILearnRubricType.PERCENTAGE:for(var r=0;r<e.templateColumnCount;r++)n.push({position:r,description:"",percentage:Math.floor(100-100/e.templateColumnCount*r)});break;case u.rb.ILearnRubricType.PERCENTAGE_RANGE:f.map(function(e,t){n.push({position:t,description:"",percentageMin:e.min,percentageMax:e.max})});break;default:this.unrecognizedRubric()}},e.prototype.generateDefaultRubric=function(e){var t=this;if(null!=this.rubricTemplate){var n=i.cloneDeep(this.rubricTemplate);return e.rubrics.$build(n).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then(function(){t.rubricTemplate={courseId:e.id,title:"",rows:new Array,columnHeaders:new Array,permissions:{edit:!0,delete:!0},rubricType:u.rb.ILearnRubricType.PERCENTAGE},t.processColumnHeader(t.rubricTemplate.columnHeaders,e.locale),t.processRow(t.rubricTemplate.rows,e.locale,t.rubricTemplate.rubricType);var n=i.cloneDeep(t.rubricTemplate);return e.rubrics.$build(n).$asPromise()})},e.prototype.generatePercentRangeRubric=function(e){var t=this;if(null!=this.percentRangeTemplate){var n=i.cloneDeep(this.percentRangeTemplate);return e.rubrics.$build(n).$asPromise()}return this.bbLocalize.loadBundle("components/services/rubric").then(function(){t.percentRangeTemplate={courseId:e.id,title:"",rows:new Array,columnHeaders:new Array,permissions:{edit:!0,delete:!0},rubricType:u.rb.ILearnRubricType.PERCENTAGE_RANGE},t.processColumnHeader(t.percentRangeTemplate.columnHeaders,e.locale),t.processRow(t.percentRangeTemplate.rows,e.locale,t.percentRangeTemplate.rubricType);var n=i.cloneDeep(t.percentRangeTemplate);return e.rubrics.$build(n).$asPromise()})},e.prototype.changeRubricType=function(e,t){e.columnHeaders=new Array,e.rows=new Array,this.processColumnHeader(e.columnHeaders,t),this.processRow(e.rows,t,e.rubricType)},e.prototype.insertNewCriteriaAt=function(e,t){if(e.rows.length>=10)throw new Error("Cannot add more than 10 criteria rows");var n=this.genNewRow(e.rubricType,e.rows[0].cells);return e.rows.splice(t,0,n),e.rows.forEach(function(e,t){e.position=t}),e},e.prototype.deleteCriteriaAt=function(e,t){if(1===e.rows.length)throw new Error("Cannot delete last criteria row");return e.rows.splice(t,1),e.rows.forEach(function(e,t){e.position=t}),e},e.prototype.balanceCriteriaPercentages=function(e){e.rows.forEach(function(t){t.percentage=Math.floor(100/e.rows.length)}),i.last(e.rows).percentage+=100-e.rows.reduce(function(e,t){return e+t.percentage},0)},e.prototype.insertNewColumnAt=function(e,t){var n=this;if(e.columnHeaders.length>=10)throw new Error("Cannot add more than 10 columns");return e.columnHeaders.splice(t,0,{position:t,header:""}),e.rows.forEach(function(r){switch(e.rubricType){case u.rb.ILearnRubricType.PERCENTAGE:n.insertNewPercentRubricColumn(r,t);break;case u.rb.ILearnRubricType.PERCENTAGE_RANGE:n.insertNewPercentRangeRubricColumn(r,t);break;default:n.unrecognizedRubric()}}),e},e.prototype.deleteColumnAt=function(e,t){if(1===e.columnHeaders.length)throw new Error("Cannot remove last column");return e.columnHeaders.splice(t,1),e.rows.forEach(function(e){e.cells.splice(t,1),e.cells.forEach(function(e,n){0===t&&0===n&&(e.percentage=100)})}),e},e.prototype.createRubricEvaluation=function(e,t,n){return{rubricAssociationId:e,userId:t,maxScore:n,totalScore:0,cells:[]}},e.prototype.createRubricEvalUiModel=function(e,t){var n={rubricEvaluation:e,criteria:[],preventKeyboardClose:!1};return this.populateRubricEvalUiModel(n,t)},e.prototype.resetRubricEvalUiModel=function(e,t){e.criteria.length=0,this.populateRubricEvalUiModel(e,t)},e.prototype.populateRubricEvalUiModel=function(e,t){var n=this,r=e.rubricEvaluation;return t.rows.forEach(function(o){var s=[],a={rowId:o.id,percentOfGrade:o.percentage,header:o.header,levels:s,selectedCellId:null},c=n.getEvalCellForCriterion(r,o.id);o.cells.forEach(function(e,n){var o=t.columnHeaders[n],l={cellId:e.id,columnId:o.id,percentage:e.percentage,header:o.header,description:e.description,percentageMin:e.percentageMin,percentageMax:e.percentageMax,_selectedPercent:null,set selectedPercent(e){var t=parseInt(e,10);this._selectedPercent=i.isNaN(t)?null:t},get selectedPercent(){return this._selectedPercent},selected:!1,pointValue:null};t.rubricType===u.rb.ILearnRubricType.PERCENTAGE_RANGE?(c&&c.rubricCellId===e.id&&(l.selected=!0,l.selectedPercent=c.selectedPercent,a.selectedLevel=l,l.pointValue=r.maxScore*a.percentOfGrade/100*c.selectedPercent/100),s.push(l)):(c&&c.rubricCellId===e.id&&c.selectedPercent===e.percentage&&(l.selected=!0,a.selectedLevel=l),l.pointValue=r.maxScore*a.percentOfGrade/100*l.percentage/100,s.push(l))}),e.criteria.push(a)}),this.updateTotalValue(e),e},e.prototype.getEvalCellForCriterion=function(e,t){return i.find(e.cells,function(e){return e.rubricRowId===t})},e.prototype.updateTotalValue=function(e){e&&e.criteria&&(e.rubricEvaluation.totalScore=0,e.criteria.forEach(function(t){t.selectedLevel&&t.selectedLevel.pointValue&&(e.rubricEvaluation.totalScore+=t.selectedLevel.pointValue)}),e.rubricEvaluation.totalScore=Number(e.rubricEvaluation.totalScore.toFixed(1)))},e.prototype.clearLevelSelectionForCriterion=function(e,t,n){var r=i.find(e.criteria,function(e){return e.rowId===t}),o=i.find(r.levels,function(e){return e.cellId===n});r.selectedLevel=null,r.levels.forEach(function(e){e.selected=!1,i.isNaN(e.selectedPercent)&&(e.selectedPercent=null)}),r.selectedLevel=o,o&&(o.selected=!0)},e.prototype.selectLevelForCriterion=function(e,t,n){var r=i.find(e.criteria,function(e){return e.rowId===t}),o=i.find(r.levels,function(e){return e.cellId===n});if(r.selectedLevel=null,r.levels.forEach(function(e){e.selected=!1}),r.selectedLevel=o,o){o.selected=!0;var s=this.getEvalCellForCriterion(e.rubricEvaluation,t);s?(s.rubricCellId=n,s.selectedPercent=null!=o.selectedPercent?o.selectedPercent:o.percentage):(null==e.rubricEvaluation.cells&&(e.rubricEvaluation.cells=[]),e.rubricEvaluation.cells.push({rubricRowId:t,rubricCellId:n,selectedPercent:null!=o.selectedPercent?o.selectedPercent:o.percentage}))}this.updateTotalValue(e)},e.prototype.initRubricCellValues=function(e,t){e&&e.rows&&e.rows.forEach(function(e){e.cells.forEach(function(n){n.ui={points:t*e.percentage/100*n.percentage/100}})})},e.prototype.initiateUiState=function(e,t){e.ui.editingCells=!1,e.ui.canEdit=t,e.ui.editingCriteria=!1,e.ui.invalidCriteriaPercentageSum=!1,e.ui.criteriaLimit=10,e.ui.columnLimit=10},e.prototype.mapRubricToGrid=function(e){return null==e.ui.columnHeaders&&(e.ui.columnHeaders=new Array),e.columnHeaders.forEach(function(t,n){e.ui.columnHeaders[n]?e.ui.columnHeaders[n].uuid||(e.ui.columnHeaders[n].uuid=Object(c.b)()):e.ui.columnHeaders[n]={uuid:Object(c.b)()}}),null==e.ui.rows&&(e.ui.rows=new Array),e.rows.forEach(function(t,n){e.ui.rows[n]?e.ui.rows[n].uuid||(e.ui.rows[n].uuid=Object(c.b)()):e.ui.rows[n]={uuid:Object(c.b)()}}),{rows:e.rows.map(function(t,n){return{id:e.ui.rows[n].uuid,data:t}}),columns:e.columnHeaders.map(function(t,n){return{id:e.ui.columnHeaders[n].uuid,data:t}})}},e.prototype.insertNewPercentRubricColumn=function(e,t){var n=t<e.cells.length?e.cells[t].percentage:e.cells[t-1].percentage;if(e.cells.splice(t,0,{position:0,description:"",percentage:n}),e.cells.forEach(function(e,t){e.position=t}),0!==t){var r=e.cells[t+1]?e.cells[t+1].percentage:0,i=Math.floor((e.cells[t-1].percentage-r)/2);e.cells[t].percentage=e.cells[t-1].percentage-i}},e.prototype.insertNewPercentRangeRubricColumn=function(e,t){var n=t<e.cells.length?e.cells[t].percentageMin:e.cells[t-1].percentageMin,r=t<e.cells.length?e.cells[t].percentageMax:e.cells[t-1].percentageMax;if(e.cells.splice(t,0,{position:t,description:"",percentageMin:n,percentageMax:r}),e.cells.forEach(function(e,t){e.position=t}),0!==t){var i=e.cells[t+1]?e.cells[t+1].percentageMin:0,o=e.cells[t+1]?e.cells[t+1].percentageMax:0;e.cells[t].percentageMin=e.cells[t-1].percentageMin-Math.floor((e.cells[t-1].percentageMin-i)/2),e.cells[t].percentageMax=e.cells[t-1].percentageMax-Math.floor((e.cells[t-1].percentageMax-o)/2)}},e.prototype.genNewRow=function(e,t){switch(e){case u.rb.ILearnRubricType.PERCENTAGE:return this.genNewPercentageRow(t);case u.rb.ILearnRubricType.PERCENTAGE_RANGE:return this.genNewPercentageRangeRow(t);default:this.unrecognizedRubric()}},e.prototype.genNewPercentageRangeRow=function(e){var t={header:"",percentage:0,cells:new Array};return e.map(function(e,n){t.cells.push({position:n,description:"",percentageMin:e.percentageMin,percentageMax:e.percentageMax})}),t},e.prototype.genNewPercentageRow=function(e){var t={header:"",percentage:0,cells:new Array};return e.map(function(e,n){t.cells.push({position:n,description:"",percentage:e.percentage})}),t},e.prototype.unrecognizedRubric=function(){throw new Error("Invalid rubric type, please go check ILearnRubricType for more detail")},e.prototype.validateInput=function(e){return e.selectedPercent>=e.percentageMin&&e.selectedPercent<=e.percentageMax},e.templateRowCount=4,e.templateColumnCount=4,e.$inject=[a.b,s.serviceName,u.o.serviceName,u.rb.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(m);o.module(l,[a.a,s.moduleName,u.R]).service(d,m)},pGZF:function(e,t,n){},pGpj:function(e,t){e.exports='\x3c!--\n  this #ftue-new div is copied from first-time-visit-directive.html.\n  it may need to move back up a level if/when the welcome template is made configurable.\n--\x3e\n<div id="ftue-new" class="base-ftue" ng-if="firstVisit">\n  <div id="ftue-new-1" class="ftue-new-slide current-view">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.welcome.title</h2>\n\n      <div>\n        <a href="javascript:void(0);" class="ftue-img ftue-1-button scroll-button" tabindex="0" analytics-id="welcome.welcome.welcomeIcon.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_Welcome.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.welcome.alt\'}"\n                                          ></a>\n      </div>\n      <p class="medium-up-padding" bb-translate>welcome.welcome.description</p>\n    </div>\n    <div class="slide-control">\n\n      <button class="button ftue-1-button icon round ftue-advance large scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.welcome.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-2">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.layers.title</h2>\n\n      <div>\n        <a id="ftue-new-2-img" href="javascript:void(0);" class="ftue-img ftue-2-button scroll-button" tabindex="0" analytics-id="welcome.welcome.neverLoseYourPlace.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_NeverLoseYourPlace.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.layers.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.layers.description</p>\n    </div>\n    <div class="slide-control">\n      <button class="button icon round ftue-advance large ftue-2-button scroll-button"\n                                                                  bb-translate-attrs="{\'aria-label\': \'welcome.layers.alt\'}"\n                                                                  analytics-id="welcome.welcome.downIcon.button"><i\n                                                                  class="icon-chevron-down"\n                                                                  ></i>\n      </button>\n    </div>\n  </div>\n\n  <div class="ftue-new-slide" id="ftue-new-3">\n    <div class="slide-content large-6 large-offset-3 medium-8 medium-offset-2 small-10 small-offset-1">\n      <h2 bb-translate>welcome.safe.title</h2>\n\n      <div>\n        <a id="ftue-new-3-img" href="javascript:void(0);" class="ftue-img ftue-3-button" ng-click="welcome.goNextPage()" tabindex="0" analytics-id="welcome.welcome.goNextPage.link"><img\n                                          src="./static/images/ftue/ftueMMicon_blank.gif"\n                                          in-view="loadImage($inview, $inviewpart, $event,((\'./static/images/ftue/ftuMMicon_FeelFree.gif\')))"\n                                          in-view-options="{ debounce: 100 }"\n                                          bb-translate-attrs="{alt: \'welcome.safe.alt\'}"></a>\n      </div>\n      <p bb-translate>welcome.safe.description</p>\n\n    </div>\n    <div class="slide-control">\n      <button class="button round ftue-end large ftue-3-button" bb-translate ng-click="welcome.goNextPage()" analytics-id="welcome.safe.button">welcome.safe.button</button>\n    </div>\n  </div>\n</div>\n'},pIXs:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n("uXMc");var r=n("IbG+"),i=n("bd9L"),o=n("0JpG"),s=n("WmjM"),a="ultra.directives.saveButtons",u=function(){function e(e,t){var n=this;this.scope=e,this.bbLocalize=t,this.isSaving=!1,this.isSavedOnceOrMore=!1,this.savedToBrowserCount=0,this.bbLocalize.loadBundle("components/directives/save-buttons").then(function(){n.notSavedStr=e.saveType||n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notSaved"}),n.savedStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.saved"}),n.savingStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.saving"}),n.cancelStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.cancel"}),n.deleteStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.delete"}),n.savedSuccessfullyStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notification.savedSuccessfully"}),n.canceledSuccessfullyStr=n.bbLocalize.translateSync({locale:n.bbLocalize.getLocale(n.scope),key:"components.directives.save-buttons.notification.canceledSuccessfully"}),n.deleteButtonStatus=n.deleteStr,e.displaySavedAfterSaving&&e.displaySavedAfterSaving()&&n.isSavedOnceOrMore?n.saveButtonStatus=n.savedStr:n.saveButtonStatus=n.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()&&n.isSavedOnceOrMore?n.cancelButtonStatus=n.deleteStr:n.cancelButtonStatus=n.cancelStr}),e.$on("bb-save-button",function(t,r,o){var s=!1;switch(r){case i.a.Change:n.isSaving=!1,n.saveButtonStatus=n.notSavedStr;break;case i.a.Saving:n.isSaving=!0,n.saveButtonStatus=n.savingStr,s=!0;break;case i.a.Saved:s=!0,n.isSavedOnceOrMore=!0,n.isSaving=!1,n.informScreenReaderToRead(n.savedSuccessfullyStr),e.displaySavedAfterSaving&&e.displaySavedAfterSaving()?n.saveButtonStatus=n.savedStr:n.saveButtonStatus=n.notSavedStr,e.displayDeleteAfterSaving&&e.displayDeleteAfterSaving()?n.cancelButtonStatus=n.deleteStr:n.cancelButtonStatus=n.cancelStr;break;case i.a.SaveFailure:case i.a.ValidationFailure:s=!0}n.form.$bbSaveAttempt=s}),e.$parent.$on("bb-autosave-form-to-browser",function(e,t,r){i.a.Saved.isEqualTo(t)&&n.element.attr("saved-to-browser",++n.savedToBrowserCount)})}return e.prototype.isValid=function(){return this.scope.ignoreFormValidation&&this.scope.ignoreFormValidation()?this.scope.validateSave():this.form.$valid&&this.scope.validateSave()},e.prototype.isCancelNowADelete=function(){return this.scope.displayDeleteAfterSaving&&this.scope.displayDeleteAfterSaving()&&this.isSavedOnceOrMore},e.prototype.isCancelDisabled=function(){return this.isSaving||this.isCancelNowADelete()&&!this.scope.canDelete()},e.prototype.isDeleteDisabled=function(){return this.isSaving||!this.scope.canDelete()},e.prototype.isSaveDisabled=function(){return this.isSaving||!this.isValid()},e.prototype.cancelAction=function(){return this.form.$setPristine(),this.informScreenReaderToRead(this.canceledSuccessfullyStr),this.isCancelNowADelete()?this.scope.deleteAction():this.scope.cancelAction()},e.prototype.deleteAction=function(){return this.form.$setPristine(),this.scope.deleteAction()},e.prototype.saveAction=function(){return this.form.$setSubmitted(),this.informScreenReaderToRead(this.savedSuccessfullyStr),this.scope.saveAction()},e.prototype.mousedownAction=function(){if(this.scope.mousedownAction)return this.scope.mousedownAction()},e.prototype.informScreenReaderToRead=function(e){this.scope.disableScreenreaderAnnouncements&&this.scope.disableScreenreaderAnnouncements()||this.scope.$emit("read-info-directive",e)},e.$inject=["scope",o.serviceName],e}(),c=function(){function e(e,t){var n=this;this.$injector=e,this.bbLocalize=t,this.require="^form",this.replace=!0,this.restrict="E",this.scope={canDelete:"&",cancelAction:"&",choices:"=?",deleteAction:"&",deleteConfirmationResourceType:"@?",disableScreenreaderAnnouncements:"&?",displayDeleteAfterSaving:"&?",displaySavedAfterSaving:"&?",hideSave:"&?",hideCancel:"&?",hideDelete:"&?",isInline:"&?",mousedownAction:"&?",mustShowDeleteConfirmation:"&?",mustShowSaveConfirmation:"&?",saveAction:"&",saveConfirmationResourceType:"@?",validateSave:"&",ignoreFormValidation:"&",saveType:"@?",analyticsIdTagPrefix:"@"},this.link=function(e,t,r,i){e.saveButtons=n.$injector.instantiate(u,{scope:e}),e.saveButtons.form=i,e.saveButtons.element=t},this.compile=function(e,t){return"true"===t.isInline&&(e.prepend(e.find("footer").children()),e.find("footer").remove()),{pre:n.link}},this.template=s}return e.$inject=["$injector",o.serviceName],e}();r.module(a,[o.moduleName]).directive("bbSaveButtons",["$injector",function(e){return e.instantiate(c)}])},pJBw:function(e,t,n){e.exports=n("ZJ/X")(1899)},pjml:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"serviceName",function(){return Le});var i={};n.r(i),n.d(i,"serviceName",function(){return Re});var o={};n.r(o),n.d(o,"serviceName",function(){return Ge});var s={};n.r(s),n.d(s,"serviceName",function(){return He}),n.d(s,"AssessmentExceptionType",function(){return Ve});var a={};n.r(a),n.d(a,"serviceName",function(){return Xe});var u={};n.r(u),n.d(u,"serviceName",function(){return Ze}),n.d(u,"KnownCalendar",function(){return Ye});var c={};n.r(c),n.d(c,"serviceName",function(){return nt}),n.d(c,"RecurFrequency",function(){return rt}),n.d(c,"RecurWeekDay",function(){return it}),n.d(c,"MonthRepeatBy",function(){return ot}),n.d(c,"MetadataOnCalendarItemCardLinkType",function(){return st}),n.d(c,"RepeatRuleType",function(){return at});var l={};n.r(l),n.d(l,"ConversionContentCategory",function(){return ut}),n.d(l,"ConversionReportStatus",function(){return ct}),n.d(l,"ConversionQueueTaskStatus",function(){return lt}),n.d(l,"serviceName",function(){return dt});var d={};n.r(d),n.d(d,"serviceName",function(){return mt});var p={};n.r(p),n.d(p,"serviceName",function(){return vt}),n.d(p,"CollabSessionType",function(){return bt}),n.d(p,"CollabAccessType",function(){return yt});var f={};n.r(f),n.d(f,"serviceName",function(){return $t});var m={};n.r(m),n.d(m,"serviceName",function(){return kt});var h={};n.r(h),n.d(h,"serviceName",function(){return Mt});var g={};n.r(g),n.d(g,"CourseMessageType",function(){return Nt}),n.d(g,"serviceName",function(){return Rt});var v={};n.r(v),n.d(v,"sortInstructorsMembership",function(){return Ft}),n.d(v,"serviceName",function(){return qt});var b={};n.r(b),n.d(b,"serviceName",function(){return jt});var y={};n.r(y),n.d(y,"serviceName",function(){return Qt});var S={};n.r(S),n.d(S,"serviceName",function(){return nn});var C={};n.r(C),n.d(C,"serviceName",function(){return rn});var w={};n.r(w),n.d(w,"serviceName",function(){return on});var $={};n.r($),n.d($,"serviceName",function(){return sn});var k={};n.r(k),n.d(k,"moduleName",function(){return dn}),n.d(k,"serviceName",function(){return pn}),n.d(k,"START_ATTEMPT_ID",function(){return fn});var T={};n.r(T),n.d(T,"moduleName",function(){return mn}),n.d(T,"serviceName",function(){return hn}),n.d(T,"GradeCategoryTitleEnum",function(){return gn});var I={};n.r(I),n.d(I,"ColumnSummaryStatus",function(){return yn.a}),n.d(I,"serviceName",function(){return Sn}),n.d(I,"SummaryAction",function(){return Cn});var E={};n.r(E),n.d(E,"serviceName",function(){return kn});var P={};n.r(P),n.d(P,"serviceName",function(){return Tn});var A={};n.r(A),n.d(A,"serviceName",function(){return En});var x={};n.r(x),n.d(x,"serviceName",function(){return An});var D={};n.r(D),n.d(D,"serviceName",function(){return xn});var _={};n.r(_),n.d(_,"serviceName",function(){return Dn});var L={};n.r(L),n.d(L,"serviceName",function(){return _n}),n.d(L,"LTIStatusType",function(){return Ln}),n.d(L,"LTISendUserDataType",function(){return Mn});var M={};n.r(M),n.d(M,"serviceName",function(){return Nn});var N={};n.r(N),n.d(N,"serviceName",function(){return Rn});var R={};n.r(R),n.d(R,"serviceName",function(){return On});var O={};n.r(O),n.d(O,"serviceName",function(){return Fn});var G={};n.r(G),n.d(G,"serviceName",function(){return Hn});var U={};n.r(U),n.d(U,"serviceName",function(){return Vn});var B={};n.r(B),n.d(B,"serviceName",function(){return zn});var F={};n.r(F),n.d(F,"serviceName",function(){return Wn});var q={};n.r(q),n.d(q,"serviceName",function(){return Jn});var j={};n.r(j),n.d(j,"serviceName",function(){return Yn}),n.d(j,"adjustEngagement",function(){return er});var H={};n.r(H),n.d(H,"serviceName",function(){return nr});var V={};n.r(V),n.d(V,"serviceName",function(){return rr});var z={};n.r(z),n.d(z,"serviceName",function(){return ir});var K={};n.r(K),n.d(K,"serviceName",function(){return or});var W={};n.r(W),n.d(W,"serviceName",function(){return sr});var J={};n.r(J),n.d(J,"serviceName",function(){return ar}),n.d(J,"adjustProbabilities",function(){return ur}),n.d(J,"learnUser",function(){return cr});var X={};n.r(X),n.d(X,"serviceName",function(){return lr});var Q={};n.r(Q),n.d(Q,"serviceName",function(){return dr});var Z={};n.r(Z),n.d(Z,"serviceName",function(){return pr});var Y={};n.r(Y),n.d(Y,"serviceName",function(){return fr});var ee={};n.r(ee),n.d(ee,"serviceName",function(){return mr});var te={};n.r(te),n.d(te,"serviceName",function(){return hr});var ne={};n.r(ne),n.d(ne,"serviceName",function(){return gr});var re={};n.r(re),n.d(re,"serviceName",function(){return vr}),n.d(re,"VENDOR_RESPONDUS",function(){return br});var ie={};n.r(ie),n.d(ie,"serviceName",function(){return yr});var oe={};n.r(oe),n.d(oe,"QueueTaskStatus",function(){return Cr}),n.d(oe,"serviceName",function(){return wr});var se={};n.r(se),n.d(se,"NotificationRecipientType",function(){return Tr}),n.d(se,"GradeIconType",function(){return Ir}),n.d(se,"serviceName",function(){return Er});var ae={};n.r(ae),n.d(ae,"serviceName",function(){return Pr});var ue={};n.r(ue),n.d(ue,"serviceName",function(){return Ar});var ce={};n.r(ce),n.d(ce,"serviceName",function(){return xr}),n.d(ce,"ITargetedNotificationPriority",function(){return Dr}),n.d(ce,"ITargetedNotificationType",function(){return _r});var le={};n.r(le),n.d(le,"serviceName",function(){return Lr}),n.d(le,"transformActivityTime",function(){return Mr});var de={};n.r(de),n.d(de,"serviceName",function(){return Nr});var pe={};n.r(pe),n.d(pe,"serviceName",function(){return Rr});var fe={};n.r(fe),n.d(fe,"serviceName",function(){return Or});var me={};n.r(me),n.d(me,"serviceName",function(){return Gr});var he={};n.r(he),n.d(he,"serviceName",function(){return Ur});var ge={};n.r(ge),n.d(ge,"serviceName",function(){return Br});var ve={};n.r(ve),n.d(ve,"serviceName",function(){return Fr});var be={};n.r(be),n.d(be,"serviceName",function(){return qr});var ye={};n.r(ye),n.d(ye,"serviceName",function(){return jr});var Se={};n.r(Se),n.d(Se,"serviceName",function(){return Hr});var Ce={};n.r(Ce),n.d(Ce,"serviceName",function(){return Vr});var we={};n.r(we),n.d(we,"serviceName",function(){return zr});var $e={};n.r($e),n.d($e,"serviceName",function(){return Kr});var ke={};n.r(ke),n.d(ke,"TermDuration",function(){return Wr.a}),n.d(ke,"ConstantTermId",function(){return Jr}),n.d(ke,"serviceName",function(){return Xr});var Te={};n.r(Te),n.d(Te,"serviceName",function(){return Zr}),n.d(Te,"ultraSettingsPrefix",function(){return Yr});var Ie={};n.r(Ie),n.d(Ie,"serviceName",function(){return ni});var Ee={};n.r(Ee),n.d(Ee,"serviceName",function(){return ri});var Pe={};n.r(Pe),n.d(Pe,"serviceName",function(){return ii});var Ae=n("Rjd/"),xe=(n("TeAI"),n("5MwF")),De=n("yCC5"),_e=n("nkTj"),Le=De.a,Me=xe.a.apiBasePath+"/v1";Ae.a.factory(Le,["restmod",_e.d,function(e,t){return e.model(Me).mix({$extend:{Model:{getAllyConfig:function(){return this.single(Me+"/ally/config").$fetch().$allow(["400-599"]).$asPromise().then(function(e){return e.isStatusCode(200)?e:{serviceAvailable:!1}})},getAllyToken:function(e,t){var n=Me+"/courses/"+e+(t?"/ally/content/"+t+"/token":"/ally/token");return this.single(n).$fetch().$asPromise()}}}})}]);var Ne=n("IbG+"),Re=De.b;Ae.a.factory(Re,function(){var e=xe.a.telemetryApiBasePath+"/v1/browser/interactions";return{$create:function(t){Ne.element.ajax({type:"POST",url:e,data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",timeout:xe.a.telemetryApiTimeoutMS})}}});var Oe=De.c;Ae.a.factory(Oe,["restmod",function(e){return e.model().mix({lastRun:{serialize:"date"},getRedirectUrl:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/redirectUrl"},function(e){this.$unwrap(e.data)}).$asPromise()}})}]);var Ge=De.d;Ae.a.factory(Ge,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{downloadWithAnnotations:function(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+n+"/assignments/attempts/files/"+e+"/downloadInfo?is_group="+t},function(e){return this.$unwrap(e.data)})}}}})}]);var Ue=De.e;Ae.a.factory(Ue,["restmod",_e.d,function(e,t){return e.model()}]);var Be=n("40MU"),Fe=n("mrSG"),qe=n("oSB+"),je=n.n(qe),He=De.g,Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.User=new t("USER"),t.Group=new t("GROUP"),t}(je.a);Ae.a.factory(He,["restmod","$q",_e.d,function(e,t,n){return e.model().mix({$url:function(e){if(this.$scope.$url(e))return this.$scope.$url(e).replace(xe.a.apiBasePath,xe.a.apiBasePath+"/public")+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{saveException:function(e){return this.$send({method:"POST",url:this.$url(),data:e}).$allow([404]).$asPromise()},deleteException:function(){return this.$send({method:"DELETE",url:this.$url()}).$allow([404]).$asPromise()}}}})}]);var ze=n("+IM5"),Ke=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Fe.__extends(t,e),t.Student=new t("STUDENT"),t.InstructorComments=new t("INSTRUCTOR_COMMENTS"),t.InstructorNotes=new t("INSTRUCTOR_NOTES")}(je.a),De.Vb);Ae.a.factory(Ke,["restmod",_e.d,function(e){return e.model().mix({grade:{hasOne:De.bb,path:"grades"}})}]);var We=n("FHk9"),Je=De.h;Ae.a.factory(Je,["restmod",_e.d,function(e,t){return e.model().mix({$hooks:{"after-request":function(e){null===e.data.results&&(e.data.results=[])}}})}]);var Xe=De.i;Ae.a.factory(Xe,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/brands";return e.model(t).mix({$extend:{Model:{getCurrent:function(){return this.single(t+"/current").$fetch()}}}})}]);var Qe=n("Q/M7"),Ze=De.j,Ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.INSTITUTION=new t("INSTITUTION"),t.PERSONAL=new t("PERSONAL"),t}(je.a);Ae.a.factory(Ze,["restmod","$q",function(e,t){var n=xe.a.apiBasePath+"/v1/calendars";return e.model(n).mix({ui:{mask:!0,init:function(){return{}}},$extend:{Collection:{sortCalendars:function(){return this.$action(function(){this.sort(function(e,t){return e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey?e.id===Ye.INSTITUTION.toString()?1:-1:e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===Ye.INSTITUTION.toString()?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===Ye.INSTITUTION.toString()?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1})})}},Model:{getOrRegenerateExportCalendarFeed:function(e){var n=t.defer();return this.$build().$send({method:e?"POST":"GET",url:Qe.c("/webapps/calendar/calendarFeed/url"),transformResponse:function(e){return e}},function(e){n.resolve(e&&e.data)}),n.promise}}}})}]);var et=n("VdDF"),tt=n("g66W"),nt=De.k,rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Monthly=new t("MONTHLY"),t.Weekly=new t("WEEKLY"),t.Daily=new t("DAILY"),t}(je.a),it=function(e){function t(t,n){var r=e.call(this,t)||this;return r.dayOfWeek=n,r}return Fe.__extends(t,e),t.Sunday=new t("SU",0),t.Monday=new t("MO",1),t.Tuesday=new t("TU",2),t.Wednesday=new t("WE",3),t.Thursday=new t("TH",4),t.Friday=new t("FR",5),t.Saturday=new t("SA",6),t}(je.a),ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.ByMonthDay=new t("BYMONTHDAY"),t}(je.a),st=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Course=new t("Course"),t.External=new t("External"),t}(je.a),at=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.ClassSchedule=new t("C"),t.ExternalCourseSchedule=new t("E"),t.OfficeHours=new t("O"),t}(je.a);Ae.a.factory(nt,["restmod","RMUtils",_e.d,function(e,t,n){var r=xe.a.apiBasePath+"/v1/calendars/calendarItems";return e.model(r).mix({startDate:{serialize:"date"},endDate:{serialize:"date"},"recurRules.until":{serialize:"date"},"recurRules.originalStart":{serialize:"date"},"recurRules.originalEnd":{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$extend:{isDueItem:function(){return!!this.dynamicCalendarItemProps},isAllDayEvent:function(){return 0===this.startDate.getHours()&&0===this.startDate.getMinutes()&&23===this.endDate.getHours()&&59===this.endDate.getMinutes()},isConditionalRelease:function(){return!(this.permissions&&this.permissions.edit)&&wt.ContentVisibility.Restricted.isEqualTo(this.visibility)},getTruncatedLocation:function(e){return tt.g(this.location,e)},Record:{$buildUrl:function(e){return this.$pk&&this.$pk.itemSourceType&&this.$pk.itemSourceId?t.joinUrl(t.joinUrl(e.$url(),this.$pk.itemSourceType),this.$pk.itemSourceId):null}},Model:{inferKey:function(e){return{itemSourceType:e.itemSourceType,itemSourceId:e.itemSourceId}},unpack:function(e,t){var n=e.$response.config;if(e.$isCollection){if("PUT"===n.method&&Array.isArray(t))return t.map(function(e){return e.statusCode>=200&&e.statusCode<300?Ne.fromJson(e.body):e.body});e.paging=t&&t.paging,e.permissions=t&&t.permissions;var r=t&&t.results;return r&&r.forEach(function(e){e.recurRules&&!e.recurRules.timeZoneId&&(e.recurRules.timeZoneId=et.a.getCurrentTimeZoneId())}),r}var i="POST"===n.method&&Array.isArray(t)?t[0]:t;return i.recurRules&&!i.recurRules.timeZoneId&&(i.recurRules.timeZoneId=et.a.getCurrentTimeZoneId()),i}}}})}]);var ut=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.category=t,i.categoryKey=n,i.categoryImage=r,i.mediumIconsByCategory={Assessment:"test",Announcements:"announcements",Blog:"blog",Course:"course",CourseLink:"link",CourseSettings:"settings",DiscussionBoard:"discussion",Gradebook:"grades",Group:"groups",Message:"messages",ReleaseSettings:"settings",Rubric:"rubric",TableOfContents:"content-collection",Wiki:"wiki",Content:"document-blank"},i}return Fe.__extends(t,e),t.prototype.getLocalizableCategoryNameKey=function(){return this.categoryKey},t.prototype.getMediumCategoryIconOrDefault=function(){return this.mediumIconsByCategory[this.category]||"document-blank"},t.prototype.getCategoryIconName=function(){return this.categoryImage?this.categoryImage:"document-blank"},t.Assessment=new t("Assessment","ultra.convert.category.assessment","test"),t.Announcements=new t("Announcements","ultra.convert.category.announcements","announcement"),t.Blog=new t("Blog","ultra.convert.category.blog","blog"),t.Collab=new t("Collab","ultra.convert.category.collab"),t.Course=new t("Course","ultra.convert.category.course","course"),t.CourseLink=new t("CourseLink","ultra.convert.category.courseLink","link"),t.CourseSettings=new t("CourseSettings","ultra.convert.category.courseSettings","settings"),t.Content=new t("Content","ultra.convert.category.content","document-blank"),t.ContentSettings=new t("ContentSettings","ultra.convert.category.contentSettings","settings"),t.DiscussionBoard=new t("DiscussionBoard","ultra.convert.category.discussionBoard","discussion"),t.Gradebook=new t("Gradebook","ultra.convert.category.gradebook","grades"),t.Group=new t("Group","ultra.convert.category.group","groups"),t.Message=new t("Message","ultra.convert.course.message.unsupported","messages"),t.ReleaseSettings=new t("ReleaseSettings","ultra.convert.category.releaseSettings","settings"),t.Rubric=new t("Rubric","ultra.convert.category.rubric","rubric"),t.TableOfContents=new t("TableOfContents","ultra.convert.category.tableOfContents","content-collection"),t.Task=new t("Task","ultra.convert.category.task"),t.Wiki=new t("Wiki","ultra.convert.category.wiki","wiki"),t}(je.a),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Success=new t("Success"),t.Failure=new t("Failure"),t.Partial=new t("Partial"),t.Unavailable=new t("Unavailable"),t}(je.a),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Waiting=new t("WAITING"),t.Assigned=new t("ASSIGNED"),t.Running=new t("RUNNING"),t.Complete=new t("COMPLETE"),t.CompleteErrors=new t("COMPLETE_ERRORS"),t.Incomplete=new t("INCOMPLETE"),t}(je.a),dt=De.s;Ae.a.factory(dt,["restmod",_e.d,function(e,t){return e.model().mix({$config:{primaryKey:"taskId"}})}]);var pt=De.u;Ae.a.factory(pt,["restmod",function(e){return e.model().mix({calendarItems:{hasMany:De.v},dueDateCalendarItems:{hasMany:De.D}})}]);var ft=De.v;Ae.a.factory(ft,["restmod",function(e){return e.model().mix(nt,{})}]);var mt=De.U;Ae.a.factory(mt,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/calendars/dueDateCalendarItems";return e.model(t).mix(nt)}]);var ht=De.D;Ae.a.factory(ht,["restmod",function(e){return e.model().mix(mt,{})}]);n("RphD");var gt=n("vYaK"),vt=De.x,bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.CourseRoom=new t("COURSE_ROOM"),t.UserRoom=new t("USER_ROOM"),t}(je.a),yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.APOLLO=new t("APOLLO"),t.GEMINI=new t("GEMINI"),t}(je.a);Ae.a.factory(vt,["restmod",_e.d,function(e,t){return e.model().mix({$extend:{Record:{getLaunchUrl:function(){return this.$send({method:"POST",url:this.$url()+"/launch",data:{}}).$asPromise().then(function(e){return xe.a.features.collab?e.$response.data.url:e.$response.data.launchUrl})}}}})}]);var St=De.w;Ae.a.factory(St,["restmod",_e.d,function(e,t){return e.model().mix({sessions:{hasMany:De.x},$extend:{Record:{getVirtualClassroomSession:function(){return this.sessions.$search({sessionType:bt.CourseRoom.toString()}).$asPromise().then(function(e){return e[0]||null})}}}})}]);var Ct=De.y;Ae.a.factory(Ct,["restmod",_e.d,function(e,t){return e.model().mix({sessions:{hasMany:De.x},$extend:{Record:{getAllCollabSessions:function(){return this.sessions.$search({expand:"sessionInstances"}).$asPromise()},getCourseCollabInfo:function(){return this.sessions.$search({sessionCategory:"course",expand:"sessionInstances"}).$asPromise()},enableCourseRoom:function(e){var t=this;return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!0}},function(e){return t.$unwrap(e.data)}).$asPromise()},disableCourseRoom:function(e){var t=this;return this.$send({method:"POST",url:this.sessions.$new(e).$url(),data:{courseRoomEnabled:!1}},function(e){return t.$unwrap(e.data)}).$asPromise()},launchDiscussionSession:function(e,t){var n=this;return this.$send({method:"POST",url:this.$url()+"/sessions/forums/"+e+"/launch"+(t?"?groupId="+t:"")},function(e){return n.$unwrap(e.data)}).$asPromise()}}}})}]);var wt=n("fm95"),$t=De.z;Ae.a.factory($t,["restmod",_e.d,function(e,t){return e.model().mix({})}]);var kt=De.E;Ae.a.factory(kt,["restmod",_e.d,function(e,t){return e.model().mix({data:{belongsTo:De.Ac},ui:{mask:!0,init:function(){return{}}},$hooks:{"before-fetch-many":function(e){e.params=e.params||{},e.params.fields?e.params.fields+=",-data":e.params.fields="-data"},"after-request":function(e){e.data.results.forEach(function(e){var t={id:e.userId,isPlaceHolder:!0};e.data=t})}}})}]);var Tt=De.I;Ae.a.factory(Tt,["restmod",_e.d,function(e,t){return e.model().mix({counts:{hasOne:De.J},messages:{hasMany:De.P},usercounts:{hasMany:De.E},$extend:{Record:{save:function(){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url(),data:{"resource/x-bb-forumlink":{title:this.title}}},function(e){this.$unwrap(e.data["resource/x-bb-forumlink"])})}}}})}]);var It=De.J;Ae.a.factory(It,["restmod",_e.d,function(e,t){return e.model()}]);var Et=De.H;Ae.a.factory(Et,["restmod",_e.d,function(e,t){return e.model().mix({$config:{primaryKey:"cxFileId"},createDate:{serialize:"date"}})}]);var Pt=n("PSJS"),At=De.Q;Ae.a.factory(At,["restmod",_e.d,function(e,t){return e.model().mix({contents:{hasMany:De.P}})}]);var xt=De.F;Ae.a.factory(xt,["restmod",_e.d,function(e,t){return e.model()}]);var Dt=n("LvDl"),_t=n("oVrE"),Lt=n("qhd3"),Mt=De.B;Ae.a.factory(Mt,["restmod",Lt.serviceName,"$http","$q",function(e,t,n,r){var i=e.model().mix({courseId:{mask:"CU"},latestMessages:{map:"messages"},messages:{hasMany:De.C},participants:{hasMany:De.Ac},totalCount:{mask:"CU"},unreadCount:{mask:"CU"},createdDate:{mask:"CU",serialize:"date"},updatedDate:{mask:"CU",serialize:"date"},canBeRepliedTo:{mask:"U"},newParticipantIds:{mask:"R"},creatorId:{mask:"CUD"},ui:{mask:!0,init:function(){return{}}},createConversation:function(e){return this.$decorate({"before-request":function(t){t.params={sendEmailToParticipants:e}}},function(){return this.$save()})},$hooks:{"before-request":function(e){if("GET"===e.method&&/conversations\/_\d+_\d+$/.exec(e.url)){e.params=e.params||{},e.params.fields=(e.params.fields||"")+",-participantIds";var t=r.all([n(Dt.pick(e,"method","params","url")),this.participants.$fetch().$asPromise()]).then(function(e){var t=e[0];e[1];return delete t.data.participantIds,t});e.cache={get:function(){return t}},Object.defineProperty(this,"participantIds",{get:function(){return this.participants.map(function(e){return e.$pk})},set:Dt.noop})}}}});return i.$extendRecord(function(e,n){if(!e.hasOwnProperty("latestSender")){var r=null;Object.defineProperty(e,"latestSender",{get:function(){var e=this,n=this.latestMessages[0].senderId;if(null!==r&&r.$pk===n)return r;for(var i=[function(){return e.latestMessages[0].sender},function(){if(e.participants.$resolved)return e.participants.find(function(t){return t.id===e.latestMessages[0].senderId})},function(){if(_e.a.isValid(e.latestMessages[0].senderId)){var n=t.$new(e.latestMessages[0].senderId);return n.$resolve(),n}var r=_t.d();return e.latestMessages[0].senderId=r,t.$buildRaw({id:r})}],o=0;o<i.length;o++){var s=i[o]();if(void 0!==s)return r=s,s}}})}return{}}),i}]);var Nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Normal=new t("NORMAL"),t.System=new t("SYSTEM"),t}(je.a),Rt=De.C;Ae.a.factory(Rt,["restmod",_e.d,function(e,t){return e.model().mix({conversationId:{mask:"CU"},courseId:{mask:"CU"},senderId:{mask:"CU"},isRead:{mask:"C",init:!1},postDate:{mask:"CU",serialize:"date"},type:{mask:"CU"},participants:{hasMany:De.Ac},ui:{mask:!0,init:function(){return{}}},isSystemMessage:function(){return Nt.System.isEqualTo(this.type)},createReply:function(e){return this.$decorate({"before-request":function(t){t.params={sendEmailToParticipants:e}}},function(){return this.$save()})}})}]);var Ot=n("tPPx"),Gt=n("go4a"),Ut=n("f8ya");function Bt(){return{encode:function(e){},decode:function(e){var t={editRole:!1,editPersonalOptions:!1,editAvailability:!1,editDueDateException:!1,editTimeLimitException:!1,delete:!1,create:!1,canInviteUsers:!1,viewDueDateException:!1,viewTimeLimitException:!1,viewAccommodation:!1,editAccommodation:!1};return Object.assign(t,e),t.viewAccommodation=t.viewDueDateException||t.viewTimeLimitException,t.editAccommodation=t.editDueDateException||t.editTimeLimitException,t}}}function Ft(e){e.sort(function(e,t){return e.displayOrder&&t.displayOrder?e.displayOrder-t.displayOrder:e.displayOrder&&!t.displayOrder?-1:!e.displayOrder&&t.displayOrder?1:e.displayOrder||t.displayOrder?0:e.user||t.user?e.user&&!t.user?-1:!e.user&&t.user?1:e.user&&t.user?e.user.familyName&&!t.user.familyName?-1:!e.user.familyName&&t.user.familyName?1:(e.user.familyName||t.user.familyName)&&e.user.familyName!==t.user.familyName?e.user.familyName&&t.user.familyName?e.user.familyName.localeCompare(t.user.familyName):0:e.user.givenName&&t.user.givenName?e.user.givenName.localeCompare(t.user.givenName):e.user.givenName&&!t.user.givenName?-1:!e.user.givenName&&t.user.givenName?1:e.user.givenName||t.user.givenName?void 0:0:0:0})}var qt=De.N;Ae.a.factory(qt,["restmod","$q",_e.d,"$rootScope",function(e,t,n,r){return e.model().mix({course:{belongsTo:De.t,key:"courseId"},user:{belongsTo:De.Ac,key:"userId"},officeHours:{hasMany:De.vb},enrollmentDate:{serialize:"date"},isAvailable:{init:!0},lastAccessDate:{serialize:"date"},permissions:{serialize:Bt,init:{}},availabilityHasBeenBypassed:function(){return!!this.bypassCourseAvailabilityUntil},courseIsAvailable:function(){return this.availabilityHasBeenBypassed()?!0===this.course.effectiveAvailability:!0===this.course.isAvailable},courseIsOpen:function(){return this.courseIsAvailable()&&!1===this.course.isClosed},courseIsPrivate:function(){return!this.courseIsAvailable()},isGuestMembership:function(){return Ot.KnownCourseRoleIdentifier.Guest.isEqualTo(this.role)},isStudentMembership:function(){var e=Ot.KnownCourseRoleIdentifier.Student.isEqualTo(this.role);return!(!this.isInStudentPreview||!this.isInStudentPreview())||e},isStudentOrGuestMembership:function(){return this.isStudentMembership()||this.isGuestMembership()},isActAsInstructorMembership:function(){var e=this.courseRole&&this.courseRole.isActAsInstructor||Ot.KnownCourseRoleIdentifier.Instructor.isEqualTo(this.role);return(!this.isInStudentPreview||!this.isInStudentPreview())&&e},isTeachingAssistantMembership:function(){return Ot.KnownCourseRoleIdentifier.TeachingAssistant.isEqualTo(this.role)},isInRoleBucket:function(e){return this.courseRole&&this.courseRole.roleBucket===e},isDueDateExcepted:function(){return this.accommodation().dueDate.hasAccommodation},accommodation:function(){return Ut.a.fromTypes(this.dueDateExceptionType,this.timeLimitExceptionType)},setAccommodation:function(e){e.dueDate.equals(this.dueDateExceptionType)||(this.dueDateExceptionType=e.dueDate.type),e.timeLimit.equals(this.timeLimitExceptionType)||(this.timeLimitExceptionType=e.timeLimit.type)},getCourseColorClass:function(){return Gt.a(this)},getBannerImageFilename:function(){return this.course.banner&&this.course.banner.permanentUrl?this.course.banner.permanentUrl:Gt.b(this)},getBannerImageThumbnailFilename:function(){return this.course.bannerImageThumbnail&&this.course.bannerImageThumbnail.permanentUrl?this.course.bannerImageThumbnail.permanentUrl:Gt.c(this)},$extend:{Collection:{getMembershipCount:function(e){return this.getCounts(e).then(function(e){return e.count})},getCounts:function(e,n){void 0===n&&(n="/count");var r=t.defer();return this.$collection().$send({method:"GET",url:this.$url()+n,params:e},function(e){r.resolve(e.data)},function(e){r.reject(e)}),r.promise},getDetailsCount:function(){return this.getCounts({membershipAvailable:"true"})},getRoleBucketCount:function(){return this.getCounts({groupBy:"roleBucket"},"/counts")},getAccommodatedMemberCount:function(){return this.getCounts({membershipAvailable:"true"}).then(function(e){return e.withAccommodationCount})},batchGetCollections:function(e){var n=t.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},function(e){n.resolve(e.data)},function(e){n.reject(e)}),n.promise}}},$hooks:{"before-fetch-many":function(e){var t=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1];t&&r.$broadcast("course-"+t+"-memberships-before-fetch",e)},"after-fetch-many":function(){this.permissions=Bt().decode(this.permissions),this.forEach(function(e){1===e.displayOrder&&(e.ui||(e.ui={}),e.ui.isLeader=!0),e.user&&null==e.user.isAvailable&&(e.user.isAvailable=!0),e.course&&e.course.instructorsMembership&&e.course.instructorsMembership.length&&Ft(e.course.instructorsMembership)})},"after-fetch":function(){1===this.displayOrder&&(this.ui||(this.ui={}),this.ui.isLeader=!0)},"after-feed":function(){this.userId=this.userId||(this.user||{$pk:void 0}).$pk}}})}]);var jt=De.O;Ae.a.factory(jt,["restmod",_e.d,function(e,t){return e.model().mix({$extend:{Record:{getEmailPreviewContent:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/preview"},function(t){return e.$unwrap({emailBody:t.data.emailBody})}).$asPromise()},getCourseInviteUrl:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/inviteUrl"},function(t){return e.$unwrap({inviteUrl:t.data.inviteUrl})}).$asPromise()}}}})}]);var Ht=De.R;Ae.a.factory(Ht,["restmod","DSCacheFactory",_e.d,function(e,t,n){return e.model().mix({$config:{primaryKey:"key"},$extend:{Collection:{getPreference:function(e){return new Vt(t,this).getPreference(e)},setPreference:function(e){return new Vt(t,this).setPreference(e)},deletePreference:function(e){return new Vt(t,this).deletePreference(e)}}}})}]);var Vt=function(){function e(e,t){this.DSCacheFactory=e,this.preferences=t,this.courseId=t.$scope.$scope.id||t.$scope.$scope.$pk}return e.prototype.setPreference=function(e){return this._setCachePreference({key:e.key,value:e.value.toString(),visibleToStudents:e.visibleToStudents}).$asPromise().then(function(t){var n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.value){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n})},e.prototype._setCachePreference=function(e){var t=this._getPreferenceCacheForCourse(),n=this._setPreferenceOnBackend(e);return t.put(e.key,n),n},e.prototype._setPreferenceOnBackend=function(e){if(e.key.length>247)throw new Error("Preference key is too long!");if(e.value.length>255)throw new Error("Preference value is too long!");var t=this.preferences.$new(e.key);return t.key=e.key,t.value=e.value,t.visibleToStudents=e.visibleToStudents,t.$save()},e.prototype.getPreference=function(e){var t;return"defaultValue"in e&&(t={value:e.defaultValue.toString(),visibleToStudents:!0}),this._getPreferenceWithDefaultAndCache({key:e.key,defaultPreference:t}).$asPromise().then(function(t){var n={key:t.key,value:t.value,visibleToStudents:t.visibleToStudents};switch(typeof e.defaultValue){case"boolean":n.value="true"===t.value;break;case"number":n.value=Number(t.value)}return n})},e.prototype._getPreferenceWithDefaultAndCache=function(e){var t=this._getPreferenceCacheForCourse().get(e.key);return null==t&&(t=this._getPreferenceFromBackend(e),this._getPreferenceCacheForCourse().put(e.key,t)),t},e.prototype._getPreferenceFromBackend=function(e){if(e.key.length>247)throw new Error("Preference key is too long!");if(e.defaultPreference&&e.defaultPreference.value.length>255)throw new Error("Default preference value is too long!");return this.preferences.$find(e.key).$allow([404]).$then(function(t){t.$response&&404===t.$response.status&&e.defaultPreference&&null!=e.defaultPreference.value&&null!=e.defaultPreference.visibleToStudents&&(t.value=e.defaultPreference.value,t.visibleToStudents=e.defaultPreference.visibleToStudents)})},e.prototype._getPreferenceCacheForCourse=function(){if(!this.courseId)throw new Error("No courseId has been provided");var e=this.DSCacheFactory.get("course.preference."+this.courseId);return null==e&&(e=this.DSCacheFactory.createCache("course.preference."+this.courseId,{capacity:100})),e},e.prototype.deletePreference=function(e){return this._deleteCachePreference(e).$asPromise().then(function(e){return{key:e.key,value:e.value,visibleToStudents:e.visibleToStudents}})},e.prototype._deleteCachePreference=function(e){var t=this._getPreferenceCacheForCourse();return t.get(e)?(t.remove(e),this.preferences.$new(e).$destroy().$allow([404])):this.preferences.$new(e)},e}(),zt=De.T;Ae.a.factory(zt,["restmod",_e.d,function(e,t){return e.model().mix(nt,{})}]);var Kt=De.K;Ae.a.factory(Kt,["restmod","$q",_e.d,function(e,t,n){return e.model().mix({course:{belongsTo:De.t,key:"courseId"},modifiedDate:{serialize:"date"},available:{init:!1},batchUid:{mask:!0},collabSession:{hasMany:De.x,path:"collabultra/sessions"},$extend:{Record:{canDelete:function(){return!this.permissions||this.permissions.delete},canEdit:function(){return!this.permissions||this.permissions.modify}},Collection:{batchGetCollection:function(e,t){return this.findMany(e,t).$asPromise()},batchUpdate:function(e){return this.$collection().$send({method:"PUT",url:this.$url()+"/batchUpdate",data:e},function(e){var t=e.data.map(function(e){return e.statusCode>=200&&e.statusCode<300?Ne.fromJson(e.body):e.body});return this.$unwrap({results:t})}).$asPromise()}}}})}]);var Wt=De.L;Ae.a.factory(Wt,["restmod",gt.serviceName,function(e,t){return e.model().mix({groupAttempts:{hasMany:De.hb,hooks:{"after-fetch-many":function(){for(var e=(/courses\/(_\d+_\d+)/.exec(this.$url())||[])[1],n=0;n<this.length;n++)this[n]=t.$new(e).gradebook.groupAttempts.$buildRaw(this[n]),this[n].attempts&&this[n].attempts.length&&(this[n].attempts=t.$new(e).gradebook.attempts.$decode(this[n].attempts))}}}})}]);var Jt=De.M;Ae.a.factory(Jt,["restmod",function(e){return e.model().mix({$hooks:{"before-request":function(e){e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);var Xt=De.G;Ae.a.factory(Xt,["restmod",_e.d,function(e,t){return e.model().mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement:function(){return!!this.uid}}}})}]);var Qt=De.l;Ae.a.factory(Qt,["restmod",_e.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/cloudstorages").mix({contents:{hasMany:De.m},me:{hasOne:De.o},$config:{primaryKey:"name"}})}]);var Zt=De.o;Ae.a.factory(Zt,["restmod",_e.d,function(e,t){return e.model()}]);var Yt=De.m;Ae.a.factory(Yt,["restmod",_e.d,function(e,t){return e.model().mix({download:{hasOne:De.n,mask:!0},createdTime:{serialize:"date"},updatedTime:{serialize:"date"},ui:{mask:!0,init:function(){return{}}},$url:function(e){return this.$scope.$url(e)+"/"+encodeURIComponent(this.$pk)},$extend:{Record:{getChildren:function(e){return null==e&&(e={}),this.$scope.$collection().$send({method:"GET",url:this.$url()+"/children",params:e},function(e){this.$unwrap(e.data)},function(e){})}}}})}]);var en=De.n,tn={};Ae.a.factory(en,["restmod",_e.d,function(e,t){return e.model().mix(tn)}]);var nn=De.p;Ae.a.factory(nn,["restmod",_e.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/cloudstorages/tasks").mix(tn)}]);var rn=De.q;Ae.a.factory(rn,["restmod",_e.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/collabultra/ping").mix({$extend:{Record:{getCollabUltraInfo:function(){return this.$send({method:"GET",url:this.$scope.$url()},function(e){this.$unwrap(e.data)}).$allow([403,404]).$asPromise()}}}})}]);var on=De.V;Ae.a.factory(on,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/utilities/entitlements";return e.model(n).mix({$config:{primaryKey:"uid"},$extend:{Record:{hasEntitlement:function(){return!!this.uid}}}})}]);var sn=De.W;Ae.a.factory(sn,["restmod",function(e){return e.model(xe.a.apiBasePath+"/v1/externalCourses").mix({schedule:{hasMany:De.T},startDate:{serialize:"date"},endDate:{serialize:"date"},$extend:{Collection:{}},$hooks:{"before-request":function(e){xe.a.features.externalCourse||"GET"===e.method&&e.url===xe.a.apiBasePath+"/v1/externalCourses"&&(e.cache={get:function(){return{paging:{nextPage:"",previousPage:"",count:0,limit:1e5,offset:0},permissions:null,results:[]}}})}}})}]);var an=De.X;Ae.a.factory(an,["restmod",_e.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}}})}]);var un=n("z1U9"),cn=n("t6LE"),ln=n("JrDC"),dn="ultra.components.services.models.grade.gradeGroupAttempt",pn=De.hb,fn="start";Ae.a.factory(pn,["restmod",gt.serviceName,_e.d,function(e,t,n){return e.model().mix(cn.serviceName,{attempts:{ignore:"CU"},members:{ignore:"CU"},$extend:{Scope:{$destroyUrlFor:function(e){return xe.a.apiBasePath+"/v1/courses/"+ln.a(t,e.$scope)+"/gradebook/groupAttempts/"+e.id}},Record:{getFeedbackToUser:function(){return this.feedbackToUser},getLastFeedbackAuthor:function(){return this.lastFeedbackAuthor||this.attempts[0]&&this.attempts[0].lastFeedbackAuthor},getGradeAttempt:function(){var e=this;return this.attempts&&this.attempts.length?1===this.attempts.length?this.attempts[0]:Dt.find(this.attempts,function(t){return t.userId===e.submittedBy}):null},isPrePostGrade:function(){return!this.isCompleted||!this.readyToPost||!this.userId},isDisplayablePostedGrade:function(){return this.isCompleted()&&this.readyToPost&&null!=this.userId}},Collection:{getNumAttemptsToGrade:function(){return this.filter(function(e){return e.isNeedsGrading()&&!e.isPostable()}).length},getNumAttemptsToPost:function(){return this.filter(function(e){return e.isPostable()}).length},getNumOfGradedAttempts:function(){return this.filter(function(e){return e.isGraded()}).length},isAllGradedAndPosted:function(){return this.length>0&&this.every(function(e){return e.isCompleted()})}}},$hooks:{"after-update":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-fetch":function(e){this.attempts&&this.attempts.length&&e.config.params&&(this.attempts=t.$new(e.config.params.courseId).gradebook.attempts.$decode(this.attempts))},"after-feed":function(e){this.permissions&&(this.permissions.deleteAttempt=this.permissions.delete,this.permissions.editAttempt=this.permissions.editGrade);!function(e){var t=e.toolAttemptDetail,n=e.attempts;if(t&&n){var r=Object.keys(t)[0];r&&n.forEach(function(e){if(!e.toolAttemptDetail){var n=e.id,i=Dt.cloneDeep(t);if(i[r]){e.toolAttemptDetail=i;var o=e.toolAttemptDetail[r].questionAttempts;o&&o.forEach(function(e){e.attemptId=n})}}})}}(this)}}})}]);var mn="ultra.components.services.models.grade.gradeCategory",hn=De.eb,gn=function(e){function t(t,n){var r=e.call(this,t)||this;return r.title=t,r.iconName=n,r._iconName=n,r}return Fe.__extends(t,e),t.prototype.getIconName=function(){return this._iconName},t.Assignment=new t("Assignment.name","assignment"),t.Attendance=new t("Attendance.name","attendance"),t.Blog=new t("Blog.name","blog"),t.Discussion=new t("Discussion.name","discussion"),t.Exam=new t("Exam.name","exam"),t.Homework=new t("Homework.name","homework"),t.Journal=new t("Journal.name","journal"),t.Presentation=new t("Presentation.name","presentation"),t.Quiz=new t("Quiz.name","quiz"),t.Survey=new t("Survey.name","survey"),t.Test=new t("Test.name","test"),t}(je.a);Ae.a.factory(hn,["restmod",_e.d,function(e,t){return e.model().mix({ui:{mask:!0,init:function(){return{}}},$hooks:{"after-feed":function(e){this.localizableTitle||(this.localizableTitle={bundle:"gradebook_type",languageKey:this.title,serviceLevel:null})}}})}]);var vn=n("Kpdw"),bn=n("e6jQ"),yn=n("7CA4"),Sn=De.r,Cn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.NewOverrideGrade=new t("New Override Grade"),t.NewOverrideGradeWithPostedAttempt=new t("New Override Grade With Posted Attempt"),t.NewGradeWithNotPostedAttempt=new t("New Grade With Not Posted Attempt"),t.CleanOverride=new t("Clean Override"),t.CleanOverrideForAttempt=new t("Clean Override For Attempt"),t.CleanPostedOverride=new t("Clean Posted Override Without Attempt"),t.CleanOverrideWithPostedAttempt=new t("Clean Override Grade With Posted Attempt"),t.CleanGradeWithPostedAttempt=new t("Clean Grade With Posted Attempt"),t.CleanGradeWithNotPostedAttempt=new t("Clean Grade With Not Posted Attempt"),t.PostGrade=new t("Post Grade"),t.PostOverrideGrade=new t("Post Override Grade"),t}(je.a);Ae.a.factory(Sn,["restmod",_e.d,gt.serviceName,function(e,t,n){return e.model().mix({$hooks:{ui:{mask:!0,init:function(){return{updateTimestamp:0}}},"after-feed":function(){this.calculateDerivedSummaries()}},$extend:{Record:{calculateDerivedSummaries:function(){this.numNeedsGrading=_e.c(this.numGroupsNeedsGrading,this.numStudentsNeedsGrading),this.numPosted=_e.c(this.numGroupsPosted,this.numStudentsPosted),this.numEligibleToBeGraded=null!=this.numGroupsPosted?this.numGroupsEligibleToBeGraded:this.numStudentsEligibleToBeGraded,this.numSubmissionGradedNeedsPosting=_e.c(this.numGroupsSubmissionGradedNeedsPosting,this.numStudentsSubmissionGradedNeedsPosting),this.numStudentsEligibleToBeGradedExternalSubmission=this.numStudentsEligibleToBeGraded-this.numStudentsGradedNeedsPosting-this.numStudentsPosted-this.numberOfOverriddenGradesToPost,this.numGroupsEligibleToBeGradedExternalSubmission=this.numGroupsEligibleToBeGraded-this.numGroupsGradedNeedsPosting-this.numGroupsPosted,null!=this.numGroupsGradedNeedsPosting?(this.numGradedNeedsPosting=this.numGroupsGradedNeedsPosting,this.numberOfStudentsOverriddenGradesToPost=this.numberOfOverriddenGradesToPost,this.numberOfOverriddenGradesToPost=0):this.numGradedNeedsPosting=this.numStudentsGradedNeedsPosting},getStatus:function(){return this.numNeedsGrading>0?yn.a.NeedsGrading:this.totalNumberOfGradesToPost()>0?yn.a.NeedsPosting:this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0?yn.a.AllPosted:0===this.numSubmissionsTotal?yn.a.NothingToGrade:0===this.numNeedsGrading?yn.a.AllGraded:void 0},isAllGradedAndPosted:function(){return this.numPosted===this.numEligibleToBeGraded&&this.numPosted>0},numStudentsGraded:function(){return this.numGradedNeedsPosting+this.numPosted+this.numberOfOverriddenGradesToPost},numStudentSubmissions:function(){return this.participantIds?this.participantIds.length:this.numGroupsSubmitted||this.numStudentsSubmitted},hasGradesToPost:function(){return null!=this.numGroupsGradedNeedsPosting?this.numGroupsGradedNeedsPosting>0:this.numGradedNeedsPosting>0||this.numberOfOverriddenGradesToPost>0},totalNumberOfGradesToPost:function(){return this.numGradedNeedsPosting+this.numberOfOverriddenGradesToPost}},Model:{inferKey:function(){return bn.a()},unpack:function(e,t){return Dt.forOwn(e,function(e,t,n){Dt.startsWith(t,"$")||"ui"===t||(n[t]=null)}),_e.g(e,t)}},Collection:{expandingColumns:function(e,t){var n={};return this.$collection().$on("after-fetch-many",function(r){var i=r.data.results;n=i.reduce(function(e,t){return e[t.columnId]=t,e},n),e.forEach(function(e){e.id in n?e.summary.$unwrap(n[e.id]):t&&e.summary.$unwrap(t)})})}}}})}]);var wn=n("KrjC"),$n=n("Iftj"),kn=De.db;Ae.a.factory(kn,["restmod",_e.d,"$injector",function(e,t,n){return e.model().mix({$hooks:{"before-fetch":function(e){e.method="POST",Dt.isString(e.params.membershipIds)&&(e.params.membershipIds=e.params.membershipIds.split(",")),Dt.isString(e.params.columnIds)&&(e.params.columnIds=e.params.columnIds.split(",")),e.data={membershipIds:e.params.membershipIds,columnIds:e.params.columnIds},delete e.params.membershipIds,delete e.params.columnIds},"after-fetch":function(e){var t=this,r=n.get(gt.serviceName),i=e.config.params.courseId;this.bulkViewUsers.forEach(function(e){e.grades.forEach(function(e){var n=e.grade;e.grade=r.$new(i).gradebook.columns.$new(e.columnId).grades.$buildRaw(n),e.lastAttemptDate&&(e.lastAttemptDate=new Date(e.lastAttemptDate)),e.attempts&&e.attempts.length>0&&(e.attempts.forEach(function(t){var o=r.$new(i).gradebook.columns.$new(e.columnId).grades.$new(n.id).attempts.$buildRaw(t);e.grade.attempts.$add(o)}),e.grade.ui.attempt=e.grade.attempts[0]),e.grade.permissions=t.permissions,e.submissionResults&&e.submissionResults.results["mdb-sa"]&&(e.originalityProcessed=e.submissionResults.results["mdb-sa"].originalityProcessed,e.originalityScore=e.submissionResults.results["mdb-sa"].originalityScore)})})}}})}]);n("lTRw");var Tn=De.Z;Ae.a.factory(Tn,["restmod",_e.d,function(e,t){return e.model()}]);var In=De.bb;Ae.a.factory(In,["restmod",function(e){return e.model().mix({$hooks:{"after-save":function(e){this.points=null,this.$unwrap(e.data)},"before-save":function(e){e.url=e.url.substr(0,e.url.indexOf("/answers"))+"/answers/"+this.questionAttempt.id+"/grades",Dt.merge(e.data,{questionType:this.questionAttempt.questionType})},"after-fetch-many":function(){var e=this;this.forEach(function(t){t.permissions=e.permissions})}},$extend:{Collection:{setPostStatusAndGroupAttemptId:function(e){this.forEach(function(t){t.ui.isPosted=e.isCompleted(),e.groupAttemptId&&(t.ui.groupAttemptId=e.groupAttemptId)})}}},questionAttempt:{ignore:"CU"},ui:{init:function(){return{}},mask:!0}})}]);var En=De.ib;Ae.a.factory(En,["restmod","$q",_e.d,function(e,t,n){return e.model().mix({})}]);var Pn=De.ab;Ae.a.factory(Pn,["restmod",_e.d,function(e){return e.model().mix({$extend:{hasAttachments:function(){return!Dt.isUndefined(this.overallOriginalityProcessed)&&(this.attemptOriginality&&this.attemptOriginality.attachments.length||this.answerOriginalities.length&&this.answerOriginalities.some(function(e){return e.attachments.length}))},canShowReportPanel:function(){return this.overallOriginalityProcessed&&this.hasAttachments()}},$hooks:{"after-request":function(e){e.data.results&&(e.data=e.data.results["mdb-sa"])}}})}]);var An=De.kb;Ae.a.factory(An,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/calendars/institution/calendarItems";return e.model(t).mix(nt)}]);var xn=De.lb;Ae.a.factory(xn,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/roles/institutionRoles";return e.model(n)}]);var Dn=De.mb;Ae.a.factory(Dn,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/languages";return e.model(n).mix({})}]);var _n=De.nb,Ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Approved=new t("Approved"),t.Excluded=new t("Excluded"),t.NeedsApproval=new t("NeedsApproval"),t}(je.a),Mn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Never=new t("Never"),t.SSLOnly=new t("SSLOnly"),t.Always=new t("Always"),t}(je.a);Ae.a.factory(_n,["restmod",function(e){var t=xe.a.apiBasePath+"/v1/lti/domainConfigs";return e.model(t).mix({$extend:{Model:{findByDomain:function(e){return this.$build().$send({method:"GET",url:this.$url()+"?domain="+e},function(e){return this.$unwrap(e.data)}).$allow([404]).$asPromise()}}}})}]);var Nn=De.pb;Ae.a.factory(Nn,["restmod",_e.d,function(e){var t=xe.a.apiBasePath+"/v1/lti/settings";return e.model(t).mix({$extend:{Model:{getSettings:function(){return this.$build().$send({method:"GET",url:this.$url()},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);var Rn=De.ob;Ae.a.factory(Rn,["restmod",function(e){var t=xe.a.apiBasePath+"/public/v1/lti/placements";return e.model(t).mix({isAvailable:function(){return un.PublicAvailability.Yes===this.availability.available},$hooks:{"after-feed":function(e){this.iconUrl=Qe.c(this.iconUrl)}}})}]);var On=De.qb;Ae.a.factory(On,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/users/me/preferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);var Gn=De.rb;Ae.a.factory(Gn,["restmod",_e.d,function(e){return e.model()}]);var Un=n("1/43"),Bn=De.tb;Ae.a.factory(Bn,["restmod",_e.d,function(e){return e.model()}]);var Fn=De.ub;Ae.a.factory(Fn,["restmod",_e.d,function(e){return e.model().mix({courseSettings:{hasMany:De.tb},organizationSettings:{hasMany:De.tb},$url:function(){return xe.a.apiBasePath+"/v1/notification/settings"}})}]);var qn=De.vb;Ae.a.factory(qn,["restmod",function(e){return e.model().mix(nt,{})}]);var jn=n("FBBZ"),Hn=De.wb;Ae.a.factory(Hn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getPartnersByType:function(e){return this.$build().$send({method:"GET",url:this.$url()+"/providerContent?course_id="+e},function(e){return this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}},$hooks:{"after-feed":function(e){var t=function(e){Ne.isDefined(e.internalPovider)&&Ne.isUndefined(e.internalProvider)&&(e.internalProvider=e.internalPovider)};Dt.forEach(this.premierList,t),Dt.forEach(this.signatureList,t),Dt.forEach(this.otherList,t);var n=function(e){return!e.internalProvider||jn.p(e)};this.premierList=Dt.filter(this.premierList,n),this.signatureList=Dt.filter(this.signatureList,n),this.otherList=Dt.filter(this.otherList,n)}}})}]);var Vn=De.Cb;Ae.a.factory(Vn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1/status";return e.model(t).mix({$extend:{Model:{getStatus:function(e){return this.$build().$send({method:"GET",url:this.$url()+"?course_id="+e},function(e){return this.$unwrap(e.data)},function(){return this.$unwrap({enabled:!1,userCloudProvisioned:!1})}).$allow(["400-599"]).$asPromise()}}}})}]);var zn=De.yb;Ae.a.factory(zn,["restmod",_e.d,function(e,t){var n=xe.a.partnerCloudBasePath+"/v1/courses";return e.model(n).mix({partnerLinkedCourses:{hasMany:De.Ab,path:"providerBindings"},$extend:{Record:{updateProvisioning:function(e){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.$pk+"/updateProvisioning/"+e},function(e){this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}}})}]);var Kn=De.Ab;Ae.a.factory(Kn,["restmod",_e.d,function(e){return e.model().mix({tools:{hasOne:De.Db,path:"tools"},id:{map:"@id"},$extend:{Model:{unpack:function(e,t){return t&&t.bindings}}}})}]);var Wn=De.xb;Ae.a.factory(Wn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1/courses";return e.model(t).mix({$extend:{Model:{getContentIds:function(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/"+e+"/linkRefId/"+t+"/content/ids"},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);n("3uIF");var Jn=De.Bb;Ae.a.factory(Jn,["restmod",function(e){var t=xe.a.partnerCloudBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getSettingsById:function(e){return this.$build().$send({method:"GET",url:this.$url()+"/providers/"+e+"/settings"},function(e){return this.$unwrap(e.data)}).$allow(["400-599"]).$asPromise()}}}})}]);var Xn=De.Db;Ae.a.factory(Xn,["restmod",_e.d,function(e,t){return e.model().mix({})}]);var Qn=De.Eb;Ae.a.factory(Qn,["restmod",function(e){return e.model().mix(nt,{})}]);var Zn=n("0JpG"),Yn=De.Fb;function er(e,t){e.activityDaily&&e.activityDaily.forEach(function(e){e.inCourseDuration=tr(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,Zn.ILocaleComposedDurationFormat.HoursMinutes)}}),e.activityWeekly&&e.activityWeekly.forEach(function(e){e.inCourseDuration=tr(e.inCourseDuration),e.ui={display:t.formatComposedDurationSync(e.inCourseDuration,Zn.ILocaleComposedDurationFormat.HoursMinutes)}})}function tr(e){return 15*Math.round(e/15)*60}Ae.a.factory(Yn,["restmod",Zn.serviceName,function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/courses";return e.model(n).mix({"activityDaily[].activityDate":{decode:"localDate"},"activityWeekly[].activityWeek":{decode:"localDate"},"assignments[].dueDate":{serialize:"date"},"assignmentGrades[].gradedDate":{serialize:"date"},"assignmentGrades[].submissionDate":{serialize:"date"},startDate:{serialize:"date"},endDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"weeks[].weekOf":{decode:"localDate"},$hooks:{"after-fetch":function(){er(this,t),this.instructors&&this.instructors.forEach(function(e){e.learnUser=J.learnUser})}}})}]);var nr=De.Gb;Ae.a.factory(nr,["restmod",function(e){return e.model().mix({$extend:{Model:{$for:function(e,t){return this.$collection(t,{$urlFor:function(){return xe.a.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$decode:function(e){return this.push.apply(this,e),this}}}})}]);var rr=De.Jb;Ae.a.factory(rr,["restmod",function(e){var t=xe.a.telemetryApiBasePath+"/v1/predict/favorites";return e.model(t).mix({$extend:{Model:{marketSnapshot:function(e,t){return this.$build().$send({method:"GET",params:t,url:this.$url()+"/"+e+"/marketSnapshot"},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);var ir=De.Pb;Ae.a.factory(ir,["restmod",_e.d,function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/settings";return e.model(n).mix({$extend:{Model:{get:function(){return this.single(n).$fetch().$allow([403]).$asPromise()}}},$hooks:{"after-fetch":function(){Ne.isUndefined(this.advisorEmailEnabled)&&(this.advisorEmailEnabled=!0),Ne.isUndefined(this.instructorEmailEnabled)&&(this.instructorEmailEnabled=!0);var e=Dt.indexOf(this.fields,"probability");-1!==e&&(this.fields[e]="goodProbability")}}})}]);var or=De.Rb;Ae.a.factory(or,["restmod",_e.d,function(e){var t=xe.a.apiBasePath+"/v1/telemetry/predict/systemSettings";return e.model(t).mix({$extend:{Model:{get:function(){return this.single(t).$fetch().$allow([404]).$asPromise()}}}})}]);var sr=De.Ib;Ae.a.factory(sr,["restmod",function(e){return e.model().mix({$extend:{Model:{$for:function(e,t){return this.$collection(t,{$urlFor:function(){return xe.a.telemetryApiBasePath+"/v1/predict/"+e}})}},Collection:{$unwrap:function(e){return e.results||e.data?(e.data&&this.push.apply(this,e.data),e.results&&this.push.apply(this,e.results)):this.push.apply(this,e),this}}}})}]);var ar=De.Qb;function ur(e){Ne.isDefined(e.goodProbability)&&(e.goodProbability=Math.round(100*e.goodProbability)),Ne.forEach(e.courses,function(e){e.prediction&&(e.prediction.goodProbability=Math.round(100*e.prediction.goodProbability)),e.previousPrediction&&(e.previousPrediction.goodProbability=Math.round(100*e.previousPrediction.goodProbability)),Ne.forEach(e.weeks,function(e){e.goodProbability=Math.round(100*e.goodProbability)})})}function cr(){return Ne.isUndefined(this.ui)&&(this.ui={}),Ne.isUndefined(this.ui.learnUser)&&(this.ui.learnUser={givenName:this.firstName,familyName:this.lastName}),this.ui.learnUser}Ae.a.factory(ar,["restmod","$q",Zn.serviceName,function(e,t,n){var r=xe.a.telemetryApiBasePath+"/v1/predict/students",i=xe.a.telemetryApiBasePath+"/v1/predict/courses/",o=xe.a.telemetryApiBasePath+"/v1/predict/studentSearch",s=xe.a.telemetryApiBasePath+"/v1/predict/message";xe.a.telemetryApiBasePath;return e.model(r).mix({academicHoldDate:{serialize:"date"},birthDate:{serialize:"date"},financialHoldDate:{serialize:"date"},lastActivityDate:{serialize:"date"},"plannerInterests[].chosenDate":{serialize:"date"},plannerLocationChosenDate:{serialize:"date"},"courses[].activityDaily[].activityDate":{decode:"localDate"},"courses[].activityWeekly[].activityWeek":{decode:"localDate"},"courses[].assignments[].dueDate":{serialize:"date"},"courses[].assignmentGrades[].gradedDate":{serialize:"date"},"courses[].assignmentGrades[].submissionDate":{serialize:"date"},"courses[].startDate":{serialize:"date"},"courses[].endDate":{serialize:"date"},"courses[].lastActivityDate":{serialize:"date"},"courses[].weeks[].weekOf":{decode:"localDate"},$extend:{Model:{getCourseStudent:function(e,t,n){return this.single(i+t+"/students/"+e).$fetch(n).$allow([403]).$asPromise()},getCourseStudents:function(e,t){return this.$collection(t,{$urlFor:function(){return i+e+"/students"}}).$fetch(t).$allow([403]).$asPromise()},getStudent:function(e,n){var i=t.defer();return this.$collection({studentId:e},{$urlFor:function(){return r}}).$fetch(n).$asPromise().then(function(e){i.resolve(e[0])}).catch(function(){i.reject()}),i.promise},postInstructorMessage:function(e,t,n){return this.$build().$send({method:"POST",url:i+n+"/students/"+t+"/message/advisor",data:e}).$asPromise()},postAdvisorMessage:function(e,t){return this.$build().$send({method:"POST",url:r+"/"+t+"/message/student",data:e}).$asPromise()},postMessage:function(e){return this.$build().$send({method:"POST",url:""+s,data:e}).$asPromise()},postMessageToStudents:function(e){return this.$build().$send({method:"POST",url:r+"/message",data:e}).$asPromise()},postMessageToStudentsByFilter:function(e,t){return this.$build().$send({method:"POST",url:r+"/messageByFilter",data:e,params:t}).$asPromise()},typeaheadSearch:function(e,n,r,s){void 0===n&&(n=""),void 0===r&&(r=6),void 0===s&&(s=!1);var a=t.defer(),u=o+"?query="+encodeURIComponent(e);return n&&(u=""+i+n+"/studentSearch?query="+encodeURIComponent(e)),this.$build().$send({method:"GET",url:u,params:{emailRequired:!0===s?"true":"false",limit:r}},function(e){e&&e.data&&e.data.results?a.resolve(e.data.results.map(function(e){return{firstName:e.firstName,lastName:e.lastName,studentDisplayId:e.studentDisplayId,lmsId:e.lmsId,avatar:{permanentUrl:e.avatarUrl},learnUser:cr,email:e.email,advisors:e.advisors}})):a.resolve([])}).$allow([403]),a.promise}},Record:{learnUser:cr}},$hooks:{"after-fetch":function(){ur(this),this.courses.forEach(function(e){j.adjustEngagement(e,n)}),this.advisors&&this.advisors.forEach(function(e){e.learnUser=cr})},"after-fetch-many":function(){this.forEach(function(e){ur(e),e.courses.forEach(function(e){j.adjustEngagement(e,n)}),e.advisors&&e.advisors.forEach(function(e){e.learnUser=cr})})}}})}]);var lr=De.Nb;Ae.a.factory(lr,["restmod",_e.d,function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/permissions";return e.model(n).mix({$extend:{Model:{get:function(){return this.single(n).$fetch().$allow([403]).$asPromise()}}}})}]);var dr=De.Kb;Ae.a.factory(dr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/ftue",r=xe.a.telemetryApiBasePath+"/v1/predict/ftues";return e.model(n).mix({$extend:{Model:{setFtue:function(e){return this.$build().$send({method:"POST",url:this.$url()+"/"+e}).$asPromise()},delFtue:function(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delFtues:function(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getFtue:function(e){var n=t.defer();return this.$build().$send({method:"GET",url:r,params:{timestamp:(new Date).getTime()}},function(t){if(t&&t.data&&t.data.length){var r=t.data.filter(function(t){return t.componentKey===e});r&&r.length?n.resolve({key:r[0].componentKey,value:""}):n.resolve(null)}else n.resolve(null)}),n.promise},getFtues:function(){var e=t.defer();return this.$build().$send({method:"GET",url:r,params:{timestamp:(new Date).getTime()}},function(t){if(t&&t.data&&t.data.length){var n=[];t.data.forEach(function(e){n.push({key:e.componentKey,value:""})}),n&&n.length?e.resolve(n):e.resolve(null)}else e.resolve(null)}),e.promise}}}})}]);var pr=De.Mb;Ae.a.factory(pr,["restmod","$q",_e.d,function(e,t,n){var r=xe.a.telemetryApiBasePath+"/v1/predict/notes";return e.model(r).mix({dateCreated:{serialize:"date"},dateModified:{serialize:"date"},isEdited:{mask:!0},isUndoing:{mask:!0},isAdding:{mask:!0},$extend:{Model:{getNotes:function(e,t){return(t=t||{}).timestamp=(new Date).getTime(),this.$collection(t,{$urlFor:function(){return r+"/students/"+e}}).$fetch(t).$allow([403]).$asPromise()},postNote:function(e,t){return this.$build().$send({method:"POST",url:r,data:{note:e,recipient:{recipientId:t.recipientId,email:t.email}}},function(e){this.$unwrap(e.data)}).$asPromise()},updateNote:function(e,t){return this.$build().$send({method:"PUT",url:r,data:{noteId:e,note:t}},function(e){return this.$unwrap(e.data)}).$asPromise()},deleteNote:function(e){return this.$build().$send({method:"DELETE",url:r+"/"+e},function(e){this.$unwrap(e.data)}).$asPromise()},undoDeleteNote:function(e){return this.$build().$send({method:"PUT",url:r+"/"+e},function(e){return e}).$asPromise()}}},$hooks:{"after-fetch-many":function(){this.forEach(function(e){Ne.isDefined(e.dateModified)?e.isEdited=e.dateCreated.getTime()<e.dateModified.getTime():e.isEdited=!1;var t=Object(Dt.cloneDeep)(e.dateCreated);e.ui.dateCreated=t})}}})}]);var fr=De.Ob;Ae.a.factory(fr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/preferences";return e.model(n).mix({$extend:{Model:{setPreference:function(e,t){var n={componentKey:e,preference:t};return this.$build().$send({method:"POST",url:this.$url(),data:n}).$allow([403]).$asPromise()},delPreference:function(e){return this.$build().$send({method:"DELETE",url:this.$url()+"/"+e}).$asPromise()},delPreferences:function(){return this.$build().$send({method:"DELETE",url:this.$url()}).$asPromise()},getPreference:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:n+"/"+e,params:{timestamp:(new Date).getTime()}},function(t){if(t&&t.data&&t.data.length){var n=t.data.filter(function(t){return t.componentKey===e});n&&n.length?r.resolve({componentKey:n[0].componentKey,value:n[0].value}):r.resolve(null)}else r.resolve(null)}).$allow([403]),r.promise},getPreferences:function(){var e=t.defer();return this.$build().$send({method:"GET",url:n,params:{timestamp:(new Date).getTime()}},function(t){if(t&&t.data&&t.data.length){var n=[];t.data.forEach(function(e){n.push({componentKey:e.componentKey,preference:e.preference})}),n&&n.length?e.resolve(n):e.resolve([])}else e.resolve([])}).$allow([403]),e.promise}}}})}]);var mr=De.Lb;Ae.a.factory(mr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/preferences/config";return e.model(n).mix({$extend:{Model:{getInstitutionPreference:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:n+"/"+e},function(t){if(t&&t.data){var n=t.data;n.name===e?r.resolve(n):r.resolve(null)}else r.resolve(null)}).$allow([403]),r.promise}}}})}]);var hr=De.Hb;Ae.a.factory(hr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/customFieldSettings";return e.model(n).mix({$extend:{Model:{getCustomFieldSettings:function(){var e=t.defer();return this.$build().$send({method:"GET",url:n},function(t){t&&t.data?e.resolve(t.data):e.resolve([])}),e.promise}}}})}]);var gr=De.Sb;Ae.a.factory(gr,["restmod",_e.d,function(e){var t=xe.a.apiBasePath+"/public/v1/system/policies/privacy";return e.model(t).mix({$extend:{Model:{getPrivacyPolicy:function(){return this.$build().$send({method:"GET",url:this.$url()},function(e){return this.$unwrap(e.data)}).$asPromise()}}}})}]);var vr=De.Tb,br="Respondus";Ae.a.factory(vr,["restmod",function(e){var t=xe.a.apiBasePath+"/public/v1/proctoring/services";return e.model(t).mix({})}]);var yr=De.Wb;Ae.a.factory(yr,["restmod","$q",function(e,t){var n=xe.a.telemetryApiBasePath+"/v1/predict/courses/";return e.model(n).mix({$extend:{Model:{getRiskBucketDistribution:function(e){var r=t.defer();return this.$build().$send({method:"GET",url:""+n+e+"/riskBuckets"},function(e){if(e&&e.data){var t=e.data;r.resolve(t)}else r.resolve(null)}).$allow([403]),r.promise}}}})}]);var Sr=n("XfOu"),Cr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Waiting=new t("WAITING"),t.Assigned=new t("ASSIGNED"),t.Running=new t("RUNNING"),t.Complete=new t("COMPLETE"),t.CompleteErrors=new t("COMPLETE_ERRORS"),t.Incomplete=new t("INCOMPLETE"),t}(je.a),wr=De.Yb;Ae.a.factory(wr,["restmod",_e.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/scheduledTasks").mix({$config:{primaryKey:"taskId"},startDate:{serialize:"date"},endDate:{serialize:"date"},isWaiting:function(){return Cr.Waiting.isEqualTo(this.taskStatus)}})}]);var $r=De.ac,kr=function(e){"stagedAttemptGrades"in e.data&&(e.data={results:e.data.stagedAttemptGrades})};Ae.a.factory($r,["restmod",function(e){return e.model().mix({user:{hasOne:De.Ac},$hooks:{"after-request":kr},$extend:{Record:{},Collection:{}}})}]);var Tr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Sender=new t("SENDER"),t.Receiver=new t("RECEIVER"),t}(je.a),Ir=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Completed=new t("completed"),t.InProgress=new t("in_progress"),t.Exempt=new t("exempt"),t.NeedsGrading=new t("needs_grading"),t}(je.a),Er=De.bc;Ae.a.factory(Er,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/streams";return e.model(n).mix({$extend:{Collection:{$fetch:function(){throw new Error("fetch StreamContent collection not supported")},$refresh:function(){throw new Error("refresh StreamContent collection not supported")},$create:function(){throw new Error("create StreamContent collection not supported")}},Record:{$fetch:function(e){return this.$decorate({"before-request":function(t){t.method="POST",t.data=e}},function(){return this.$super()})},$resolve:function(){throw new Error("resolve StreamContent not supported")},$save:function(){throw new Error("save StreamContent not supported")},$destroy:function(){throw new Error("destroy StreamContent not supported")}}},$hooks:{"before-request":function(e){e.timeout=3e4,e.headers={"Suppress-Session-Timestamp-Update":!0}}}})}]);var Pr=De.dc;Ae.a.factory(Pr,["restmod",_e.d,function(e,t){return e.model().mix({now:{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/utilities/systemInfo"},$extend:{Record:{getLegacyToolUrl:function(e){if(e in this.classicUrls)return Qe.c(this.classicUrls[e]);throw new Error("Key "+e+" is not found in systemInfo.classicUrls")}}}})}]);var Ar=De.ec;Ae.a.factory(Ar,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/systemPreferences";return e.model(n).mix({$config:{primaryKey:"key"}})}]);var xr=De.fc,Dr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.Standard=new t("STANDARD"),t.Important=new t("IMPORTANT"),t.Urgent=new t("URGENT"),t}(je.a),_r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.System=new t("SYSTEM"),t.Course=new t("COURSE"),t}(je.a);Ae.a.factory(xr,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/announcements";return e.model(n)}]);var Lr=De.gc;function Mr(e){return e/60}Ae.a.factory(Lr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/activityVsGrade"},$hooks:{"after-fetch":function(){this.data.forEach(function(e){return e.activity=Mr(e.activity)})}}})}]);var Nr=De.hc;Ae.a.factory(Nr,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$config:{primaryKey:"contentId"},available:{serialize:"date"},firstOpened:{serialize:"date"},firstSave:{serialize:"date"},lastSave:{serialize:"date"},startedTime:{serialize:"date"},"submissions[].date":{serialize:"date"},$extend:{Collection:{getContentActivityInDetail:function(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentContentActivityInDetail"},function(e){this.$unwrap(e.data)})}},Record:{containsInvalidData:function(){return this.ui&&this.ui.containsInvalidData||!1}}}})}]);var Rr=De.ic;Ae.a.factory(Rr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"courseActivity[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseActivity"},$hooks:{"after-fetch":function(){this.courseActivity.forEach(function(e){e.activity=Mr(e.activity),e.minScore=Mr(e.minScore),e.maxScore=Mr(e.maxScore),e.stdDev=Mr(e.stdDev)})}}})}]);var Or=De.kc;Ae.a.factory(Or,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"currentStudent[].created":{serialize:"date"},"currentStudent[].dismissed":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/notifications"}})}]);var Gr=De.jc;Ae.a.factory(Gr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"courseGrades[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/courseGrades"}})}]);var Ur=De.lc;Ae.a.factory(Ur,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionActivityReport:function(e,t,n){var r=n?this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity?groupId="+n:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivity";return this.$build().$send({method:"GET",url:r},function(e){this.$unwrap(e.data)})}}}})}]);var Br=De.mc;Ae.a.factory(Br,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getDiscussionXrayReport:function(e,t,n){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/discussionActivityScore/"+n},function(e){this.$unwrap(e.data)})}}},modifyDate:{serialize:"date"}})}]);var Fr=De.nc;Ae.a.factory(Fr,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({lastOpened:{serialize:"date"},$extend:{Collection:{getMultimediaActivityInDetail:function(e,t){return this.$collection().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaActivityInDetail"},function(e){this.$unwrap(e.data)})}}}})}]);var qr=De.oc;Ae.a.factory(qr,["restmod",function(e){var t=xe.a.apiBasePath+"/v1";return e.model(t).mix({$extend:{Model:{getMultimediaStatistics:function(e,t){return this.$build().$send({method:"GET",url:this.$url()+"/courses/"+e+"/contents/"+t+"/telemetry/reports/studentMultimediaStatistics"},function(e){this.$unwrap(e.data)})}}}})}]);var jr=De.pc;Ae.a.factory(jr,["restmod",_e.d,function(e){return e.model(xe.a.apiBasePath+"/v1/telemetry/notifications")}]);var Hr=De.qc;Ae.a.factory(Hr,["restmod",_e.d,function(e){return e.model().mix({$config:{primaryKey:"notificationId"},$url:function(){return xe.a.apiBasePath+"/v1/telemetry/notifications/"+this.$pk+"/users"}})}]);var Vr=De.rc;Ae.a.factory(Vr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"studentActivity[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentActivity"},$hooks:{"after-fetch":function(){this.studentActivity.forEach(function(e){return e.activity=Mr(e.activity)})}}})}]);var zr=De.sc;Ae.a.factory(zr,["restmod",function(e){return e.model().mix({$config:{primaryKey:"courseId"},"studentGrades[].date":{serialize:"date"},$url:function(){return xe.a.apiBasePath+"/v1/courses/"+this.$pk+"/telemetry/reports/studentGrades"}})}]);var Kr=De.tc;Ae.a.factory(Kr,["restmod",_e.d,function(e){return e.model().mix({$url:function(){return xe.a.apiBasePath+"/v1/telemetry/courses?filter=sufficientData"}})}]);var Wr=n("KiLF"),Jr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fe.__extends(t,e),t.CurrentTerm=new t("current"),t.UpcomingTerm=new t("upcoming"),t}(je.a),Xr=De.uc;Ae.a.factory(Xr,["restmod",_e.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/terms").mix({startDate:{serialize:"date"},endDate:{serialize:"date"}})}]);var Qr=n("/J7e"),Zr=De.vc,Yr="UltraUI.";Ae.a.factory(Zr,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/themes";return e.model(n).mix({ui:{mask:!0},getUsePrimaryColorOnAllBaseNav:function(){return Qr.a(this.ui.usePrimaryColorOnAllBaseNav)},setUsePrimaryColorOnAllBaseNav:function(e){this.ui.usePrimaryColorOnAllBaseNav=Qr.a(e)?"true":"false"},getUsePrimaryColorOnLogoBackground:function(){return Qr.a(this.ui.usePrimaryColorOnLogoBackground)},setUsePrimaryColorOnLogoBackground:function(e){this.ui.usePrimaryColorOnLogoBackground=Qr.a(e)?"true":"false"},$config:{primaryKey:"themeId"},$extend:{Record:{$fetch:function(){return this.$decorate({"before-request":function(e){e.url=n+"/"+this.$pk.themeId+"/settings"}},function(){return this.$super()})},$save:function(){return this.$decorate({"before-request":function(e){var t=this;this.settings=[],Object.keys(this.ui).forEach(function(e){t.settings.push({key:Yr+e,value:t.ui[e]})}),e.url=n+"/"+this.$pk.themeId+"/settings",e.data.settings=this.settings}},function(){return this.$super()})}},Model:{getDefault:function(){return this.$new({themeId:"default"}).$fetch()}}},$hooks:{"after-feed":function(){var e=this;this.settings.forEach(function(t){if(t&&t.key){var n=t.key.replace(Yr,"");e.ui[n]=t.value}})}}})}]);var ei=De.xc;Ae.a.factory(ei,["restmod",function(e){return e.model().mix({$extend:{Collection:{getToolById:function(e){return Dt.find(this,["identifier",e])}}}})}]);var ti=De.Zb;Ae.a.factory(ti,["restmod",function(e){return e.model().mix({isTinCan:function(){return!(!this.learningStandard||!wt.ScormLearningStandard.TINCAN.isEqualTo(this.learningStandard))}})}]);var ni=De.wc;Ae.a.factory(ni,["restmod",_e.d,function(e,t){return e.model(xe.a.apiBasePath+"/v1/tools")}]);var ri=De.cc;Ae.a.factory(ri,["restmod",_e.d,function(e,t){return e.model()}]);var ii=De.yc;Ae.a.factory(ii,["restmod",_e.d,function(e,t){var n=xe.a.apiBasePath+"/v1/trial/supportTickets";return e.model(n)}]);var oi=De.zc;Ae.a.factory(oi,["restmod",_e.d,function(e,t){return e.model().mix({})}]),n.d(t,"R",function(){return si}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return Be}),n.d(t,"e",function(){return s}),n.d(t,"pb",function(){return ze}),n.d(t,"f",function(){return We}),n.d(t,"g",function(){return a}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return c}),n.d(t,"n",function(){return l}),n.d(t,"z",function(){return d}),n.d(t,"o",function(){return gt}),n.d(t,"p",function(){return p}),n.d(t,"r",function(){return wt}),n.d(t,"q",function(){return f}),n.d(t,"u",function(){return m}),n.d(t,"x",function(){return Pt}),n.d(t,"s",function(){return h}),n.d(t,"t",function(){return g}),n.d(t,"v",function(){return v}),n.d(t,"w",function(){return b}),n.d(t,"y",function(){return Ot}),n.d(t,"j",function(){return y}),n.d(t,"k",function(){return S}),n.d(t,"l",function(){return C}),n.d(t,"A",function(){return w}),n.d(t,"B",function(){return $}),n.d(t,"C",function(){return cn}),n.d(t,"H",function(){return k}),n.d(t,"E",function(){return T}),n.d(t,"F",function(){return vn}),n.d(t,"m",function(){return I}),n.d(t,"G",function(){return wn}),n.d(t,"J",function(){return $n}),n.d(t,"D",function(){return E}),n.d(t,"K",function(){return P}),n.d(t,"I",function(){return A}),n.d(t,"L",function(){return x}),n.d(t,"M",function(){return D}),n.d(t,"N",function(){return _}),n.d(t,"O",function(){return L}),n.d(t,"Q",function(){return M}),n.d(t,"P",function(){return N}),n.d(t,"S",function(){return R}),n.d(t,"T",function(){return Un}),n.d(t,"U",function(){return O}),n.d(t,"V",function(){return G}),n.d(t,"Z",function(){return U}),n.d(t,"X",function(){return B}),n.d(t,"W",function(){return F}),n.d(t,"Y",function(){return q}),n.d(t,"ab",function(){return j}),n.d(t,"bb",function(){return H}),n.d(t,"eb",function(){return V}),n.d(t,"kb",function(){return z}),n.d(t,"mb",function(){return K}),n.d(t,"db",function(){return W}),n.d(t,"lb",function(){return J}),n.d(t,"ib",function(){return X}),n.d(t,"fb",function(){return Q}),n.d(t,"hb",function(){return Z}),n.d(t,"jb",function(){return Y}),n.d(t,"gb",function(){return ee}),n.d(t,"cb",function(){return te}),n.d(t,"nb",function(){return ne}),n.d(t,"ob",function(){return re}),n.d(t,"qb",function(){return ie}),n.d(t,"rb",function(){return Sr}),n.d(t,"sb",function(){return oe}),n.d(t,"tb",function(){return se}),n.d(t,"vb",function(){return ae}),n.d(t,"wb",function(){return ue}),n.d(t,"yb",function(){return ce}),n.d(t,"zb",function(){return le}),n.d(t,"Ab",function(){return de}),n.d(t,"Bb",function(){return pe}),n.d(t,"Db",function(){return fe}),n.d(t,"Cb",function(){return me}),n.d(t,"Eb",function(){return he}),n.d(t,"Fb",function(){return ge}),n.d(t,"Gb",function(){return ve}),n.d(t,"Hb",function(){return be}),n.d(t,"Ib",function(){return ye}),n.d(t,"Jb",function(){return Se}),n.d(t,"Kb",function(){return Ce}),n.d(t,"Lb",function(){return we}),n.d(t,"Mb",function(){return $e}),n.d(t,"Nb",function(){return ke}),n.d(t,"Ob",function(){return Te}),n.d(t,"xb",function(){return Ie}),n.d(t,"Pb",function(){return Pe}),n.d(t,"Qb",function(){return Lt}),n.d(t,"ub",function(){return Ee});var si=Ae.a.name},pn3i:function(e,t,n){e.exports=n("ZJ/X")(1344)},pqmn:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.ROOT=new t("ROOT"),t.INTERACTIVE=new t("INTERACTIVE"),t.INDIRECT=new t("INDIRECT"),t}(n.n(i).a);t.a=o},q1tI:function(e,t,n){e.exports=n("ZJ/X")(1)},qOsI:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n("PCGa");var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.base.calendar.routes";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("calendar-settings",{url:"/settings",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},require:function(){return n.e(309).then(n.bind(null,"OHPy"))},pageTitle:"base.calendar.settings.title"}).peekState("event-create",{url:"/event/create?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(14),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(10),n.e(71)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.create.addEvent"}).peekState("event-edit",{url:"/event/edit/:calendarId/:itemSourceType/:itemSourceId?updateSeries&repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(14),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(10),n.e(71)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.create.editEvent"}).peekState("event-view",{url:"/event/view/:calendarId/:itemSourceType/:itemSourceId?repeatRuleType&repeatRuleCourseId&repeatRuleUserId",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(10),n.e(345)]).then(n.bind(null,"dWqS"))},pageTitle:"base.calendar.create.viewEvent"}).peekState("class-schedule",{url:"/class-schedule?selectedDate&courseId",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/base/calendar/base-calendar")}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(0),n.e(10),n.e(34),n.e(302)]).then(n.bind(null,"TayV"))},pageTitle:"base.calendar.schedule.classSchedule"}).peekState("office-hours",{url:"/office-hours?selectedDate?calendarId",resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/base/calendar/base-calendar"),t.loadBundle("components/directives/panel-header"),t.loadBundle("components/directives/close-without-saving-modal")])}]},onExit:["$rootScope",function(e){e.$broadcast("calendar-refresh")}],require:function(){return Promise.all([n.e(14),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(10),n.e(71)]).then(n.bind(null,"V4Gf"))},pageTitle:"base.calendar.addOfficeHours"})}])},qYqL:function(e,t){e.exports='<bb-modal id="disallow-folder-upload-modal" class="notification js-disallow-folder"\n          modal-title-key="{{isChrome || hasFiles ? \'components.directives.fileUpload.disallowFolderUploadTitle\' : \'components.directives.fileUpload.disallowFolderUploadNotChromeTitle\'}}"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <ng-switch on="isChrome">\n      <div ng-switch-when="true">\n        <p>\n          <bb-translate>components.directives.fileUpload.disallowFolderUploadFull</bb-translate>\n        </p>\n      </div>\n      <div ng-switch-default>\n        <ng-switch on="hasFiles">\n          <div ng-switch-when="true">\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeAdditionalFiles</bb-translate>\n            </p>\n          </div>\n          <div ng-switch-default>\n            <p>\n              <bb-translate>components.directives.fileUpload.disallowFolderUploadFullNotChromeNoMoreFiles</bb-translate>\n            </p>\n          </div>\n        </ng-switch>\n      </div>\n    </ng-switch>\n  </div>\n  <div name="modal-footer" class="reveal-modal__footer-content reveal-modal__footer-content--gray" ng-switch on="isChrome || hasFiles">\n    <div class="reveal-modal__footer-buttons">\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.no">\n          <bb-translate>components.directives.fileUpload.no</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="true">\n        <button class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.yes">\n          <bb-translate>components.directives.fileUpload.yes</bb-translate>\n        </button>\n      </span>\n      <span class="reveal-modal__footer-button-container" ng-switch-when="false">\n        <button class="button js-primary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n          <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n        </button>\n      </span>\n    </div>\n  </div>\n</bb-modal>\n'},qhd3:function(e,t,n){"use strict";n.r(t),n.d(t,"KnownSystemRole",function(){return m}),n.d(t,"VisibilityScopeEnum",function(){return h}),n.d(t,"Gender",function(){return g}),n.d(t,"EducationLevel",function(){return v}),n.d(t,"serviceName",function(){return b}),n.d(t,"USER_API_PATH",function(){return y});var r=n("mrSG"),i=(n("TeAI"),n("LvDl")),o=n("IbG+"),s=n("5MwF"),a=n("Rjd/"),u=n("yCC5"),c=n("nkTj"),l=n("g66W"),d=n("oSB+"),p=n.n(d),f=n("cYWG"),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.AccountAdmin=new t("ACCOUNT_ADMIN"),t.CourseCreator=new t("COURSE_CREATOR"),t.CourseSupport=new t("COURSE_SUPPORT"),t.Guest=new t("GUEST"),t.Integration=new t("INTEGRATION"),t.Observer=new t("OBSERVER"),t.Portal=new t("PORTAL"),t.SystemAdmin=new t("SYSTEM_ADMIN"),t.SystemSupport=new t("SYSTEM_SUPPORT"),t.User=new t("USER"),t.Default=new t("DEFAULT"),t}(p.a),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Nobody=new t("NOBODY"),t.Classmates=new t("CLASSMATES"),t.Everyone=new t("EVERYONE"),t.School=new t("EVERYONE"),t}(p.a),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Male=new t("MALE"),t.Female=new t("FEMALE"),t.Unknown=new t("UNKNOWN"),t}(p.a),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.K8=new t("K_8"),t.HighSchool=new t("HIGH_SCHOOL"),t.Freshman=new t("FRESHMAN"),t.Sophomore=new t("SOPHOMORE"),t.Junior=new t("JUNIOR"),t.Senior=new t("SENIOR"),t.GraduateSchool=new t("GRADUATE_SCHOOL"),t.PostGraduateSchool=new t("POST_GRADUATE_SCHOOL"),t.Unknown=new t("UNKNOWN"),t}(p.a),b=u.Ac,y=s.a.apiBasePath+"/v1/users";a.a.factory(b,["$http","restmod","$q",c.d,function(e,t,n,r){var s=t.model(y).mix({calendarItems:{hasMany:u.Eb},memberships:{hasMany:u.N,hooks:{"before-fetch-many":function(t){t.params=t.params||{},i.isUndefined(t.params.includeCount)&&(t.params.includeCount=!0);var n=t.params.limit,r=t.params.offset,s=function(t,i,a){return e.get(t,{params:i}).then(function(e){if(!(e&&200===e.status&&e.data&&e.data.results&&e.data.paging))return e;a=a||[];var i=e.data.results,u=e.data.paging;if((a=a.concat(i)).length>=n||i.length<u.limit)return e.data.results=a,e.data.paging.limit=n,e.data.paging.offset=r,e;var c=o.extend(o.copy(e.config.params),{offset:(r||0)+a.length});return a.length<n&&(c.limit=n-a.length),delete c.includeCount,s(t,c,a)})};t.cache={get:function(){return s(t.url,t.params)}}}}},blocks:{hasMany:u.h},birthDate:{serialize:"date"},isGuest:function(){return m.Guest.isEqualTo(this.systemRoles&&this.systemRoles[0])},isAnonymousStudent:function(){return this.ui&&this.ui.anonymousStudent},isInstructor:function(){return this.memberships.some(function(e){return e.isActAsInstructorMembership()})},isStudent:function(){return this.memberships.some(function(e){return e.isStudentMembership()})},getInitials:function(){if(this.givenName&&this.familyName&&!l.i(this.givenName)&&!l.i(this.familyName)&&!l.j(this.givenName)&&!l.j(this.familyName))return(""+this.givenName.charAt(0)+this.familyName.charAt(0)).toLowerCase()},$extend:{Collection:{batchGetCollection:function(e){var t=n.defer();return this.$collection().$send({method:"PUT",url:this.$url(),data:e},function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise}}}});return s.getUserConfiguration=function(){var e,t=n.defer();return this.$collection().$send({method:"GET",url:this.$url()+"/fieldsConfiguration",params:(e={visibleOnly:!0},e[f.a]=Number.MAX_VALUE,e)},function(e){t.resolve(e.data)},function(e){t.reject(e)}),t.promise},s.mixinUsers=r.getDataMixin(function(e,t){return s.findMany(e,t,[404])},"userId","user"),s.getAnonymousStudent=function(e){return s.$build({id:e,familyName:"",givenName:"",ui:{anonymousStudent:!0,anonymousStudentId:e}})},s}])},qtHE:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("IbG+"),i=n("Sa5G"),o=n("wQOJ"),s=n("TnpK"),a="ultra.base.institution-page.routes";r.module(a,[s.b]).config([s.c,function(e){e.peekState("allLinks",{url:"/all?moduleId",require:function(){return Promise.all([n.e(16),n.e(372)]).then(n.bind(null,"Dovs"))},pageTitle:"base.nav.institutionPage",resolve:{IP:[o.b,s.d,function(e,t){var n=t.nextParams;return e.getModuleIsVisible(n.moduleId).then(function(e){if(!e)return t.goToRoute("base.institution-page")})}]}}).peekState("editPageImage",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/editPage?type",require:function(){return Promise.all([n.e(16),n.e(315)]).then(n.bind(null,"JKPj"))},pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-page-image-peek"}).peekState("editModule",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/edit?moduleId&expandRoles",panelClass:"full",require:function(){return Promise.all([n.e(16),n.e(359)]).then(n.bind(null,"axDv"))},peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("createModule",{systemEntitlement:i.D.CreatePortalOptionsModuleManagement,url:"/create?type&sequence",panelClass:"full",require:function(){return Promise.all([n.e(16),n.e(358)]).then(n.bind(null,"57Mq"))},peekStates:["linkImage","system-content-market"],pageTitle:"base.nav.institutionPage"}).peekState("linkImage",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/linkImage?linkId",require:function(){return Promise.all([n.e(16),n.e(316)]).then(n.bind(null,"kHrt"))},pageTitle:"base.nav.institutionPage",peekStates:["contentCollection","browserSettings"],allowChildPeekStates:!0,peekViewName:"edit-link-image-peek"}).peekState("contentCollection",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/contentCollection",require:function(){return n.e(330).then(n.bind(null,"HgOS"))},pageTitle:"base.nav.institutionPage",panelClass:"full",peekViewName:"ip-content-collection-peek"}).peekState("browserSettings",{systemEntitlement:i.D.ModifyPortalOptionsModuleManagement,url:"/browserSettings",require:function(){return n.e(386).then(n.bind(null,"usdo"))},pageTitle:"base.nav.institutionPage",panelClass:"peek"})}])},r4fA:function(e,t,n){e.exports=n("ZJ/X")(1502)},r6n2:function(e,t,n){"use strict";var r=n("mrSG"),i=n("oSB+"),o=n.n(i),s=n("Y3OE"),a=function(e){function t(t,n){var r=e.call(this,t)||this;return r.handle=t,r.contentHandler=n,r}return r.__extends(t,e),t.parseByContentHandler=function(e){switch(e){case t.Assignment.contentHandler:return t.Assignment;case t.Test.contentHandler:return t.Test;case t.Survey.contentHandler:return t.Survey;case t.Discussion.contentHandler:return t.Discussion;case t.ClassicAssignment.contentHandler:return t.ClassicAssignment;case t.Scorm.contentHandler:return t.Scorm}},t.Assignment=new t("assignment",s.a.UltraAssignment.toString()),t.Survey=new t("survey",s.a.SurveyLink.toString()),t.Test=new t("test",s.a.TestLink.toString()),t.Discussion=new t("discussion",s.a.Discussion.toString()),t.ClassicAssignment=new t("classicAssignment",s.a.ClassicAssignment.toString()),t.Scorm=new t("scorm",s.a.RusticiScorm.toString()),t}(o.a);t.a=a},rEGj:function(e,t,n){"use strict";n.r(t);n("GiEq")},rEZX:function(e,t,n){"use strict";var r=n("pjml"),i=function(){function e(e,t){t&&r.J.ScaleType.Text.isEqualTo(t.scaleType)?this.isNumeric=!1:this.isNumeric=!isNaN(parseFloat(e)),this.grade=e}return e.prototype.getGrade=function(){return this.grade},e}(),o=function(e,t,n){this.column=e,this.courseId=e.courseId,this.gradeValue=new i(t,n)};t.a=o},rkMR:function(e,t,n){},rmtn:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("IbG+"),i=n("Sa5G"),o=n("0JpG"),s=n("TnpK"),a="ultra.base.admin.brand.routes";r.module(a,[o.moduleName,s.b]).config([s.c,function(e){e.peekState("brands",{panelClass:"full",allowChildPeekStates:!0,url:"/brands",systemEntitlement:i.C.ViewAdmin,require:function(){return Promise.all([n.e(16),n.e(29),n.e(36),n.e(272)]).then(n.bind(null,"olMq"))},pageTitle:"base.admin.branding.brandList.title",peekStates:["create-brand","brand-detail"]}).peekState("create-brand",{panelClass:"full",allowChildPeekStates:!0,url:"/create",systemEntitlement:i.C.ViewAdmin,require:function(){return Promise.all([n.e(16),n.e(29),n.e(36),n.e(125)]).then(n.bind(null,"3ay5"))},pageTitle:"base.admin.branding.createBrand.title",peekStates:["colorSelection"]}).peekState("brand-detail",{panelClass:"full",allowChildPeekStates:!0,url:"/brand/:brandId",systemEntitlement:i.C.ViewAdmin,require:function(){return Promise.all([n.e(16),n.e(29),n.e(36),n.e(125)]).then(n.bind(null,"3ay5"))},pageTitle:"base.admin.branding.brandDetails.title",peekStates:["colorSelection"]})}])},rxY8:function(e,t,n){"use strict";var r=n("mrSG"),i=(n("kj+S"),n("EVdn")),o=n("LvDl"),s=20,a=function(){function e(e,t){var n=this;this.element=e,this.settings=t,this.nextFrame=o.throttle(function(){window.requestAnimationFrame(function(){e.setAttribute("keyframe",n.state+"-"+("00"+(n.frame=Math.min(n.frame+1,s))).substr(-2)),n.frame<s?n.nextFrame():(n[n.state+"Callback"]||n.settings[n.state+"Callback"]||i.noop)()})},50),this.settings=i.extend({successCallback:i.noop,errorCallback:i.noop,canvasSize:54},t),i(e).width(this.settings.canvasSize).height(this.settings.canvasSize)}return e.prototype.start=function(){this.state="start",this.frame=1,this.startCallback=i.noop,this.nextFrame()},e.prototype.loadComplete=function(){var e=this;this.afterWaiting(function(){e.state="success",e.frame=1,e.nextFrame()})},e.prototype.loadError=function(){var e=this;this.afterWaiting(function(){e.state="error",e.frame=1,e.nextFrame()})},e.prototype.reset=function(){this.state="reset",this.frame=s,this.nextFrame()},e.prototype.afterWaiting=function(e){var t=this;"start"===this.state&&this.frame===s||"reset"===this.state?e():this.startCallback=function(){e(),t.startCallback=null}},e}();i.fn.inlineLoader=function(e){return this.addClass("xloader2").each(function(){this.InlineLoader=new a(this,e)}),this};var u=n("IbG+");n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l});var c="ultra.components.services.spinner",l="spinner",d=function(){function e(e){this.$rootScope=e}return e.prototype.initInlineLoader=function(e,t){return e.inlineLoader(t),new p(e,this.$rootScope)},e.$inject=["$rootScope"],e}(),p=function(){function e(e,t){this.element=e,this.$rootScope=t}return e.prototype.start=function(){this.element[0].InlineLoader.start()},e.prototype.complete=function(){this.element[0].InlineLoader.loadComplete()},e.prototype.error=function(){this.element[0].InlineLoader.loadError()},e.prototype.reset=function(){this.element[0].InlineLoader.reset()},e.prototype.animate=function(e){var t=this;this.start(),e.then(function(){t.complete()},function(){t.error()})},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(d);u.module(c,[]).service(l,d)},sINF:function(e,t,n){e.exports=n("ZJ/X")(1943)},sMjt:function(e,t,n){e.exports=n("ZJ/X")(75)},sNuB:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n("VZTK");var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.goal-alignment.router";r.module(s,[o.b]).config([o.c,function(e){e.peekState("goal-picker-legacy",{panelClass:"full",url:"/goalPickerLegacy",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/goal-alignment/goal")}]},require:function(){return n.e(335).then(n.bind(null,"8MxD"))},pageTitle:"course.goal-alignment.goal.header",params:{goalAlignableContent:null}})}])},sTW1:function(e,t){e.exports='<bb-modal class="notification" \n          modal-title-key="components.directives.fileUpload.improperAmountOfFilesTitle"\n          analytics-id-tag-prefix="components.directives.fileUpload">\n  <div name="modal-contents">\n    <p>\n      <bb-translate>components.directives.fileUpload.improperAmountOfFilesFull</bb-translate>\n    </p>\n    <div class="file-list">\n      <div ng-repeat="file in fileUpload.uploadedFiles">\n        <input ng-if="$index===0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" checked analytics-id="components.directives.checked.input.radio">\n        <input ng-if="$index!==0" class="toggle-input" type="radio" id="{{\'fileListing\' + $index}}" name="fileListing" value="{{$index}}" analytics-id="components.directives.not.checked.input.radio">\n        <label class="toggle-label" for="{{\'fileListing\' + $index}}" style="white-space: nowrap">{{file.name}}</label><br />\n      </div>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" role="button" class="button js-primary-button" ng-click="fileUpload.closeModal()" analytics-id="components.directives.fileUpload.uploadSelectedFile">\n    <bb-translate>components.directives.fileUpload.uploadSelectedFile</bb-translate>\n  </button>\n  <button name="modal-footer-button-secondary" role="button" class="button button--secondary js-secondary-button" ng-click="fileUpload.modalCancelUpload()" analytics-id="components.directives.fileUpload.cancelUploadText">\n    <bb-translate>components.directives.fileUpload.cancelUploadText</bb-translate>\n  </button>\n</bb-modal>\n'},saCP:function(e,t,n){},"sb+l":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("IbG+"),i=n("Sa5G"),o=n("0JpG"),s=n("w9Zy"),a=n("jhBu"),u=n("pjml"),c=n("TnpK"),l="ultra.base.stream.routes";r.module(l,[o.moduleName,s.d,a.a,u.R,c.b]).config([c.c,function(e){e.peekState("announcement",{url:"/announcement/:streamEntryId",require:function(){return Promise.all([n.e(14),n.e(1),n.e(26),n.e(331)]).then(n.bind(null,"/Lzo"))},pageTitle:"base.stream.entryTitle.announcement"}).peekState("stream-message",{url:"/message/:courseId/:conversationId",require:function(){return Promise.all([n.e(27),n.e(32),n.e(398)]).then(n.bind(null,"yVjE"))},pageTitle:"base.stream.entryTitle.message"}).peekState("content-group",{url:"/content/:streamEntryId",require:function(){return Promise.all([n.e(14),n.e(2),n.e(1),n.e(26),n.e(362)]).then(n.bind(null,"G506"))},resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/content/content")}]},pageTitle:"base.stream.content.pageTitle"}).peekState("notification-create",{abstract:!0,url:"/notification",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}],isAdmin:[a.b,function(e){return e.hasSystemEntitlement(i.C.ViewAdminTop).then(function(e){return e})}]},panelClass:"full",require:function(){return Promise.all([n.e(131),n.e(389)]).then(n.bind(null,"s7sT"))},pageTitle:"base.stream.notification.create.pageTitle"}).peekState("notification-create.steps",{url:"/create",panelClass:"full",pageTitle:"base.stream.notification.create.pageTitle",views:{"notification-step1@":{require:function(){return n.e(141).then(n.bind(null,"At0Z"))}},"notification-step2@":{require:function(){return n.e(139).then(n.bind(null,"SPbX"))}}}}).peekState("notification-edit",{abstract:!0,url:"/notification",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}]},panelClass:"full",require:function(){return Promise.all([n.e(131),n.e(376)]).then(n.bind(null,"OhPa"))},pageTitle:"base.stream.notification.edit.pageTitle"}).peekState("notification-edit.steps",{url:"/edit",panelClass:"full",pageTitle:"base.stream.notification.edit.pageTitle",views:{"notification-step1@":{require:function(){return n.e(141).then(n.bind(null,"At0Z"))}},"notification-step2@":{require:function(){return n.e(139).then(n.bind(null,"SPbX"))}}}}).peekState("notification-history",{url:"/notification/history",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/stream/notification")}]},panelClass:"full",require:function(){return n.e(332).then(n.bind(null,"Mc4O"))},pageTitle:"base.stream.notification.history.title",peekStates:["notification-edit"],peekViewName:"notification-history-base@"})}])},sgjL:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("e6jQ"),a=n("Q/M7"),u="ultraUi.components.services.postMessageDispatcher",c="postMessageDispatcher",l=function(){function e(e){var t=this;this.$window=e,this.eventHandlers={},this.eventListenerBound=!1,this.superEventHandler=function(e){e.origin===a.j()&&e.data&&e.data.messageId&&i.forOwn(t.eventHandlers,function(t){t.messageId===e.data.messageId&&t.eventHandler(e.data,e.source)})}}return e.prototype.callEventHandler=function(e,t){i.forOwn(this.eventHandlers,function(n){n.messageId===e&&n.eventHandler(t,window)})},e.prototype.registerEventHandler=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),r){var a=[];i.forOwn(this.eventHandlers,function(t,n){t.messageId===e&&a.push(n)}),a.forEach(function(e){o.removeEventHandler(e)})}var u=s.a();this.eventHandlers[u]={eventHandler:t,messageId:e},this.handleEventListener(),n.$on("$destroy",function(){o.removeEventHandler(u),o.handleEventListener()})},e.prototype.removeEventHandler=function(e){this.eventHandlers[e]&&delete this.eventHandlers[e]},e.prototype.getDispatcherStatus=function(){return{count:Object.keys(this.eventHandlers).length,bound:this.eventListenerBound}},e.prototype.testDispatcherEventHandler=function(e){this.superEventHandler(e)},e.prototype.handleEventListener=function(){Object.keys(this.eventHandlers).length>0?this.eventListenerBound||this.addEventListener():this.removeEventListener()},e.prototype.addEventListener=function(){this.$window.addEventListener("message",this.superEventHandler,!1),this.eventListenerBound=!0},e.prototype.removeEventListener=function(){this.$window.removeEventListener("message",this.superEventHandler),this.eventListenerBound=!1},e.$inject=["$window"],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(l);o.module(u,[]).service(c,l)},spHl:function(e,t,n){var r={"./ar-sa/_combined":["805C",88],"./ar-sa/_combined.json":["805C",88],"./cs-cz/_combined":["p7mG",89],"./cs-cz/_combined.json":["p7mG",89],"./cy-gb/_combined":["jeLm",90],"./cy-gb/_combined.json":["jeLm",90],"./da-dk/_combined":["2iiI",91],"./da-dk/_combined.json":["2iiI",91],"./de-de/_combined":["bR5d",92],"./de-de/_combined.json":["bR5d",92],"./en-au/_combined":["FPgK",94],"./en-au/_combined.json":["FPgK",94],"./en-gb/_combined":["fX7R",95],"./en-gb/_combined.json":["fX7R",95],"./en-us-k12/_combined":["TfEl",96],"./en-us-k12/_combined.json":["TfEl",96],"./en-us-pro/_combined":["SQ9M",97],"./en-us-pro/_combined.json":["SQ9M",97],"./en-us/_combined":["pVoq",150],"./en-us/_combined.json":["pVoq",150],"./en-za/_combined":["7bwu",98],"./en-za/_combined.json":["7bwu",98],"./en/_combined":["JOlw",93],"./en/_combined.json":["JOlw",93],"./es-es/_combined":["qCZ9",99],"./es-es/_combined.json":["qCZ9",99],"./fr-fr/_combined":["SMTA",100],"./fr-fr/_combined.json":["SMTA",100],"./it-it/_combined":["mwd4",101],"./it-it/_combined.json":["mwd4",101],"./ja-jp/_combined":["BVZK",102],"./ja-jp/_combined.json":["BVZK",102],"./ko-kr/_combined":["/x4r",103],"./ko-kr/_combined.json":["/x4r",103],"./ms-my/_combined":["YOK3",104],"./ms-my/_combined.json":["YOK3",104],"./nb-no/_combined":["oNI2",105],"./nb-no/_combined.json":["oNI2",105],"./nl-nl/_combined":["7Mff",106],"./nl-nl/_combined.json":["7Mff",106],"./pl-pl/_combined":["395X",107],"./pl-pl/_combined.json":["395X",107],"./pt-br/_combined":["LehD",108],"./pt-br/_combined.json":["LehD",108],"./ru-ru/_combined":["lC96",109],"./ru-ru/_combined.json":["lC96",109],"./sv-se/_combined":["JSyn",110],"./sv-se/_combined.json":["JSyn",110],"./th-th/_combined":["S6Bf",111],"./th-th/_combined.json":["S6Bf",111],"./tr-tr/_combined":["3Rba",112],"./tr-tr/_combined.json":["3Rba",112],"./zh-cn/_combined":["qOHB",113],"./zh-cn/_combined.json":["qOHB",113],"./zh-tw/_combined":["G1jo",114],"./zh-tw/_combined.json":["G1jo",114]};function i(e){var t=r[e];return t?n.e(t[1]).then(function(){var e=t[0];return n.t(e,3)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}i.keys=function(){return Object.keys(r)},i.id="spHl",e.exports=i},t3AZ:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("0JpG"),o="ultra.components.directives.translateAttrsDirective",s="bbTranslateAttrs",a="translateAttrsValues",u=function(){function e(e,t,n,r,i,o){var u=this;this.$q=e,this.bbLocalize=t,this.scope=n,this.element=r,this.attrs=i,this.origAttrs=o,this.currentAttrs={},this.currentValues={},this.getOrigAttrsString=function(){return u.origAttrs[s]},this.getOrigValuesString=function(){return u.origAttrs[a]},this.getAttrsString=function(){return u.attrs[s]},this.getValuesString=function(){return u.attrs[a]},this.updateValues=function(){return Object.assign(u.currentValues,u.scope.$eval(u.getValuesString()))};var c=!0;this.isOnetimeBind(this.getOrigAttrsString())?this.updateAttrs():(this.scope.$watch(this.updateAttrs.bind(this),this.translate.bind(this),!0),c=!1),this.isValuesStringDefined()&&!this.isOnetimeBind(this.getOrigValuesString())&&(this.scope.$watch(this.updateValues.bind(this),this.translate.bind(this),!0),c=!1);var l=n.$root.$on("$translateChangeSuccess",this.translate.bind(this));n.$on("$destroy",l),c&&this.translate()}return e.prototype.updateAttrs=function(){return Object.assign(this.currentAttrs,this.scope.$eval(this.getAttrsString()))},e.prototype.isValuesStringDefined=function(){return null!=this.getOrigValuesString()},e.prototype.isOnetimeBind=function(e){return 0===e.indexOf("::")},e.prototype.translate=function(){var e=this,t={},n=this.bbLocalize.getLocale(this.scope);r.forEach(this.currentAttrs,function(r,i){t[i]=e.bbLocalize.translate({locale:n,key:r,params:e.currentValues,noWrap:!0,noEscape:!0})}),this.$q.all(t).then(function(t){e.element.attr(t)})},e}(),c=function(){function e(e,t){var n=this;this.$q=e,this.bbLocalize=t,this.restrict="A",this.scope=!1,this.compile=function(e,t){t[s];return function(e,r,i){return new u(n.$q,n.bbLocalize,e,r,i,t)}}}return e.$inject=["$q",i.serviceName],e}();r.module(o,[i.moduleName]).directive(s,["$injector",function(e){return e.instantiate(c)}])},t6LE:function(e,t,n){"use strict";n.r(t);var r,i=n("mrSG"),o=(n("TeAI"),n("LvDl")),s=n("5MwF"),a=n("oSB+"),u=n.n(a),c=n("vYaK"),l=n("yCC5"),d=n("pjml"),p=n("Rjd/"),f=n("JrDC"),m=n("wd/R"),h=n("A0nf"),g=n("nkTj"),v=n("94iD"),b=n("817J"),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.Completed=new t("COMPLETED"),t.NeedsPosting=new t("NEEDS_POSTING"),t.NothingToPost=new t("NOTHING_TO_POST"),t}(u.a);n.d(t,"OverrideStatus",function(){return r}),n.d(t,"moduleName",function(){return S}),n.d(t,"serviceName",function(){return C}),n.d(t,"ToolAttemptDetailItemEx",function(){return w}),n.d(t,"AttemptStatus",function(){return $}),n.d(t,"AssessmentType",function(){return b.a}),n.d(t,"AttemptsPostingStatus",function(){return y}),function(e){e.NoOverride="NO_OVERRIDE",e.FeedbackOverride="FEEDBACK_OVERRIDE",e.GradeFeedbackOverride="GRADE_FEEDBACK_OVERRIDE"}(r||(r={}));var S="ultra.components.services.models.grade.gradeAttempt",C=l.cb,w=function(){function e(t,n){var r=this;this.gradeAttempt=t,this.toolAttemptDetailItem=n,this._softTimeLimitDate=m(this.gradeAttempt.creationDate).add(this.softTimeLimitSecond,"seconds").toDate(),this._graceTimeLimitSecond=this.softTimeLimitSecond+e.GRACE_PERIOD_SECOND,this._graceDate=m(this.gradeAttempt.creationDate).add(this._graceTimeLimitSecond,"seconds").toDate(),this._isSubmittedInGracePeriod=m(this.gradeAttempt.attemptDate).isBetween(m(this.gradeAttempt.creationDate),m(this._graceDate)),this._hasAnswerIsModifiedInGracePeriod=o.filter(this.toolAttemptDetailItem.questionAttempts,function(e){return!o.isEmpty(e.saveTimes)&&m(r.getLastModifyTime(e)).isBetween(r._softTimeLimitDate,r._graceDate)}).length>0}return Object.defineProperty(e.prototype,"elapsedDuration",{get:function(){return m.duration(m(this.gradeAttempt.attemptDate).diff(m(this.gradeAttempt.creationDate)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elapsedSec",{get:function(){return Math.ceil(this.elapsedDuration.asSeconds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"softTimeLimitSecond",{get:function(){return this.isTimerCompletionH()?this.toolAttemptDetailItem.softTimeLimitSeconds:this.toolAttemptDetailItem.timeLimitSec},enumerable:!0,configurable:!0}),e.prototype.needAttention=function(){return!o.isUndefined(this.toolAttemptDetailItem.timeLimitSec)&&(this.elapsedSec>this._graceTimeLimitSecond||this._isSubmittedInGracePeriod&&this._hasAnswerIsModifiedInGracePeriod)},e.prototype.getExceedTime=function(){return Math.floor(m.duration(this.elapsedSec-this.softTimeLimitSecond,"seconds").asMinutes())},e.prototype.isCompleted=function(){return this.gradeAttempt.isCompleted()},e.prototype.isTimerCompletionH=function(){return d.d.TimerCompletion.H.isEqualTo(this.toolAttemptDetailItem.timerCompletion)},e.prototype.isTimerCompletionC=function(){return d.d.TimerCompletion.C.isEqualTo(this.toolAttemptDetailItem.timerCompletion)},e.prototype.getLastModifyTime=function(e){return o.maxBy(e.saveTimes,function(e){return e.date}).date},e.prototype.isAnsweredAfterSoftTimeLimit=function(e){return!o.isEmpty(e.saveTimes)&&m(this.getLastModifyTime(e)).isAfter(this._softTimeLimitDate)},e.prototype.getQuestionsAnsweredAfterSoftTimeLimit=function(){var e=this;return o.filter(this.toolAttemptDetailItem.questionAttempts,function(t){return e.isAnsweredAfterSoftTimeLimit(t)})},e.GRACE_PERIOD_SECOND=60,e}(),$=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.__extends(t,e),t.NotAttempted=new t("NOT_ATTEMPTED"),t.Abandoned=new t("ABANDONED"),t.InProgress=new t("IN_PROGRESS"),t.Suspended=new t("SUSPENDED"),t.Canceled=new t("CANCELED"),t.NeedsGrading=new t("NEEDS_GRADING"),t.Completed=new t("COMPLETED"),t.InMoreProgress=new t("IN_MORE_PROGRESS"),t.NeedsMoreGrading=new t("NEEDS_MORE_GRADING"),t}(u.a),k=function(e){o.forEach(e,function(e,t){e.timeLimitSec=e.timeLimitSec||e.timeLimitSeconds})};p.a.factory(C,["restmod",g.d,c.serviceName,function(e,t,n){return e.model().mix({creationDate:{serialize:"date"},modifiedDate:{serialize:"date"},attemptDate:{serialize:"date"},attemptFirstGradedDate:{serialize:"date"},attemptLastGradedDate:{serialize:"date"},originality:{hasOne:l.ab,path:"submissionResults"},assessment:{hasOne:l.f,path:"assessment"},stagedAttemptGrades:{hasMany:l.ac,path:"stagedAttemptGrades"},$hooks:{"after-fetch":function(){k(this.toolAttemptDetail)},"after-fetch-many":function(){o.forEach(this,function(e){return k(e.toolAttemptDetail)})}},$extend:{Scope:{$destroyUrlFor:function(e){return s.a.apiBasePath+"/v1/courses/"+f.a(n,e.$scope)+"/gradebook/attempts/"+e.id}},Record:{isPostable:function(){return this.readyToPost&&($.NeedsGrading.isEqualTo(this.status)||$.NeedsMoreGrading.isEqualTo(this.status))},isCompleted:function(){return $.Completed.isEqualTo(this.status)},isGraded:function(){return this.displayGrade&&(null!=this.displayGrade.score||null!=this.displayGrade.grade)||this.readyToPost},isGradable:function(e){var t=this.getToolAttemptDetailItem(e);return t&&t.assessment&&!t.assessment.hasAnswerableQuestions},isInProgress:function(){return $.InProgress.isEqualTo(this.status)||$.InMoreProgress.isEqualTo(this.status)},isSubmitted:function(){return!this.isInProgress()},isNeedsGrading:function(){return $.NeedsGrading.isEqualTo(this.status)||$.NeedsMoreGrading.isEqualTo(this.status)},isReconciled:function(){return null!=this.reconciliationMode},getToolAttemptDetailItem:function(e){return this.toolAttemptDetail?this.toolAttemptDetail[e.toString()]:null},getToolAttemptDetailItemEx:function(e){var t=this.getToolAttemptDetailItem(e);return null!=t?new w(this,t):null},getTimedTestAttemptDetail:function(){var e=this.getToolAttemptDetailItem(h.a.Test);if(null==e)return null;var t={elapsedSec:e.elapsedSeconds,timeLimitSec:e.timeLimitSeconds,softLimitSec:e.softTimeLimitSeconds,timerCompletion:e.timerCompletion};return new v.a(t)},getFeedbackToUser:function(){return this.feedbackToUser},getGroupIndividualFeedbackToUser:function(){return this.groupAttemptId&&this.overrideStatus===r.FeedbackOverride?this.feedbackToUser:null},getLastFeedbackAuthor:function(){return this.lastFeedbackAuthor},isPrePostGrade:function(){return!this.isCompleted()||!this.readyToPost||!this.userId},isDisplayablePostedGrade:function(){return this.isCompleted()&&this.readyToPost&&null!=this.userId}},Collection:{getNumAttemptsToGrade:function(){return this.filter(function(e){return e.isNeedsGrading()&&!e.isPostable()}).length},getNumAttemptsToReconcile:function(){return this.getNumAttemptsToGrade()},getNumAttemptsToPost:function(){return this.filter(function(e){return e.isPostable()}).length},getNumAttemptsSubmittedLate:function(e){return this.filter(function(t){return t.isSubmitted()&&m(t.attemptDate).isAfter(e)}).length},getNumAttemptsSubmitted:function(){return this.filter(function(e){return e.isSubmitted()}).length},getNumOfGradedAttempts:function(){return this.filter(function(e){return e.isGraded()}).length},isAllGradedAndPosted:function(){return this.length>0&&this.every(function(e){return e.isCompleted()})},getAttemptIndexById:function(e){return o.findIndex(this,function(t){return t.id===e})}}}})}])},t6LR:function(e,t){e.exports='<div ng-if="conversionStatusBarController.showStatusBar && !conversionStatusBarController.inPreview"\n     class="conversion-status-bar import-learn-bar" ng-class="{\'below\': conversionStatusBarController.hideStatusBar()}"\n     bb-load-bundle="components/directives/conversion-status-bar" role="banner">\n  <div class="conversion-prompt-container">\n    <div class="conversion-prompt-title" bb-translate="course.conversion.statusBar.useUltraPromptTitle" course-org-token-resolver>\n    </div>\n    <div class="conversion-prompt-details" bb-translate="course.conversion.statusBar.useUltraPromptDetails" course-org-token-resolver>\n    </div>\n    <a class="hide-for-medium-only hide-for-small-only" href="https://help.blackboard.com/001_574en_US"\n        bb-translate="course.conversion.statusBar.moreInfoLink" target="_blank" rel="noopener noreferrer"\n        analytics-id="course.conversion.statusBar.moreInfoLink"></a>\n  </div>\n  <div class="conversion-button-container">\n    <a href="javascript:void(0);" class="js-back-to-classic conversion-button conversion-return-classic show-for-large-up"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic">\n      <bb-translate course-org-token-resolver>course.conversion.statusBar.backToClassic</bb-translate>\n    </a>\n    <button class="js-back-to-classic conversion-button conversion-return-button button button--secondary"\n        ng-click="conversionStatusBarController.backToClassic()" component-key="conversionBackToClassic"\n        analytics-id="course.conversion.statusBar.backToClassic.button">\n      <span bb-translate="course.conversion.statusBar.backToClassic" course-org-token-resolver></span>\n    </button>\n    <button class="js-use-new-ux conversion-button button default" ng-click="conversionStatusBarController.useTheNewExperience()"\n            bb-confirmation-needed="resource/x-bb-course-conversion" show-type="always"  confirmation-course-org-token-resolver\n            analytics-id="course.conversion.statusBar.useUltra.button">\n      <span bb-translate="course.conversion.statusBar.useUltra" course-org-token-resolver></span>\n    </button>\n  </div>\n</div>'},t6zR:function(e,t,n){"use strict";var r,i,o=n("wDWF"),s=function(){function e(){}return e.getBasePageStorageKey=function(){return r||(r="ultra.ui.basepage."+o.a(e.userId)),r},e.getPeekPageStorageKey=function(){return i||(i="ultra.ui.peekpage."+o.a(e.userId)),i},e}();t.a=s},tELe:function(e,t,n){e.exports=n("ZJ/X")(395)},tPPx:function(e,t,n){"use strict";n.r(t),n.d(t,"KnownCourseRoleIdentifier",function(){return u}),n.d(t,"toBeLocalizedRoleLabels",function(){return l}),n.d(t,"toBeLocalizedOrgRoleLabels",function(){return d}),n.d(t,"serviceName",function(){return p}),n.d(t,"USER_API_PATH",function(){return f});var r=n("mrSG"),i=(n("TeAI"),n("5MwF")),o=n("Rjd/"),s=n("yCC5"),a=n("oSB+"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.Instructor=new t("P"),t.Facilitator=new t("BB_FACILITATOR"),t.TeachingAssistant=new t("T"),t.Grader=new t("G"),t.CourseBuilder=new t("B"),t.Student=new t("S"),t.Guest=new t("U"),t}(n.n(a).a),c={S:0,T:1,B:2,G:3,BB_FACILITATOR:4,P:5,U:6},l={S:"global.course.role.S",P:"global.course.role.P",BB_FACILITATOR:"global.course.role.BB_FACILITATOR",T:"global.course.role.T",B:"global.course.role.B",G:"global.course.role.G",U:"global.course.role.U"},d={S:"global.organization.role.S",P:"global.organization.role.P",BB_FACILITATOR:"global.organization.role.BB_FACILITATOR",T:"global.organization.role.T",B:"global.organization.role.B",G:"global.organization.role.G",U:"global.organization.role.U"},p=s.S,f=i.a.apiBasePath+"/v1/roles/courseRoles";o.a.factory(p,["restmod",function(e){return e.model(f).mix({localizedCourseName:{mask:!0},$extend:{Collection:{loadLocalizedNames:function(e){return this.forEach(function(t){t.isRemovable?t.localizedRoleName=t.courseName.rawValue:t.localizedRoleName=e?"global.organization.role."+t.identifier.toString():"global.course.role."+t.identifier.toString()}),this},sortByStudentFirst:function(e){return this.$action(function(){this.sort(function(t,n){var r=t.identifier.toString(),i=n.identifier.toString();if(r in c&&i in c)return c[r]-c[i];if(r in c&&!(i in c))return-1;if(!(r in c)&&i in c)return 1;var o=void 0,s=void 0;return"organization"===e?(o=t.orgName.languageKey,s=n.orgName.languageKey):(o=t.courseName.languageKey,s=n.courseName.languageKey),o>s?1:o<s?-1:0})})}}}})}])},tcaZ:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return c});var r=n("IbG+"),i=n("5KgE"),o="ultra.components.directives.firstTimeContainer",s=function(){function e(e,t,n,r,i,o,s,a,u){this.element=e,this.scope=t,this.ftueType=n,this.componentKey=r,this.isAlwaysShown=o,this.priority=s,this.panelName=a,this.isInitialHide=u,this.display=e.css("display"),e.css("display","none"),this.manager=i.manager}return e.prototype.registerToManager=function(){this.manager&&(this.hide(),this.manager.registerFTUEComponent(this))},e.prototype.deregisterFromManager=function(){this.manager&&this.manager.deregisterFTUEComponent(this)},e.prototype.hideAndInformManager=function(){this.hide(),this.manager&&this.manager.onComponentHidden(this)},e.prototype.showByManager=function(){this.scope&&(this.element.css("display",this.display),this.scope.isShown=!0)},e.prototype.hideByManager=function(){this.hide()},e.prototype.hide=function(){this.scope&&(this.scope.isShown=!1)},e.prototype.showComponent=function(){this.manager.showFTUEComponentAsync()},e}(),a=50,u={};function c(e){var t=e.priority||a;t<0&&(t=a),u[e.name]=t}function l(e,t){var n=e.priority||u[e.ftueType]||a;n<0&&(n=a);var r=t.priority||u[t.ftueType]||a;return r<0&&(r=a),n-r}var d=function(){function e(e,t){this.firstTimeHelper=e,this.$modalStack=t,this.components=[],this.ftueTargets={},this.hasStartedShowing=!1}return e.prototype._getFTUETargetsByComponentKey=function(e){return this.ftueTargets?this.ftueTargets[e]:null},e.prototype.registerFTUEComponent=function(e){var t=this;if(this.components.length){if(this.components.indexOf(e)>=0)return;for(var n=this.components.length-1;l(e,this.components[n])<0&&!(--n<0););this.components.splice(n+1,0,e)}else this.components.push(e);!this.hasStartedShowing||this.currentShownComponent||this.getFirstComponentToShowPromise||e.isInitialHide||(this.getFirstComponentToShowPromise?this.getFirstComponentToShowPromise.then(function(e){e||t.showFTUEComponentAsync()}):this.showFTUEComponentAsync())},e.prototype.deregisterFTUEComponent=function(e){var t=this;if(this.getFirstComponentToShowPromise)this.getFirstComponentToShowPromise.then(function(){return t.deregisterFTUEComponent(e)});else{var n=this.components.indexOf(e);n<0||(this.components.splice(n,1),this.currentShownComponent&&this.currentShownComponent.componentKey===e.componentKey&&(this.currentShownComponent.hideByManager(),this.onComponentHidden(this.currentShownComponent,!0)))}},e.prototype.registerFTUETarget=function(e){this.ftueTargets[e.componentKey]=this.ftueTargets[e.componentKey]||[];var t=this.firstTimeHelper.isPredictComponent(e.componentKey);if(!this.ftueTargets||this.ftueTargets[e.componentKey].length>0&&!t||this.ftueTargets[e.componentKey].push(e),this.hasStartedShowing&&this.currentShownComponent){var n=this.currentShownComponent.componentKey;e.componentKey===n&&e.showByManager()}},e.prototype.deregisterFTUETarget=function(e){this.ftueTargets[e.componentKey]=null},e.prototype.startShowFTUEComponent=function(e){var t=this;e.$watch(function(){return t.$modalStack.getTop()},function(e){if(null==e){if(t.hasStartedShowing)return void console.error("FTUE component already started to show.");t.hasStartedShowing=!0,t.showFTUEComponentAsync()}else t.hasStartedShowing=!1,t.currentShownComponent&&t.currentShownComponent.hideByManager()})},e.prototype.hideComponent=function(e){var t=this;this.getFirstComponentToShowPromise?this.getFirstComponentToShowPromise.then(function(n){t.hideComponent(e)}):this.currentShownComponent&&this.currentShownComponent.componentKey===e&&(this.currentShownComponent.hideByManager(),this.onComponentHidden(this.currentShownComponent))},e.prototype.onComponentHidden=function(e,t){if(this.currentShownComponent===e){this.currentShownComponent=null;var n=this.ftueTargets[e.componentKey];n&&n.forEach(function(e){e.hideByManager()}),t||this.firstTimeHelper.hide(e.componentKey),this.showFTUEComponentAsync()}},e.prototype.showFTUEComponentAsync=function(){var e=this;0!==this.components.length&&(this.getFirstComponentToShowPromise=this.getFirstComponentToShowAsync(0).then(function(t){return t&&(e.currentShownComponent=t,t.showByManager(),e.ftueTargets[t.componentKey]&&e.ftueTargets[t.componentKey].forEach(function(e){e.showByManager()})),e.getFirstComponentToShowPromise=null,t}))},e.prototype.getFirstComponentToShowAsync=function(e){var t=this,n=this.components[e].componentKey;return this.firstTimeHelper.shouldShow(n,this.components[e].panelName,this.components[e].isAlwaysShown).then(function(n){return n?t.components[e]:e<t.components.length-1?t.getFirstComponentToShowAsync(e+1):null})},e}(),p=function(){function e(e,t){this.firstTimeHelper=e,this.$modalStack=t,this.manager=new d(e,t)}return e.$inject=[i.b,"$modalStack"],e}(),f=function(){this.restrict="AE",this.controller=p,this.link=function(e,t,n,r){r.manager.startShowFTUEComponent(e),e.$on("hide-ftue-component",function(e,t){r.manager.hideComponent(t)})}};r.module(o,[i.a]).directive("bbFirstTimeContainer",["$injector",function(e){return e.instantiate(f)}])},"td+C":function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var r=n("mrSG"),i=n("IbG+"),o=n("5MwF"),s=n("z1U9"),a=n("Q/M7"),u=n("aHpC"),c=n("6vR2"),l=n("TWx7"),d=n("622u"),p="ultra.components.services.integration",f="integration",m=function(){function t(e,t){var n=this;this.$document=e,this.$window=t,this.helloMessageListener=function(e){if(n.integrations&&e.data&&e.data.type===d.e){var t=Array.from(n.integrations.values()).find(function(t){return Object(a.i)(t.url)===e.origin&&t.iframe.contentWindow===e.source});if(t){var r=new MessageChannel;t.integrationChannel=r.port1,t.integrationChannel.onmessage=function(e){n.onIntegrationMessage(e.data,t)},t.iframe.contentWindow.postMessage({type:d.e},e.origin,[r.port2])}else console.warn("Could not find a valid integration for message")}},this.onIntegrationMessage=function(e,t){if(e){var r=l.a.authScopes.get(e.type);if(r)if(!r(e,t))return;var i=n.integrationMessageEvents.get(e.type);i?i(e,t):console.warn("No valid method to call with provided event type "+e.type+".")}},this.sendAuthorizationError=function(e,t){var r={type:d.q,errorInformation:t};e.integrationChannel.postMessage(r),n.removeIframe(e)},this.sendEventMessage=function(e,t){var r=n.subscriptions.get(e.eventType);r&&(t?[n.findIntegration(t)]:r).forEach(function(t){t&&t.integrationChannel.postMessage(Object(c.a)(e))})},this.findIntegration=function(e){return n.integrations.get(e)},this.subscribeToEvents=function(e,t){e.subscriptions.forEach(function(e){if(n.checkIfValidSubscription(e)){var r=n.subscriptions.get(e)||new Set;r.add(t),n.subscriptions.set(e,r)}else console.warn("Received subscription to invalid event type "+e)})},this.unsubscribeFromEvents=function(e,t){e.subscriptions.forEach(function(e){if(n.subscriptions.has(e)){var r=n.subscriptions.get(e);r.delete(t),n.subscriptions.set(e,r)}})},this.checkIfValidSubscription=function(e){return Object.values(d.h).some(function(t){return t===e})},this.removeIframe=function(e){n.$document.find("body").find("#"+e.iframe.id).remove()},this.subscriptions=new Map,this.integrations=new Map,this.integrationMessageEvents=new Map}return t.prototype.init=function(){return r.__awaiter(this,void 0,Promise,function(){var e;return r.__generator(this,function(t){switch(t.label){case 0:if(!o.a.features.integrationFramework)return[2,null];if(this.isSafeMode())return console.warn("In integration safe mode -- not loading integrations"),[2,null];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(s.fetchLtiPlacements)({type:s.PlacementType.UltraUI})];case 2:return e=t.sent(),this.$window.addEventListener("message",this.helloMessageListener),this.initIntegrationMessageTypes(),this.loadIntegrations(e),[2,e];case 3:return t.sent(),[2,null];case 4:return[2]}})})},t.prototype.loadIntegrations=function(t){var n=this;!t||this.integrations&&this.integrations.size>0||Object.entries(t).forEach(function(t){var r=t[0],i=t[1];if(i.availability.available===s.PublicAvailability.Yes){var o=e('<iframe id="'+i.id+'" src="'+Object(a.c)(i.launchLink)+'"></iframe>').hide();n.appendIframeToDocument(o),n.integrations.set(r,{id:r,hasAuthorized:!1,iframe:o[0],url:i.url,authScopes:new Set})}})},t.prototype.appendIframeToDocument=function(e){this.$document.find("body").append(e)},t.prototype.isSafeMode=function(){return"true"===Object(a.m)("noExtensions",this.$window.location.href)},t.prototype.addIntegrationMessageType=function(e,t){this.integrationMessageEvents.get(e)||this.integrationMessageEvents.set(e,t)},t.prototype.initIntegrationMessageTypes=function(){this.addIntegrationMessageType(d.c,this.sendAuthorizedMessage),this.addIntegrationMessageType(d.p,this.subscribeToEvents),this.addIntegrationMessageType(d.r,this.unsubscribeFromEvents)},t.prototype.sendAuthorizedMessage=function(e,t){return r.__awaiter(this,void 0,Promise,function(){var n,i,o,a,u,c,l,p,f;return r.__generator(this,function(r){switch(r.label){case 0:if(!e||!e.token)return[2,this.sendAuthorizationError(t,"Received authorized message without token")];n=e.token,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,Object(s.fetchAccessTokenInfo)(n)];case 2:return null==(i=r.sent()).scope?(o="Could not authenticate, no auth scopes provided for "+t,[2,this.sendAuthorizationError(t,o)]):(t.authScopes=new Set(i.scope.split(/\s+/)),t.integrationChannel.postMessage({type:d.c}),[3,4]);case 3:return a=r.sent(),c=(u=a).error&&u.error.error,l="invalid_request"===c,p=u.error&&u.error.error_description,f=l?"Expired or invalid token.":"Server side error occurred: "+c+", "+p,[2,this.sendAuthorizationError(t,f)];case 4:return[2]}})})},t=r.__decorate([r.__param(0,Object(u.b)("$document")),r.__param(1,Object(u.b)("$window"))],t)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(m);i.module(p,[]).service(f,m)}).call(this,n("EVdn"))},tfZW:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("mrSG"),i=n("rtTK"),o=n.n(i),s=function(){function e(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.onOverrideAdded=function(e){this.overrideAddedHandlers.add(e)},e.prototype.notifyOverrideAdded=function(e){this.overrideAddedHandlers.forEach(function(t){try{t(e)}catch(e){}})},e.normalizeLocale=function(e){return e.toLocaleLowerCase().replace(/_/g,"-")},Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"siteId",{get:function(){return this._siteId},enumerable:!0,configurable:!0}),e.prototype.setOverrideLocation=function(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t},e.prototype.addOverrideBundle=function(t,n){t=e.normalizeLocale(t);var r=e.normalizeLocale(n),i=e.getFallbackLocale(r);this.overrideBundles[t]={ultraLocale:r,localeForPath:n},this.baseLocaleMap[t]=this.baseLocaleMap[r]=i,this.notifyOverrideAdded(t)},e.prototype.getOverridePathForLocale=function(t){return t=e.normalizeLocale(t),this.overrideBundles[t]?(this.overridePathPromises[t]||(this.overridePathPromises[t]=this.internalGetOverridePath(t)),this.overridePathPromises[t]):Promise.resolve(null)},e.prototype.internalGetOverridePath=function(e){return r.__awaiter(this,void 0,void 0,function(){var t,n,i;return r.__generator(this,function(r){switch(r.label){case 0:return t=this.overrideBundles[e].ultraLocale,n=this.overrideBundles[e].localeForPath,[4,this.getPathToLocale(n)];case 1:return i=r.sent(),t&&i?[2,{path:i,ultraLocale:t}]:[2,null]}})})},e.getFallbackLocale=function(e){return e.split("-").slice(0,-1).join("-")},e.prototype.getPreferredLocales=function(t){if(t=e.normalizeLocale(t),!this.overrideBundles[t])return[t];var n=this.overrideBundles[t].ultraLocale;return[n,e.getFallbackLocale(n)].filter(function(e){return!!e})},e.prototype.getPathToLocale=function(e){return r.__awaiter(this,void 0,void 0,function(){var t,n,i;return r.__generator(this,function(r){switch(r.label){case 0:if(!this._root||!this._siteId)return[2,null];r.label=1;case 1:return r.trys.push([1,5,,6]),void 0!==this.pathMap[e]?[3,4]:(t=this._root+"/"+this._siteId+"/mapping.json",[4,fetch(t)]);case 2:return(n=r.sent()).ok?[4,n.json()]:(this.pathMap[e]=null,[2,null]);case 3:if(!(i=r.sent())[e])return this.pathMap[e]=null,[2,null];this.pathMap[e]=""+this._root+i[e][0].url,r.label=4;case 4:return[2,this.pathMap[e]];case 5:return r.sent(),[2,null];case 6:return[2]}})})},e.prototype.getBaseLocale=function(t){return t=e.normalizeLocale(t),void 0===this.baseLocaleMap[t]?"":this.baseLocaleMap[t]||"en"},e.loadFromRemotePath=function(e){return r.__awaiter(this,void 0,void 0,function(){var t;return r.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(e)];case 1:return(t=n.sent()).ok?[4,t.json()]:[2,{}];case 2:return[2,n.sent()];case 3:return n.sent(),[2,{}];case 4:return[2]}})})},r.__decorate([o.a],e,"normalizeLocale",null),r.__decorate([o.a],e,"getFallbackLocale",null),e}()},tuHw:function(e,t){e.exports='<div id="body-content" class="tools-frame" ng-controller="ultra.legacy.tool.controller">\n  <div id="side-panel" class="tools-overlay full bb-offcanvas-right side-panel">\n    <div class="panel-wrap">\n      <header class="panel-header">\n        <div class="columns" id="global-title">\n          <h1 class="panel-title ng-scope" bb-translate="{{tool.getToolTitleByKey(legacyTool.toolName)}}"></h1>\n          <button class="left-off-canvas-toggle menu-toggle" aria-expanded="true"\n                  analytics-id="base.tools.frame.menu.button">\n            <bb-svg-icon size="small" icon="main-menu"></bb-svg-icon>\n            <span class="sr-only" bb-translate>base.menu</span>\n          </button>\n        </div>\n      </header>\n      <div class="iframe-wrapper">\n        <iframe name="legacy-tool-iframe" bb-iframe-max-height seamless="seamless" ng-src="{{::legacyTool.getUrl()}}"\n                bb-iframe-event-repeater="keydown"\n                bb-translate-attrs="{\'title\': \'{{tool.getToolTitleByKey(legacyTool.toolName)}}\'}"></iframe>\n      </div>\n    </div>\n  </div>\n</div>\n'},uC9d:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=n("LvDl"),i="learnApiCacheMessageService",o=function(){this.listen=r.noop,this.clearCache=r.noop},s=function(){function e(e){var t=this;this.$rootScope=e,this.init=function(){t.clearCacheOnLearnScreenClose()},this.clearCacheOnLearnScreenClose=function(){return t.$rootScope.$on("$stateChangeStart",function(e,n,r,i){-1!==["base.admin","base.courses.peek.course.classic.outline"].indexOf(i.name)&&t.clearCache()})},this.clearCache=function(e){return t.cacheServiceCallback({type:"clear",pattern:e})},this.listen=function(e){t.cacheServiceCallback=e},this.init()}return e.$inject=["$rootScope"],e}()},uNsL:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.content-collection.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-collection",{url:"/contentcollection?parentId&positionBefore&positionAfter",require:function(){return Promise.all([n.e(0),n.e(333)]).then(n.bind(null,"tsxV"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content-collection/content-collection")])}]},panelClass:"full",pageTitle:"course.contentCollection.contentCollection",peekStates:["content-collection-edit","content-collection-picker","content-collection-settings"],peekViewName:"content-collection-child@"}).peekState("content-collection-edit",{url:"/edit",require:function(){return n.e(327).then(n.bind(null,"klLK"))},panelClass:"peek",pageTitle:"course.contentCollection.itemSettings",peekStates:[],params:{items:null,fileRow:null}}).peekState("content-collection-settings",{url:"/settings",require:function(){return n.e(364).then(n.bind(null,"ks8w"))},panelClass:"peek",pageTitle:"course.contentCollection.browserSettings",peekStates:[]}).peekState("content-collection-picker",{url:"/picker?pickerType&multi",require:function(){return n.e(363).then(n.bind(null,"sSTc"))},panelClass:"full",pageTitle:"course.contentCollection.browseContentCollection",peekStates:[],params:{pickerType:"File",multi:"true"}})}])},uXMc:function(e,t,n){var r=n("4BeY"),i=n("IaFt"),o=new r({id:"icon-large-post",use:"icon-large-post-usage",viewBox:"0 0 38 38",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 38 38" id="icon-large-post"><g fill="none" fill-rule="evenodd"><path fill="#E0E0E0" d="M9.548 18.726V31.85l8.47-5.893-2.022-1.889L35.415 5.824z" /><path stroke="#767676" stroke-linejoin="round" d="M35.414 5.825l-25.866 12.9V31.85l8.47-5.892-2.022-1.889z" /><path fill="#FFF" d="M15.667 23.575l9.208 9.088a.926.926 0 0 0 1.533-.373L35.452 5.8 15.667 23.575z" /><path stroke="#767676" stroke-linejoin="round" d="M15.667 23.575l9.208 9.088a.926.926 0 0 0 1.533-.373L35.452 5.8 15.667 23.575z" /><path fill="#FFF" d="M9.034 18.65L35.451 5.8 3.36 11.65c-.796.146-1.05 1.184-.415 1.696l6.09 5.304z" /><path stroke="#767676" stroke-linejoin="round" d="M9.034 18.65L35.451 5.8 3.36 11.65c-.796.146-1.05 1.184-.415 1.696l6.09 5.304zm.586 13.2l6.047-8.269" /></g></symbol>'});i.add(o);e.exports=o},uXzy:function(e,t){e.exports='<bb-modal id="notification-modal-api-error"\n          class="notification"\n          modal-title-key="components.services.error-modal.error.title"\n          analytics-id-tag-prefix="components.services.error-modal">\n  <div name="modal-contents">\n    <p>{{ errorString }}</p>\n  </div>\n  <button name="modal-footer-button-primary"\n          ng-click="$parent.$dismiss()"\n          class="button js-primary-button"\n          analytics-id="components.services.error-modal.dismiss"\n          bb-translate>components.services.error-modal.dismiss</button>\n</bb-modal>'},ukqj:function(e,t,n){},vLHv:function(e,t){e.exports='<div class="square-toggle">\n  <input class="toggle-input input-one"\n         ng-checked="property === oneViewValue"\n         aria-checked="{{property === oneViewValue}}"\n         id="square-toggle-option-one-{{ ::squareToggle.oneControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.oneControlId }}"\n         type="radio"\n         value="{{ ::oneViewValue }}"\n         aria-controls="{{ ::oneAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::oneTooltipTemplate }}"\n         tooltip-scope="oneTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option1.input.radio">\n  <label class="toggle-label input label-one js-label-{{oneIconClass}}"\n         for="square-toggle-option-one-{{ ::squareToggle.oneControlId }}">\n    <bb-svg-icon size="custom" icon="{{oneIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::oneAriaLabel }}</span>\n  </label>\n  <input class="toggle-input input-two"\n         ng-checked="property === twoViewValue"\n         aria-checked="{{property === twoViewValue}}"\n         id="square-toggle-option-two-{{ ::squareToggle.twoControlId }}"\n         name="square-toggle-name-{{ ::squareToggle.twoControlId }}"\n         type="radio"\n         value="{{ ::twoViewValue }}"\n         aria-controls="{{ ::twoAriaControls }}"\n         ng-click="squareToggle.handleClick($event)"\n         ng-keyup="squareToggle.handleKeyUp($event)"\n         enhanced-tooltip="true"\n         tooltip-template="{{ ::twoTooltipTemplate }}"\n         tooltip-scope="twoTooltipScope()"\n         tooltip-position="bottom"\n         tooltip-disable-on-mouse-over="true"\n         analytics-id="{{analyticsIdTagPrefix}}.option2.input.radio">\n  <label class="toggle-label input label-two js-label-{{twoIconClass}}"\n         for="square-toggle-option-two-{{ ::squareToggle.twoControlId }}">\n    <bb-svg-icon size="custom" icon="{{twoIconClass}}"></bb-svg-icon>\n    <span class="sr-only" bb-translate>{{ ::twoAriaLabel }}</span>\n  </label>\n  <a href="javascript:void(0);" class="button" role="presentation" tabindex="-1"\n     analytics-id="{{analyticsIdTagPrefix}}.presentation.link"></a>\n</div>'},vT39:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return a});var r=n("mrSG"),i=n("LvDl"),o=n("0JpG"),s=n("6Ksg"),a="ultra.directives.validate.bbmlmarkup.sanitize",u={style:function(e){return null},":default":function(t){var n=e("<span></span>");return n.text(t.text()),n}},c=function(t){function n(n,r){var o=t.call(this,n,r)||this;return o.validate=function(t){if(null===o.whitelist)return!0;var n=!0;if(1!==t[0].nodeType)return!0;var r=t[0].tagName.toLowerCase();if(o.whitelist.hasOwnProperty(r)){var s=o.whitelist[r];i.each(Array.prototype.slice.apply(t[0].attributes),function(e){s.hasOwnProperty(e.name.toLowerCase())||(t.removeAttr(e.name),n=!1)})}else{n=!1;var a=(u[r]||u[":default"])(t);if(null===a)return t.remove(),!1;t.replaceWith(a),t=a}return i.each(t.children(),function(t){n=o.validate(e(t))&&n}),n},o.getValidator=function(t,n,r,s){return function(t){var r=o.$q.defer();return o.initialWhitelist().then(function(){var a=!0,u=e("<span></span>");u.html(t),i.each(u,function(t){a=o.validate(e(t))&&a}),a||s.$setViewValue(n.html()),r.resolve()}),r.promise}},o}return r.__extends(n,t),n.$inject=["$q","$http"],n}(s.a);angular.module(a,[o.moduleName]).directive("bbSanitizeBbmlMarkup",["$injector",function(e){return e.instantiate(c)}])}).call(this,n("EVdn"))},vWx0:function(e,t,n){"use strict";var r=n("mrSG"),i=(n("VZTK"),n("IbG+")),o=n("Sa5G"),s=n("w9Zy"),a=n("bF8R"),u=n("vdfi"),c=n("Fvsw"),l=n("JXhc"),d=n("jhBu"),p=n("0JpG"),f=n("pjml"),m=n("Qbdf"),h=n("TnpK"),g=n("gkef"),v=(n("UC5D"),n("LvDl")),b=n("yC9S"),y=n("5MwF"),S=n("Y/dt"),C=n("z6Q5"),w=n("fYJU"),$=n("12mu"),k=n("lEL+"),T=n("4KGR"),I="ultra.modules.groupattempt.activities",E="ultra.services.groupattempt.activities",P="ultra.services.groupattempt.activities.dialog",A=new RegExp("assessment\\.overview\\.attempt("+h.a.replace(/\./g,"\\.")+".+)?$"),x={USER_CANCELLED:"USER_CANCELLED",USER_RELEASE_CONTROL:"USER_RELEASE_CONTROL",USER_REJECT_CONTROL:"USER_REJECT_CONTROL"},D=i.module(I,["ng"]);D.factory(E,["$injector","$q","$log","$http","$rootScope",w.b,k.b,h.d,function(e){var t=e.get("$q"),n=e.get("$http"),r=e.get("$rootScope"),i=e.get(w.b);return b.b.OnRootScope(r,"$stateChangeError",function(t,n,r){A.test(n.name)&&e.get(h.d).go(n.name.replace(/\.attempt$/,""),r)}),{new:function(e,r){var o=function(e,t){e.userId=t.userId,e.queue=t.queue,e.groupAttemptId=t.groupAttemptId,e.status=t.status},s=t.when(null),a={myId:i.userId,request:function(){var i=this;return s=s.then(function(){var s=t.defer();return n.put(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities",{}).then(function(e){o(i,e.data),s.resolve(i)}),s.promise})},keepAlive:function(i){var u=this;s=s.then(function(s){var c=t.defer();return v.some(u.queue.concat(u.userId),function(e){return u.myId===e})?n({method:"PATCH",url:y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities"}).then(function(e){return o(u,e.data),t.when(i(u)).then(function(e){if(v.some(u.queue.concat(u.userId),function(e){return u.myId===e})&&e){var t=(new Date).getTime(),n=function(){window.requestAnimationFrame(function(){(new Date).getTime()-t>=5e3?a.keepAlive(i):n()})};n()}})}).finally(function(){c.resolve(u)}):c.resolve(u),c.promise})},release:function(){var i=this;return s=s.then(function(){var s=t.defer();return n.delete(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities").then(function(e){o(i,e.data),s.resolve(i)}),s.promise})},kickout:function(){return s=s.then(function(){return n.delete(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities/waiting")})},peek:function(){var i=this;return s=s.then(function(){var s=t.defer();return n.get(y.a.apiBasePath+"/v1/courses/"+e+"/gradebook/groupAttempts/"+r+"/activities").then(function(e){o(i,e.data),s.resolve(i)}),s.promise})}};return a}}}]),D.factory(P,["$injector","$q","$log","$http","$rootScope",p.serviceName,h.d,$.b,C.b,f.Qb.serviceName,function(e){var t=e.get($.b),n=e.get("$rootScope"),r=e.get(C.b),i=e.get(f.Qb.serviceName),o=e.get(p.serviceName),s="features.course.content.assessment.group-attempt.activities",a=function(e,n){var o=t.open({template:T,scope:e,controller:["$scope",function(e){}]});return o.refresh=function(t){r.performBatch(function(){var n=e.queuedUsers;e.owner&&(n[e.owner.id]=e.owner),e.queuedUsers={},t.userId&&t.userId!==(e.owner||{}).id&&i.$find(t.userId).$then(function(t){e.owner=t}),t.queue.forEach(function(t,r){n.hasOwnProperty(t)?e.queuedUsers[t]=n[t]:i.$find(t).$then(function(n){e.queuedUsers[t]=n})})})},o.scope=e,o.refresh(n),o.result.finally(function(){o.scope.$destroy()}),o};return{openRequest:function(e){var t,r=n.$new();return v.extend(r,{hideOK:!0,modalTranslateOptions:{title:{key:s+".title_group_member_editing"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_taken_by_other_group_member"}),ok:o.translateSync({locale:null,key:s+".takecontrol"}),cancel:o.translateSync({locale:null,key:s+".cancel"})},queuedUsers:{},additionalClass:"requesting",okAction:function(){r.$broadcast(x.USER_REQUEST_CONTROL)},cancelAction:function(){t.dismiss()}}),t=a(r,e)},openNotify:function(e){var t,r=n.$new();return v.extend(r,{hideOK:!1,modalTranslateOptions:{title:{key:s+".title_group_member_requesting"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_taking_by_other_group_member"}),ok:o.translateSync({locale:null,key:s+".leave"}),cancel:o.translateSync({locale:null,key:s+".ignore"})},queuedUsers:{},additionalClass:"notifying",okAction:function(){r.$broadcast(x.USER_RELEASE_CONTROL)},cancelAction:function(){t.dismiss()}}),t=a(r,e)},openDeclined:function(e){var t,r=n.$new();return v.extend(r,{hideCancel:!0,modalTranslateOptions:{title:{key:s+".title_group_member_request_decline"}},modalStrings:{instructions:o.translateSync({locale:null,key:s+".msg_control_request_declined"}),ok:o.translateSync({locale:null,key:s+".ok"})},queuedUsers:{},additionalClass:"declined",okAction:function(){t.dismiss()}}),t=a(r,e)}}}]),D.directive("bbGroupAttemptActivitiesPeek",[h.d,k.b,E,function(e,t,n){return{restrict:"A",link:function(r,i,o){i.addClass("group-attempt-activities-observe");var s=r.$watch(o.bbGroupAttemptActivitiesPeek,function(o){if(o&&s(),o&&o.groupId&&o.isInProgress()){var a=n.new(e.params.courseId,o.id),u=function(){a.peek().then(function(e){e.status&&(o.status=e.status),v.extend(r,{groupAttemptOwnerId:e.userId});var n="group-attempt-has-owner";e.userId?i.addClass(n):i.removeClass(n),t(u,r,5e3)})};u()}})}}}]);var _=function(){function e(e){var t,n=this;this.delegatee=e,this.isResolvingControl=!1,v.forEach(e,function(e,t){n[t]=e});var r=["$injector","$http","$q","$rootScope",k.b,h.d,f.o.serviceName];this.resolve=this.resolve||{};var o=function(e){var r=e.get("$q"),i=e.get("$rootScope"),o=e.get(k.b),s=e.get(h.d),a=e.get(f.o.serviceName),u=e.get(E),c=e.get(P);if(!n.isRelatedState(s.next.name))return r.when(!0);if(n.isResolvingControl)return r.reject();n.isResolvingControl=!0;var l=r.defer(),d=s.nextParams;return a.$new(d.courseId).contents.$find(d.contentId||d.assignmentId).$then(function(e){if(!e.isGroupContent)return l.resolve(!0),void(t=null);(t=u.new(d.courseId,d.attemptId)).peek().then(function(e){if(e.userId&&e.myId!==e.userId){i.$broadcast("hideInitialLoadingArea");var t=c.openRequest(e);t.result.then(function(){},function(){e.release(),l.reject()}),e.request().then(function(){e.keepAlive(function(){return e.myId===e.userId?(t.close(),l.resolve(!0),!1):e.queue.some(function(t){return e.myId===t})?(t.refresh(e),!0):(t.dismiss("ACCESS_CONTROL_TAKEN"),l.reject(),o(function(){c.openDeclined(e)},i,200),!1)})})}else l.resolve(!0)})}),l.promise.finally(function(){n.isResolvingControl=!1})},s=this.resolve;if(s.translateGroupAttemptControl=[p.serviceName,function(e){e.loadBundle("features/course/content/assessment/group-attempt/activities/group-attempt-activities")}],s.attempt){var a=s.attempt;s.attempt=["contentData"].concat(r).concat(function(e,t){var i=t.get("$q"),s=t.get(h.d);return i.when(t.invoke(r.concat(o))).then(function(){return t.invoke(a,null,{contentData:e})}).then(function(e){return n.isRelatedState(s.next.name)&&e.isSubmitted()?(t.get(h.d).goPeekState("assessment.overview.attempt.review",{attemptId:e.id}),i.reject()):e})})}else s.takeControlOnGroupAttempt=r.concat(o);var u=this,c=u.onExit;u.onExit=r.concat(function(e){n.isRelatedState(e.get(h.d).prev.name)&&(c&&e.invoke(c),t&&(t.release(),(u.__childScope||{$destroy:i.noop}).$destroy()))});var l=u.onEnter;u.onEnter=r.concat(function(e){var r=e.get("$rootScope"),i=e.get(P),o=e.get(h.d);if(n.isRelatedState(o.next.name)&&(l&&e.invoke(l),t)){var s,a=!1,c=function(){a=!0},d=function(){a=!1},p=r.$new();p.$on(S.b,c),p.$on(S.d,c),p.$on(S.a,d),p.$on(S.c,d),u.__childScope=p,t.request().then(function(e){e.keepAlive(function(e){return!!a||!!n.isRelatedState(o.current.name)&&(e.userId!==e.myId?(o.leavePeekState(),!1):(e.userId===e.myId&&e.queue.length>0?s?s.refresh(e):((s=i.openNotify(e)).result.then(function(){},function(){e.kickout(),s=null}),s.scope.$on(x.USER_RELEASE_CONTROL,function(){s.close(),r.$broadcast(S.e);var t=p.$on("$stateChangeAbort",function(n,r){"ABORTED_BY_FILE_UPLOAD"===(r||{}).reason&&(t(),e.kickout()),s=null})})):s&&(s.close(),s=null),!0))})})}})}return e.prototype.isRelatedState=function(e){return A.test(e)},e}(),L=n("+O05");n.d(t,"a",function(){return M});var M="ultra.course.content.assessment.routes",N={onEnter:["contentData","attempt",s.e,h.d,"$stateParams",g.b,function(e,t,n,r,i,o){if(this.viewOriginalityReport=i.viewOriginalityReport,!(this.viewOriginalityReport&&!i.forceOpenFeedbackPanel||i.skipTransitionEvents)){r.isPeekPanelOpen()&&n.expandTopPanel();var s=L.a.studentCanViewAttemptGradeAndFeedback(t,e.gradeDetail),a=r.next.name.indexOf("rubric")>=0,u=r.next.name.indexOf("assessment-submission-feedback")>=0,c=!r.prev.name,l=o.isSmallBreakpoint();!s||l||a||u||c||!i.forceOpenFeedbackPanel||r.goPeekState("assessment-submission-feedback",{attemptId:t.id})}}],onExit:["contentData",s.e,h.d,"$q","$stateParams",function(e,t,n,r,i){var o=this;if(!i.skipTransitionEvents&&e.gradingColumn.isMultipleAttempts()){var s=r.when();n.isPeekPanelOpen()&&(s=t.shrinkTopPanel()),s.then(function(){n.goPeekState("assessment.overview.multiple-attempt",{contentId:e.courseContent.id,columnId:e.gradingColumn.id,gradeId:e.gradeDetail.id,courseId:e.courseContent.courseId,viewOriginalityReport:o.viewOriginalityReport})})}}]};i.module(M,[d.a,h.b,u.c,l.c,I,m.b]).config([h.c,m.c,function(e,t){var i;e.peekState("assessment",{abstract:!0,url:"/assessment/{contentId:_[0-9]+_1}?courseId",resolve:(i={},i[m.d]=t.resolve,i)}).peekState("assessment.open",{url:"/open",params:{contentId:null,courseId:null,isCollectExternalSubmissions:!1},routingFunction:[f.o.serviceName,d.b,h.d,function(e,t,n){var r=n.nextParams.contentId,i=n.nextParams.courseId,s=n.nextParams.isCollectExternalSubmissions;t.hasAnyCourseEntitlement([o.j.ViewAssessment,o.j.ModifyAssessment],i).then(function(e){if(e)n.goPeekState("gradebook-item.assessment",{courseId:i,contentId:r,gradeitemView:"details",assessmentType:"test"});else{var t="assessment.overview";s&&(t="assessment.external-overview"),n.goPeekState(t,{courseId:i,contentId:r})}})}]}).peekState("assessment.overview",{url:"/overview",resolve:{contentData:[m.d,a.b,h.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId,contentExtraExpand:"alignedGoals"})}],translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment"),t.loadBundle("components/services/proctoring")])}],onEnter:["contentData",c.b,function(e,t){t.column=e.gradingColumn}],onExit:[c.b,function(e){e.column=null}]},peekViewName:"assessment-overview-peek@",allowChildPeekStates:!0,peekStates:["conversations","message"],pageTitle:"course.content.assessment.overview.pageTitle",require:[function(){return Promise.all([n.e(76),n.e(126)]).then(n.bind(null,"Xcx3"))},function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(69)]).then(n.bind(null,"F2mp"))}]}).peekState("assessment.external-overview",{url:"/external-overview",panelClass:"full",resolve:{contentData:[m.d,a.b,h.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],currentContent:["contentData","$q",function(e,t){return t.when(e.courseContent)}],currentColumn:["contentData","$q",function(e,t){return t.when(e.gradingColumn)}],translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}],onEnter:["contentData",c.b,function(e,t){t.column=e.gradingColumn}],onExit:[c.b,function(e){e.column=null}]},peekViewName:"assessment-overview-peek",allowChildPeekStates:!0,peekStates:["conversations","message","rubric-view","rubric-evaluation"],require:[function(){return Promise.all([n.e(76),n.e(267)]).then(n.bind(null,"2cT1"))},function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(245)]).then(n.bind(null,"8sa/"))}]}).peekState("assessment.overview.attempt",new _({url:"/attempt/{attemptId:_[0-9]+_1}",onEnter:[s.e,h.d,function(e,t){t.isPeekPanelOpen()&&e.expandTopPanel()}],panelClass:"full",resolve:{currentContent:["contentData",function(e){return e.courseContent}],currentColumn:["contentData",function(e){return e.gradingColumn}],attempt:["$q","contentData",f.o.serviceName,h.d,f.C.serviceName,f.H.serviceName,function(e,t,n,r){var i=r.nextParams.attemptId,o=t.courseContent.isGroupContent,s=n.$buildRaw({id:t.courseContent.courseId}).gradebook;return o?t.gradingColumn.getGroupAttemptByGroupAssociationId(t.courseContent.assignedGroups[0].groupAssociationId).then(function(e){if(0===e.attempts.length&&e.isInProgress()){return e.withParams({expand:"attempts,attempts.toolAttemptDetail,toolAttemptDetail"}).$patch(["id"]).$asPromise()}return e.$asPromise()}):s.attempts.$find(i,{expand:["toolAttemptDetail","alignedGoals"].join(",")}).$then(function(e){t.attempt=e}).$asPromise()}]},params:{attemptId:null},peekStates:["conversations","message","assessment-details","edit-file-settings","attempt-safe-assign-setting","rubric-evaluation","rubric-view","lti",u.b,l.b],peekViewName:"assessment-attempt-peek",pageTitle:"course.content.assessment.details.pageTitle",require:[function(){return n.e(271).then(n.bind(null,"mJUP"))},function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(69)]).then(n.bind(null,"F2mp"))}]})).peekState("assessment.overview.multiple-attempt",{panelClass:"peek",url:"/multiple-attempt?columnId&gradeId",resolve:{currentColumn:["contentData",function(e){return e.gradingColumn.$fetch({expand:"associatedRubrics"}).$asPromise()}]},params:{viewOriginalityReport:!1},pageTitle:"course.content.assessment.overview.multiple-attempt.pageTitle",require:[function(){return Promise.all([n.e(0),n.e(2),n.e(9),n.e(37),n.e(334)]).then(n.bind(null,"ykN9"))}]}).peekState("assessment-details",{panelClass:"peek",url:"/details",resolve:{contentData:[m.d,a.b,h.d,function(e,t,n){return t.loadContentAndGrades({course:e,contentId:n.nextParams.contentId})}],translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content/assessment/assessment")])}]},params:{detailsView:!0,submitToGRD:null},require:[function(){return Promise.all([n.e(76),n.e(126)]).then(n.bind(null,"Xcx3"))},function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(69)]).then(n.bind(null,"F2mp"))}],peekStates:["attempt-safe-assign-setting"]}).peekState("assessment.overview.attempt.review",r.__assign({url:"/review",panelClass:"full",resolve:{contentData:["contentData",m.d,a.b,h.d,function(e,t,n,r){return e.gradeDetail.ui.groupAttempt?e:n.loadContentAndGrades({course:t,contentId:r.nextParams.contentId})}]},require:[function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(116)]).then(n.bind(null,"H0q3"))}]},N,{params:{commentPanelInitiallyOpen:!1,viewOriginalityReport:!1,forceOpenFeedbackPanel:!1,skipTransitionEvents:!1,peekStateToOpen:null},peekViewName:"assessment-attempt-review-peek",peekStates:["assessment-submission-feedback","conversations","message","rubric-evaluation","rubric-view","originality-report",l.b]})),e.peekState("assessment-settings",{panelClass:"peek",url:"/assessmentSettings?contentId?focusEleId",require:function(){return Promise.all([n.e(7),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(8),n.e(253)]).then(n.bind(null,"mUfJ"))},pageTitle:"course.content.assessment.windowTitle",resolve:{translations:["$q",p.serviceName,function(e,t){return e.all([t.loadBundle("features/course/goal-alignment/goal"),t.loadBundle("features/course/content/assessment/assessment")])}]},peekViewName:"assessment-settings-peek",allowChildPeekStates:!0,peekStates:["assign-graders","course-group","goal-picker-legacy","rubric","proctoring-lti-tool","question-analysis"]}),e.peekState("assign-graders",{panelClass:"full",url:"/assignGraders",require:function(){return n.e(286).then(n.bind(null,"BTMz"))},pageTitle:"course.content.assessment.settings.delegatedGrading.assignGraders.pageTitle",resolve:{translations:[p.serviceName,function(e){return e.loadBundle("features/course/content/assessment/assessment")}]},peekViewName:"assign-graders-peek"}),e.peekState("attempt-safe-assign-setting",{url:"/safeAssignSetting",require:function(){return Promise.all([n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(312)]).then(n.bind(null,"Sg/T"))},params:{submitToGRD:null}}).peekState("assessment-submission-feedback",{url:"/feedback?userId",require:[function(){return Promise.all([n.e(24),n.e(33),n.e(351)]).then(n.bind(null,"15AK"))},function(){return Promise.all([n.e(7),n.e(24),n.e(0),n.e(2),n.e(1),n.e(3),n.e(4),n.e(5),n.e(6),n.e(115)]).then(n.bind(null,"EPkw"))}],resolve:{translations:[p.serviceName,function(e){return e.loadBundle("features/course/feedback-authoring/feedback-authoring")}],offCanvasArgs:["offCanvasArgs",function(e){return e.overlay=!1,e.disableFocusHandling=!0,e}]},pageTitle:"course.content.assessment.feedback.title"}).peekState("assessment-create-attempt",{url:"/create-attempt?expandId",require:function(){return n.e(326).then(n.bind(null,"IvpR"))},pageTitle:"Create Attempt",panelClass:"peek",params:{callback:null}}).peekState("proctoring-lti-tool",{panelClass:"full",url:"/proctoringLtiTool?toolHref&toolSubtitle",resolve:{translations:[p.serviceName,function(e){return e.loadBundle("components/services/proctoring")}]},require:function(){return n.e(328).then(n.bind(null,"a478"))},pageTitle:"components.services.proctoring.ltiTool.pageTitle"})}])},vYaK:function(e,t,n){"use strict";n.r(t),n.d(t,"serviceName",function(){return p});n("TeAI");var r=n("LvDl"),i=n("5MwF"),o=n("ZQey"),s=n("yCC5"),a=n("pjml"),u=n("Rjd/"),c=n("nkTj"),l=n("z1U9"),d=n("Sa5G");n.d(t,"ILearnCourse",function(){return l.ILearnCourse}),n.d(t,"CourseDuration",function(){return l.CourseDuration}),n.d(t,"CourseUltraStatus",function(){return l.CourseUltraStatus});var p=s.t;u.a.factory(p,["restmod","$q","$http",c.d,function(e,t,n,u){var c=u.createHooksToFetchParent("course"),p=e.model(i.a.apiBasePath+"/v1/courses").mix({announcements:{hasMany:s.e},assessments:{hasMany:s.f},calendarItems:{hasMany:s.v,path:"calendars/calendarItems"},calendars:{hasOne:s.u},collab:{hasOne:s.w},collabUltra:{hasOne:s.y,path:"collabultra"},contents:{hasMany:s.A},conversions:{hasMany:s.s,path:"convertToUltra"},forums:{hasMany:s.I,path:"discussionboards/default/forums"},entitlements:{hasMany:s.G},gradebook:{hasOne:s.Y},instructorsMembership:{mask:"CU",hasMany:s.N,path:"memberships?roleBucket="+d.k.TEACHING.toString()},exports:{hasMany:s.H},ltiPlacements:{hasMany:s.ob},memberships:{hasMany:s.N,hooks:c},membershipInvites:{hasMany:s.O,path:"membershipInvites"},messageFolders:{hasMany:s.Q},conversations:{hasMany:s.B},notifications:{hasMany:s.rb},preferences:{hasMany:s.R},schedule:{hasMany:s.T},term:{belongsTo:s.uc,key:"termId"},users:{hasMany:s.N,hooks:c},groups:{hasMany:s.K},rubrics:{hasMany:s.Xb,path:"rubrics"},analyticsReports:{hasMany:s.c,path:"analyticsReports"},tools:{hasMany:s.xc,path:"tools"},contentHandlers:{hasMany:s.xc,path:"contentHandlers"},indicators:{mask:!0,hasMany:s.M,path:"contents/indicators"},startDate:{serialize:"date"},endDate:{serialize:"date"},scormReportItems:{hasMany:s.Zb,path:"scormReportContents"},studentPreview:{hasOne:s.cc,path:"spreview"},ui:{mask:!0,init:function(){return{convertToUltraTaskStatus:"?"}}},isUndecided:function(){return l.CourseUltraStatus.Undecided.isEqualTo(this.ultraStatus)},isClassic:function(){return l.CourseUltraStatus.Undecided.isEqualTo(this.ultraStatus)||l.CourseUltraStatus.Classic.isEqualTo(this.ultraStatus)},isUltraConfirmed:function(){return l.CourseUltraStatus.Ultra.isEqualTo(this.ultraStatus)},isUltra:function(){return l.CourseUltraStatus.Ultra.isEqualTo(this.ultraStatus)||this.isUltraPreview()},isUltraPreview:function(){return l.CourseUltraStatus.UltraPreview.isEqualTo(this.ultraStatus)},setUltraStatusDecided:function(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:l.CourseUltraStatus.Ultra.toString()}},function(e){this.ultraStatus=e.data.ultraStatus}).$asPromise()},chooseClassicCourseView:function(){return this.$send({method:"PATCH",url:this.$scope.$url()+"/"+this.id,data:{ultraStatus:l.CourseUltraStatus.Classic.toString()}},function(e){this.$unwrap(e.data)}).$asPromise()},isOpen:function(){return!0===this.isAvailable&&!1===this.isClosed},isOpenClassic:function(){return this.isOpen()&&this.isClassic()},isOpenNonClassic:function(){return this.isOpen()&&!this.isClassic()},isPrivate:function(){return!1===this.isAvailable},isComplete:function(){return!0===this.isAvailable&&!0===this.isClosed},getStatus:function(){return this.isAvailable?this.isClosed?o.a.Complete:o.a.Open:o.a.Private},setStatus:function(e){o.a.Complete.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!0,this.ui.status=o.a.Complete):o.a.Open.isEqualTo(e)?(this.isAvailable=!0,this.isClosed=!1,this.ui.status=o.a.Open):o.a.Private.isEqualTo(e)&&(this.isAvailable=!1,this.isClosed=!1,this.ui.status=o.a.Private)},canAccess:function(){return this.ui&&this.ui.isExternal?!!this.ui.externalUrl:this.isUndecided()?this.permissions&&this.permissions.chooseUltraStatus:this.effectiveAvailability},canChooseUltraStatus:function(){return this.permissions.chooseUltraStatus},canExport:function(){return this.permissions.export&&!this.isUltraPreview()},canArchive:function(){return this.permissions.archive&&!this.isUltraPreview()},canCopy:function(){return this.permissions.copy},canImport:function(){return this.permissions.import},convertToUltraCourse:function(){var e=this;return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra",data:{id:this.id}},function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle,e.ui.showConversionInProgress=!0,e.ui.showConversionComplete=!1}).$asPromise()},undoCourseConversion:function(){var e=this;return this.ui.convertToUltraTaskId="",this.ui.convertToUltraTaskStatus="",this.$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/undo",data:{id:this.id}},function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle,e.ui.showConversionInProgress=!0,e.ui.showConversionComplete=!1}).$allow([400,404]).$asPromise()},refreshConvertToUltraStatus:function(){var e=this;return this.$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/conversionStatus"},function(t){e.ui.convertToUltraTaskId=t.data.taskId,e.ui.convertToUltraTaskStatus=t.data.taskStatus,e.ui.conversionTaskTitle=t.data.taskTitle}).$allow([404,403]).$asPromise()},getInstructors:function(){return(this.instructorsMembership||[]).map(function(e){return e.user})},getBaseRoute:function(){return this.isOrganization?"base.organizations":"base.courses"},importContents:function(e,t){return this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/imports?fileName="+e+"&fileLocation="+t,data:{cxAction:"CX_ACTION_IMPORT",includeItems:["alignments","announcement","availabilityRule","assessment","content","calendar","collabSessions","glossary","gradebookItems","groups","discussionBoard","settings","staffInformation","tasks","blog","journal","rubric","customArea(bb-retention)","customArea(bb-wiki)"]}},function(e){this.$unwrap(e.data)}).$asPromise()},copyCourse:function(e,t,n,r,i,o,s){return void 0===t&&(t=!1),this.$scope.$build().$send({method:"POST",url:this.$scope.$url()+"/"+this.id+"/copy",data:{srcCourseId:e,contentOnly:t,contentItems:n,targetContentId:r,positionBefore:i,positionAfter:o,shouldSendNotifyEmail:s}},function(e){this.$unwrap(e.data)}).$asPromise()},getImportCopyTaskStatus:function(e){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/convertToUltra/"+e},function(e){this.$unwrap(e.data)}).$asPromise()},getGranularCopyTaskStatus:function(e){return void 0===e&&(e=[]),this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/ultraConversionReports?taskIds="+e.join()},function(e){this.$unwrap(e.data)}).$asPromise()},getTaskErrorDetailMessages:function(e,t){return t=t||this.$scope.$url()+"/"+this.id+"/ultraConversionReports/"+e+"/messages",this.$scope.$build().$send({method:"GET",url:t},function(e){this.$unwrap(e.data)}).$asPromise()},canConvert:function(){return this.permissions.convert},hasSchedule:function(){return!r.isEmpty(this.schedule)},getLocale:function(){return this.isLocaleEnforced&&this.locale},isToolAvailable:function(e){return this.tools.$resolve().$allow([403]).$asPromise().then(function(t){var n=r(t).filter(function(t){return t.identifier===e}).first();return!(!n||!n.toolEnabledSetting.isAvailable)})},getAnnouncementsCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/announcements/counts"},function(e){this.$unwrap(e.data)}).$asPromise()},getCourseGroupSetCount:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.id+"/groupsets/count"},function(e){this.$unwrap(e.data)}).$asPromise()},getChildrenCourses:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url().replace(i.a.apiBasePath,i.a.apiBasePath+"/public")+"/"+this.id+"/children?fields=id,childCourse.name"}).$allow([400]).$asPromise().then(function(e){return e.$response.data.results&&e.$response.data.results})},attendanceRecordsExist:function(){return this.$scope.$build().$send({method:"GET",url:this.$scope.$url()+"/"+this.$pk+"/attendanceRecords",params:{limit:"1"}}).$suppressErrorDialog().$asPromise().then(function(e){return e.$response.data.results&&e.$response.data.results.length>0})},$extend:{Model:{findCourseByCourseId:function(e,t){void 0===t&&(t=!1);var n=this.$collection().$send({method:"GET",url:this.$url()+"/find",params:{courseId:e}});return t&&(n=n.$allow([404])),n.$asPromise().then(function(e){if(e&&e.$response&&200===e.$response.status)return e.$response&&e.$response.data})}},Record:{getConversationCounts:function(){var e=this.$scope.$url()+"/"+this.$pk+"/conversations/counts";return n.get(e).then(function(e){return e.data})}}},$hooks:{"after-fetch":function(){a.v.sortInstructorsMembership(this.instructorsMembership)},"after-feed":function(e){e.instructorsMembership&&this.instructorsMembership.$decode(e.instructorsMembership)}}});return p.mixinCourses=u.getDataMixin(p.findMany.bind(p),"courseId","course"),p}])},vdfi:function(e,t,n){"use strict";n.d(t,"c",function(){return d}),n.d(t,"d",function(){return p}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return m});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("Sa5G"),a=n("0JpG"),u=n("hlSw"),c=n("TnpK"),l=n("3bn4"),d="ultra.course.content.assessment.content-goal-alignment",p="ultra.course.content.assessment.content-goal-alignment.service",f="content-goal-alignment",m="content-goal-alignment-for-student",h=["course","goal-alignment","goal"],g=function(){function e(e){this.$q=null,this.defers=null,this.cachedGoalAlignment=null,this.isLoading=!1,this.$q=e}return e.prototype.isReady=function(){return null!==this.cachedGoalAlignment||this.isLoading},e.prototype.updataState=function(){this.cachedGoalAlignment=null,this.isLoading=!0},e.prototype.getData=function(){if(null===this.cachedGoalAlignment){this.defers=this.defers||[];var e=this.$q.defer();return this.defers.push(e),e.promise}return this.cachedGoalAlignment},e.prototype.updateData=function(e){var t=this;return this.cachedGoalAlignment=e,this.isLoading=!1,(this.defers||[]).forEach(function(e){e.resolve(t.cachedGoalAlignment)}),this.defers=null,this.cachedGoalAlignment},e.prototype.cleanData=function(){this.cachedGoalAlignment=null,this.isLoading=!1},e}(),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panelClass="peek content-assessment-goal-peek",t}return r.__extends(t,e),t.prototype.getCache=function(e){return t.cache=t.cache||new g(e)},t.prototype.resolveGoalAlignableContent=function(){var e=this;return["$q","currentContent","currentCourse","currentColumn",a.serviceName,"$injector","refreshCache",function(t,n,r,i,a,c,l){if(void 0===l&&(l=!1),n&&!n.id)return t.when([]);var d=e.getCache(t);return!l&&d.isReady()?t.when(d.getData()):(d.updataState(),t.when(null).then(function(){if(!n)return c.invoke(u.a.currentContent,null,{currentCourse:r,translations:{}}).then(function(e){n=e})}).then(function(){if(!i)return c.invoke(u.a.currentColumn,null,{currentCourse:r,currentContent:n}).then(function(e){i=e})}).then(function(){return t.all([r.contents.$find(n.id,{expand:"alignedGoals,permissions"}).$asPromise(),r.assessments.$buildRaw({id:n.getDeployedAssessment().assessment.id}).questions.$fetch({expand:"alignedGoals"}).$asPromise(),r.gradebook.columns.$find(i.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$asPromise(),a.loadBundle("features/"+h.join("/"))]).then(function(t){var n=t[0],i=t[1],u=t[2],c=1,l=i.map(function(e){if(s.A.PresentationOnly.isEqualTo(e.questionType))return e;var t=c++;return o.extend(e,{getContentTitleForGoalAlignment:function(){return a.translateSync({locale:r.locale,key:"components.directives.assessment-question.question-title",params:{index:t}})}})});return e.groupGoals(r.contents.$buildRaw(n),l,u,a)})}).then(function(e){return d.updateData(e)}))}]},t.prototype.getPeekStateName=function(){return f},t.prototype.groupGoals=function(e,t,n,r){var s=n.rubricAssociations&&n.rubricAssociations.length>0?n.rubricAssociations[0].rubricDefinition:{},a=e.isTest()?"goalsAlignedWithTest":"goalsAlignedWithAssignment";return[{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+"."+a})},getContentIdForGoalAlignment:o.bind(e,e.getContentIdForGoalAlignment),isCurrentUserEligibleToAlignGoals:o.bind(e,e.isCurrentUserEligibleToAlignGoals),alignedGoals:e.alignedGoals?e.alignedGoals.map(function(t){return t.content=e,t}):[],coreContent:e},{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+".goalsAlignedWithQuestions"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()+".all.questions"},isCurrentUserEligibleToAlignGoals:function(){return!1},alignedGoals:i.flatten(t.map(function(e){return e.alignedGoals?e.alignedGoals.map(function(t){return t.content=e,t}):[]}))},{getContentTitleForGoalAlignment:function(){return r.translateSync({locale:null,key:h.join(".")+".goalsAlignedWithRubric"})},getContentIdForGoalAlignment:function(){return e.getContentIdForGoalAlignment()+".all.rubricrows"},isCurrentUserEligibleToAlignGoals:function(){return!1},alignedGoals:i.flatten((s.rows||[]).map(function(e){return e.alignedGoals.map(function(t){return e.getContentTitleForGoalAlignment=function(){return e.header},e.getContentIdForGoalAlignment=function(){return"blackboard.plugin.rubric.api.core.data.RubricRow;"+this.id},t.content=e,t})}))}]},t.prototype.getOverrideSubTitle=function(){return["currentCourse","currentContent",function(e,t){return t.id?e.contents.$find(t.id).$asPromise().then(function(e){return e.title}):""}]},t.$inject=["$injector","$q"],t}(l.a),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.resolveGoalAlignableContent=function(e){var t=this;return["$q","currentCourse","contentData",a.serviceName,function(n,r,i,s){var a=n.when(null);return e?a=n.when(e):i.courseContent.isGroupContent&&i.groupAttempt?a=i.gradingColumn.getGroupAttemptByGroupAssociationId(i.courseContent.assignedGroups[0].groupAssociationId):!i.courseContent.isGroupContent&&i.attempt&&(a=r.gradebook.attempts.$find(i.attempt.id,{expand:"toolAttemptDetail,alignedGoals"}).$asPromise()),n.all([i.courseContent.alignedGoals?i.courseContent.$asPromise():r.contents.$find(i.courseContent.id,{expand:"alignedGoals"}).$asPromise(),a,r.gradebook.columns.$find(i.gradingColumn.id,{expand:["associatedRubrics","rubricAssociations.rubricDefinition.alignedGoals","rubricAssociations.rubricDefinition.permissions","rubricAssociations.rubricDefinition.rows.alignedGoals"].join(",")}).$asPromise(),s.loadBundle("features/"+h.join("/")),s.loadBundle("components/directives/assessment/assessment-question")]).then(function(e){var n=e[0],a=e[1],u=e[2],c=[];if(a&&a.$pk){var l=a.getToolAttemptDetailItem(i.gradingColumn.scoreProviderHandle);(l&&l.questionAttempts||[]).forEach(function(e){c.push(o.extend(e.question,{getContentTitleForGoalAlignment:function(){return s.translateSync({locale:r.locale,key:"components.directives.assessment-question.question-title",params:{index:e.visibleQuestionNumber}})},getContentIdForGoalAlignment:function(){return"blackboard.data.qti.asi.AsiObject;"+this.id},isCurrentUserEligibleToAlignGoals:function(){return!1}}))})}return t.groupGoals(n,c,u,s)})}]},t.prototype.getPeekStateName=function(){return m},t.prototype.getOverrideSubTitle=function(){return["contentData",function(e){return e.courseContent&&e.courseContent.title||""}]},t}(v);o.module(d,[c.b,a.moduleName]).config([c.c,function(e){[new v,new b].forEach(function(t){e.peekState(t.getPeekStateName(),t)})}]).value("refreshCache",!1).service(p,["$injector",a.serviceName,function(e){return{alignedGoalsCount:-1,resolveGoalAlignableContents:function(t,n,r,o){var s,a=this;return void 0===o&&(o=!1),e.invoke((new v).resolveGoalAlignableContent(),null,(s={currentCourse:t,currentContent:n,currentColumn:r},s.refreshCache=o,s)).then(function(e){return a.alignedGoalsCount=i.flatten(i.compact(e.map(function(e){return e.alignedGoals}))).length,[e,a.alignedGoalsCount]})},resolveGoalAlignableContentsForStudent:function(t,n,r){return e.invoke((new b).resolveGoalAlignableContent(r),null,{currentCourse:t,contentData:n}).then(function(e){return[e,i.flatten(i.compact(e.map(function(e){return e.alignedGoals}))).length]})}}}])},vhkR:function(e,t,n){"use strict";n.d(t,"b",function(){return C}),n.d(t,"c",function(){return w}),n.d(t,"a",function(){return $});var r=n("mrSG"),i=n("LvDl"),o=n("IbG+"),s=n("pjml"),a=n("4nF1"),u=n("Qbdf"),c=n("0JpG"),l=n("12mu"),d=n("sgjL"),p=n("TnpK"),f=n("Sa5G"),m=n("FBBZ"),h=n("Q/M7"),g=n("fYJU"),v=n("5Jg7"),b=n("oJ2y"),y=n("e6jQ"),S=n("z1U9"),C="ultra.components.services.lti",w="lti",$="geolocation *; microphone *; camera *; midi *; encrypted-media *";var k=function(){function e(e,t,n,r,i,o,s,a,u,c,l,d,p,f,m){this.$q=e,this.$rootScope=t,this.$stateParams=n,this.$window=r,this.cacheFactory=i,this.contextCourse=o,this.bbLocalize=s,this.modalService=a,this.postMessageDispatcherService=u,this.stateService=c,this.CourseModel=l,this.PartnerContentIdModel=d,this.PartnerSettingsModel=p,this.PlacementModel=f,this.contextUser=m,this.shortMaxAge=5e3,this.thirtyMinuteMaxAge=18e5,this.placementCache=i.createCache("PlacementCache",{deleteOnExpire:"passive",maxAge:this.thirtyMinuteMaxAge}),this.placementsCache=i.createCache("PlacementsCache",{deleteOnExpire:"passive",maxAge:this.shortMaxAge})}return e.prototype.configureAndInitInlineLaunch=function(e,t){var n=this.$q.defer(),r=o.fromJson(e);if(r.linkType){if(!f.g.ExternalLink.isEqualTo(r.linkType)&&t&&t.preventDefault(),r.linkRefId){var i={courseId:this.contextCourse.courseId||this.$stateParams.courseId,linkType:f.g.parse(r.linkType),linkRefId:r.linkRefId};return f.g.LtiLink.isEqualTo(r.linkType)&&(i.url=r.url,i.launchInNewWindow=r.launchInNewWindow,r.customParameters&&(i.customParameters=JSON.stringify(r.customParameters))),!f.g.LtiLink.isEqualTo(r.linkType)||"IFRAME"!==r.target&&"embedded-app"!==r.bbtype||(i.renderAsEmbed=!0),(f.g.LtiPlacement.isEqualTo(r.linkType)||f.g.LtiLink.isEqualTo(r.linkType))&&r.linkRefUuid&&(i.linkRefUuid=r.linkRefUuid),this.ltiLaunch(i)}}else n.reject({errorMessage:"Failed to render the iframe from src"});return n.promise},e.prototype.getPlacements=function(e,t){if(void 0===t&&(t=!1),t)return this.PlacementModel.$search(e).$asPromise();var n=this.placementsCache.get(o.toJson(e||{}));return n||(n={promise:this.PlacementModel.$search(e).$asPromise()},this.placementsCache.put(o.toJson(e||{}),n)),n.promise},e.prototype.getAvailablePlacements=function(e,t){return void 0===t&&(t=!1),this.getPlacements(e,t).then(function(e){return e.filter(function(e){return e.isAvailable()})})},e.prototype.ltiLaunch=function(e){var t=this,n=this.$q.defer();return this._getContent(e.courseId,e.content,e.contentId,e.linkType,e.linkRefId).then(function(r){null!==r&&e.showPreLaunchPanel?t._getMembership(e.courseId).then(function(o){t._isGradable(r)&&t._isStudentInCourse(o)?t.stateService.goPeekState("lti.launch",{courseId:r.courseId,contentId:r.id}).then(function(){n.resolve()}).catch(function(e){n.reject({errorMessage:"Failed to open the gradable lti launch panel",errorResponse:e})}):t._ltiLaunch(i.merge(e,{content:r}),n)}):t._ltiLaunch(i.merge(e,{content:r}),n)}),n.promise},e.prototype.launch=function(e,t,n){return void 0===t&&(t=!1),e=h.c(e),e=h.a(e,"from_ultra","true"),t?(this.$window.open(e),"lti-service: Link was launched in a new window."):n?e:(this.stateService.goPeekState("lti.launch-frame",{toolHref:e}),"lti-service: Link was launched in a peek panel.")},e.prototype._ltiLaunch=function(e,t){var n;if(e.content){n=this.getLaunchLinkFromContent(e.content);var r=this.getDomainConfigStatusType(e.content);if(!n){if(r&&s.O.LTIStatusType.NeedsApproval.isEqualTo(r)){var o=this.$rootScope.$new();return o.email=this._getSupportEmail(e.content),o.hasEmail=!!o.email,this.modalService.open({scope:o,template:v,resolve:{translations:[c.serviceName,function(e){return e.loadBundle("features/course/content/course-content")}]}}),void t.resolve()}return void t.reject({errorMessage:"Attempted to launch an LTI link without a valid launchLink."})}}else n=this._getLaunchLinkFromLinkRef(e);this._initLaunchTarget(i.merge(e,{launchLink:n}),t)},e.prototype._initLaunchTarget=function(e,t){var n=this,r=this.getPartnerIdFromLinkRefId(e.linkRefId);if(!r&&e.content&&f.g.PartnerCloud.isEqualTo(e.content.contentHandler)&&e.content&&e.content.contentDetail&&e.content.contentDetail[f.g.PartnerCloud.handle]&&(r=e.content.contentDetail[f.g.PartnerCloud.handle].providerId),e.content)if(f.g.LtiPlacement.startsWith(e.content.contentHandler)||f.g.LtiLink.isEqualTo(e.content.contentHandler)){var i=this._getUrl(e.content);i&&h.n(i)?t.resolve(this.launch(e.launchLink,e.content.launchInNewWindow)):t.resolve(this.launch(h.a(e.launchLink,"target_override","window"),!0))}else f.g.PartnerCloud.isEqualTo(e.content.contentHandler)&&this.PartnerSettingsModel.getSettingsById(r).then(function(r){return t.resolve(n.launch(e.launchLink,!r.responsive))});else if(f.g.LtiPlacement.isEqualTo(e.linkType))this._getPlacementById(e.linkRefId).then(function(r){var i=e.launchLink,o=r.launchInNewWindow;h.n(r.url)||(i=h.a(i,"target_override","window"),o=!0),S.PlacementType.ContentItemMessage===r.type&&(f.x.Inline.isEqualTo(n.$stateParams.mode)||(n.$stateParams.position&&(i=h.a(i,"position",n.$stateParams.position)),n.$stateParams.parentId&&(i=h.a(i,"content_id",n.$stateParams.parentId)))),e.linkRefUuid&&(i=h.a(i,"blti_placement_uuid",e.linkRefUuid)),t.resolve(n.launch(i,o))},function(){t.resolve(n.launch(e.launchLink))});else if(f.g.PartnerCloud.isEqualTo(e.linkType))this.PartnerSettingsModel.getSettingsById(r).then(function(r){return t.resolve(n.launch(e.launchLink,!r.responsive))});else if(f.g.LtiLink.isEqualTo(e.linkType)){var o=e.launchLink;e.linkRefUuid&&(o=h.a(o,"blti_placement_uuid",e.linkRefUuid)),!e.launchInNewWindow&&e.url&&h.n(e.url)?t.resolve(this.launch(o,!1,e.renderAsEmbed)):t.resolve(this.launch(h.a(o,"target_override","window"),!0))}},e.prototype.getLaunchLinkFromContent=function(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].launchLink?e.contentDetail[e.contentHandler.toString()].launchLink:null},e.prototype._getPlacementById=function(e){var t=this,n=this.placementCache.get(e);return n||(n={promise:this.PlacementModel.$find(e).$asPromise()}).promise.then(function(){t.placementCache.put(e,n)}),n.promise},e.prototype.getPartnerIdFromLinkRefId=function(e){if(!e)return null;var t=e.split("-")[0];return t.indexOf(":")>=0&&(t=t.substring(t.indexOf(":")+1)),t},e.prototype._getLaunchLinkFromLinkRef=function(e){if(f.g.PartnerCloud.isEqualTo(e.linkType)){var t=this.getPartnerIdFromLinkRefId(e.linkRefId);return m.e({partnerId:t,courseId:e.courseId,linkRefId:e.linkRefId})}return f.g.LtiPlacement.isEqualTo(e.linkType)?(n={courseId:e.courseId,linkRefId:e.linkRefId},r="/webapps/blackboard/execute/blti/launchPlacement?blti_placement_id="+encodeURIComponent(n.linkRefId)+"&course_id="+encodeURIComponent(n.courseId),h.c(r)):f.g.LtiLink.isEqualTo(e.linkType)?function(e){var t="/webapps/blackboard/execute/blti/launchLink?cim_placement_id="+encodeURIComponent(e.linkRefId)+"&course_id="+encodeURIComponent(e.courseId)+"&url="+encodeURIComponent(e.url);return e.customParameters&&(t+="&custom_parameters="+encodeURIComponent(e.customParameters)),h.c(t)}({courseId:e.courseId,linkRefId:e.linkRefId,url:e.url,customParameters:e.customParameters}):void 0;var n,r},e.prototype.getDomainConfigStatusType=function(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].domainConfig&&e.contentDetail[e.contentHandler.toString()].domainConfig.statusType?e.contentDetail[e.contentHandler.toString()].domainConfig.statusType:null},e.prototype.ltiEditColumn=function(e){var t=this;this._getContent(e.courseId,e.ui.content,e.contentId,null,null).then(function(n){e.ui.content=n;var r=a.a.create(n).getEditState();t.stateService.goPeekState(r,{id:n.id})})},e.prototype.isLTILink=function(e){return null!=e.scoreProviderHandle&&(f.B.PartnerCloud.isEqualTo(e.scoreProviderHandle)||f.B.LTILink.isEqualTo(e.scoreProviderHandle))},e.prototype.populateNewPlacement=function(e,t){var n=s.r.ContentHandler.LtiPlacement.handle+"-"+t.handle;e.isAvailable=!1,e.isPartiallyVisible=!1,e.visibility=s.r.Visibility.Hidden,e.contentHandler=new s.r.ContentHandler(n,null),e.permissions={edit:!0},e.contentDetail={},e.contentDetail[n]={},e.title=t.name.trim().substr(0,333),t.description&&t.description.length>0&&(e.description=t.description.trim().substr(0,250))},e.prototype._isStudentInCourse=function(e){return e.isStudentMembership()},e.prototype._isGradable=function(e){return!!(e&&e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].gradingColumn)&&!!e.contentDetail[e.contentHandler.toString()].gradingColumn},e.prototype._getContent=function(e,t,n,r,i){var o=this;return t?this.$q.when(t):n?this.CourseModel.$new(e).contents.$find(n).$asPromise():i&&f.g.PartnerCloud.isEqualTo(r)?this.PartnerContentIdModel.getContentIds(e,i).then(function(t){return t.contentIds&&t.contentIds.length>0?o.CourseModel.$new(e).contents.$find(t.contentIds[0]).$asPromise():o.$q.when(null)}):this.$q.when(null)},e.prototype._getMembership=function(e){return this.CourseModel.$new(e).users.$find(this.contextUser.userId).$asPromise()},e.prototype._getSupportEmail=function(e){return e.contentDetail&&e.contentDetail[e.contentHandler.toString()]&&e.contentDetail[e.contentHandler.toString()].supportEmail?e.contentDetail[e.contentHandler.toString()].supportEmail:null},e.prototype._getUrl=function(e){return f.g.LtiPlacement.startsWith(e.contentHandler)?e.contentDetail[e.contentHandler.toString()].placement.url:f.g.LtiLink.isEqualTo(e.contentHandler)?e.contentDetail[e.contentHandler.toString()].url:null},e.prototype.convertInlineLTILinkToBbMLLink=function(e){return e.map(function(e){var t=e.data;f.g.LtiLink.isEqualTo(e.data.linkType)&&("IFRAME"===e.data.target&&(t.bbtype="embedded-app",e.data.height&&(t.height=e.data.height),e.data.width&&(t.width=e.data.width),delete t.target),t.linkRefUuid||(t.linkRefUuid=Object(y.b)()));var n={type:o.isDefined(t)&&!f.g.ExternalLink.isEqualTo(t.linkType)?"lti":"external",title:e.title,url:"",data:i.escape(o.toJson(o.isDefined(t)?t:{}))};return o.isDefined(t)&&f.g.ExternalLink.isEqualTo(t.linkType)&&(n.url=t.url),n})},e.prototype.isEmbeddedGradable=function(e){var t=!1;return e.map(function(e){e.data.gradable&&(t=!0)}),t},e.prototype.returnToContentState=function(){var e=this.stateService.current.name.split(".peek."),t=1;e.length>2&&(t="content-market"===e[e.length-2]?2:1);var n=e.splice(0,e.length-t).join(".peek.");this.stateService.goPeekState(n)},e.prototype._registerEmbedLinkEventHandler=function(e,t){var n=this;this.postMessageDispatcherService.registerEventHandler("embedded-links",function(t,r){window!==r&&r.close(),n.returnToContentState();var i=function(t){var r=n.convertInlineLTILinkToBbMLLink(t);e(r.map(function(e){return{data:e.data,type:e.type.includes("lti")?"lti":"external",url:e.url,title:e.title}}))};n.isEmbeddedGradable(t.items)?n.showEmbeddedNotGradableModal(i,t.items):i(t.items)},t,!0)},e.prototype.getOpenContentMarketConf=function(e){var t=this;return function(n){t._registerEmbedLinkEventHandler(n,e),t.stateService.goPeekState("content-market",{mode:"inline"})}},e.prototype.getOpenSystemContentMarketConf=function(e){var t=this;return function(n){t._registerEmbedLinkEventHandler(n,e),t.stateService.goPeekState("system-content-market",{mode:"inline"})}},e.prototype.showEmbeddedNotGradableModal=function(e,t){var n=this.$rootScope.$new(!0),r=this.modalService.open({scope:n,template:b,resolve:{translations:[c.serviceName,function(e){return e.loadBundle("features/course/content-market/content-market")}]}});n.dismissCallback=function(){e(t),r.dismiss()}},e.$inject=["$q","$rootScope","$stateParams","$window","DSCacheFactory",u.e,c.serviceName,l.b,d.b,p.d,s.o.serviceName,s.W.serviceName,s.Y.serviceName,s.P.serviceName,g.b],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(k);o.module(C,[u.b,d.a,p.b,s.R]).service(w,k).config(["$compileProvider",function(e){e.aHrefSanitizationWhitelist(/^\s*(https?|mailto):/)}])},vo5Q:function(e,t){e.exports='<bb-modal class="notification" modal-translate-options="modalTranslateOptions"\n          modal-aria-type="{{modalAriaType}}"\n          analytics-id-tag-prefix="components.directives.confirmationNeeded">\n  <div name="modal-contents">\n    <p ng-bind-html="::modalStrings.instructions"></p>\n    <div ng-show="confirmationNeeded.choices && confirmationNeeded.choices.length > 0" ng-repeat="choice in confirmationNeeded.choices">\n      <input id="{{choice.key}}" ng-disabled="choice.isDisable" ng-model="choice.value" type="checkbox" analytics-id="components.directives.confirmationNeeded.input.checkbox"/>\n      <label for="{{choice.key}}" bb-translate="{{choice.localizedKey}}"></label>\n    </div>\n  </div>\n  <button name="modal-footer-button-primary" class="button confirm-ok js-primary-button" ng-click="okAction()" analytics-id="primary.button.okAction.button">{{::modalStrings.ok}}</button>\n  <button name="modal-footer-button-secondary" class="button button--secondary confirm-cancel js-secondary-button" ng-click="cancelAction()" analytics-id="secondary.button.cancelAction.button">{{::modalStrings.cancel}}</button>\n</bb-modal>\n'},w2YQ:function(e,t){e.exports='<td class="table-cell"\n    ng-show="tableCell.column.visible">\n  <div class="sr-only alternate-contents"></div>\n  <div class="transclude-container"></div>\n</td>\n'},w9Zy:function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"e",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return f}),n.d(t,"a",function(){return h});var r=n("mrSG"),i=(n("4cb2"),n("EVdn")),o=n("IbG+"),s=n("5MwF"),a=n("9zo4"),u=n("0JpG"),c=n("lEL+"),l="ultra.services.BbOffcanvas",d="bbOffcanvas",p="OffCanvasPanelClosed",f="OffCanvasPanelOpened",m=function(){function e(e,t,n,r,i,o,s,a){this.$compile=e,this.$http=t,this.$q=n,this.$rootScope=r,this.$templateCache=i,this.accessibility=o,this.bbLocalize=s,this.timeout=a,this.document=document,this.openElements=[],this.openElementsPromise=[]}return e.prototype.open=function(e){var t=this;return this.$q.when(e.template).then(function(n){var r=i(n);if(r.length>1&&!s.a.production)throw new Error("Current page has multiple root element! Please refactor the page to have only one root element");r.attr("data-base-state-name",e.stateName),0===t.openElements.length&&1===t.openElementsPromise.length&&r.addClass("first");var o=e.scope||t.$rootScope,u=(o.$newOffcanvasScope||o.$new).apply(o);t.$rootScope.bbOffcanvasOpened=!1,t.bbOffcanvasOpening=!0;var c=e.opened,l=e.close,d=t;e.trapFocus=!1,e.open=function(){e.disableFocusHandling||d.accessibility.applyAccessibilityHandlingForPanel(r)},a.a.isLastNavigationByKeyboard&&i("body").addClass("hide-focus-outline"),e.opened=function(){var t=this;d.$compile(r)(u);var n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];d.$rootScope.bbOffcanvasOpened=!0,d.bbOffcanvasOpening=!1,c&&c.apply(t,e),a.a.isLastNavigationByKeyboard&&i("body").removeClass("hide-focus-outline"),d.$rootScope.$broadcast(f)};d.$rootScope.$$phase?n():d.$rootScope.$apply(n),d.accessibility.isElementInActivePanel(i(document.activeElement))||d.accessibility.focusCorrectElementOnPanel(r),r.hasClass("peek")&&r.hasClass("overlay-disabled")&&!e.disableFocusHandling&&d.enableFocusSkipLinks(u)},e.close=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return r.hasClass("peek")&&r.hasClass("overlay-disabled")&&!e.disableFocusHandling&&t.disableFocusSkipLinks(),l.apply(t,n)},e.closed=function(){e.disableFocusHandling||t.accessibility.revertAccessibilityHandling(),t.$rootScope.$broadcast(p)},e.overlay||r.addClass("overlay-disabled"),e.disableFocusHandling&&(r.addClass("focus-handling-disabled"),r.attr("role","region"),r.attr("aria-labelledby","aria-region-label")),r.bbOffcanvas(e);var m=new h(r,t.accessibility);m.open();var g=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(u),key:"global.close"}),v=r.find(".bb-close");v&&v.length>0&&(v[0].setAttribute("aria-label",g),r.find(".top-border").length>0&&v.addClass("has-top-border"));var b=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(u),key:"global.focusJumpLink"});return r.append('<button class="focus-skip-link focus-skip-link-disabled" tabindex="0">'+b+"</button>"),r.attr("data-page-title",t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(u),key:e.pageTitle})),m})},e.prototype.addBbOffcanvasElement=function(e){this.openElements.push(e),this.synchronizeOffcanvasDepth()},e.prototype.addBbOffcanvasElementPromise=function(e,t){var n=this;this.openElementsPromise.push(this.$q.when(e)),this.openElementsPromise[this.openElementsPromise.length-1].then(function(e){e.name=t,n.addBbOffcanvasElement(e),n.openElementsPromise.pop()},function(){n.openElementsPromise.pop()})},e.prototype.close=function(e){for(;0!==this.openElements.length;){var t=this.openElements.pop();if(this.synchronizeOffcanvasDepth(),t.close(),this.$rootScope.bbOffcanvasOpened&&t.name===e)break}this.$rootScope.$broadcast(p)},e.prototype.synchronizeOffcanvasDepth=function(){i(this.document.body).attr("bb-offcanvas-depth",this.openElements.length)},e.prototype.getElement=function(e){var t=this;return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(function(){return t.openElements.filter(function(t){return t.name===e})[0]})},e.prototype.getTopElement=function(){return this.getNthElementFromTop(0)},e.prototype.getNthElementFromTop=function(e){var t=null;return this.openElementsPromise.length>e?t=this.openElementsPromise[this.openElementsPromise.length-e-1]:this.openElements.length>e&&(t=this.openElements[this.openElements.length-e-1]),this.$q.when(t)},e.prototype.getCoursePanel=function(){var e=this;return(this.openElementsPromise.length?this.$q.all(this.openElementsPromise):this.$q.when()).then(function(){return e.openElements.filter(function(e){var t=e.name.match(/base\.[A-Za-z]+\.peek\.course\.[A-Za-z]+\.peek$/);return t&&0!==t.length})[0]})},e.prototype.showTopPanelCloseButton=function(){this.getTopElement().then(function(e){e&&e.showCloseButton()})},e.prototype.expandTopPanel=function(){this.getTopElement().then(function(e){e&&!e.isPanelExpanded()&&e.expandPanel()})},e.prototype.shrinkTopPanel=function(){return this.getTopElement().then(function(e){e&&e.isPanelExpanded()&&e.expandPanel()})},e.prototype.safeFocus=function(e){var t=this;if(this.bbOffcanvasOpening)var n=this.$rootScope.$watch(function(){return t.bbOffcanvasOpening},function(r){!1===r&&(n(),t.timeout(function(){e.focus()},t.$rootScope,0,!1))});else this.timeout(function(){e.focus()},this.$rootScope,0,!1);this.accessibility.isFocusDelayed=!1},e.prototype.enableFocusSkipLinks=function(e){var t=this;this.$q.all([this.getTopElement(),this.getNthElementFromTop(1)]).then(function(n){var r=n[0],i=n[1];if(null!=r&&null!=i){var o=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:i.getElement().attr("data-page-title")}}),s=t.bbLocalize.translateSync({locale:t.bbLocalize.getLocale(e),key:"global.focusJumpLabel",noWrap:!0,params:{pageTitle:r.getElement().attr("data-page-title")}});r.enableFocusSkipLink(i,o),i.enableFocusSkipLink(r,s)}})},e.prototype.disableFocusSkipLinks=function(){this.getTopElement().then(function(e){e&&e.disableFocusSkipLink()}),this.getNthElementFromTop(1).then(function(e){e&&e.disableFocusSkipLink()})},e.$inject=["$compile","$http","$q","$rootScope","$templateCache",a.c,u.serviceName,c.b],e}(),h=function(){function e(e,t,n){this.element=e,this.accessibility=t,this.name=n}return e.prototype.getElement=function(){return this.element},e.prototype.open=function(){this.element.addClass("hide-in-background"),this.element.bbOffcanvas("open")},e.prototype.close=function(){this.element.bbOffcanvas("remove")},e.prototype.expandPanel=function(){this.element.bbOffcanvas("expandPanel")},e.prototype.isPanelExpanded=function(){return this.element.hasClass("full")},e.prototype.hideCloseButton=function(){this.element.find(".bb-close").addClass("bb-close-hide")},e.prototype.showCloseButton=function(){this.element.find(".bb-close.bb-close-hide").removeClass("bb-close-hide")},e.prototype.enableFocusSkipLink=function(e,t){var n=this;this.element.find(".focus-skip-link").removeClass("focus-skip-link-disabled").attr("aria-label",t).on("click.focusSkip",function(){n.element.hasClass("peek")?n.accessibility.revertAccessibilityHandling():(n.accessibility.applyAccessibilityHandlingForPanel(e.getElement()),n.accessibility.focusCorrectElementOnPanel(e.getElement()))})},e.prototype.disableFocusSkipLink=function(){this.element.find(".focus-skip-link").addClass("focus-skip-link-disabled").off("click.focusSkip")},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(m);o.module(l,[a.b,u.moduleName,c.a]).service(d,m)},w9mJ:function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s});var r=n("mrSG"),i=n("IbG+"),o="ultra.service.promiseQueue",s="promiseQueue",a=function(){function e(){this.queue=[],this.processing=!1,this.MAX_QUEUE_LENGTH=2e3}return e.prototype.enqueue=function(e){this.queue.length<this.MAX_QUEUE_LENGTH?(this.queue.push(e),this.processQueue()):console.error("Maximum queue length reached. Item was not enqueued.")},e.prototype.enqueueArray=function(e){var t=this;if(this.queue.length>0)throw Error("Queue is not currently empty. Cannot queue new array.");if(e.length>this.MAX_QUEUE_LENGTH)throw Error("Too many items to queue. "+e.length+" exceeds maximum of "+this.MAX_QUEUE_LENGTH);e.forEach(function(e){t.queue.push(e)}),this.processQueue()},e.prototype.processQueue=function(e){var t=this;if(!this.processing){var n=this.queue.shift();if(n){this.processing=!0;var r=e;try{n(e).then(function(e){r=e}).finally(function(){t.processing=!1,t.processQueue(r)})}catch(e){throw this.processing=!1,e}}}},e.prototype._processQueue=function(){return this.processQueue()},e}(),u=function(){function e(){this.queues=Object.create(null)}return e.prototype.getQueue=function(e){var t=this.queues[e];return t||(t=this.queues[e]=new a),t},e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(u);i.module(o,[]).service(s,u)},wDWF:function(e,t,n){"use strict";function r(e){if(!e)return 0;for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}n.d(t,"a",function(){return r})},wQOJ:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d});var r=n("mrSG"),i=n("5MwF"),o=n("oSB+"),s=n.n(o),a=n("Q/M7"),u=n("aHpC"),c=n("Fvsw"),l="ultra.services.institutionApi",d="institutionApi",p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.V1=new t("1.0"),t.V2=new t("2.0"),t}(s.a),f=function(){function e(e,t,n){var r=this;this.$http=e,this.$q=t,this.context=n,this.getUserCanEdit=function(e){return r.canEditFetch(e).then(function(e){return e.canEdit},function(){return!1})},this.getUserCanView=function(e){return r.canEditFetch(e).then(function(e){return e.ipHasVisible>0},function(){return!1})},this.getEffectiveVariantIdWithPermissions=function(){var e=r.context.getBrand(),t=e.isDefault?null:e.portalBrandId;return r.getEffectivePageVariantId(t).then(function(e){return r.canEditFetch(e).then(function(t){var n=t.canEdit,r=t.ipHasVisible;return{variantId:e,canEdit:n,canView:r>0}})}).catch(function(){return{variantId:void 0,canEdit:!1,canView:!1}})},this.getModuleIsVisible=function(e){return r.getModuleVisibility(e).then(function(e){return e.visible},function(){return!1})},this.getHealth=function(){if(r.ipHealthPromise)return r.ipHealthPromise;var e=a.c(i.a.institutionApiBasePath+"/health");return r.ipHealthPromise=r.$http.get(e,r._getConfig())},this._getConfig=function(){return{headers:{Accept:"application/json; version="+p.V2.toString()}}}}return e.prototype.importIP=function(){return Promise.all([n.e(16),n.e(239)]).then(n.t.bind(null,"qBMI",7)).then(function(e){return e.default})},e.prototype.canEditFetch=function(e){return this.$q.when(this.importIP().then(function(t){return t.pageService.canEditFetch(p.V2.toString(),e)}))},e.prototype.getEffectivePageVariantId=function(e){return this.$q.when(this.importIP().then(function(t){return t.pageService.getEffectivePageVariantId(e)}))},e.prototype.getModuleVisibility=function(e){return this.$q.when(this.importIP().then(function(t){return t.moduleService.getModuleVisibility(e)}))},e=r.__decorate([r.__param(0,Object(u.b)("$http")),r.__param(1,Object(u.b)("$q")),r.__param(2,Object(u.b)(c.b))],e)}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(f);angular.module(l,[c.a]).service(d,f)},wRHn:function(e,t){e.exports='<div>\n  <div class="initials"></div>\n  <div class="image"></div>\n</div>'},"wd/R":function(e,t,n){e.exports=n("ZJ/X")(4)},wmx0:function(e,t,n){e.exports=n("ZJ/X")(1424)},"x+T+":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return u});var r=n("mrSG"),i=n("IbG+"),o=n("pjml"),s="ultra.service.entitlementCache",a="entitlementCache",u="SYSTEM_ENTITLEMENTS",c=function(){function e(e,t,n){this.$q=e,this.CourseModel=t,this.EntitlementModel=n,this.entitlements=new Map,this.entitlementDefers=new Map}return e.prototype.fetchSystemEntitlements=function(){return this.EntitlementModel.$collection().$fetch().$asPromise()},e.prototype.fetchCourseEntitlements=function(e){return this.CourseModel.$new(e).entitlements.$fetch().$asPromise()},e.prototype.loadCourseEntitlements=function(e){var t=this;if(!e)return this.$q.resolve();if(this.hasCachedCourseEntitlements(e))return this.$q.resolve();var n=this.$q.defer();if(!this.entitlementDefers.has(e)){this.entitlementDefers.set(e,new Set);(e===u?this.fetchSystemEntitlements():this.fetchCourseEntitlements(e)).then(function(n){var r=n.filter(function(e){return e.hasEntitlement()}).map(function(e){return e.uid});t.entitlements.set(e,new Set(r)),t.entitlementDefers.get(e).forEach(function(e){return e.resolve()})},function(n){return t.entitlementDefers.get(e).forEach(function(e){return e.reject(n)})}).finally(function(){return t.entitlementDefers.delete(e)})}return this.entitlementDefers.get(e).add(n),n.promise},e.prototype.getCachedCourseEntitlements=function(e){return this.hasCachedCourseEntitlements(e)?this.entitlements.get(e):new Set},e.prototype.hasCachedCourseEntitlements=function(e){return this.entitlements.has(e)},e.prototype.clearEntitlementCache=function(e){this.entitlements.delete(e)},e.$inject=["$q",o.o.serviceName,o.A.serviceName],e}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(c);i.module(s,[o.R]).service(a,c)},"xqn/":function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var r=n("mrSG"),i=n("IbG+"),o=n("0JpG"),s="ultra.directives.validate.time",a="bbValidateTime",u=function(e){var t=this;this.bbLocalize=e,this.require="ngModel",this.restrict="A",this.getISOTime=function(e){return("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)},this.getTimeParser=function(e,n,r,i){return function(s){if(i.$isEmpty(s))return i.$setValidity("time",!0),i.$modelValue;var a;try{a=t.bbLocalize.parseTimeSync(s,o.ILocaleTimeFormat.Short,e,i.$modelValue)}catch(e){return i.$setValidity("time",!1),i.$modelValue}return i.$setValidity("time",!0),(s="time"===r.type?t.getISOTime(a):t.bbLocalize.formatTimeSync(a,o.ILocaleTimeFormat.Short,e))!==i.$viewValue&&(i.$setViewValue(s),n.is(":focus")||i.$render()),a}},this.getTimeFormatter=function(e,n,r,i){return function(){i.$setValidity("time",!0);var s=i.$modelValue;return i.$isEmpty(s)?n.val():"time"===r.type?t.getISOTime(s):t.bbLocalize.formatTimeSync(s,o.ILocaleTimeFormat.Short,e)}},this.link=function(e,n,r,i){i.$parsers.push(t.getTimeParser(e,n,r,i)),i.$formatters.push(t.getTimeFormatter(e,n,r,i)),n.on("blur",function(){i.$render()})}};!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r.__extends(t,e)}(u);i.module(s,[o.moduleName]).directive(a,[o.serviceName,function(e){return new u(e)}])},y3by:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.content-market.router";r.module(s,[i.moduleName,o.b]).config([o.c,function(e){e.peekState("content-market",{url:"/contentmarket?parentId&positionBefore&positionAfter&position",require:function(){return Promise.all([n.e(80),n.e(132),n.e(280)]).then(n.bind(null,"NZF1"))},resolve:{translations:["$q",i.serviceName,function(e,t){return e.all([t.loadBundle("features/course/content-market/content-market"),t.loadBundle("features/course/books-and-tools/books-and-tools")])}]},panelClass:"full",pageTitle:"course.contentMarket.contentMarketName",peekStates:["partner-tool","lti"],params:{mode:null}})}])},y9V7:function(e,t,n){e.exports=n("ZJ/X")(13)},yA26:function(e,t,n){"use strict";n.r(t),n.d(t,"moduleName",function(){return s}),n.d(t,"controllerName",function(){return a}),n.d(t,"template",function(){return u}),n.d(t,"requireName",function(){return c}),n.d(t,"BbOffcanvasController",function(){return l}),n.d(t,"Controller",function(){return d});var r=n("mrSG"),i=n("IbG+"),o=n("w9Zy"),s="ultra.controllers.bbOffcanvas",a="BbOffcavasController",u="",c="components/services/bb-offcanvas/bb-offcanvas-controller",l=function(){function e(e,t,n,r,i){var o=t.open({template:e.template,trapFocus:e.trapFocus,panelClass:e.panelClass||"peek",pageTitle:e.pageTitle,anchor:e.anchor,showType:e.showType,container:e.container,scope:e.scope||r,close:e.close,closed:e.closed,open:e.open,opened:e.opened,overlay:null==e.overlay||e.overlay,stateName:e.stateName,disableFocusHandling:!!e.disableFocusHandling});t.addBbOffcanvasElementPromise(o,e.stateName)}return e.$inject=["offCanvasArgs",o.e,"$q","$scope","$rootScope"],e}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(l);i.module(s,[o.d]).controller(a,l)},yC9S:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"c",function(){return a});var r=n("IbG+"),i=n("LvDl"),o=function(){function t(){}return t.OnRootScope=function(e,n,r){return t.unbindOnDestroy(e,e.$root.$on(n,r))},t.OnScope=function(e,n,r){return t.unbindOnDestroy(e,e.$on(n,r))},t.unbindOnDestroy=function(e,t){return e.$on("$destroy",t),t},t.OnWindow=function(n,r,o){var s=e(window);s.on(n,r);var a=Object(i.once)(function(){return s.off(n,r)});return t.unbindOnDestroy(o,a),a},t}();function s(e){return function(t){if(!e.module&&!e.moduleName)throw Error("Component must define a module or moduleName");(e.module?e.module:r.module(e.moduleName,e.requireModules||[])).component(e.componentName,r.extend(e,{controller:t}))}}var a=function(){function e(e){this.$ngRedux=e}return e.prototype.$onInit=function(){var e=this;this.unsubscribeRedux=this.$ngRedux.connect(this.mapStateToProps.bind(this),this.selectActions()||this.mapDispatchToActions.bind(this))(function(t,n){e.componentWillReceiveState(t),e.actions=n,e.props=t})},e.prototype.$onDestroy=function(){this.unsubscribeRedux()},e.prototype.selectActions=function(){return{}},e.prototype.mapDispatchToActions=function(e){return{}},e}()}).call(this,n("EVdn"))},yCC5:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"a",function(){return a}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return c}),n.d(t,"Ub",function(){return l}),n.d(t,"Vb",function(){return d}),n.d(t,"h",function(){return p}),n.d(t,"i",function(){return f}),n.d(t,"j",function(){return m}),n.d(t,"k",function(){return h}),n.d(t,"u",function(){return g}),n.d(t,"v",function(){return v}),n.d(t,"D",function(){return b}),n.d(t,"U",function(){return y}),n.d(t,"kb",function(){return S}),n.d(t,"vb",function(){return C}),n.d(t,"Eb",function(){return w}),n.d(t,"t",function(){return $}),n.d(t,"w",function(){return k}),n.d(t,"y",function(){return T}),n.d(t,"x",function(){return I}),n.d(t,"A",function(){return E}),n.d(t,"E",function(){return P}),n.d(t,"F",function(){return A}),n.d(t,"H",function(){return x}),n.d(t,"z",function(){return D}),n.d(t,"s",function(){return _}),n.d(t,"Yb",function(){return L}),n.d(t,"I",function(){return M}),n.d(t,"J",function(){return N}),n.d(t,"P",function(){return R}),n.d(t,"Q",function(){return O}),n.d(t,"B",function(){return G}),n.d(t,"C",function(){return U}),n.d(t,"N",function(){return B}),n.d(t,"O",function(){return F}),n.d(t,"R",function(){return q}),n.d(t,"S",function(){return j}),n.d(t,"T",function(){return H}),n.d(t,"K",function(){return V}),n.d(t,"L",function(){return z}),n.d(t,"M",function(){return K}),n.d(t,"W",function(){return W}),n.d(t,"G",function(){return J}),n.d(t,"l",function(){return X}),n.d(t,"m",function(){return Q}),n.d(t,"n",function(){return Z}),n.d(t,"p",function(){return Y}),n.d(t,"o",function(){return ee}),n.d(t,"q",function(){return te}),n.d(t,"V",function(){return ne}),n.d(t,"X",function(){return re}),n.d(t,"cb",function(){return ie}),n.d(t,"hb",function(){return oe}),n.d(t,"eb",function(){return se}),n.d(t,"fb",function(){return ae}),n.d(t,"r",function(){return ue}),n.d(t,"gb",function(){return ce}),n.d(t,"jb",function(){return le}),n.d(t,"db",function(){return de}),n.d(t,"Y",function(){return pe}),n.d(t,"Z",function(){return fe}),n.d(t,"ib",function(){return me}),n.d(t,"bb",function(){return he}),n.d(t,"ab",function(){return ge}),n.d(t,"lb",function(){return ve}),n.d(t,"mb",function(){return be}),n.d(t,"nb",function(){return ye}),n.d(t,"pb",function(){return Se}),n.d(t,"ob",function(){return Ce}),n.d(t,"qb",function(){return we}),n.d(t,"rb",function(){return $e}),n.d(t,"sb",function(){return ke}),n.d(t,"tb",function(){return Te}),n.d(t,"ub",function(){return Ie}),n.d(t,"wb",function(){return Ee}),n.d(t,"Cb",function(){return Pe}),n.d(t,"yb",function(){return Ae}),n.d(t,"Ab",function(){return xe}),n.d(t,"xb",function(){return De}),n.d(t,"zb",function(){return _e}),n.d(t,"Bb",function(){return Le}),n.d(t,"Db",function(){return Me}),n.d(t,"Fb",function(){return Ne}),n.d(t,"Gb",function(){return Re}),n.d(t,"Jb",function(){return Oe}),n.d(t,"Ob",function(){return Ge}),n.d(t,"Lb",function(){return Ue}),n.d(t,"Pb",function(){return Be}),n.d(t,"Rb",function(){return Fe}),n.d(t,"Ib",function(){return qe}),n.d(t,"Qb",function(){return je}),n.d(t,"Nb",function(){return He}),n.d(t,"Kb",function(){return Ve}),n.d(t,"Mb",function(){return ze}),n.d(t,"Hb",function(){return Ke}),n.d(t,"Wb",function(){return We}),n.d(t,"Sb",function(){return Je}),n.d(t,"Tb",function(){return Xe}),n.d(t,"Xb",function(){return Qe}),n.d(t,"Zb",function(){return Ze}),n.d(t,"ac",function(){return Ye}),n.d(t,"bc",function(){return et}),n.d(t,"dc",function(){return tt}),n.d(t,"ec",function(){return nt}),n.d(t,"cc",function(){return rt}),n.d(t,"fc",function(){return it}),n.d(t,"gc",function(){return ot}),n.d(t,"hc",function(){return st}),n.d(t,"ic",function(){return at}),n.d(t,"jc",function(){return ut}),n.d(t,"kc",function(){return ct}),n.d(t,"lc",function(){return lt}),n.d(t,"mc",function(){return dt}),n.d(t,"nc",function(){return pt}),n.d(t,"oc",function(){return ft}),n.d(t,"pc",function(){return mt}),n.d(t,"qc",function(){return ht}),n.d(t,"rc",function(){return gt}),n.d(t,"sc",function(){return vt}),n.d(t,"tc",function(){return bt}),n.d(t,"uc",function(){return yt}),n.d(t,"vc",function(){return St}),n.d(t,"xc",function(){return Ct}),n.d(t,"wc",function(){return wt}),n.d(t,"yc",function(){return $t}),n.d(t,"zc",function(){return kt}),n.d(t,"Ac",function(){return Tt});var r="AnalyticsEventModel",i="AnalyticsForLearnModel",o="AnnotationsModel",s="AnnouncementModel",a="AllyModel",u="AssessmentDetail",c="AssessmentExceptionModel",l="Question",d="QuestionAttempt",p="BlockedUserModel",f="BrandModel",m="CalendarModel",h="CalendarItemModel",g="CourseCalendarsModel",v="CourseCalendarItemModel",b="CourseDueDateCalendarItemModel",y="DueDateCalendarItemModel",S="InstitutionCalendarItemModel",C="OfficeHoursModel",w="PersonalCalendarItemModel",$="CourseModel",k="CourseCollab",T="CourseCollabUltra",I="CourseCollabSession",E="CourseContentModel",P="CourseEngagementParticipant",A="CourseEngagementUserStateModel",x="CourseExportModel",D="CourseConditionalReleaseModel",_="ConversionTaskModel",L="ScheduledTaskModel",M="CourseForumModel",N="CourseForumCountModel",R="CourseMessageModel",O="CourseMessageFolderModel",G="CourseConversationModel",U="CourseConversationMessageModel",B="CourseMembershipModel",F="CourseMembershipInviteModel",q="CoursePreferenceModel",j="CourseRole",H="CourseScheduleModel",V="CourseGroupModel",z="CourseGroupAssociationModel",K="CourseIndicatorModel",W="ExternalCourse",J="CourseEntitlementModel",X="CloudDriveModel",Q="CloudDriveContent",Z="CloudDriveDownloadMessage",Y="CloudDriveTask",ee="CloudDriveMeModel",te="CollabUltraPing",ne="EntitlementModel",re="FileModel",ie="GradeAttemptModel",oe="GradeGroupAttemptModel",se="GradeCategoryModel",ae="GradeColumnModel",ue="ColumnSummaryModel",ce="GradeDetailModel",le="GradeSchemaModel",de="GradeBulkViewModel",pe="GradebookModel",fe="GradebookSettingsModel",me="GradeNotationModel",he="GradedQuestionAttemptModel",ge="GradedOriginalityModel",ve="InstitutionRoleModel",be="LanguagesModel",ye="LtiDomainConfigModel",Se="LtiSettingsModel",Ce="LtiPlacementModel",we="MyPreferenceModel",$e="NotificationModel",ke="NotificationGeneralSettingsModel",Te="NotificationSettingModel",Ie="NotificationSettingsContainerModel",Ee="PartnerModel",Pe="PartnerStatusModel",Ae="PartnerCourseModel",xe="PartnerLinkedCourseModel",De="PartnerContentIdModel",_e="PartnerGradeModel",Le="PartnerSettingsModel",Me="PartnerToolModel",Ne="PredictCourseModel",Re="PredictCourseSearch",Oe="PredictFavoriteModel",Ge="PredictPreferences",Ue="PredictInstitutionPreference",Be="PredictSettingsModel",Fe="PredictSystemSettingsModel",qe="PredictDynamicOptionModel",je="PredictStudentModel",He="PredictPermissionsModel",Ve="PredictFtueModel",ze="PredictNoteModel",Ke="PredictCustomFieldSettingsModel",We="RiskBucketDistributionModel",Je="PrivacyPolicyModel",Xe="ProctoringServiceModel",Qe="Rubric",Ze="ScormReportItemModel",Ye="StagedAttemptGradeModel",et="StreamModel",tt="SystemInfoModel",nt="SystemPreferenceModel",rt="StudentPreviewModel",it="TargetedNotificationModel",ot="TelemetryActivityVsGradeModel",st="TelemetryContentActivityInDetailModel",at="TelemetryCourseActivityModel",ut="TelemetryCourseGradesModel",ct="TelemetryCourseNotificationsModel",lt="TelemetryDiscussionActivityModel",dt="TelemetryDiscussionXrayModel",pt="TelemetryMultimediaActivityInDetailModel",ft="TelemetryMultimediaStatisticsModel",mt="TelemetryNotificationsModel",ht="TelemetryNotificationUsersModel",gt="TelemetryStudentActivityModel",vt="TelemetryStudentGradesModel",bt="TelemetrySufficientDataModel",yt="TermModel",St="ThemeModel",Ct="ToolAvailabilityModel",wt="ToolsModel",$t="TrialSupportTicketsModel",kt="UploadingFile",Tt="UserModel"},yDoS:function(e,t,n){},yGso:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("IbG+"),i=n("k9iv"),o=n("0JpG"),s=n("w9Zy"),a=n("Fvsw"),u=n("ZzN+"),c=n("pjml"),l=n("TnpK"),d="ultra.base.courses.routes";r.module(d,[i.b,o.moduleName,a.a,s.d,c.R,l.b,u.a]).config([l.c,function(e){e.peekState("external",{abstract:!0}).peekState("external.create",{url:"/external/create",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/courses/external/external-course")}]},require:function(){return Promise.all([n.e(10),n.e(34),n.e(138)]).then(n.bind(null,"hwlu"))},pageTitle:"course.external.panelTitleAdd"}).peekState("external.edit",{url:"/external/edit/:id",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/base/courses/external/external-course")}]},require:function(){return Promise.all([n.e(10),n.e(34),n.e(138)]).then(n.bind(null,"hwlu"))},pageTitle:"course.external.panelTitleEdit"}).peekState("external.description",{url:"/external/description/:courseId",resolve:{currentCourse:["$stateParams",c.o.serviceName,c.B.serviceName,function(e,t,n){var r=e.courseId;return n.$new(r).$fetch().$asPromise().then(function(e){var n=t.$new();return n.id=e.id,n.name=e.title,n.description=e.description,n.displayName=e.title,n})}],translations:[o.serviceName,function(e){return e.loadBundle("features/course/description/course-description")}]},require:function(){return n.e(144).then(n.bind(null,"8WQs"))},pageTitle:"course.description.header"}).peekState("course-edit-banner",{url:"^/courses/:id/editBanner",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/edit-banner/edit-banner")}]},require:function(){return n.e(129).then(n.bind(null,"WXoY"))},pageTitle:"course.editBanner.pageTitle",panelClass:"peek"}).peekState("organization-edit-banner",{url:"^/organizations/:id/editBanner",resolve:{translations:[o.serviceName,function(e){return e.loadBundle("features/course/edit-banner/edit-banner")}]},require:function(){return n.e(129).then(n.bind(null,"WXoY"))},pageTitle:"course.editBanner.pageTitle",panelClass:"peek"})}])},yLpj:function(e,t,n){e.exports=n("ZJ/X")(19)},yXB1:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("IbG+"),i=n("0JpG"),o=n("TnpK"),s="ultra.course.exports.router";r.module(s,[o.b,i.moduleName]).config([o.c,function(e){e.peekState("exports",{url:"/exportsPanel",resolve:{translations:[i.serviceName,function(e){return e.loadBundle("features/course/exports/course-export")}]},require:function(){return n.e(303).then(n.bind(null,"m+3A"))},pageTitle:"course.export.exportPanel.head"})}])},yq4x:function(e,t,n){},yydF:function(e,t,n){e.exports=n("ZJ/X")(80)},z6Q5:function(e,t,n){"use strict";var r=n("LvDl"),i=n("IbG+"),o=n("5MwF"),s=n("lEL+"),a=[];function u(){return a[a.length-1]}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),n.d(t,"c",function(){return d});var c="ultra.service.batch-utility-rest-api",l="ultra.service.batch-utility-rest-api.service",d="batch-utility-rest-api-param",p=[];function f(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var m=function(e,t,n,r){this.position=e,this.deferred=t,this.reqConfig=n,this.token=r},h=0;i.module(c,["ng",s.a]).config(["$httpProvider",function(e){e.interceptors.push(["$injector","$log",function(e,t){var n={};return{request:function(s){var a,u=e.get("$q");if(s.params&&s.params[d]&&new RegExp("^"+f(s.params[d].baseUrl)).test(s.url)){var c=u.defer(),l=s.params[d];return delete s.params[d],l.trackId=l.trackId||""+h++,n.hasOwnProperty(l.trackId)||(n[l.trackId]={token:l,queue:[]},l.sendDeferred.promise.then((a=l.trackId,function(){var s=n[a],u=new RegExp("^"+f(s.token.baseUrl));!o.a.features.batchRestAPI&&s.token.batchUrl===o.a.apiBasePath+"/v1/utilities/batch"||1===s.queue.length?(delete n[a],e.get("$q").all(s.queue.map(function(t){var n=function(e){return t.deferred.resolve(i.extend({},t.reqConfig,{method:"JSONP",cache:{get:function(){return[e.status,e.data,e.headers]}}})),{statusCode:e.status,body:e.data,method:t.reqConfig.method,headers:{},relativeUrl:t.reqConfig.url.replace(o.a.apiBasePath+"/","")}};return e.get("$http")(t.reqConfig).then(n,n)})).then(function(e){s.token.finalDeferred.resolve(e)})):s.queue.length>1?e.get("$http")({method:"PUT",url:s.token.batchUrl,data:s.queue.map(function(e,n){var i=e.reqConfig;return t.debug(i.method+" "+i.url+' will be sent by batch request "'+s.token.batchUrl+"?xb="+s.token.trackId+"["+n+']"'),{method:i.method,relativeUrl:i.url.replace(u,"")+"?"+r(i.params).omitBy(r.isUndefined).map(function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).value().join("&"),body:i.data}}),params:{xb:a}}).then(function(e){s.queue.forEach(function(t){var n=t.reqConfig,r=e.data[t.position];t.deferred.resolve(i.extend({},n,{method:"JSONP",cache:{get:function(){return[r.statusCode,r.body,r.headers]}}}))}),s.token.finalDeferred.resolve(e.data),delete n[a]}):(s.token.finalDeferred.resolve([]),delete n[a])}))),n[l.trackId].queue.push(new m(n[l.trackId].queue.length,c,s,l)),c.promise}return u.when(s)}}}])}]).config(["$provide",function(e){e.decorator("$http",["$delegate",function(e){var t=function(t){var n;return p.length>0&&(t.params=t.params||{},t.params.hasOwnProperty(d)||(t.params[d]=r.last(p))),u()&&u().$emit("BEFORE_REQUEST",t),void 0!==(n=(t.params||{})[d])&&(n.totalRequests=(n.totalRequests||0)+1),e(t)};return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.each(e,function(e){t[e]=function(n,r){return t(i.extend({},r||{},{method:e,url:n}))}})}("get","delete","head","jsonp"),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.each(e,function(e){t[e]=function(n,r,o){return t(i.extend({},o||{},{method:e,url:n,data:r}))}})}("post","put","patch"),function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];r.each(n,function(n){Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]},set:function(t){e[n]=t}})})}("defaults","pendingRequests"),t}])}]).factory(l,["$rootScope","$q","$log",s.b,function(e,t,n,i){return{performBatch:function(e,t,n){var r=this.newToken.apply(this,Array.prototype.slice.call(arguments).splice(1));p.push(r);var i=this.awaitBatch(e);return r.autoSend=!0,i()},awaitBatch:function(e){if(0===p.length)throw"No batch token in current context! Please invoke in the callstack of performBatch";var i=r.last(p);return i.autoSend=!1,function(){var o;r.last(p)!==i&&p.push(i),i.autoSend=!0;try{o=e(i)}catch(e){n.error(e)}return p.pop(),i.autoSend&&i.send(),o?t.resolve(o):i.finalDeferred.promise}},newToken:function(e,n){void 0===e&&(e=o.a.apiBasePath+"/v1/utilities/batch"),void 0===n&&(n=o.a.apiBasePath+"/");var r=t.defer();return{send:function(){return this.totalRequests?this.sendDeferred.resolve():this.finalDeferred.resolve([]),this.finalDeferred.promise},sendDeferred:t.defer(),finalDeferred:r,batchUrl:e,baseUrl:n,autoSend:!1,promise:r.promise,totalRequests:0}}}}])},zAPs:function(e,t,n){e.exports=n("ZJ/X")(1742)},zAlr:function(e,t,n){e.exports=n("ZJ/X")(1418)},zFCC:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var r=n("LvDl"),i=n("IbG+"),o=n("lEL+"),s="ultra.service.intersectionobserver.directive",a="bbIntersectionObserver";i.module(s,[o.a]).directive(a,[function(){return{restrict:"A",scope:!1,controller:["$scope","$element",o.b,function(e,t,n){if("IntersectionObserver"in window){var i=[],o=new IntersectionObserver(function(t){r(t).map(function(e){return{entry:e,data:r.find(i,function(t){return t.el===e.target})}}).each(function(e){var t=e.entry,n=e.data;n.fn(n.el,n.scope,t)&&(r.remove(i,function(e){return e.el===t.target}),o.unobserve(t.target))}),n(r.noop,e)},{root:null,rootMargin:"0px",threshold:0});e.$on("$destroy",function(){o.disconnect()}),Object.assign(this,{link:function(e,t,n){t.$on("$destroy",function(){o.unobserve(e),r.remove(i,function(t){return t.el===e})}),o.observe(e),i.push({el:e,scope:t,fn:n})},unlink:function(e){o.unobserve(e),r.remove(i,function(t){return t.el===e})}})}else Object.assign(this,{link:function(e,t,n){n(e,t,{isIntersecting:!0,boundingClientRect:void 0,intersectionRatio:void 0,intersectionRect:void 0,rootBounds:void 0,target:e,time:void 0})},unlink:r.noop})}]}}])},zJ62:function(e,t,n){},zRpB:function(e,t,n){e.exports=n("ZJ/X")(1412)},zXZW:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("IbG+"),i=n("4HXK"),o="ultra.services.errorHandler",s=["$delegate","$injector",function(e,t){var n;return Object.assign(function(r,o){e(r,o),n||(n=t.get(i.b)),"undefined"!=typeof NREUM&&NREUM.noticeError(r)},e)}];r.module(o,[i.a]).config(["$provide",function(e){e.decorator("$exceptionHandler",s)}])}});